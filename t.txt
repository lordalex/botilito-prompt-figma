 - - - - - - - - - - - - 
src/App.tsx

import React, { useState, useEffect } from 'react';
import { Login } from './components/Login';
import { Register } from './components/Register';
import { CompleteDashboard } from './components/CompleteDashboard';
import { ContentUpload } from './components/ContentUpload';
import { ContentReview } from './components/ContentReview';
import { ContentAnalysisView } from './components/ContentAnalysisView';
import { HumanVerification } from './components/HumanVerification';
import { UserProfile } from './components/UserProfile';
import { Navigation } from './components/Navigation';
import { ExtensionApp } from './components/extension/ExtensionApp';
import { MapaDesinfodemico } from './components/MapaDesinfodemico';
import { DocumentacionIndicadores } from './components/DocumentacionIndicadores';
import { ImmunizationStudio } from './components/ImmunizationStudio';
import { getSession, onAuthStateChange, signOut } from './utils/supabase/auth';

export default function App() {
  const [isAuthenticated, setIsAuthenticated] = useState(false);
  const [showRegister, setShowRegister] = useState(false);
  const [activeTab, setActiveTab] = useState('upload');
  const [isLoading, setIsLoading] = useState(true);

  // Check for existing session on mount
  useEffect(() => {
    const checkSession = async () => {
      try {
        const session = await getSession();
        setIsAuthenticated(!!session);
      } catch (error) {
        console.error('Error checking session:', error);
        setIsAuthenticated(false);
      } finally {
        setIsLoading(false);
      }
    };

    checkSession();

    // Listen for auth state changes
    const { data: { subscription } } = onAuthStateChange((user) => {
      setIsAuthenticated(!!user);
    });

    // Cleanup subscription on unmount
    return () => {
      subscription?.unsubscribe();
    };
  }, []);

  const handleLogin = () => {
    setIsAuthenticated(true);
    setShowRegister(false);
  };

  const handleRegister = () => {
    setIsAuthenticated(true);
    setShowRegister(false);
  };

  const handleLogout = async () => {
    try {
      await signOut();
      setIsAuthenticated(false);
      setShowRegister(false);
    } catch (error) {
      console.error('Error logging out:', error);
    }
  };

  const goToRegister = () => {
    setShowRegister(true);
  };

  const goToLogin = () => {
    setShowRegister(false);
  };

  // Show loading spinner while checking session
  if (isLoading) {
    return (
      <div className="min-h-screen bg-primary flex items-center justify-center">
        <div className="text-center">
          <div className="animate-spin rounded-full h-16 w-16 border-b-4 border-black mx-auto mb-4"></div>
          <p className="text-black text-lg font-medium">Cargando...</p>
        </div>
      </div>
    );
  }

  // Si no está autenticado, mostrar la pantalla de login o registro
  if (!isAuthenticated) {
    if (showRegister) {
      return (
        <Register 
          onRegister={handleRegister} 
          onBackToLogin={goToLogin}
        />
      );
    }
    return (
      <Login 
        onLogin={handleLogin} 
        onGoToRegister={goToRegister}
      />
    );
  }

  const renderContent = () => {
    switch (activeTab) {
      case 'upload':
        return <ContentUpload />;
      case 'review':
        return <ContentReview />;
      case 'analysis':
        return <ContentAnalysisView />;
      case 'verification':
        return <HumanVerification />;
      case 'immunization':
        return <ImmunizationStudio />;
      case 'mapa':
        return <MapaDesinfodemico />;
      case 'docs':
        return <DocumentacionIndicadores />;
      case 'profile':
        return <UserProfile />;
      case 'extension':
        return <ExtensionApp />;
      default:
        return <ContentUpload />;
    }
  };

  return (
    <div className="min-h-screen bg-background">
      <Navigation 
        activeTab={activeTab} 
        onTabChange={setActiveTab}
        onLogout={handleLogout}
      />
      <main className="max-w-[1600px] mx-auto px-4 py-6 relative min-h-[calc(100vh-80px)] bg-gradient-to-br from-background via-background to-muted/20">
        {/* Div separador superior */}
        <div className="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-primary to-transparent"></div>
        
        <div className="transition-all duration-500 ease-in-out mx-auto p-[0px]">
          {renderContent()}
        </div>
      </main>
    </div>
  );
} - - - - - - - - - - - - 
src/main.tsx


  import { createRoot } from "react-dom/client";
  import App from "./App.tsx";
  import "./index.css";

  createRoot(document.getElementById("root")!).render(<App />);
   - - - - - - - - - - - - 
src/providers/JobTrackerProvider.tsx

// src/providers/JobTrackerProvider.tsx

import React, { createContext, useContext, useState, useEffect, ReactNode, useCallback, useRef } from 'react';
import { useAuth } from './AuthProvider';
import * as api from '../utils/api';
import type { AnalysisJob, IngestPayload, JobStatus } from '../types';

interface JobTrackerContextType {
  jobs: Record<string, AnalysisJob>;
  activeJobId: string | null;
  startNewAnalysis: (data: { type: 'URL' | 'Text', content: string }) => Promise<string>;
  setActiveJobId: (jobId: string | null) => void;
  clearHistory: () => void;
}

const JobTrackerContext = createContext<JobTrackerContextType | undefined>(undefined);
const JOBS_STORAGE_KEY = 'figma-design-analysis-jobs';
const POLLING_INTERVAL_MS = 5000; // 5 seconds

export const JobTrackerProvider = ({ children }: { children: ReactNode }) => {
  const { isAuthenticated } = useAuth();
  const [jobs, setJobs] = useState<Record<string, AnalysisJob>>({});
  const [activeJobId, setActiveJobId] = useState<string | null>(null);
  const pollingIntervals = useRef<Record<string, NodeJS.Timeout>>({});

  // Load jobs from localStorage on initial mount
  useEffect(() => {
    try {
      const savedJobs = localStorage.getItem(JOBS_STORAGE_KEY);
      if (savedJobs) {
        setJobs(JSON.parse(savedJobs));
      }
    } catch (error) {
      console.error("Failed to load jobs from localStorage:", error);
    }
  }, []);

  // Persist jobs to localStorage whenever they change
  useEffect(() => {
    try {
      if (Object.keys(jobs).length > 0) {
        localStorage.setItem(JOBS_STORAGE_KEY, JSON.stringify(jobs));
      }
    } catch (error) {
      console.error("Failed to save jobs to localStorage:", error);
    }
  }, [jobs]);

  const updateJob = useCallback((jobId: string, updates: Partial<AnalysisJob>) => {
    setJobs(prev => ({
      ...prev,
      [jobId]: { ...prev[jobId], ...updates },
    }));
  }, []);

  // Polling logic for processing jobs
  useEffect(() => {
    Object.values(jobs).forEach(job => {
      if (job.status === 'processing' && job.jobId && !pollingIntervals.current[job.id]) {
        const intervalId = setInterval(async () => {
          try {
            const statusResponse = await api.getJobStatus(job.jobId!);
            if (statusResponse.status === 'completed') {
              updateJob(job.id, { status: 'completed', result: statusResponse.result!, endTime: new Date().toISOString() });
              clearInterval(pollingIntervals.current[job.id]);
              delete pollingIntervals.current[job.id];
            } else if (statusResponse.status === 'failed') {
              updateJob(job.id, { status: 'failed', error: statusResponse.error || 'Unknown error', endTime: new Date().toISOString() });
              clearInterval(pollingIntervals.current[job.id]);
              delete pollingIntervals.current[job.id];
            }
          } catch (error: any) {
            console.error(`Error polling for job ${job.jobId}:`, error);
            updateJob(job.id, { status: 'failed', error: error.message, endTime: new Date().toISOString() });
            clearInterval(pollingIntervals.current[job.id]);
            delete pollingIntervals.current[job.id];
          }
        }, POLLING_INTERVAL_MS);
        pollingIntervals.current[job.id] = intervalId;
      }
    });

    // Cleanup intervals on component unmount
    return () => {
      Object.values(pollingIntervals.current).forEach(clearInterval);
    };
  }, [jobs, updateJob]);


  const startNewAnalysis = useCallback(async (data: { type: 'URL' | 'Text', content: string }): Promise<string> => {
    if (!isAuthenticated) throw new Error("Authentication required to start analysis.");
    
    const clientJobId = crypto.randomUUID();
    const payload: IngestPayload & { content: string } = data.type === 'URL'
      ? { url: data.content, content: data.content }
      : { text: data.content, content: data.content };

    const newJob: AnalysisJob = {
      id: clientJobId,
      status: 'pending',
      payload,
      result: null,
      error: null,
      startTime: new Date().toISOString(),
    };

    setJobs(prev => ({ ...prev, [clientJobId]: newJob }));
    setActiveJobId(clientJobId);

    try {
      const response = await api.startAnalysis(payload);
      if ('job_id' in response) {
        // It's an async job
        updateJob(clientJobId, { status: 'processing', jobId: response.job_id });
      } else {
        // It was a cached result
        updateJob(clientJobId, { status: 'completed', result: response, endTime: new Date().toISOString() });
      }
      return clientJobId;
    } catch (error: any) {
      updateJob(clientJobId, { status: 'failed', error: error.message, endTime: new Date().toISOString() });
      throw error; // Re-throw to be caught by the UI
    }
  }, [isAuthenticated, updateJob]);

  const clearHistory = useCallback(() => {
    // Stop all polling before clearing
    Object.values(pollingIntervals.current).forEach(clearInterval);
    pollingIntervals.current = {};
    setJobs({});
    localStorage.removeItem(JOBS_STORAGE_KEY);
  }, []);

  const value = { jobs, activeJobId, startNewAnalysis, setActiveJobId, clearHistory };

  return (
    <JobTrackerContext.Provider value={value}>
      {children}
    </JobTrackerContext.Provider>
  );
};

export const useJobTracker = (): JobTrackerContextType => {
  const context = useContext(JobTrackerContext);
  if (context === undefined) {
    throw new Error('useJobTracker must be used within a JobTrackerProvider');
  }
  return context;
};
 - - - - - - - - - - - - 
src/providers/VoteTrackerProvider.tsx

"use client";
import React, { createContext, useContext, useState, useEffect, ReactNode, useCallback, useRef } from 'react';
import { api } from '@/utils/apiService'; // Importación correcta
import { useToast } from '@/hooks/use-toast';
import { useAuth } from '@/providers/AuthProvider'; // Importación necesaria para la sesión

type VoteStatus = 'idle' | 'processing' | 'completed' | 'failed';
type TrackedVote = { jobId: string; status: VoteStatus; };

interface VoteTrackerContextType {
  trackedVotes: Record<string, TrackedVote>;
  trackNewVote: (caseId: string, jobId: string) => void;
  getVoteStatusForCase: (caseId: string) => VoteStatus;
  setRefreshCallback: (fn: () => void) => void;
}

const VoteTrackerContext = createContext<VoteTrackerContextType | undefined>(undefined);
const VOTE_JOBS_STORAGE_KEY = 'botilito-vote-jobs';
const POLLING_INTERVAL_MS = 5000;

export const VoteTrackerProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
    const [trackedVotes, setTrackedVotes] = useState<Record<string, TrackedVote>>({});
    const refreshCallback = useRef<(() => void) | null>(null);
    const { toast } = useToast();
    const { session } = useAuth(); // Obtener la sesión del contexto de autenticación

    useEffect(() => {
        try {
            const saved = localStorage.getItem(VOTE_JOBS_STORAGE_KEY);
            if (saved) setTrackedVotes(JSON.parse(saved));
        } catch (e) { console.warn("Failed to load vote jobs", e); }
    }, []);

    useEffect(() => {
        localStorage.setItem(VOTE_JOBS_STORAGE_KEY, JSON.stringify(trackedVotes));
    }, [trackedVotes]);

    const trackNewVote = useCallback((caseId: string, jobId: string) => {
        toast({ title: "Diagnóstico Enviado", description: `Tu análisis para el caso ${caseId.split('-').pop()} se está procesando.` });
        setTrackedVotes(prev => ({ ...prev, [caseId]: { jobId, status: 'processing' } }));
    }, [toast]);

    const getVoteStatusForCase = useCallback((caseId: string): VoteStatus => {
        return trackedVotes[caseId]?.status || 'idle';
    }, [trackedVotes]);

    useEffect(() => {
        const intervalId = setInterval(async () => {
            if (!session) return; // No hacer polling si no hay sesión
            const votesToPoll = Object.entries(trackedVotes).filter(([, vote]) => vote.status === 'processing' && vote.jobId);
            if (votesToPoll.length === 0) return;

            for (const [caseId, vote] of votesToPoll) {
                try {
                    // Usar la API unificada
                    const result = await api.voting.getStatus(session, vote.jobId);
                    if (result.status === 'completed' || result.status === 'failed') {
                        setTrackedVotes(prev => {
                            const newVotes = { ...prev };
                            if (result.status === 'completed') {
                                delete newVotes[caseId];
                            } else {
                                newVotes[caseId] = { ...newVotes[caseId], status: 'failed' };
                            }
                            return newVotes;
                        });

                        if (result.status === 'completed') {
                            toast({ title: "✅ Diagnóstico Confirmado", description: `Tu análisis para el caso ${caseId.split('-').pop()} se guardó.` });
                            refreshCallback.current?.();
                        } else {
                            toast({ variant: "destructive", title: "Error en Diagnóstico" });
                        }
                    }
                } catch (error) {
                    console.error(`[VotePoller] Error for case ${caseId}:`, error);
                    setTrackedVotes(prev => ({ ...prev, [caseId]: { ...prev[caseId], status: 'failed' } }));
                }
            }
        }, POLLING_INTERVAL_MS);

        return () => clearInterval(intervalId);
    }, [trackedVotes, toast, session]); // Añadir session a las dependencias

    const value = { trackedVotes, trackNewVote, getVoteStatusForCase, setRefreshCallback: (fn: () => void) => { refreshCallback.current = fn; } };
    return <VoteTrackerContext.Provider value={value}>{children}</VoteTrackerContext.Provider>;
};

export const useVoteTracker = (): VoteTrackerContextType => {
    const context = useContext(VoteTrackerContext);
    if (context === undefined) throw new Error("useVoteTracker must be used within a VoteTrackerProvider.");
    return context;
};
 - - - - - - - - - - - - 
src/providers/MessageProvider.tsx

import React, { createContext, useContext, useState, useEffect, ReactNode, useMemo } from 'react';

interface MessageContextType {
  messages: any;
  isLoading: boolean;
}

const MessageContext = createContext<MessageContextType>({ messages: {}, isLoading: true });

export const MessageProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
    const [messages, setMessages] = useState<any>(null);
    const [isLoading, setIsLoading] = useState<boolean>(true);

    useEffect(() => {
        fetch('/messages.json')
            .then(res => res.json())
            .then(data => setMessages(data))
            .catch(error => console.error("Failed to load messages:", error))
            .finally(() => setIsLoading(false));
    }, []); 

    const value = useMemo(() => ({ messages, isLoading }), [messages, isLoading]);

    return <MessageContext.Provider value={value}>{children}</MessageContext.Provider>;
};

export const useMessages = (): MessageContextType => {
    const context = useContext(MessageContext);
    if (!context) {
        return { messages: {}, isLoading: false };
    }
    return context;
};
 - - - - - - - - - - - - 
src/providers/AuthProvider.tsx

import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';
import { getSession, onAuthStateChange, signOut as supabaseSignOut, AuthUser } from '../utils/supabase/auth';
import { supabase } from '../utils/supabase/client'; // Import the client

/**
 * Defines the shape of the authentication context provided to the app.
 */
interface AuthContextType {
  isAuthenticated: boolean;
  isLoading: boolean;
  user: AuthUser | null;
  signOut: () => Promise<void>;
  // We expose the raw Supabase client for other hooks/components that might need it.
  supabase: typeof supabase; 
}

// Create the context with an undefined default value.
const AuthContext = createContext<AuthContextType | undefined>(undefined);

/**
 * The AuthProvider component manages the authentication state.
 */
export const AuthProvider = ({ children }: { children: ReactNode }) => {
  const [isAuthenticated, setIsAuthenticated] = useState(false);
  const [isLoading, setIsLoading] = useState(true);
  const [user, setUser] = useState<AuthUser | null>(null);

  useEffect(() => {
    let isMounted = true;

    const checkSession = async () => {
      try {
        const session = await getSession();
        if (isMounted) {
          const currentUser = session?.user as AuthUser | null;
          setIsAuthenticated(!!session);
          setUser(currentUser);
        }
      } catch (error) {
        console.error('Error checking session:', error);
        if (isMounted) {
          setIsAuthenticated(false);
          setUser(null);
        }
      } finally {
        if (isMounted) {
          setIsLoading(false);
        }
      }
    };

    checkSession();

    const { data: { subscription } } = onAuthStateChange((user) => {
      if (isMounted) {
        setIsAuthenticated(!!user);
        setUser(user);
        setIsLoading(false);
      }
    });

    return () => {
      isMounted = false;
      subscription?.unsubscribe();
    };
  }, []);

  const signOut = async () => {
    try {
      await supabaseSignOut();
    } catch (error) {
      console.error('Error logging out:', error);
      throw error;
    }
  };

  const value: AuthContextType = {
    isAuthenticated,
    isLoading,
    user,
    signOut,
    supabase,
  };

  return (
    <AuthContext.Provider value={value}>
      {children}
    </AuthContext.Provider>
  );
};

/**
 * Custom hook to easily access the authentication context.
 */
export const useAuth = (): AuthContextType => {
  const context = useContext(AuthContext);
  if (context === undefined) {
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return context;
};
 - - - - - - - - - - - - 
src/providers/SchemaProvider.tsx

import React, { createContext, useContext, ReactNode, useCallback, useMemo } from 'react';

export interface SchemaProperty { type: string; format?: string; enum?: string[]; "x-label"?: string; "x-placeholder"?: string; "x-type"?: string; "x-layout-group"?: string; }
export interface SchemaModel { type: "object"; properties: Record<string, SchemaProperty>; required?: string[]; }

interface SchemaContextType {
  getOrFetchSchema: (modelName: string) => Promise<SchemaModel>;
}

const SchemaContext = createContext<SchemaContextType | undefined>(undefined);

const departments = ['Amazonas', 'Antioquia', 'Arauca', 'Atlántico', 'Bolívar', 'Boyacá', 'Caldas', 'Caquetá', 'Casanare', 'Cauca', 'Cesar', 'Chocó', 'Córdoba', 'Cundinamarca', 'Guainía', 'Guaviare', 'Huila', 'La Guajira', 'Magdalena', 'Meta', 'Nariño', 'Norte de Santander', 'Putumayo', 'Quindío', 'Risaralda', 'San Andrés y Providencia', 'Santander', 'Sucre', 'Tolima', 'Valle del Cauca', 'Vaupés', 'Vichada'];

const clientSchemas: Record<string, SchemaModel> = {
  login_schema: { type: "object", properties: { email: { type: "string", format: "email" }, password: { type: "string", "x-type": "password" } }, required: ["email", "password"] },
  register_schema: { type: "object", properties: { fullName: { type: "string" }, email: { type: "string", format: "email" }, phone: { type: "string", "x-type": "tel" }, department: { type: "string", enum: departments }, city: { type: "string" }, birthDate: { type: "string", "x-type": "date" }, password: { type: "string", "x-type": "password" }, confirmPassword: { type: "string", "x-type": "password" } }, required: ["fullName", "email", "password", "confirmPassword", "department", "city", "birthDate"] }
};

export const SchemaProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const getOrFetchSchema = useCallback(async (modelName: string): Promise<SchemaModel> => {
    if (clientSchemas[modelName]) {
      return clientSchemas[modelName];
    }
    throw new Error(`Schema for ${modelName} not found.`);
  }, []);

  const value = useMemo(() => ({ getOrFetchSchema }), [getOrFetchSchema]);

  return <SchemaContext.Provider value={value}>{children}</SchemaContext.Provider>;
};

export const useSchema = (): SchemaContextType => {
  const context = useContext(SchemaContext);
  if (context === undefined) {
    throw new Error("useSchema must be used within a SchemaProvider.");
  }
  return context;
};
 - - - - - - - - - - - - 
src/providers/ConfigProvider.tsx

import React, { createContext, useContext, useState, useEffect, ReactNode, useMemo, useCallback } from 'react';

interface BuilderConfig { authFlows: Record<string, any>; }
interface StylingConfig { views: Record<string, any>; }

interface ConfigContextType {
  builderConfig: BuilderConfig | null;
  stylingConfig: StylingConfig | null;
  isLoading: boolean;
  getStyles: (viewName?: string) => any;
}

const ConfigContext = createContext<ConfigContextType | undefined>(undefined);

export const ConfigProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [builderConfig, setBuilderConfig] = useState<BuilderConfig | null>(null);
  const [stylingConfig, setStylingConfig] = useState<StylingConfig | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    Promise.all([
      fetch('/builder.json').then(res => res.json()),
      fetch('/form.json').then(res => res.json()),
    ]).then(([builderData, formData]) => {
      setBuilderConfig(builderData);
      setStylingConfig(formData);
    }).catch(error => {
        console.error("Failed to load configuration files:", error);
    }).finally(() => setIsLoading(false));
  }, []);

  const getStyles = useCallback((viewName?: string) => {
    if (!stylingConfig || !viewName || !stylingConfig.views[viewName]) {
      return { formClassName: '', fieldOverrides: {} };
    }
    return stylingConfig.views[viewName];
  }, [stylingConfig]);

  const value = useMemo(() => ({
    builderConfig,
    stylingConfig,
    isLoading,
    getStyles
  }), [builderConfig, stylingConfig, isLoading, getStyles]);

  return <ConfigContext.Provider value={value}>{children}</ConfigContext.Provider>;
};

export const useConfig = (): ConfigContextType => {
  const context = useContext(ConfigContext);
  if (!context) throw new Error("useConfig must be used within a ConfigProvider");
  return context;
};
 - - - - - - - - - - - - 
src/providers/Providers.tsx

// src/providers/Providers.tsx

import React, { ReactNode } from 'react';
import { AuthProvider } from './AuthProvider';
import { ConfigProvider } from './ConfigProvider';
import { MessageProvider } from './MessageProvider';
import { SchemaProvider } from './SchemaProvider';
import { JobTrackerProvider } from './JobTrackerProvider';

/**
 * A single component to wrap the entire application with all necessary context providers.
 * This simplifies the main application entry point.
 */
export const Providers = ({ children }: { children: ReactNode }) => {
  return (
    <ConfigProvider>
      <MessageProvider>
        <SchemaProvider>
          <AuthProvider>
            <JobTrackerProvider>
              {children}
            </JobTrackerProvider>
          </AuthProvider>
        </SchemaProvider>
      </MessageProvider>
    </ConfigProvider>
  );
};
 - - - - - - - - - - - - 
src/utils/supabase/info.tsx

/* AUTOGENERATED FILE - DO NOT EDIT CONTENTS */

export const projectId = "phgepmotxdpicyuzksqc"
export const publicAnonKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBoZ2VwbW90eGRwaWN5dXprc3FjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzkxMTg5NTEsImV4cCI6MjA1NDY5NDk1MX0.WYSnbwhHeSVHqQD7Uxm3e57kuJeCJUdWi3kvRptTOQk" - - - - - - - - - - - - 
src/components/HumanVerificationDetail.tsx

import React, { useState } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Badge } from './ui/badge';
import { Textarea } from './ui/textarea';
import { Input } from './ui/input';
import { Label } from './ui/label';
import { Checkbox } from './ui/checkbox';
import { Separator } from './ui/separator';
import { 
  Users, CheckCircle, XCircle, AlertTriangle, Bot, FileText, Image as ImageIcon,
  Video, Volume2, Link2, MessageSquare, Target, Flame, Vote, DollarSign, Zap,
  Eye, Ban, Skull, Microscope, AlertCircle, HelpCircle, Megaphone, Shield,
  Heart, Smile, ArrowLeft, Newspaper, Tag, ExternalLink, User, Clock
} from 'lucide-react';
import { getPendingCases } from '../utils/apiService';

// Reutilizamos la definición de las categorías
const ETIQUETAS_CATEGORIAS = [
  { id: 'verdadero', label: 'Verdadero', icon: CheckCircle, color: 'text-green-600', bg: 'bg-green-50', border: 'border-green-200', virulencia: 0, descripcion: 'Información verificada y respaldada por fuentes confiables' },
  { id: 'falso', label: 'Falso', icon: XCircle, color: 'text-red-600', bg: 'bg-red-50', border: 'border-red-200', virulencia: 90, descripcion: 'Información completamente falsa sin sustento verificable' },
  { id: 'enganoso', label: 'Engañoso', icon: AlertTriangle, color: 'text-orange-600', bg: 'bg-orange-50', border: 'border-orange-200', virulencia: 75, descripcion: 'Mezcla hechos reales con interpretaciones falsas o exageradas' },
  { id: 'satirico', label: 'Satírico/Humorístico', icon: Smile, color: 'text-blue-600', bg: 'bg-blue-50', border: 'border-blue-200', virulencia: 20, descripcion: 'Contenido humorístico o satírico que puede confundirse con noticias reales' },
  { id: 'manipulado', label: 'Manipulado', icon: ImageIcon, color: 'text-purple-600', bg: 'bg-purple-50', border: 'border-purple-200', virulencia: 85, descripcion: 'Contenido editado o alterado para cambiar su significado original' },
  { id: 'sin_contexto', label: 'Sin contexto', icon: AlertCircle, color: 'text-amber-600', bg: 'bg-amber-50', border: 'border-amber-200', virulencia: 60, descripcion: 'Contenido real usado fuera de su contexto temporal o situacional' },
  { id: 'no_verificable', label: 'No verificable', icon: HelpCircle, color: 'text-gray-600', bg: 'bg-gray-50', border: 'border-gray-200', virulencia: 35, descripcion: 'Información que no puede confirmarse con fuentes disponibles' },
  { id: 'teoria_conspirativa', label: 'Teoría conspirativa', icon: Eye, color: 'text-violet-600', bg: 'bg-violet-50', border: 'border-violet-200', virulencia: 80, descripcion: 'Narrativas que sugieren conspiraciones sin evidencia sólida' },
  { id: 'discurso_odio_racismo', label: 'Racismo/Xenofobia', icon: Skull, color: 'text-red-800', bg: 'bg-red-100', border: 'border-red-300', virulencia: 95, descripcion: 'Contenido que promueve odio contra grupos raciales o étnicos' },
  { id: 'discurso_odio_sexismo', label: 'Sexismo/LGBTQ+fobia', icon: Ban, color: 'text-red-700', bg: 'bg-red-100', border: 'border-red-300', virulencia: 95, descripcion: 'Contenido discriminatorio por género u orientación sexual' },
  { id: 'discurso_odio_clasismo', label: 'Clasismo/Aporofobia', icon: DollarSign, color: 'text-red-700', bg: 'bg-red-100', border: 'border-red-300', virulencia: 90, descripcion: 'Discriminación basada en clase social o condición económica' },
  { id: 'discurso_odio_ableismo', label: 'Ableismo', icon: Shield, color: 'text-red-700', bg: 'bg-red-100', border: 'border-red-300', virulencia: 90, descripcion: 'Discriminación contra personas con discapacidades' },
  { id: 'incitacion_violencia', label: 'Incitación a la violencia', icon: Flame, color: 'text-red-900', bg: 'bg-red-100', border: 'border-red-400', virulencia: 98, descripcion: 'Contenido que promueve o incita actos violentos' },
  { id: 'acoso_ciberbullying', label: 'Acoso/Ciberbullying', icon: Target, color: 'text-orange-700', bg: 'bg-orange-100', border: 'border-orange-300', virulencia: 85, descripcion: 'Ataques sistemáticos contra individuos específicos en línea' },
  { id: 'contenido_prejuicioso', label: 'Contenido prejuicioso', icon: AlertTriangle, color: 'text-yellow-700', bg: 'bg-yellow-50', border: 'border-yellow-200', virulencia: 70, descripcion: 'Presenta sesgos evidentes sin considerar otras perspectivas' },
  { id: 'bot_coordinado', label: 'Bot/Coordinado', icon: Bot, color: 'text-indigo-600', bg: 'bg-indigo-50', border: 'border-indigo-200', virulencia: 65, descripcion: 'Contenido generado o amplificado por cuentas automatizadas' },
  { id: 'suplantacion_identidad', label: 'Suplantación de identidad', icon: User, color: 'text-purple-700', bg: 'bg-purple-100', border: 'border-purple-300', virulencia: 88, descripcion: 'Se hace pasar por otra persona, organización o medio legítimo' },
  { id: 'sensacionalista', label: 'Sensacionalista', icon: Megaphone, color: 'text-orange-500', bg: 'bg-orange-50', border: 'border-orange-200', virulencia: 55, descripcion: 'Exagera o dramatiza para generar clics o emociones fuertes' },
  { id: 'en_revision', label: 'En revisión', icon: Clock, color: 'text-gray-500', bg: 'bg-gray-50', border: 'border-gray-200', virulencia: 40, descripcion: 'Contenido pendiente de verificación adicional' }
];

type Case = Awaited<ReturnType<typeof getPendingCases>>[0];

interface HumanVerificationDetailProps {
  caseData: Case;
  onBackToList: () => void;
  onSubmit: (diagnosis: any) => void;
}

export function HumanVerificationDetail({ caseData, onBackToList, onSubmit }: HumanVerificationDetailProps) {
    const [marcadoresDiagnostico, setMarcadoresDiagnostico] = useState<string[]>(caseData.aiAnalysis.detectedMarkers);
    const [marcadoresJustificaciones, setMarcadoresJustificaciones] = useState<{ [key: string]: string }>({});
    const [marcadoresEnlaces, setMarcadoresEnlaces] = useState<{ [key: string]: string }>({});
    const [verificationNotes, setVerificationNotes] = useState('');

    const toggleMarcadorDiagnostico = (marcadorId: string) => {
        setMarcadoresDiagnostico(prev => {
            if (prev.includes(marcadorId)) {
                const newJustificaciones = { ...marcadoresJustificaciones };
                const newEnlaces = { ...marcadoresEnlaces };
                delete newJustificaciones[marcadorId];
                delete newEnlaces[marcadorId];
                setMarcadoresJustificaciones(newJustificaciones);
                setMarcadoresEnlaces(newEnlaces);
                return prev.filter(m => m !== marcadorId);
            } else {
                return [...prev, marcadorId];
            }
        });
    };

    const handleInternalSubmit = () => {
        const diagnosis = {
            caseId: caseData.id,
            marcadores: marcadoresDiagnostico,
            justificaciones: marcadoresJustificaciones,
            enlaces: marcadoresEnlaces,
            notas: verificationNotes,
        };
        onSubmit(diagnosis);
    };

    const getMarcador = (marcadorId: string) => ETIQUETAS_CATEGORIAS.find(c => c.id === marcadorId);

    return (
        <div className="space-y-6">
            <Button variant="outline" onClick={onBackToList}><ArrowLeft className="mr-2 h-4 w-4" />Volver a la lista</Button>
            <Card>
                <CardHeader>
                    <CardTitle className="flex items-center space-x-2 text-2xl"><Microscope className="h-6 w-6 text-primary" /><span>Laboratorio de Diagnóstico Humano</span></CardTitle>
                    <CardDescription>Caso: {caseData.id}</CardDescription>
                </CardHeader>
                <CardContent className="space-y-6">
                    <Separator />
                    <div>
                        <Label className="mb-4 flex items-center space-x-2"><Target className="h-4 w-4 text-primary" /><span>Marcadores de Diagnóstico Desinfodémico</span></Label>
                        <p className="text-xs text-muted-foreground mb-4">Selecciona, justifica y respalda tu diagnóstico.</p>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                            {ETIQUETAS_CATEGORIAS.map((marcador) => {
                                const Icon = marcador.icon;
                                const isSelected = marcadoresDiagnostico.includes(marcador.id);
                                return (
                                    <div key={marcador.id} className={`border-2 rounded-lg transition-all ${isSelected ? `${marcador.border} ${marcador.bg} shadow-sm` : 'border-gray-200 hover:border-primary/30 hover:bg-accent/30'}`}>
                                        <div className="flex items-start space-x-3 p-4 cursor-pointer" onClick={() => toggleMarcadorDiagnostico(marcador.id)}>
                                            <Checkbox checked={isSelected} onCheckedChange={() => toggleMarcadorDiagnostico(marcador.id)} className="mt-1" />
                                            <div className="flex-1">
                                                <div className="flex items-center space-x-2 mb-1"><Icon className={`h-5 w-5 ${marcador.color}`} /><Label className="cursor-pointer font-medium">{marcador.label}</Label></div>
                                                <p className="text-xs text-muted-foreground">{marcador.descripcion}</p>
                                            </div>
                                        </div>
                                        {isSelected && (
                                            <div className="px-4 pb-4 space-y-3 border-t pt-3 mt-2">
                                                <div>
                                                    <Label className="text-xs text-muted-foreground mb-1 flex items-center space-x-1"><MessageSquare className="h-3 w-3" /><span>Justificación:</span></Label>
                                                    <Textarea placeholder={`Explica por qué aplica "${marcador.label}"...`} value={marcadoresJustificaciones[marcador.id] || ''} onChange={(e) => setMarcadoresJustificaciones(prev => ({...prev, [marcador.id]: e.target.value}))} className="text-sm resize-none" rows={3} />
                                                </div>
                                                <div>
                                                    <Label className="text-xs text-muted-foreground mb-1 flex items-center space-x-1"><Link2 className="h-3 w-3" /><span>Enlace de soporte (opcional):</span></Label>
                                                    <Input type="url" placeholder="https://ejemplo.com/fuente" value={marcadoresEnlaces[marcador.id] || ''} onChange={(e) => setMarcadoresEnlaces(prev => ({...prev, [marcador.id]: e.target.value}))} className="text-sm" />
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                    <Separator />
                    <div>
                        <Label htmlFor="notes" className="mb-2 flex items-center space-x-2"><MessageSquare className="h-4 w-4 text-primary" /><span>Notas Adicionales del Diagnóstico</span></Label>
                        <Textarea id="notes" placeholder="Agrega observaciones generales..." value={verificationNotes} onChange={(e) => setVerificationNotes(e.target.value)} rows={4} className="resize-none" />
                    </div>
                    <Separator />
                    <div className="flex justify-end">
                        <Button onClick={handleInternalSubmit} disabled={marcadoresDiagnostico.length === 0} size="lg"><Send className="mr-2 h-4 w-4" />Enviar Diagnóstico Humano</Button>
                    </div>
                </CardContent>
            </Card>
        </div>
    );
}
 - - - - - - - - - - - - 
src/components/ui/aspect-ratio.tsx

"use client";

import * as AspectRatioPrimitive from "@radix-ui/react-aspect-ratio@1.1.2";

function AspectRatio({
  ...props
}: React.ComponentProps<typeof AspectRatioPrimitive.Root>) {
  return <AspectRatioPrimitive.Root data-slot="aspect-ratio" {...props} />;
}

export { AspectRatio };
 - - - - - - - - - - - - 
src/components/ui/alert-dialog.tsx

"use client";

import * as React from "react";
import * as AlertDialogPrimitive from "@radix-ui/react-alert-dialog@1.1.6";

import { cn } from "./utils";
import { buttonVariants } from "./button";

function AlertDialog({
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Root>) {
  return <AlertDialogPrimitive.Root data-slot="alert-dialog" {...props} />;
}

function AlertDialogTrigger({
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Trigger>) {
  return (
    <AlertDialogPrimitive.Trigger data-slot="alert-dialog-trigger" {...props} />
  );
}

function AlertDialogPortal({
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Portal>) {
  return (
    <AlertDialogPrimitive.Portal data-slot="alert-dialog-portal" {...props} />
  );
}

function AlertDialogOverlay({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Overlay>) {
  return (
    <AlertDialogPrimitive.Overlay
      data-slot="alert-dialog-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className,
      )}
      {...props}
    />
  );
}

function AlertDialogContent({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Content>) {
  return (
    <AlertDialogPortal>
      <AlertDialogOverlay />
      <AlertDialogPrimitive.Content
        data-slot="alert-dialog-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",
          className,
        )}
        {...props}
      />
    </AlertDialogPortal>
  );
}

function AlertDialogHeader({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="alert-dialog-header"
      className={cn("flex flex-col gap-2 text-center sm:text-left", className)}
      {...props}
    />
  );
}

function AlertDialogFooter({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="alert-dialog-footer"
      className={cn(
        "flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",
        className,
      )}
      {...props}
    />
  );
}

function AlertDialogTitle({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Title>) {
  return (
    <AlertDialogPrimitive.Title
      data-slot="alert-dialog-title"
      className={cn("text-lg font-semibold", className)}
      {...props}
    />
  );
}

function AlertDialogDescription({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Description>) {
  return (
    <AlertDialogPrimitive.Description
      data-slot="alert-dialog-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  );
}

function AlertDialogAction({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Action>) {
  return (
    <AlertDialogPrimitive.Action
      className={cn(buttonVariants(), className)}
      {...props}
    />
  );
}

function AlertDialogCancel({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Cancel>) {
  return (
    <AlertDialogPrimitive.Cancel
      className={cn(buttonVariants({ variant: "outline" }), className)}
      {...props}
    />
  );
}

export {
  AlertDialog,
  AlertDialogPortal,
  AlertDialogOverlay,
  AlertDialogTrigger,
  AlertDialogContent,
  AlertDialogHeader,
  AlertDialogFooter,
  AlertDialogTitle,
  AlertDialogDescription,
  AlertDialogAction,
  AlertDialogCancel,
};
 - - - - - - - - - - - - 
src/components/ui/pagination.tsx

import * as React from "react";
import {
  ChevronLeftIcon,
  ChevronRightIcon,
  MoreHorizontalIcon,
} from "lucide-react@0.487.0";

import { cn } from "./utils";
import { Button, buttonVariants } from "./button";

function Pagination({ className, ...props }: React.ComponentProps<"nav">) {
  return (
    <nav
      role="navigation"
      aria-label="pagination"
      data-slot="pagination"
      className={cn("mx-auto flex w-full justify-center", className)}
      {...props}
    />
  );
}

function PaginationContent({
  className,
  ...props
}: React.ComponentProps<"ul">) {
  return (
    <ul
      data-slot="pagination-content"
      className={cn("flex flex-row items-center gap-1", className)}
      {...props}
    />
  );
}

function PaginationItem({ ...props }: React.ComponentProps<"li">) {
  return <li data-slot="pagination-item" {...props} />;
}

type PaginationLinkProps = {
  isActive?: boolean;
} & Pick<React.ComponentProps<typeof Button>, "size"> &
  React.ComponentProps<"a">;

function PaginationLink({
  className,
  isActive,
  size = "icon",
  ...props
}: PaginationLinkProps) {
  return (
    <a
      aria-current={isActive ? "page" : undefined}
      data-slot="pagination-link"
      data-active={isActive}
      className={cn(
        buttonVariants({
          variant: isActive ? "outline" : "ghost",
          size,
        }),
        className,
      )}
      {...props}
    />
  );
}

function PaginationPrevious({
  className,
  ...props
}: React.ComponentProps<typeof PaginationLink>) {
  return (
    <PaginationLink
      aria-label="Go to previous page"
      size="default"
      className={cn("gap-1 px-2.5 sm:pl-2.5", className)}
      {...props}
    >
      <ChevronLeftIcon />
      <span className="hidden sm:block">Previous</span>
    </PaginationLink>
  );
}

function PaginationNext({
  className,
  ...props
}: React.ComponentProps<typeof PaginationLink>) {
  return (
    <PaginationLink
      aria-label="Go to next page"
      size="default"
      className={cn("gap-1 px-2.5 sm:pr-2.5", className)}
      {...props}
    >
      <span className="hidden sm:block">Next</span>
      <ChevronRightIcon />
    </PaginationLink>
  );
}

function PaginationEllipsis({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      aria-hidden
      data-slot="pagination-ellipsis"
      className={cn("flex size-9 items-center justify-center", className)}
      {...props}
    >
      <MoreHorizontalIcon className="size-4" />
      <span className="sr-only">More pages</span>
    </span>
  );
}

export {
  Pagination,
  PaginationContent,
  PaginationLink,
  PaginationItem,
  PaginationPrevious,
  PaginationNext,
  PaginationEllipsis,
};
 - - - - - - - - - - - - 
src/components/ui/tabs.tsx

"use client";

import * as React from "react";
import * as TabsPrimitive from "@radix-ui/react-tabs@1.1.3";

import { cn } from "./utils";

function Tabs({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Root>) {
  return (
    <TabsPrimitive.Root
      data-slot="tabs"
      className={cn("flex flex-col gap-2", className)}
      {...props}
    />
  );
}

function TabsList({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.List>) {
  return (
    <TabsPrimitive.List
      data-slot="tabs-list"
      className={cn(
        "bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",
        className,
      )}
      {...props}
    />
  );
}

function TabsTrigger({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {
  return (
    <TabsPrimitive.Trigger
      data-slot="tabs-trigger"
      className={cn(
        "data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function TabsContent({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Content>) {
  return (
    <TabsPrimitive.Content
      data-slot="tabs-content"
      className={cn("flex-1 outline-none", className)}
      {...props}
    />
  );
}

export { Tabs, TabsList, TabsTrigger, TabsContent };
 - - - - - - - - - - - - 
src/components/ui/card.tsx

import * as React from "react";

import { cn } from "./utils";

function Card({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card"
      className={cn(
        "bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",
        className,
      )}
      {...props}
    />
  );
}

function CardHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card-header"
      className={cn(
        "@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",
        className,
      )}
      {...props}
    />
  );
}

function CardTitle({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <h4
      data-slot="card-title"
      className={cn("leading-none", className)}
      {...props}
    />
  );
}

function CardDescription({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <p
      data-slot="card-description"
      className={cn("text-muted-foreground", className)}
      {...props}
    />
  );
}

function CardAction({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card-action"
      className={cn(
        "col-start-2 row-span-2 row-start-1 self-start justify-self-end",
        className,
      )}
      {...props}
    />
  );
}

function CardContent({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card-content"
      className={cn("px-6 [&:last-child]:pb-6", className)}
      {...props}
    />
  );
}

function CardFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card-footer"
      className={cn("flex items-center px-6 pb-6 [.border-t]:pt-6", className)}
      {...props}
    />
  );
}

export {
  Card,
  CardHeader,
  CardFooter,
  CardTitle,
  CardAction,
  CardDescription,
  CardContent,
};
 - - - - - - - - - - - - 
src/components/ui/slider.tsx

"use client";

import * as React from "react";
import * as SliderPrimitive from "@radix-ui/react-slider@1.2.3";

import { cn } from "./utils";

function Slider({
  className,
  defaultValue,
  value,
  min = 0,
  max = 100,
  ...props
}: React.ComponentProps<typeof SliderPrimitive.Root>) {
  const _values = React.useMemo(
    () =>
      Array.isArray(value)
        ? value
        : Array.isArray(defaultValue)
          ? defaultValue
          : [min, max],
    [value, defaultValue, min, max],
  );

  return (
    <SliderPrimitive.Root
      data-slot="slider"
      defaultValue={defaultValue}
      value={value}
      min={min}
      max={max}
      className={cn(
        "relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",
        className,
      )}
      {...props}
    >
      <SliderPrimitive.Track
        data-slot="slider-track"
        className={cn(
          "bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5",
        )}
      >
        <SliderPrimitive.Range
          data-slot="slider-range"
          className={cn(
            "bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full",
          )}
        />
      </SliderPrimitive.Track>
      {Array.from({ length: _values.length }, (_, index) => (
        <SliderPrimitive.Thumb
          data-slot="slider-thumb"
          key={index}
          className="border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"
        />
      ))}
    </SliderPrimitive.Root>
  );
}

export { Slider };
 - - - - - - - - - - - - 
src/components/ui/popover.tsx

"use client";

import * as React from "react";
import * as PopoverPrimitive from "@radix-ui/react-popover@1.1.6";

import { cn } from "./utils";

function Popover({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Root>) {
  return <PopoverPrimitive.Root data-slot="popover" {...props} />;
}

function PopoverTrigger({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {
  return <PopoverPrimitive.Trigger data-slot="popover-trigger" {...props} />;
}

function PopoverContent({
  className,
  align = "center",
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Content>) {
  return (
    <PopoverPrimitive.Portal>
      <PopoverPrimitive.Content
        data-slot="popover-content"
        align={align}
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",
          className,
        )}
        {...props}
      />
    </PopoverPrimitive.Portal>
  );
}

function PopoverAnchor({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) {
  return <PopoverPrimitive.Anchor data-slot="popover-anchor" {...props} />;
}

export { Popover, PopoverTrigger, PopoverContent, PopoverAnchor };
 - - - - - - - - - - - - 
src/components/ui/progress.tsx

"use client";

import * as React from "react";
import * as ProgressPrimitive from "@radix-ui/react-progress@1.1.2";

import { cn } from "./utils";

function Progress({
  className,
  value,
  ...props
}: React.ComponentProps<typeof ProgressPrimitive.Root>) {
  return (
    <ProgressPrimitive.Root
      data-slot="progress"
      className={cn(
        "bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",
        className,
      )}
      {...props}
    >
      <ProgressPrimitive.Indicator
        data-slot="progress-indicator"
        className="bg-primary h-full w-full flex-1 transition-all"
        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}
      />
    </ProgressPrimitive.Root>
  );
}

export { Progress };
 - - - - - - - - - - - - 
src/components/ui/toaster.tsx

"use client"
import { useToast } from "@/hooks/use-toast"
import { Toast, ToastClose, ToastDescription, ToastProvider, ToastTitle, ToastViewport } from "@/components/toast"

export function Toaster() {
  const { toasts } = useToast()

  return (
    <ToastProvider>
      {toasts.map(function ({ id, title, description, action, ...props }) {
        return (
          <Toast key={id} {...props}>
            <div className="grid gap-1">
              {title && <ToastTitle>{title}</ToastTitle>}
              {description && (
                <ToastDescription>{description}</ToastDescription>
              )}
            </div>
            {action}
            <ToastClose />
          </Toast>
        )
      })}
      <ToastViewport />
    </ToastProvider>
  )
}
 - - - - - - - - - - - - 
src/components/ui/input-otp.tsx

"use client";

import * as React from "react";
import { OTPInput, OTPInputContext } from "input-otp@1.4.2";
import { MinusIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function InputOTP({
  className,
  containerClassName,
  ...props
}: React.ComponentProps<typeof OTPInput> & {
  containerClassName?: string;
}) {
  return (
    <OTPInput
      data-slot="input-otp"
      containerClassName={cn(
        "flex items-center gap-2 has-disabled:opacity-50",
        containerClassName,
      )}
      className={cn("disabled:cursor-not-allowed", className)}
      {...props}
    />
  );
}

function InputOTPGroup({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="input-otp-group"
      className={cn("flex items-center gap-1", className)}
      {...props}
    />
  );
}

function InputOTPSlot({
  index,
  className,
  ...props
}: React.ComponentProps<"div"> & {
  index: number;
}) {
  const inputOTPContext = React.useContext(OTPInputContext);
  const { char, hasFakeCaret, isActive } = inputOTPContext?.slots[index] ?? {};

  return (
    <div
      data-slot="input-otp-slot"
      data-active={isActive}
      className={cn(
        "data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm bg-input-background transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",
        className,
      )}
      {...props}
    >
      {char}
      {hasFakeCaret && (
        <div className="pointer-events-none absolute inset-0 flex items-center justify-center">
          <div className="animate-caret-blink bg-foreground h-4 w-px duration-1000" />
        </div>
      )}
    </div>
  );
}

function InputOTPSeparator({ ...props }: React.ComponentProps<"div">) {
  return (
    <div data-slot="input-otp-separator" role="separator" {...props}>
      <MinusIcon />
    </div>
  );
}

export { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator };
 - - - - - - - - - - - - 
src/components/ui/chart.tsx

"use client";

import * as React from "react";
import * as RechartsPrimitive from "recharts@2.15.2";

import { cn } from "./utils";

// Format: { THEME_NAME: CSS_SELECTOR }
const THEMES = { light: "", dark: ".dark" } as const;

export type ChartConfig = {
  [k in string]: {
    label?: React.ReactNode;
    icon?: React.ComponentType;
  } & (
    | { color?: string; theme?: never }
    | { color?: never; theme: Record<keyof typeof THEMES, string> }
  );
};

type ChartContextProps = {
  config: ChartConfig;
};

const ChartContext = React.createContext<ChartContextProps | null>(null);

function useChart() {
  const context = React.useContext(ChartContext);

  if (!context) {
    throw new Error("useChart must be used within a <ChartContainer />");
  }

  return context;
}

function ChartContainer({
  id,
  className,
  children,
  config,
  ...props
}: React.ComponentProps<"div"> & {
  config: ChartConfig;
  children: React.ComponentProps<
    typeof RechartsPrimitive.ResponsiveContainer
  >["children"];
}) {
  const uniqueId = React.useId();
  const chartId = `chart-${id || uniqueId.replace(/:/g, "")}`;

  return (
    <ChartContext.Provider value={{ config }}>
      <div
        data-slot="chart"
        data-chart={chartId}
        className={cn(
          "[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",
          className,
        )}
        {...props}
      >
        <ChartStyle id={chartId} config={config} />
        <RechartsPrimitive.ResponsiveContainer>
          {children}
        </RechartsPrimitive.ResponsiveContainer>
      </div>
    </ChartContext.Provider>
  );
}

const ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {
  const colorConfig = Object.entries(config).filter(
    ([, config]) => config.theme || config.color,
  );

  if (!colorConfig.length) {
    return null;
  }

  return (
    <style
      dangerouslySetInnerHTML={{
        __html: Object.entries(THEMES)
          .map(
            ([theme, prefix]) => `
${prefix} [data-chart=${id}] {
${colorConfig
  .map(([key, itemConfig]) => {
    const color =
      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||
      itemConfig.color;
    return color ? `  --color-${key}: ${color};` : null;
  })
  .join("\n")}
}
`,
          )
          .join("\n"),
      }}
    />
  );
};

const ChartTooltip = RechartsPrimitive.Tooltip;

function ChartTooltipContent({
  active,
  payload,
  className,
  indicator = "dot",
  hideLabel = false,
  hideIndicator = false,
  label,
  labelFormatter,
  labelClassName,
  formatter,
  color,
  nameKey,
  labelKey,
}: React.ComponentProps<typeof RechartsPrimitive.Tooltip> &
  React.ComponentProps<"div"> & {
    hideLabel?: boolean;
    hideIndicator?: boolean;
    indicator?: "line" | "dot" | "dashed";
    nameKey?: string;
    labelKey?: string;
  }) {
  const { config } = useChart();

  const tooltipLabel = React.useMemo(() => {
    if (hideLabel || !payload?.length) {
      return null;
    }

    const [item] = payload;
    const key = `${labelKey || item?.dataKey || item?.name || "value"}`;
    const itemConfig = getPayloadConfigFromPayload(config, item, key);
    const value =
      !labelKey && typeof label === "string"
        ? config[label as keyof typeof config]?.label || label
        : itemConfig?.label;

    if (labelFormatter) {
      return (
        <div className={cn("font-medium", labelClassName)}>
          {labelFormatter(value, payload)}
        </div>
      );
    }

    if (!value) {
      return null;
    }

    return <div className={cn("font-medium", labelClassName)}>{value}</div>;
  }, [
    label,
    labelFormatter,
    payload,
    hideLabel,
    labelClassName,
    config,
    labelKey,
  ]);

  if (!active || !payload?.length) {
    return null;
  }

  const nestLabel = payload.length === 1 && indicator !== "dot";

  return (
    <div
      className={cn(
        "border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl",
        className,
      )}
    >
      {!nestLabel ? tooltipLabel : null}
      <div className="grid gap-1.5">
        {payload.map((item, index) => {
          const key = `${nameKey || item.name || item.dataKey || "value"}`;
          const itemConfig = getPayloadConfigFromPayload(config, item, key);
          const indicatorColor = color || item.payload.fill || item.color;

          return (
            <div
              key={item.dataKey}
              className={cn(
                "[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5",
                indicator === "dot" && "items-center",
              )}
            >
              {formatter && item?.value !== undefined && item.name ? (
                formatter(item.value, item.name, item, index, item.payload)
              ) : (
                <>
                  {itemConfig?.icon ? (
                    <itemConfig.icon />
                  ) : (
                    !hideIndicator && (
                      <div
                        className={cn(
                          "shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)",
                          {
                            "h-2.5 w-2.5": indicator === "dot",
                            "w-1": indicator === "line",
                            "w-0 border-[1.5px] border-dashed bg-transparent":
                              indicator === "dashed",
                            "my-0.5": nestLabel && indicator === "dashed",
                          },
                        )}
                        style={
                          {
                            "--color-bg": indicatorColor,
                            "--color-border": indicatorColor,
                          } as React.CSSProperties
                        }
                      />
                    )
                  )}
                  <div
                    className={cn(
                      "flex flex-1 justify-between leading-none",
                      nestLabel ? "items-end" : "items-center",
                    )}
                  >
                    <div className="grid gap-1.5">
                      {nestLabel ? tooltipLabel : null}
                      <span className="text-muted-foreground">
                        {itemConfig?.label || item.name}
                      </span>
                    </div>
                    {item.value && (
                      <span className="text-foreground font-mono font-medium tabular-nums">
                        {item.value.toLocaleString()}
                      </span>
                    )}
                  </div>
                </>
              )}
            </div>
          );
        })}
      </div>
    </div>
  );
}

const ChartLegend = RechartsPrimitive.Legend;

function ChartLegendContent({
  className,
  hideIcon = false,
  payload,
  verticalAlign = "bottom",
  nameKey,
}: React.ComponentProps<"div"> &
  Pick<RechartsPrimitive.LegendProps, "payload" | "verticalAlign"> & {
    hideIcon?: boolean;
    nameKey?: string;
  }) {
  const { config } = useChart();

  if (!payload?.length) {
    return null;
  }

  return (
    <div
      className={cn(
        "flex items-center justify-center gap-4",
        verticalAlign === "top" ? "pb-3" : "pt-3",
        className,
      )}
    >
      {payload.map((item) => {
        const key = `${nameKey || item.dataKey || "value"}`;
        const itemConfig = getPayloadConfigFromPayload(config, item, key);

        return (
          <div
            key={item.value}
            className={cn(
              "[&>svg]:text-muted-foreground flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3",
            )}
          >
            {itemConfig?.icon && !hideIcon ? (
              <itemConfig.icon />
            ) : (
              <div
                className="h-2 w-2 shrink-0 rounded-[2px]"
                style={{
                  backgroundColor: item.color,
                }}
              />
            )}
            {itemConfig?.label}
          </div>
        );
      })}
    </div>
  );
}

// Helper to extract item config from a payload.
function getPayloadConfigFromPayload(
  config: ChartConfig,
  payload: unknown,
  key: string,
) {
  if (typeof payload !== "object" || payload === null) {
    return undefined;
  }

  const payloadPayload =
    "payload" in payload &&
    typeof payload.payload === "object" &&
    payload.payload !== null
      ? payload.payload
      : undefined;

  let configLabelKey: string = key;

  if (
    key in payload &&
    typeof payload[key as keyof typeof payload] === "string"
  ) {
    configLabelKey = payload[key as keyof typeof payload] as string;
  } else if (
    payloadPayload &&
    key in payloadPayload &&
    typeof payloadPayload[key as keyof typeof payloadPayload] === "string"
  ) {
    configLabelKey = payloadPayload[
      key as keyof typeof payloadPayload
    ] as string;
  }

  return configLabelKey in config
    ? config[configLabelKey]
    : config[key as keyof typeof config];
}

export {
  ChartContainer,
  ChartTooltip,
  ChartTooltipContent,
  ChartLegend,
  ChartLegendContent,
  ChartStyle,
};
 - - - - - - - - - - - - 
src/components/ui/hover-card.tsx

"use client";

import * as React from "react";
import * as HoverCardPrimitive from "@radix-ui/react-hover-card@1.1.6";

import { cn } from "./utils";

function HoverCard({
  ...props
}: React.ComponentProps<typeof HoverCardPrimitive.Root>) {
  return <HoverCardPrimitive.Root data-slot="hover-card" {...props} />;
}

function HoverCardTrigger({
  ...props
}: React.ComponentProps<typeof HoverCardPrimitive.Trigger>) {
  return (
    <HoverCardPrimitive.Trigger data-slot="hover-card-trigger" {...props} />
  );
}

function HoverCardContent({
  className,
  align = "center",
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof HoverCardPrimitive.Content>) {
  return (
    <HoverCardPrimitive.Portal data-slot="hover-card-portal">
      <HoverCardPrimitive.Content
        data-slot="hover-card-content"
        align={align}
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-64 origin-(--radix-hover-card-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",
          className,
        )}
        {...props}
      />
    </HoverCardPrimitive.Portal>
  );
}

export { HoverCard, HoverCardTrigger, HoverCardContent };
 - - - - - - - - - - - - 
src/components/ui/sheet.tsx

"use client";

import * as React from "react";
import * as SheetPrimitive from "@radix-ui/react-dialog@1.1.6";
import { XIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function Sheet({ ...props }: React.ComponentProps<typeof SheetPrimitive.Root>) {
  return <SheetPrimitive.Root data-slot="sheet" {...props} />;
}

function SheetTrigger({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Trigger>) {
  return <SheetPrimitive.Trigger data-slot="sheet-trigger" {...props} />;
}

function SheetClose({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Close>) {
  return <SheetPrimitive.Close data-slot="sheet-close" {...props} />;
}

function SheetPortal({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Portal>) {
  return <SheetPrimitive.Portal data-slot="sheet-portal" {...props} />;
}

function SheetOverlay({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Overlay>) {
  return (
    <SheetPrimitive.Overlay
      data-slot="sheet-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className,
      )}
      {...props}
    />
  );
}

function SheetContent({
  className,
  children,
  side = "right",
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Content> & {
  side?: "top" | "right" | "bottom" | "left";
}) {
  return (
    <SheetPortal>
      <SheetOverlay />
      <SheetPrimitive.Content
        data-slot="sheet-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",
          side === "right" &&
            "data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",
          side === "left" &&
            "data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",
          side === "top" &&
            "data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",
          side === "bottom" &&
            "data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",
          className,
        )}
        {...props}
      >
        {children}
        <SheetPrimitive.Close className="ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none">
          <XIcon className="size-4" />
          <span className="sr-only">Close</span>
        </SheetPrimitive.Close>
      </SheetPrimitive.Content>
    </SheetPortal>
  );
}

function SheetHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sheet-header"
      className={cn("flex flex-col gap-1.5 p-4", className)}
      {...props}
    />
  );
}

function SheetFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sheet-footer"
      className={cn("mt-auto flex flex-col gap-2 p-4", className)}
      {...props}
    />
  );
}

function SheetTitle({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Title>) {
  return (
    <SheetPrimitive.Title
      data-slot="sheet-title"
      className={cn("text-foreground font-semibold", className)}
      {...props}
    />
  );
}

function SheetDescription({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Description>) {
  return (
    <SheetPrimitive.Description
      data-slot="sheet-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  );
}

export {
  Sheet,
  SheetTrigger,
  SheetClose,
  SheetContent,
  SheetHeader,
  SheetFooter,
  SheetTitle,
  SheetDescription,
};
 - - - - - - - - - - - - 
src/components/ui/scroll-area.tsx

"use client";

import * as React from "react";
import * as ScrollAreaPrimitive from "@radix-ui/react-scroll-area@1.2.3";

import { cn } from "./utils";

function ScrollArea({
  className,
  children,
  ...props
}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {
  return (
    <ScrollAreaPrimitive.Root
      data-slot="scroll-area"
      className={cn("relative", className)}
      {...props}
    >
      <ScrollAreaPrimitive.Viewport
        data-slot="scroll-area-viewport"
        className="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1"
      >
        {children}
      </ScrollAreaPrimitive.Viewport>
      <ScrollBar />
      <ScrollAreaPrimitive.Corner />
    </ScrollAreaPrimitive.Root>
  );
}

function ScrollBar({
  className,
  orientation = "vertical",
  ...props
}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {
  return (
    <ScrollAreaPrimitive.ScrollAreaScrollbar
      data-slot="scroll-area-scrollbar"
      orientation={orientation}
      className={cn(
        "flex touch-none p-px transition-colors select-none",
        orientation === "vertical" &&
          "h-full w-2.5 border-l border-l-transparent",
        orientation === "horizontal" &&
          "h-2.5 flex-col border-t border-t-transparent",
        className,
      )}
      {...props}
    >
      <ScrollAreaPrimitive.ScrollAreaThumb
        data-slot="scroll-area-thumb"
        className="bg-border relative flex-1 rounded-full"
      />
    </ScrollAreaPrimitive.ScrollAreaScrollbar>
  );
}

export { ScrollArea, ScrollBar };
 - - - - - - - - - - - - 
src/components/ui/resizable.tsx

"use client";

import * as React from "react";
import { GripVerticalIcon } from "lucide-react@0.487.0";
import * as ResizablePrimitive from "react-resizable-panels@2.1.7";

import { cn } from "./utils";

function ResizablePanelGroup({
  className,
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) {
  return (
    <ResizablePrimitive.PanelGroup
      data-slot="resizable-panel-group"
      className={cn(
        "flex h-full w-full data-[panel-group-direction=vertical]:flex-col",
        className,
      )}
      {...props}
    />
  );
}

function ResizablePanel({
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.Panel>) {
  return <ResizablePrimitive.Panel data-slot="resizable-panel" {...props} />;
}

function ResizableHandle({
  withHandle,
  className,
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {
  withHandle?: boolean;
}) {
  return (
    <ResizablePrimitive.PanelResizeHandle
      data-slot="resizable-handle"
      className={cn(
        "bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",
        className,
      )}
      {...props}
    >
      {withHandle && (
        <div className="bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border">
          <GripVerticalIcon className="size-2.5" />
        </div>
      )}
    </ResizablePrimitive.PanelResizeHandle>
  );
}

export { ResizablePanelGroup, ResizablePanel, ResizableHandle };
 - - - - - - - - - - - - 
src/components/ui/label.tsx

"use client";

import * as React from "react";
import * as LabelPrimitive from "@radix-ui/react-label@2.1.2";

import { cn } from "./utils";

function Label({
  className,
  ...props
}: React.ComponentProps<typeof LabelPrimitive.Root>) {
  return (
    <LabelPrimitive.Root
      data-slot="label"
      className={cn(
        "flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",
        className,
      )}
      {...props}
    />
  );
}

export { Label };
 - - - - - - - - - - - - 
src/components/ui/sonner.tsx

"use client";

import { useTheme } from "next-themes@0.4.6";
import { Toaster as Sonner, ToasterProps } from "sonner@2.0.3";

const Toaster = ({ ...props }: ToasterProps) => {
  const { theme = "system" } = useTheme();

  return (
    <Sonner
      theme={theme as ToasterProps["theme"]}
      className="toaster group"
      style={
        {
          "--normal-bg": "var(--popover)",
          "--normal-text": "var(--popover-foreground)",
          "--normal-border": "var(--border)",
        } as React.CSSProperties
      }
      {...props}
    />
  );
};

export { Toaster };
 - - - - - - - - - - - - 
src/components/ui/navigation-menu.tsx

import * as React from "react";
import * as NavigationMenuPrimitive from "@radix-ui/react-navigation-menu@1.2.5";
import { cva } from "class-variance-authority@0.7.1";
import { ChevronDownIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function NavigationMenu({
  className,
  children,
  viewport = true,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Root> & {
  viewport?: boolean;
}) {
  return (
    <NavigationMenuPrimitive.Root
      data-slot="navigation-menu"
      data-viewport={viewport}
      className={cn(
        "group/navigation-menu relative flex max-w-max flex-1 items-center justify-center",
        className,
      )}
      {...props}
    >
      {children}
      {viewport && <NavigationMenuViewport />}
    </NavigationMenuPrimitive.Root>
  );
}

function NavigationMenuList({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.List>) {
  return (
    <NavigationMenuPrimitive.List
      data-slot="navigation-menu-list"
      className={cn(
        "group flex flex-1 list-none items-center justify-center gap-1",
        className,
      )}
      {...props}
    />
  );
}

function NavigationMenuItem({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Item>) {
  return (
    <NavigationMenuPrimitive.Item
      data-slot="navigation-menu-item"
      className={cn("relative", className)}
      {...props}
    />
  );
}

const navigationMenuTriggerStyle = cva(
  "group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=open]:hover:bg-accent data-[state=open]:text-accent-foreground data-[state=open]:focus:bg-accent data-[state=open]:bg-accent/50 focus-visible:ring-ring/50 outline-none transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1",
);

function NavigationMenuTrigger({
  className,
  children,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Trigger>) {
  return (
    <NavigationMenuPrimitive.Trigger
      data-slot="navigation-menu-trigger"
      className={cn(navigationMenuTriggerStyle(), "group", className)}
      {...props}
    >
      {children}{" "}
      <ChevronDownIcon
        className="relative top-[1px] ml-1 size-3 transition duration-300 group-data-[state=open]:rotate-180"
        aria-hidden="true"
      />
    </NavigationMenuPrimitive.Trigger>
  );
}

function NavigationMenuContent({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Content>) {
  return (
    <NavigationMenuPrimitive.Content
      data-slot="navigation-menu-content"
      className={cn(
        "data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 top-0 left-0 w-full p-2 pr-2.5 md:absolute md:w-auto",
        "group-data-[viewport=false]/navigation-menu:bg-popover group-data-[viewport=false]/navigation-menu:text-popover-foreground group-data-[viewport=false]/navigation-menu:data-[state=open]:animate-in group-data-[viewport=false]/navigation-menu:data-[state=closed]:animate-out group-data-[viewport=false]/navigation-menu:data-[state=closed]:zoom-out-95 group-data-[viewport=false]/navigation-menu:data-[state=open]:zoom-in-95 group-data-[viewport=false]/navigation-menu:data-[state=open]:fade-in-0 group-data-[viewport=false]/navigation-menu:data-[state=closed]:fade-out-0 group-data-[viewport=false]/navigation-menu:top-full group-data-[viewport=false]/navigation-menu:mt-1.5 group-data-[viewport=false]/navigation-menu:overflow-hidden group-data-[viewport=false]/navigation-menu:rounded-md group-data-[viewport=false]/navigation-menu:border group-data-[viewport=false]/navigation-menu:shadow group-data-[viewport=false]/navigation-menu:duration-200 **:data-[slot=navigation-menu-link]:focus:ring-0 **:data-[slot=navigation-menu-link]:focus:outline-none",
        className,
      )}
      {...props}
    />
  );
}

function NavigationMenuViewport({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Viewport>) {
  return (
    <div
      className={cn(
        "absolute top-full left-0 isolate z-50 flex justify-center",
      )}
    >
      <NavigationMenuPrimitive.Viewport
        data-slot="navigation-menu-viewport"
        className={cn(
          "origin-top-center bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border shadow md:w-[var(--radix-navigation-menu-viewport-width)]",
          className,
        )}
        {...props}
      />
    </div>
  );
}

function NavigationMenuLink({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Link>) {
  return (
    <NavigationMenuPrimitive.Link
      data-slot="navigation-menu-link"
      className={cn(
        "data-[active=true]:focus:bg-accent data-[active=true]:hover:bg-accent data-[active=true]:bg-accent/50 data-[active=true]:text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus-visible:ring-ring/50 [&_svg:not([class*='text-'])]:text-muted-foreground flex flex-col gap-1 rounded-sm p-2 text-sm transition-all outline-none focus-visible:ring-[3px] focus-visible:outline-1 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function NavigationMenuIndicator({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Indicator>) {
  return (
    <NavigationMenuPrimitive.Indicator
      data-slot="navigation-menu-indicator"
      className={cn(
        "data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden",
        className,
      )}
      {...props}
    >
      <div className="bg-border relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm shadow-md" />
    </NavigationMenuPrimitive.Indicator>
  );
}

export {
  NavigationMenu,
  NavigationMenuList,
  NavigationMenuItem,
  NavigationMenuContent,
  NavigationMenuTrigger,
  NavigationMenuLink,
  NavigationMenuIndicator,
  NavigationMenuViewport,
  navigationMenuTriggerStyle,
};
 - - - - - - - - - - - - 
src/components/ui/accordion.tsx

"use client";

import * as React from "react";
import * as AccordionPrimitive from "@radix-ui/react-accordion@1.2.3";
import { ChevronDownIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function Accordion({
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Root>) {
  return <AccordionPrimitive.Root data-slot="accordion" {...props} />;
}

function AccordionItem({
  className,
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Item>) {
  return (
    <AccordionPrimitive.Item
      data-slot="accordion-item"
      className={cn("border-b last:border-b-0", className)}
      {...props}
    />
  );
}

function AccordionTrigger({
  className,
  children,
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Trigger>) {
  return (
    <AccordionPrimitive.Header className="flex">
      <AccordionPrimitive.Trigger
        data-slot="accordion-trigger"
        className={cn(
          "focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",
          className,
        )}
        {...props}
      >
        {children}
        <ChevronDownIcon className="text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200" />
      </AccordionPrimitive.Trigger>
    </AccordionPrimitive.Header>
  );
}

function AccordionContent({
  className,
  children,
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Content>) {
  return (
    <AccordionPrimitive.Content
      data-slot="accordion-content"
      className="data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm"
      {...props}
    >
      <div className={cn("pt-0 pb-4", className)}>{children}</div>
    </AccordionPrimitive.Content>
  );
}

export { Accordion, AccordionItem, AccordionTrigger, AccordionContent };
 - - - - - - - - - - - - 
src/components/ui/drawer.tsx

"use client";

import * as React from "react";
import { Drawer as DrawerPrimitive } from "vaul@1.1.2";

import { cn } from "./utils";

function Drawer({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Root>) {
  return <DrawerPrimitive.Root data-slot="drawer" {...props} />;
}

function DrawerTrigger({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Trigger>) {
  return <DrawerPrimitive.Trigger data-slot="drawer-trigger" {...props} />;
}

function DrawerPortal({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Portal>) {
  return <DrawerPrimitive.Portal data-slot="drawer-portal" {...props} />;
}

function DrawerClose({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Close>) {
  return <DrawerPrimitive.Close data-slot="drawer-close" {...props} />;
}

function DrawerOverlay({
  className,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Overlay>) {
  return (
    <DrawerPrimitive.Overlay
      data-slot="drawer-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className,
      )}
      {...props}
    />
  );
}

function DrawerContent({
  className,
  children,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Content>) {
  return (
    <DrawerPortal data-slot="drawer-portal">
      <DrawerOverlay />
      <DrawerPrimitive.Content
        data-slot="drawer-content"
        className={cn(
          "group/drawer-content bg-background fixed z-50 flex h-auto flex-col",
          "data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b",
          "data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t",
          "data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm",
          "data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm",
          className,
        )}
        {...props}
      >
        <div className="bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block" />
        {children}
      </DrawerPrimitive.Content>
    </DrawerPortal>
  );
}

function DrawerHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="drawer-header"
      className={cn("flex flex-col gap-1.5 p-4", className)}
      {...props}
    />
  );
}

function DrawerFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="drawer-footer"
      className={cn("mt-auto flex flex-col gap-2 p-4", className)}
      {...props}
    />
  );
}

function DrawerTitle({
  className,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Title>) {
  return (
    <DrawerPrimitive.Title
      data-slot="drawer-title"
      className={cn("text-foreground font-semibold", className)}
      {...props}
    />
  );
}

function DrawerDescription({
  className,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Description>) {
  return (
    <DrawerPrimitive.Description
      data-slot="drawer-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  );
}

export {
  Drawer,
  DrawerPortal,
  DrawerOverlay,
  DrawerTrigger,
  DrawerClose,
  DrawerContent,
  DrawerHeader,
  DrawerFooter,
  DrawerTitle,
  DrawerDescription,
};
 - - - - - - - - - - - - 
src/components/ui/tooltip.tsx

"use client";

import * as React from "react";
import * as TooltipPrimitive from "@radix-ui/react-tooltip@1.1.8";

import { cn } from "./utils";

function TooltipProvider({
  delayDuration = 0,
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Provider>) {
  return (
    <TooltipPrimitive.Provider
      data-slot="tooltip-provider"
      delayDuration={delayDuration}
      {...props}
    />
  );
}

function Tooltip({
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Root>) {
  return (
    <TooltipProvider>
      <TooltipPrimitive.Root data-slot="tooltip" {...props} />
    </TooltipProvider>
  );
}

function TooltipTrigger({
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {
  return <TooltipPrimitive.Trigger data-slot="tooltip-trigger" {...props} />;
}

function TooltipContent({
  className,
  sideOffset = 0,
  children,
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Content>) {
  return (
    <TooltipPrimitive.Portal>
      <TooltipPrimitive.Content
        data-slot="tooltip-content"
        sideOffset={sideOffset}
        className={cn(
          "bg-white text-black border-2 border-[#ffda00] animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance shadow-lg",
          className,
        )}
        {...props}
      >
        {children}
        <TooltipPrimitive.Arrow className="bg-white fill-white z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px] border-[#ffda00]" />
      </TooltipPrimitive.Content>
    </TooltipPrimitive.Portal>
  );
}

export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider };
 - - - - - - - - - - - - 
src/components/ui/alert.tsx

import * as React from "react";
import { cva, type VariantProps } from "class-variance-authority@0.7.1";

import { cn } from "./utils";

const alertVariants = cva(
  "relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",
  {
    variants: {
      variant: {
        default: "bg-card text-card-foreground",
        destructive:
          "text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  },
);

function Alert({
  className,
  variant,
  ...props
}: React.ComponentProps<"div"> & VariantProps<typeof alertVariants>) {
  return (
    <div
      data-slot="alert"
      role="alert"
      className={cn(alertVariants({ variant }), className)}
      {...props}
    />
  );
}

function AlertTitle({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="alert-title"
      className={cn(
        "col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",
        className,
      )}
      {...props}
    />
  );
}

function AlertDescription({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="alert-description"
      className={cn(
        "text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",
        className,
      )}
      {...props}
    />
  );
}

export { Alert, AlertTitle, AlertDescription };
 - - - - - - - - - - - - 
src/components/ui/switch.tsx

"use client";

import * as React from "react";
import * as SwitchPrimitive from "@radix-ui/react-switch@1.1.3";

import { cn } from "./utils";

function Switch({
  className,
  ...props
}: React.ComponentProps<typeof SwitchPrimitive.Root>) {
  return (
    <SwitchPrimitive.Root
      data-slot="switch"
      className={cn(
        "peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
        className,
      )}
      {...props}
    >
      <SwitchPrimitive.Thumb
        data-slot="switch-thumb"
        className={cn(
          "bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0",
        )}
      />
    </SwitchPrimitive.Root>
  );
}

export { Switch };
 - - - - - - - - - - - - 
src/components/ui/calendar.tsx

"use client";

import * as React from "react";
import { ChevronLeft, ChevronRight } from "lucide-react@0.487.0";
import { DayPicker } from "react-day-picker@8.10.1";

import { cn } from "./utils";
import { buttonVariants } from "./button";

function Calendar({
  className,
  classNames,
  showOutsideDays = true,
  ...props
}: React.ComponentProps<typeof DayPicker>) {
  return (
    <DayPicker
      showOutsideDays={showOutsideDays}
      className={cn("p-3", className)}
      classNames={{
        months: "flex flex-col sm:flex-row gap-2",
        month: "flex flex-col gap-4",
        caption: "flex justify-center pt-1 relative items-center w-full",
        caption_label: "text-sm font-medium",
        nav: "flex items-center gap-1",
        nav_button: cn(
          buttonVariants({ variant: "outline" }),
          "size-7 bg-transparent p-0 opacity-50 hover:opacity-100",
        ),
        nav_button_previous: "absolute left-1",
        nav_button_next: "absolute right-1",
        table: "w-full border-collapse space-x-1",
        head_row: "flex",
        head_cell:
          "text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",
        row: "flex w-full mt-2",
        cell: cn(
          "relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-range-end)]:rounded-r-md",
          props.mode === "range"
            ? "[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md"
            : "[&:has([aria-selected])]:rounded-md",
        ),
        day: cn(
          buttonVariants({ variant: "ghost" }),
          "size-8 p-0 font-normal aria-selected:opacity-100",
        ),
        day_range_start:
          "day-range-start aria-selected:bg-primary aria-selected:text-primary-foreground",
        day_range_end:
          "day-range-end aria-selected:bg-primary aria-selected:text-primary-foreground",
        day_selected:
          "bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",
        day_today: "bg-accent text-accent-foreground",
        day_outside:
          "day-outside text-muted-foreground aria-selected:text-muted-foreground",
        day_disabled: "text-muted-foreground opacity-50",
        day_range_middle:
          "aria-selected:bg-accent aria-selected:text-accent-foreground",
        day_hidden: "invisible",
        ...classNames,
      }}
      components={{
        IconLeft: ({ className, ...props }) => (
          <ChevronLeft className={cn("size-4", className)} {...props} />
        ),
        IconRight: ({ className, ...props }) => (
          <ChevronRight className={cn("size-4", className)} {...props} />
        ),
      }}
      {...props}
    />
  );
}

export { Calendar };
 - - - - - - - - - - - - 
src/components/ui/breadcrumb.tsx

import * as React from "react";
import { Slot } from "@radix-ui/react-slot@1.1.2";
import { ChevronRight, MoreHorizontal } from "lucide-react@0.487.0";

import { cn } from "./utils";

function Breadcrumb({ ...props }: React.ComponentProps<"nav">) {
  return <nav aria-label="breadcrumb" data-slot="breadcrumb" {...props} />;
}

function BreadcrumbList({ className, ...props }: React.ComponentProps<"ol">) {
  return (
    <ol
      data-slot="breadcrumb-list"
      className={cn(
        "text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",
        className,
      )}
      {...props}
    />
  );
}

function BreadcrumbItem({ className, ...props }: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="breadcrumb-item"
      className={cn("inline-flex items-center gap-1.5", className)}
      {...props}
    />
  );
}

function BreadcrumbLink({
  asChild,
  className,
  ...props
}: React.ComponentProps<"a"> & {
  asChild?: boolean;
}) {
  const Comp = asChild ? Slot : "a";

  return (
    <Comp
      data-slot="breadcrumb-link"
      className={cn("hover:text-foreground transition-colors", className)}
      {...props}
    />
  );
}

function BreadcrumbPage({ className, ...props }: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="breadcrumb-page"
      role="link"
      aria-disabled="true"
      aria-current="page"
      className={cn("text-foreground font-normal", className)}
      {...props}
    />
  );
}

function BreadcrumbSeparator({
  children,
  className,
  ...props
}: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="breadcrumb-separator"
      role="presentation"
      aria-hidden="true"
      className={cn("[&>svg]:size-3.5", className)}
      {...props}
    >
      {children ?? <ChevronRight />}
    </li>
  );
}

function BreadcrumbEllipsis({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="breadcrumb-ellipsis"
      role="presentation"
      aria-hidden="true"
      className={cn("flex size-9 items-center justify-center", className)}
      {...props}
    >
      <MoreHorizontal className="size-4" />
      <span className="sr-only">More</span>
    </span>
  );
}

export {
  Breadcrumb,
  BreadcrumbList,
  BreadcrumbItem,
  BreadcrumbLink,
  BreadcrumbPage,
  BreadcrumbSeparator,
  BreadcrumbEllipsis,
};
 - - - - - - - - - - - - 
src/components/ui/radio-group.tsx

"use client";

import * as React from "react";
import * as RadioGroupPrimitive from "@radix-ui/react-radio-group@1.2.3";
import { CircleIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function RadioGroup({
  className,
  ...props
}: React.ComponentProps<typeof RadioGroupPrimitive.Root>) {
  return (
    <RadioGroupPrimitive.Root
      data-slot="radio-group"
      className={cn("grid gap-3", className)}
      {...props}
    />
  );
}

function RadioGroupItem({
  className,
  ...props
}: React.ComponentProps<typeof RadioGroupPrimitive.Item>) {
  return (
    <RadioGroupPrimitive.Item
      data-slot="radio-group-item"
      className={cn(
        "border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
        className,
      )}
      {...props}
    >
      <RadioGroupPrimitive.Indicator
        data-slot="radio-group-indicator"
        className="relative flex items-center justify-center"
      >
        <CircleIcon className="fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2" />
      </RadioGroupPrimitive.Indicator>
    </RadioGroupPrimitive.Item>
  );
}

export { RadioGroup, RadioGroupItem };
 - - - - - - - - - - - - 
src/components/ui/command.tsx

"use client";

import * as React from "react";
import { Command as CommandPrimitive } from "cmdk@1.1.1";
import { SearchIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
} from "./dialog";

function Command({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive>) {
  return (
    <CommandPrimitive
      data-slot="command"
      className={cn(
        "bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",
        className,
      )}
      {...props}
    />
  );
}

function CommandDialog({
  title = "Command Palette",
  description = "Search for a command to run...",
  children,
  ...props
}: React.ComponentProps<typeof Dialog> & {
  title?: string;
  description?: string;
}) {
  return (
    <Dialog {...props}>
      <DialogHeader className="sr-only">
        <DialogTitle>{title}</DialogTitle>
        <DialogDescription>{description}</DialogDescription>
      </DialogHeader>
      <DialogContent className="overflow-hidden p-0">
        <Command className="[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5">
          {children}
        </Command>
      </DialogContent>
    </Dialog>
  );
}

function CommandInput({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Input>) {
  return (
    <div
      data-slot="command-input-wrapper"
      className="flex h-9 items-center gap-2 border-b px-3"
    >
      <SearchIcon className="size-4 shrink-0 opacity-50" />
      <CommandPrimitive.Input
        data-slot="command-input"
        className={cn(
          "placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",
          className,
        )}
        {...props}
      />
    </div>
  );
}

function CommandList({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.List>) {
  return (
    <CommandPrimitive.List
      data-slot="command-list"
      className={cn(
        "max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",
        className,
      )}
      {...props}
    />
  );
}

function CommandEmpty({
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Empty>) {
  return (
    <CommandPrimitive.Empty
      data-slot="command-empty"
      className="py-6 text-center text-sm"
      {...props}
    />
  );
}

function CommandGroup({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Group>) {
  return (
    <CommandPrimitive.Group
      data-slot="command-group"
      className={cn(
        "text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",
        className,
      )}
      {...props}
    />
  );
}

function CommandSeparator({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Separator>) {
  return (
    <CommandPrimitive.Separator
      data-slot="command-separator"
      className={cn("bg-border -mx-1 h-px", className)}
      {...props}
    />
  );
}

function CommandItem({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Item>) {
  return (
    <CommandPrimitive.Item
      data-slot="command-item"
      className={cn(
        "data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function CommandShortcut({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="command-shortcut"
      className={cn(
        "text-muted-foreground ml-auto text-xs tracking-widest",
        className,
      )}
      {...props}
    />
  );
}

export {
  Command,
  CommandDialog,
  CommandInput,
  CommandList,
  CommandEmpty,
  CommandGroup,
  CommandItem,
  CommandShortcut,
  CommandSeparator,
};
 - - - - - - - - - - - - 
src/components/ui/toggle-group.tsx

"use client";

import * as React from "react";
import * as ToggleGroupPrimitive from "@radix-ui/react-toggle-group@1.1.2";
import { type VariantProps } from "class-variance-authority@0.7.1";

import { cn } from "./utils";
import { toggleVariants } from "./toggle";

const ToggleGroupContext = React.createContext<
  VariantProps<typeof toggleVariants>
>({
  size: "default",
  variant: "default",
});

function ToggleGroup({
  className,
  variant,
  size,
  children,
  ...props
}: React.ComponentProps<typeof ToggleGroupPrimitive.Root> &
  VariantProps<typeof toggleVariants>) {
  return (
    <ToggleGroupPrimitive.Root
      data-slot="toggle-group"
      data-variant={variant}
      data-size={size}
      className={cn(
        "group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs",
        className,
      )}
      {...props}
    >
      <ToggleGroupContext.Provider value={{ variant, size }}>
        {children}
      </ToggleGroupContext.Provider>
    </ToggleGroupPrimitive.Root>
  );
}

function ToggleGroupItem({
  className,
  children,
  variant,
  size,
  ...props
}: React.ComponentProps<typeof ToggleGroupPrimitive.Item> &
  VariantProps<typeof toggleVariants>) {
  const context = React.useContext(ToggleGroupContext);

  return (
    <ToggleGroupPrimitive.Item
      data-slot="toggle-group-item"
      data-variant={context.variant || variant}
      data-size={context.size || size}
      className={cn(
        toggleVariants({
          variant: context.variant || variant,
          size: context.size || size,
        }),
        "min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",
        className,
      )}
      {...props}
    >
      {children}
    </ToggleGroupPrimitive.Item>
  );
}

export { ToggleGroup, ToggleGroupItem };
 - - - - - - - - - - - - 
src/components/ui/avatar.tsx

"use client";

import * as React from "react";
import * as AvatarPrimitive from "@radix-ui/react-avatar@1.1.3";

import { cn } from "./utils";

function Avatar({
  className,
  ...props
}: React.ComponentProps<typeof AvatarPrimitive.Root>) {
  return (
    <AvatarPrimitive.Root
      data-slot="avatar"
      className={cn(
        "relative flex size-10 shrink-0 overflow-hidden rounded-full",
        className,
      )}
      {...props}
    />
  );
}

function AvatarImage({
  className,
  ...props
}: React.ComponentProps<typeof AvatarPrimitive.Image>) {
  return (
    <AvatarPrimitive.Image
      data-slot="avatar-image"
      className={cn("aspect-square size-full", className)}
      {...props}
    />
  );
}

function AvatarFallback({
  className,
  ...props
}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {
  return (
    <AvatarPrimitive.Fallback
      data-slot="avatar-fallback"
      className={cn(
        "bg-muted flex size-full items-center justify-center rounded-full",
        className,
      )}
      {...props}
    />
  );
}

export { Avatar, AvatarImage, AvatarFallback };
 - - - - - - - - - - - - 
src/components/ui/menubar.tsx

"use client";

import * as React from "react";
import * as MenubarPrimitive from "@radix-ui/react-menubar@1.1.6";
import { CheckIcon, ChevronRightIcon, CircleIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function Menubar({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Root>) {
  return (
    <MenubarPrimitive.Root
      data-slot="menubar"
      className={cn(
        "bg-background flex h-9 items-center gap-1 rounded-md border p-1 shadow-xs",
        className,
      )}
      {...props}
    />
  );
}

function MenubarMenu({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {
  return <MenubarPrimitive.Menu data-slot="menubar-menu" {...props} />;
}

function MenubarGroup({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Group>) {
  return <MenubarPrimitive.Group data-slot="menubar-group" {...props} />;
}

function MenubarPortal({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {
  return <MenubarPrimitive.Portal data-slot="menubar-portal" {...props} />;
}

function MenubarRadioGroup({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {
  return (
    <MenubarPrimitive.RadioGroup data-slot="menubar-radio-group" {...props} />
  );
}

function MenubarTrigger({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Trigger>) {
  return (
    <MenubarPrimitive.Trigger
      data-slot="menubar-trigger"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex items-center rounded-sm px-2 py-1 text-sm font-medium outline-hidden select-none",
        className,
      )}
      {...props}
    />
  );
}

function MenubarContent({
  className,
  align = "start",
  alignOffset = -4,
  sideOffset = 8,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Content>) {
  return (
    <MenubarPortal>
      <MenubarPrimitive.Content
        data-slot="menubar-content"
        align={align}
        alignOffset={alignOffset}
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[12rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-md",
          className,
        )}
        {...props}
      />
    </MenubarPortal>
  );
}

function MenubarItem({
  className,
  inset,
  variant = "default",
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Item> & {
  inset?: boolean;
  variant?: "default" | "destructive";
}) {
  return (
    <MenubarPrimitive.Item
      data-slot="menubar-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function MenubarCheckboxItem({
  className,
  children,
  checked,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.CheckboxItem>) {
  return (
    <MenubarPrimitive.CheckboxItem
      data-slot="menubar-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-xs py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      checked={checked}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <MenubarPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </MenubarPrimitive.ItemIndicator>
      </span>
      {children}
    </MenubarPrimitive.CheckboxItem>
  );
}

function MenubarRadioItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.RadioItem>) {
  return (
    <MenubarPrimitive.RadioItem
      data-slot="menubar-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-xs py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <MenubarPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </MenubarPrimitive.ItemIndicator>
      </span>
      {children}
    </MenubarPrimitive.RadioItem>
  );
}

function MenubarLabel({
  className,
  inset,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Label> & {
  inset?: boolean;
}) {
  return (
    <MenubarPrimitive.Label
      data-slot="menubar-label"
      data-inset={inset}
      className={cn(
        "px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",
        className,
      )}
      {...props}
    />
  );
}

function MenubarSeparator({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Separator>) {
  return (
    <MenubarPrimitive.Separator
      data-slot="menubar-separator"
      className={cn("bg-border -mx-1 my-1 h-px", className)}
      {...props}
    />
  );
}

function MenubarShortcut({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="menubar-shortcut"
      className={cn(
        "text-muted-foreground ml-auto text-xs tracking-widest",
        className,
      )}
      {...props}
    />
  );
}

function MenubarSub({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {
  return <MenubarPrimitive.Sub data-slot="menubar-sub" {...props} />;
}

function MenubarSubTrigger({
  className,
  inset,
  children,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.SubTrigger> & {
  inset?: boolean;
}) {
  return (
    <MenubarPrimitive.SubTrigger
      data-slot="menubar-sub-trigger"
      data-inset={inset}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-none select-none data-[inset]:pl-8",
        className,
      )}
      {...props}
    >
      {children}
      <ChevronRightIcon className="ml-auto h-4 w-4" />
    </MenubarPrimitive.SubTrigger>
  );
}

function MenubarSubContent({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.SubContent>) {
  return (
    <MenubarPrimitive.SubContent
      data-slot="menubar-sub-content"
      className={cn(
        "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",
        className,
      )}
      {...props}
    />
  );
}

export {
  Menubar,
  MenubarPortal,
  MenubarMenu,
  MenubarTrigger,
  MenubarContent,
  MenubarGroup,
  MenubarSeparator,
  MenubarLabel,
  MenubarItem,
  MenubarShortcut,
  MenubarCheckboxItem,
  MenubarRadioGroup,
  MenubarRadioItem,
  MenubarSub,
  MenubarSubTrigger,
  MenubarSubContent,
};
 - - - - - - - - - - - - 
src/components/ui/dialog.tsx

"use client";

import * as React from "react";
import * as DialogPrimitive from "@radix-ui/react-dialog@1.1.6";
import { XIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function Dialog({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Root>) {
  return <DialogPrimitive.Root data-slot="dialog" {...props} />;
}

function DialogTrigger({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {
  return <DialogPrimitive.Trigger data-slot="dialog-trigger" {...props} />;
}

function DialogPortal({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Portal>) {
  return <DialogPrimitive.Portal data-slot="dialog-portal" {...props} />;
}

function DialogClose({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Close>) {
  return <DialogPrimitive.Close data-slot="dialog-close" {...props} />;
}

const DialogOverlay = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>
>(({ className, ...props }, ref) => {
  return (
    <DialogPrimitive.Overlay
      ref={ref}
      data-slot="dialog-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className,
      )}
      {...props}
    />
  );
});
DialogOverlay.displayName = DialogPrimitive.Overlay.displayName;

function DialogContent({
  className,
  children,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Content>) {
  return (
    <DialogPortal data-slot="dialog-portal">
      <DialogOverlay />
      <DialogPrimitive.Content
        data-slot="dialog-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",
          className,
        )}
        {...props}
      >
        {children}
        <DialogPrimitive.Close className="ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4">
          <XIcon />
          <span className="sr-only">Close</span>
        </DialogPrimitive.Close>
      </DialogPrimitive.Content>
    </DialogPortal>
  );
}

function DialogHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="dialog-header"
      className={cn("flex flex-col gap-2 text-center sm:text-left", className)}
      {...props}
    />
  );
}

function DialogFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="dialog-footer"
      className={cn(
        "flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",
        className,
      )}
      {...props}
    />
  );
}

function DialogTitle({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Title>) {
  return (
    <DialogPrimitive.Title
      data-slot="dialog-title"
      className={cn("text-lg leading-none font-semibold", className)}
      {...props}
    />
  );
}

function DialogDescription({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Description>) {
  return (
    <DialogPrimitive.Description
      data-slot="dialog-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  );
}

export {
  Dialog,
  DialogClose,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogOverlay,
  DialogPortal,
  DialogTitle,
  DialogTrigger,
};
 - - - - - - - - - - - - 
src/components/ui/badge.tsx

import * as React from "react";
import { Slot } from "@radix-ui/react-slot@1.1.2";
import { cva, type VariantProps } from "class-variance-authority@0.7.1";

import { cn } from "./utils";

const badgeVariants = cva(
  "inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",
  {
    variants: {
      variant: {
        default:
          "border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",
        secondary:
          "border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",
        destructive:
          "border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  },
);

function Badge({
  className,
  variant,
  asChild = false,
  ...props
}: React.ComponentProps<"span"> &
  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {
  const Comp = asChild ? Slot : "span";

  return (
    <Comp
      data-slot="badge"
      className={cn(badgeVariants({ variant }), className)}
      {...props}
    />
  );
}

export { Badge, badgeVariants };
 - - - - - - - - - - - - 
src/components/ui/sidebar.tsx

"use client";

import * as React from "react";
import { Slot } from "@radix-ui/react-slot@1.1.2";
import { VariantProps, cva } from "class-variance-authority@0.7.1";
import { PanelLeftIcon } from "lucide-react@0.487.0";

import { useIsMobile } from "./use-mobile";
import { cn } from "./utils";
import { Button } from "./button";
import { Input } from "./input";
import { Separator } from "./separator";
import {
  Sheet,
  SheetContent,
  SheetDescription,
  SheetHeader,
  SheetTitle,
} from "./sheet";
import { Skeleton } from "./skeleton";
import {
  Tooltip,
  TooltipContent,
  TooltipProvider,
  TooltipTrigger,
} from "./tooltip";

const SIDEBAR_COOKIE_NAME = "sidebar_state";
const SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7;
const SIDEBAR_WIDTH = "16rem";
const SIDEBAR_WIDTH_MOBILE = "18rem";
const SIDEBAR_WIDTH_ICON = "3rem";
const SIDEBAR_KEYBOARD_SHORTCUT = "b";

type SidebarContextProps = {
  state: "expanded" | "collapsed";
  open: boolean;
  setOpen: (open: boolean) => void;
  openMobile: boolean;
  setOpenMobile: (open: boolean) => void;
  isMobile: boolean;
  toggleSidebar: () => void;
};

const SidebarContext = React.createContext<SidebarContextProps | null>(null);

function useSidebar() {
  const context = React.useContext(SidebarContext);
  if (!context) {
    throw new Error("useSidebar must be used within a SidebarProvider.");
  }

  return context;
}

function SidebarProvider({
  defaultOpen = true,
  open: openProp,
  onOpenChange: setOpenProp,
  className,
  style,
  children,
  ...props
}: React.ComponentProps<"div"> & {
  defaultOpen?: boolean;
  open?: boolean;
  onOpenChange?: (open: boolean) => void;
}) {
  const isMobile = useIsMobile();
  const [openMobile, setOpenMobile] = React.useState(false);

  // This is the internal state of the sidebar.
  // We use openProp and setOpenProp for control from outside the component.
  const [_open, _setOpen] = React.useState(defaultOpen);
  const open = openProp ?? _open;
  const setOpen = React.useCallback(
    (value: boolean | ((value: boolean) => boolean)) => {
      const openState = typeof value === "function" ? value(open) : value;
      if (setOpenProp) {
        setOpenProp(openState);
      } else {
        _setOpen(openState);
      }

      // This sets the cookie to keep the sidebar state.
      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`;
    },
    [setOpenProp, open],
  );

  // Helper to toggle the sidebar.
  const toggleSidebar = React.useCallback(() => {
    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open);
  }, [isMobile, setOpen, setOpenMobile]);

  // Adds a keyboard shortcut to toggle the sidebar.
  React.useEffect(() => {
    const handleKeyDown = (event: KeyboardEvent) => {
      if (
        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&
        (event.metaKey || event.ctrlKey)
      ) {
        event.preventDefault();
        toggleSidebar();
      }
    };

    window.addEventListener("keydown", handleKeyDown);
    return () => window.removeEventListener("keydown", handleKeyDown);
  }, [toggleSidebar]);

  // We add a state so that we can do data-state="expanded" or "collapsed".
  // This makes it easier to style the sidebar with Tailwind classes.
  const state = open ? "expanded" : "collapsed";

  const contextValue = React.useMemo<SidebarContextProps>(
    () => ({
      state,
      open,
      setOpen,
      isMobile,
      openMobile,
      setOpenMobile,
      toggleSidebar,
    }),
    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar],
  );

  return (
    <SidebarContext.Provider value={contextValue}>
      <TooltipProvider delayDuration={0}>
        <div
          data-slot="sidebar-wrapper"
          style={
            {
              "--sidebar-width": SIDEBAR_WIDTH,
              "--sidebar-width-icon": SIDEBAR_WIDTH_ICON,
              ...style,
            } as React.CSSProperties
          }
          className={cn(
            "group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",
            className,
          )}
          {...props}
        >
          {children}
        </div>
      </TooltipProvider>
    </SidebarContext.Provider>
  );
}

function Sidebar({
  side = "left",
  variant = "sidebar",
  collapsible = "offcanvas",
  className,
  children,
  ...props
}: React.ComponentProps<"div"> & {
  side?: "left" | "right";
  variant?: "sidebar" | "floating" | "inset";
  collapsible?: "offcanvas" | "icon" | "none";
}) {
  const { isMobile, state, openMobile, setOpenMobile } = useSidebar();

  if (collapsible === "none") {
    return (
      <div
        data-slot="sidebar"
        className={cn(
          "bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",
          className,
        )}
        {...props}
      >
        {children}
      </div>
    );
  }

  if (isMobile) {
    return (
      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>
        <SheetContent
          data-sidebar="sidebar"
          data-slot="sidebar"
          data-mobile="true"
          className="bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden"
          style={
            {
              "--sidebar-width": SIDEBAR_WIDTH_MOBILE,
            } as React.CSSProperties
          }
          side={side}
        >
          <SheetHeader className="sr-only">
            <SheetTitle>Sidebar</SheetTitle>
            <SheetDescription>Displays the mobile sidebar.</SheetDescription>
          </SheetHeader>
          <div className="flex h-full w-full flex-col">{children}</div>
        </SheetContent>
      </Sheet>
    );
  }

  return (
    <div
      className="group peer text-sidebar-foreground hidden md:block"
      data-state={state}
      data-collapsible={state === "collapsed" ? collapsible : ""}
      data-variant={variant}
      data-side={side}
      data-slot="sidebar"
    >
      {/* This is what handles the sidebar gap on desktop */}
      <div
        data-slot="sidebar-gap"
        className={cn(
          "relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear",
          "group-data-[collapsible=offcanvas]:w-0",
          "group-data-[side=right]:rotate-180",
          variant === "floating" || variant === "inset"
            ? "group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]"
            : "group-data-[collapsible=icon]:w-(--sidebar-width-icon)",
        )}
      />
      <div
        data-slot="sidebar-container"
        className={cn(
          "fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",
          side === "left"
            ? "left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]"
            : "right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",
          // Adjust the padding for floating and inset variants.
          variant === "floating" || variant === "inset"
            ? "p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]"
            : "group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",
          className,
        )}
        {...props}
      >
        <div
          data-sidebar="sidebar"
          data-slot="sidebar-inner"
          className="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"
        >
          {children}
        </div>
      </div>
    </div>
  );
}

function SidebarTrigger({
  className,
  onClick,
  ...props
}: React.ComponentProps<typeof Button>) {
  const { toggleSidebar } = useSidebar();

  return (
    <Button
      data-sidebar="trigger"
      data-slot="sidebar-trigger"
      variant="ghost"
      size="icon"
      className={cn("size-7", className)}
      onClick={(event) => {
        onClick?.(event);
        toggleSidebar();
      }}
      {...props}
    >
      <PanelLeftIcon />
      <span className="sr-only">Toggle Sidebar</span>
    </Button>
  );
}

function SidebarRail({ className, ...props }: React.ComponentProps<"button">) {
  const { toggleSidebar } = useSidebar();

  return (
    <button
      data-sidebar="rail"
      data-slot="sidebar-rail"
      aria-label="Toggle Sidebar"
      tabIndex={-1}
      onClick={toggleSidebar}
      title="Toggle Sidebar"
      className={cn(
        "hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex",
        "in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize",
        "[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize",
        "hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full",
        "[[data-side=left][data-collapsible=offcanvas]_&]:-right-2",
        "[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",
        className,
      )}
      {...props}
    />
  );
}

function SidebarInset({ className, ...props }: React.ComponentProps<"main">) {
  return (
    <main
      data-slot="sidebar-inset"
      className={cn(
        "bg-background relative flex w-full flex-1 flex-col",
        "md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",
        className,
      )}
      {...props}
    />
  );
}

function SidebarInput({
  className,
  ...props
}: React.ComponentProps<typeof Input>) {
  return (
    <Input
      data-slot="sidebar-input"
      data-sidebar="input"
      className={cn("bg-background h-8 w-full shadow-none", className)}
      {...props}
    />
  );
}

function SidebarHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-header"
      data-sidebar="header"
      className={cn("flex flex-col gap-2 p-2", className)}
      {...props}
    />
  );
}

function SidebarFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-footer"
      data-sidebar="footer"
      className={cn("flex flex-col gap-2 p-2", className)}
      {...props}
    />
  );
}

function SidebarSeparator({
  className,
  ...props
}: React.ComponentProps<typeof Separator>) {
  return (
    <Separator
      data-slot="sidebar-separator"
      data-sidebar="separator"
      className={cn("bg-sidebar-border mx-2 w-auto", className)}
      {...props}
    />
  );
}

function SidebarContent({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-content"
      data-sidebar="content"
      className={cn(
        "flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",
        className,
      )}
      {...props}
    />
  );
}

function SidebarGroup({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-group"
      data-sidebar="group"
      className={cn("relative flex w-full min-w-0 flex-col p-2", className)}
      {...props}
    />
  );
}

function SidebarGroupLabel({
  className,
  asChild = false,
  ...props
}: React.ComponentProps<"div"> & { asChild?: boolean }) {
  const Comp = asChild ? Slot : "div";

  return (
    <Comp
      data-slot="sidebar-group-label"
      data-sidebar="group-label"
      className={cn(
        "text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        "group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",
        className,
      )}
      {...props}
    />
  );
}

function SidebarGroupAction({
  className,
  asChild = false,
  ...props
}: React.ComponentProps<"button"> & { asChild?: boolean }) {
  const Comp = asChild ? Slot : "button";

  return (
    <Comp
      data-slot="sidebar-group-action"
      data-sidebar="group-action"
      className={cn(
        "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        // Increases the hit area of the button on mobile.
        "after:absolute after:-inset-2 md:after:hidden",
        "group-data-[collapsible=icon]:hidden",
        className,
      )}
      {...props}
    />
  );
}

function SidebarGroupContent({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-group-content"
      data-sidebar="group-content"
      className={cn("w-full text-sm", className)}
      {...props}
    />
  );
}

function SidebarMenu({ className, ...props }: React.ComponentProps<"ul">) {
  return (
    <ul
      data-slot="sidebar-menu"
      data-sidebar="menu"
      className={cn("flex w-full min-w-0 flex-col gap-1", className)}
      {...props}
    />
  );
}

function SidebarMenuItem({ className, ...props }: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="sidebar-menu-item"
      data-sidebar="menu-item"
      className={cn("group/menu-item relative", className)}
      {...props}
    />
  );
}

const sidebarMenuButtonVariants = cva(
  "peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",
  {
    variants: {
      variant: {
        default: "hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",
        outline:
          "bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]",
      },
      size: {
        default: "h-8 text-sm",
        sm: "h-7 text-xs",
        lg: "h-12 text-sm group-data-[collapsible=icon]:p-0!",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  },
);

function SidebarMenuButton({
  asChild = false,
  isActive = false,
  variant = "default",
  size = "default",
  tooltip,
  className,
  ...props
}: React.ComponentProps<"button"> & {
  asChild?: boolean;
  isActive?: boolean;
  tooltip?: string | React.ComponentProps<typeof TooltipContent>;
} & VariantProps<typeof sidebarMenuButtonVariants>) {
  const Comp = asChild ? Slot : "button";
  const { isMobile, state } = useSidebar();

  const button = (
    <Comp
      data-slot="sidebar-menu-button"
      data-sidebar="menu-button"
      data-size={size}
      data-active={isActive}
      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}
      {...props}
    />
  );

  if (!tooltip) {
    return button;
  }

  if (typeof tooltip === "string") {
    tooltip = {
      children: tooltip,
    };
  }

  return (
    <Tooltip>
      <TooltipTrigger asChild>{button}</TooltipTrigger>
      <TooltipContent
        side="right"
        align="center"
        hidden={state !== "collapsed" || isMobile}
        {...tooltip}
      />
    </Tooltip>
  );
}

function SidebarMenuAction({
  className,
  asChild = false,
  showOnHover = false,
  ...props
}: React.ComponentProps<"button"> & {
  asChild?: boolean;
  showOnHover?: boolean;
}) {
  const Comp = asChild ? Slot : "button";

  return (
    <Comp
      data-slot="sidebar-menu-action"
      data-sidebar="menu-action"
      className={cn(
        "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        // Increases the hit area of the button on mobile.
        "after:absolute after:-inset-2 md:after:hidden",
        "peer-data-[size=sm]/menu-button:top-1",
        "peer-data-[size=default]/menu-button:top-1.5",
        "peer-data-[size=lg]/menu-button:top-2.5",
        "group-data-[collapsible=icon]:hidden",
        showOnHover &&
          "peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0",
        className,
      )}
      {...props}
    />
  );
}

function SidebarMenuBadge({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-menu-badge"
      data-sidebar="menu-badge"
      className={cn(
        "text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none",
        "peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground",
        "peer-data-[size=sm]/menu-button:top-1",
        "peer-data-[size=default]/menu-button:top-1.5",
        "peer-data-[size=lg]/menu-button:top-2.5",
        "group-data-[collapsible=icon]:hidden",
        className,
      )}
      {...props}
    />
  );
}

function SidebarMenuSkeleton({
  className,
  showIcon = false,
  ...props
}: React.ComponentProps<"div"> & {
  showIcon?: boolean;
}) {
  // Random width between 50 to 90%.
  const width = React.useMemo(() => {
    return `${Math.floor(Math.random() * 40) + 50}%`;
  }, []);

  return (
    <div
      data-slot="sidebar-menu-skeleton"
      data-sidebar="menu-skeleton"
      className={cn("flex h-8 items-center gap-2 rounded-md px-2", className)}
      {...props}
    >
      {showIcon && (
        <Skeleton
          className="size-4 rounded-md"
          data-sidebar="menu-skeleton-icon"
        />
      )}
      <Skeleton
        className="h-4 max-w-(--skeleton-width) flex-1"
        data-sidebar="menu-skeleton-text"
        style={
          {
            "--skeleton-width": width,
          } as React.CSSProperties
        }
      />
    </div>
  );
}

function SidebarMenuSub({ className, ...props }: React.ComponentProps<"ul">) {
  return (
    <ul
      data-slot="sidebar-menu-sub"
      data-sidebar="menu-sub"
      className={cn(
        "border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5",
        "group-data-[collapsible=icon]:hidden",
        className,
      )}
      {...props}
    />
  );
}

function SidebarMenuSubItem({
  className,
  ...props
}: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="sidebar-menu-sub-item"
      data-sidebar="menu-sub-item"
      className={cn("group/menu-sub-item relative", className)}
      {...props}
    />
  );
}

function SidebarMenuSubButton({
  asChild = false,
  size = "md",
  isActive = false,
  className,
  ...props
}: React.ComponentProps<"a"> & {
  asChild?: boolean;
  size?: "sm" | "md";
  isActive?: boolean;
}) {
  const Comp = asChild ? Slot : "a";

  return (
    <Comp
      data-slot="sidebar-menu-sub-button"
      data-sidebar="menu-sub-button"
      data-size={size}
      data-active={isActive}
      className={cn(
        "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",
        "data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",
        size === "sm" && "text-xs",
        size === "md" && "text-sm",
        "group-data-[collapsible=icon]:hidden",
        className,
      )}
      {...props}
    />
  );
}

export {
  Sidebar,
  SidebarContent,
  SidebarFooter,
  SidebarGroup,
  SidebarGroupAction,
  SidebarGroupContent,
  SidebarGroupLabel,
  SidebarHeader,
  SidebarInput,
  SidebarInset,
  SidebarMenu,
  SidebarMenuAction,
  SidebarMenuBadge,
  SidebarMenuButton,
  SidebarMenuItem,
  SidebarMenuSkeleton,
  SidebarMenuSub,
  SidebarMenuSubButton,
  SidebarMenuSubItem,
  SidebarProvider,
  SidebarRail,
  SidebarSeparator,
  SidebarTrigger,
  useSidebar,
};
 - - - - - - - - - - - - 
src/components/ui/table.tsx

"use client";

import * as React from "react";

import { cn } from "./utils";

function Table({ className, ...props }: React.ComponentProps<"table">) {
  return (
    <div
      data-slot="table-container"
      className="relative w-full overflow-x-auto"
    >
      <table
        data-slot="table"
        className={cn("w-full caption-bottom text-sm", className)}
        {...props}
      />
    </div>
  );
}

function TableHeader({ className, ...props }: React.ComponentProps<"thead">) {
  return (
    <thead
      data-slot="table-header"
      className={cn("[&_tr]:border-b", className)}
      {...props}
    />
  );
}

function TableBody({ className, ...props }: React.ComponentProps<"tbody">) {
  return (
    <tbody
      data-slot="table-body"
      className={cn("[&_tr:last-child]:border-0", className)}
      {...props}
    />
  );
}

function TableFooter({ className, ...props }: React.ComponentProps<"tfoot">) {
  return (
    <tfoot
      data-slot="table-footer"
      className={cn(
        "bg-muted/50 border-t font-medium [&>tr]:last:border-b-0",
        className,
      )}
      {...props}
    />
  );
}

function TableRow({ className, ...props }: React.ComponentProps<"tr">) {
  return (
    <tr
      data-slot="table-row"
      className={cn(
        "hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",
        className,
      )}
      {...props}
    />
  );
}

function TableHead({ className, ...props }: React.ComponentProps<"th">) {
  return (
    <th
      data-slot="table-head"
      className={cn(
        "text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
        className,
      )}
      {...props}
    />
  );
}

function TableCell({ className, ...props }: React.ComponentProps<"td">) {
  return (
    <td
      data-slot="table-cell"
      className={cn(
        "p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
        className,
      )}
      {...props}
    />
  );
}

function TableCaption({
  className,
  ...props
}: React.ComponentProps<"caption">) {
  return (
    <caption
      data-slot="table-caption"
      className={cn("text-muted-foreground mt-4 text-sm", className)}
      {...props}
    />
  );
}

export {
  Table,
  TableHeader,
  TableBody,
  TableFooter,
  TableHead,
  TableRow,
  TableCell,
  TableCaption,
};
 - - - - - - - - - - - - 
src/components/ui/separator.tsx

"use client";

import * as React from "react";
import * as SeparatorPrimitive from "@radix-ui/react-separator@1.1.2";

import { cn } from "./utils";

function Separator({
  className,
  orientation = "horizontal",
  decorative = true,
  ...props
}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {
  return (
    <SeparatorPrimitive.Root
      data-slot="separator-root"
      decorative={decorative}
      orientation={orientation}
      className={cn(
        "bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",
        className,
      )}
      {...props}
    />
  );
}

export { Separator };
 - - - - - - - - - - - - 
src/components/ui/button.tsx

import * as React from "react";
import { Slot } from "@radix-ui/react-slot@1.1.2";
import { cva, type VariantProps } from "class-variance-authority@0.7.1";

import { cn } from "./utils";

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive:
          "bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",
        secondary:
          "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost:
          "hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-9 px-4 py-2 has-[>svg]:px-3",
        sm: "h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",
        lg: "h-10 rounded-md px-6 has-[>svg]:px-4",
        icon: "size-9 rounded-md",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  },
);

const Button = React.forwardRef<
  HTMLButtonElement,
  React.ComponentProps<"button"> &
    VariantProps<typeof buttonVariants> & {
      asChild?: boolean;
    }
>(({ className, variant, size, asChild = false, ...props }, ref) => {
  const Comp = asChild ? Slot : "button";

  return (
    <Comp
      data-slot="button"
      className={cn(buttonVariants({ variant, size, className }))}
      ref={ref}
      {...props}
    />
  );
});

Button.displayName = "Button";

export { Button, buttonVariants };
 - - - - - - - - - - - - 
src/components/ui/toggle.tsx

"use client";

import * as React from "react";
import * as TogglePrimitive from "@radix-ui/react-toggle@1.1.2";
import { cva, type VariantProps } from "class-variance-authority@0.7.1";

import { cn } from "./utils";

const toggleVariants = cva(
  "inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",
  {
    variants: {
      variant: {
        default: "bg-transparent",
        outline:
          "border border-input bg-transparent hover:bg-accent hover:text-accent-foreground",
      },
      size: {
        default: "h-9 px-2 min-w-9",
        sm: "h-8 px-1.5 min-w-8",
        lg: "h-10 px-2.5 min-w-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  },
);

function Toggle({
  className,
  variant,
  size,
  ...props
}: React.ComponentProps<typeof TogglePrimitive.Root> &
  VariantProps<typeof toggleVariants>) {
  return (
    <TogglePrimitive.Root
      data-slot="toggle"
      className={cn(toggleVariants({ variant, size, className }))}
      {...props}
    />
  );
}

export { Toggle, toggleVariants };
 - - - - - - - - - - - - 
src/components/ui/checkbox.tsx

"use client";

import * as React from "react";
import * as CheckboxPrimitive from "@radix-ui/react-checkbox@1.1.4";
import { CheckIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function Checkbox({
  className,
  ...props
}: React.ComponentProps<typeof CheckboxPrimitive.Root>) {
  return (
    <CheckboxPrimitive.Root
      data-slot="checkbox"
      className={cn(
        "peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
        className,
      )}
      {...props}
    >
      <CheckboxPrimitive.Indicator
        data-slot="checkbox-indicator"
        className="flex items-center justify-center text-current transition-none"
      >
        <CheckIcon className="size-3.5" />
      </CheckboxPrimitive.Indicator>
    </CheckboxPrimitive.Root>
  );
}

export { Checkbox };
 - - - - - - - - - - - - 
src/components/ui/collapsible.tsx

"use client";

import * as CollapsiblePrimitive from "@radix-ui/react-collapsible@1.1.3";

function Collapsible({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.Root>) {
  return <CollapsiblePrimitive.Root data-slot="collapsible" {...props} />;
}

function CollapsibleTrigger({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleTrigger>) {
  return (
    <CollapsiblePrimitive.CollapsibleTrigger
      data-slot="collapsible-trigger"
      {...props}
    />
  );
}

function CollapsibleContent({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleContent>) {
  return (
    <CollapsiblePrimitive.CollapsibleContent
      data-slot="collapsible-content"
      {...props}
    />
  );
}

export { Collapsible, CollapsibleTrigger, CollapsibleContent };
 - - - - - - - - - - - - 
src/components/ui/dropdown-menu.tsx

"use client";

import * as React from "react";
import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu@2.1.6";
import { CheckIcon, ChevronRightIcon, CircleIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function DropdownMenu({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {
  return <DropdownMenuPrimitive.Root data-slot="dropdown-menu" {...props} />;
}

function DropdownMenuPortal({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {
  return (
    <DropdownMenuPrimitive.Portal data-slot="dropdown-menu-portal" {...props} />
  );
}

function DropdownMenuTrigger({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {
  return (
    <DropdownMenuPrimitive.Trigger
      data-slot="dropdown-menu-trigger"
      {...props}
    />
  );
}

function DropdownMenuContent({
  className,
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {
  return (
    <DropdownMenuPrimitive.Portal>
      <DropdownMenuPrimitive.Content
        data-slot="dropdown-menu-content"
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",
          className,
        )}
        {...props}
      />
    </DropdownMenuPrimitive.Portal>
  );
}

function DropdownMenuGroup({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {
  return (
    <DropdownMenuPrimitive.Group data-slot="dropdown-menu-group" {...props} />
  );
}

function DropdownMenuItem({
  className,
  inset,
  variant = "default",
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {
  inset?: boolean;
  variant?: "default" | "destructive";
}) {
  return (
    <DropdownMenuPrimitive.Item
      data-slot="dropdown-menu-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function DropdownMenuCheckboxItem({
  className,
  children,
  checked,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {
  return (
    <DropdownMenuPrimitive.CheckboxItem
      data-slot="dropdown-menu-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      checked={checked}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.CheckboxItem>
  );
}

function DropdownMenuRadioGroup({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {
  return (
    <DropdownMenuPrimitive.RadioGroup
      data-slot="dropdown-menu-radio-group"
      {...props}
    />
  );
}

function DropdownMenuRadioItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {
  return (
    <DropdownMenuPrimitive.RadioItem
      data-slot="dropdown-menu-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.RadioItem>
  );
}

function DropdownMenuLabel({
  className,
  inset,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {
  inset?: boolean;
}) {
  return (
    <DropdownMenuPrimitive.Label
      data-slot="dropdown-menu-label"
      data-inset={inset}
      className={cn(
        "px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",
        className,
      )}
      {...props}
    />
  );
}

function DropdownMenuSeparator({
  className,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {
  return (
    <DropdownMenuPrimitive.Separator
      data-slot="dropdown-menu-separator"
      className={cn("bg-border -mx-1 my-1 h-px", className)}
      {...props}
    />
  );
}

function DropdownMenuShortcut({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="dropdown-menu-shortcut"
      className={cn(
        "text-muted-foreground ml-auto text-xs tracking-widest",
        className,
      )}
      {...props}
    />
  );
}

function DropdownMenuSub({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {
  return <DropdownMenuPrimitive.Sub data-slot="dropdown-menu-sub" {...props} />;
}

function DropdownMenuSubTrigger({
  className,
  inset,
  children,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {
  inset?: boolean;
}) {
  return (
    <DropdownMenuPrimitive.SubTrigger
      data-slot="dropdown-menu-sub-trigger"
      data-inset={inset}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8",
        className,
      )}
      {...props}
    >
      {children}
      <ChevronRightIcon className="ml-auto size-4" />
    </DropdownMenuPrimitive.SubTrigger>
  );
}

function DropdownMenuSubContent({
  className,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {
  return (
    <DropdownMenuPrimitive.SubContent
      data-slot="dropdown-menu-sub-content"
      className={cn(
        "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",
        className,
      )}
      {...props}
    />
  );
}

export {
  DropdownMenu,
  DropdownMenuPortal,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuGroup,
  DropdownMenuLabel,
  DropdownMenuItem,
  DropdownMenuCheckboxItem,
  DropdownMenuRadioGroup,
  DropdownMenuRadioItem,
  DropdownMenuSeparator,
  DropdownMenuShortcut,
  DropdownMenuSub,
  DropdownMenuSubTrigger,
  DropdownMenuSubContent,
};
 - - - - - - - - - - - - 
src/components/ui/select.tsx

"use client";

import * as React from "react";
import * as SelectPrimitive from "@radix-ui/react-select@2.1.6";
import {
  CheckIcon,
  ChevronDownIcon,
  ChevronUpIcon,
} from "lucide-react@0.487.0";

import { cn } from "./utils";

function Select({
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Root>) {
  return <SelectPrimitive.Root data-slot="select" {...props} />;
}

function SelectGroup({
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Group>) {
  return <SelectPrimitive.Group data-slot="select-group" {...props} />;
}

function SelectValue({
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Value>) {
  return <SelectPrimitive.Value data-slot="select-value" {...props} />;
}

function SelectTrigger({
  className,
  size = "default",
  children,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {
  size?: "sm" | "default";
}) {
  return (
    <SelectPrimitive.Trigger
      data-slot="select-trigger"
      data-size={size}
      className={cn(
        "border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      {children}
      <SelectPrimitive.Icon asChild>
        <ChevronDownIcon className="size-4 opacity-50" />
      </SelectPrimitive.Icon>
    </SelectPrimitive.Trigger>
  );
}

function SelectContent({
  className,
  children,
  position = "popper",
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Content>) {
  return (
    <SelectPrimitive.Portal>
      <SelectPrimitive.Content
        data-slot="select-content"
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",
          position === "popper" &&
            "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
          className,
        )}
        position={position}
        {...props}
      >
        <SelectScrollUpButton />
        <SelectPrimitive.Viewport
          className={cn(
            "p-1",
            position === "popper" &&
              "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1",
          )}
        >
          {children}
        </SelectPrimitive.Viewport>
        <SelectScrollDownButton />
      </SelectPrimitive.Content>
    </SelectPrimitive.Portal>
  );
}

function SelectLabel({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Label>) {
  return (
    <SelectPrimitive.Label
      data-slot="select-label"
      className={cn("text-muted-foreground px-2 py-1.5 text-xs", className)}
      {...props}
    />
  );
}

function SelectItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Item>) {
  return (
    <SelectPrimitive.Item
      data-slot="select-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",
        className,
      )}
      {...props}
    >
      <span className="absolute right-2 flex size-3.5 items-center justify-center">
        <SelectPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </SelectPrimitive.ItemIndicator>
      </span>
      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
    </SelectPrimitive.Item>
  );
}

function SelectSeparator({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Separator>) {
  return (
    <SelectPrimitive.Separator
      data-slot="select-separator"
      className={cn("bg-border pointer-events-none -mx-1 my-1 h-px", className)}
      {...props}
    />
  );
}

function SelectScrollUpButton({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {
  return (
    <SelectPrimitive.ScrollUpButton
      data-slot="select-scroll-up-button"
      className={cn(
        "flex cursor-default items-center justify-center py-1",
        className,
      )}
      {...props}
    >
      <ChevronUpIcon className="size-4" />
    </SelectPrimitive.ScrollUpButton>
  );
}

function SelectScrollDownButton({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {
  return (
    <SelectPrimitive.ScrollDownButton
      data-slot="select-scroll-down-button"
      className={cn(
        "flex cursor-default items-center justify-center py-1",
        className,
      )}
      {...props}
    >
      <ChevronDownIcon className="size-4" />
    </SelectPrimitive.ScrollDownButton>
  );
}

export {
  Select,
  SelectContent,
  SelectGroup,
  SelectItem,
  SelectLabel,
  SelectScrollDownButton,
  SelectScrollUpButton,
  SelectSeparator,
  SelectTrigger,
  SelectValue,
};
 - - - - - - - - - - - - 
src/components/ui/textarea.tsx

import * as React from "react";

import { cn } from "./utils";

function Textarea({ className, ...props }: React.ComponentProps<"textarea">) {
  return (
    <textarea
      data-slot="textarea"
      className={cn(
        "resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        className,
      )}
      {...props}
    />
  );
}

export { Textarea };
 - - - - - - - - - - - - 
src/components/ui/input.tsx

import * as React from "react";

import { cn } from "./utils";

function Input({ className, type, ...props }: React.ComponentProps<"input">) {
  return (
    <input
      type={type}
      data-slot="input"
      className={cn(
        "file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        "focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",
        "aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
        className,
      )}
      {...props}
    />
  );
}

export { Input };
 - - - - - - - - - - - - 
src/components/ui/skeleton.tsx

import { cn } from "./utils";

function Skeleton({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="skeleton"
      className={cn("bg-accent animate-pulse rounded-md", className)}
      {...props}
    />
  );
}

export { Skeleton };
 - - - - - - - - - - - - 
src/components/ui/context-menu.tsx

"use client";

import * as React from "react";
import * as ContextMenuPrimitive from "@radix-ui/react-context-menu@2.2.6";
import { CheckIcon, ChevronRightIcon, CircleIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function ContextMenu({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Root>) {
  return <ContextMenuPrimitive.Root data-slot="context-menu" {...props} />;
}

function ContextMenuTrigger({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Trigger>) {
  return (
    <ContextMenuPrimitive.Trigger data-slot="context-menu-trigger" {...props} />
  );
}

function ContextMenuGroup({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Group>) {
  return (
    <ContextMenuPrimitive.Group data-slot="context-menu-group" {...props} />
  );
}

function ContextMenuPortal({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Portal>) {
  return (
    <ContextMenuPrimitive.Portal data-slot="context-menu-portal" {...props} />
  );
}

function ContextMenuSub({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Sub>) {
  return <ContextMenuPrimitive.Sub data-slot="context-menu-sub" {...props} />;
}

function ContextMenuRadioGroup({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.RadioGroup>) {
  return (
    <ContextMenuPrimitive.RadioGroup
      data-slot="context-menu-radio-group"
      {...props}
    />
  );
}

function ContextMenuSubTrigger({
  className,
  inset,
  children,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.SubTrigger> & {
  inset?: boolean;
}) {
  return (
    <ContextMenuPrimitive.SubTrigger
      data-slot="context-menu-sub-trigger"
      data-inset={inset}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      {children}
      <ChevronRightIcon className="ml-auto" />
    </ContextMenuPrimitive.SubTrigger>
  );
}

function ContextMenuSubContent({
  className,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.SubContent>) {
  return (
    <ContextMenuPrimitive.SubContent
      data-slot="context-menu-sub-content"
      className={cn(
        "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",
        className,
      )}
      {...props}
    />
  );
}

function ContextMenuContent({
  className,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Content>) {
  return (
    <ContextMenuPrimitive.Portal>
      <ContextMenuPrimitive.Content
        data-slot="context-menu-content"
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",
          className,
        )}
        {...props}
      />
    </ContextMenuPrimitive.Portal>
  );
}

function ContextMenuItem({
  className,
  inset,
  variant = "default",
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Item> & {
  inset?: boolean;
  variant?: "default" | "destructive";
}) {
  return (
    <ContextMenuPrimitive.Item
      data-slot="context-menu-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function ContextMenuCheckboxItem({
  className,
  children,
  checked,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.CheckboxItem>) {
  return (
    <ContextMenuPrimitive.CheckboxItem
      data-slot="context-menu-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      checked={checked}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <ContextMenuPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </ContextMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </ContextMenuPrimitive.CheckboxItem>
  );
}

function ContextMenuRadioItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.RadioItem>) {
  return (
    <ContextMenuPrimitive.RadioItem
      data-slot="context-menu-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <ContextMenuPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </ContextMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </ContextMenuPrimitive.RadioItem>
  );
}

function ContextMenuLabel({
  className,
  inset,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Label> & {
  inset?: boolean;
}) {
  return (
    <ContextMenuPrimitive.Label
      data-slot="context-menu-label"
      data-inset={inset}
      className={cn(
        "text-foreground px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",
        className,
      )}
      {...props}
    />
  );
}

function ContextMenuSeparator({
  className,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Separator>) {
  return (
    <ContextMenuPrimitive.Separator
      data-slot="context-menu-separator"
      className={cn("bg-border -mx-1 my-1 h-px", className)}
      {...props}
    />
  );
}

function ContextMenuShortcut({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="context-menu-shortcut"
      className={cn(
        "text-muted-foreground ml-auto text-xs tracking-widest",
        className,
      )}
      {...props}
    />
  );
}

export {
  ContextMenu,
  ContextMenuTrigger,
  ContextMenuContent,
  ContextMenuItem,
  ContextMenuCheckboxItem,
  ContextMenuRadioItem,
  ContextMenuLabel,
  ContextMenuSeparator,
  ContextMenuShortcut,
  ContextMenuGroup,
  ContextMenuPortal,
  ContextMenuSub,
  ContextMenuSubContent,
  ContextMenuSubTrigger,
  ContextMenuRadioGroup,
};
 - - - - - - - - - - - - 
src/components/ui/form.tsx

"use client";

import * as React from "react";
import * as LabelPrimitive from "@radix-ui/react-label@2.1.2";
import { Slot } from "@radix-ui/react-slot@1.1.2";
import {
  Controller,
  FormProvider,
  useFormContext,
  useFormState,
  type ControllerProps,
  type FieldPath,
  type FieldValues,
} from "react-hook-form@7.55.0";

import { cn } from "./utils";
import { Label } from "./label";

const Form = FormProvider;

type FormFieldContextValue<
  TFieldValues extends FieldValues = FieldValues,
  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,
> = {
  name: TName;
};

const FormFieldContext = React.createContext<FormFieldContextValue>(
  {} as FormFieldContextValue,
);

const FormField = <
  TFieldValues extends FieldValues = FieldValues,
  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,
>({
  ...props
}: ControllerProps<TFieldValues, TName>) => {
  return (
    <FormFieldContext.Provider value={{ name: props.name }}>
      <Controller {...props} />
    </FormFieldContext.Provider>
  );
};

const useFormField = () => {
  const fieldContext = React.useContext(FormFieldContext);
  const itemContext = React.useContext(FormItemContext);
  const { getFieldState } = useFormContext();
  const formState = useFormState({ name: fieldContext.name });
  const fieldState = getFieldState(fieldContext.name, formState);

  if (!fieldContext) {
    throw new Error("useFormField should be used within <FormField>");
  }

  const { id } = itemContext;

  return {
    id,
    name: fieldContext.name,
    formItemId: `${id}-form-item`,
    formDescriptionId: `${id}-form-item-description`,
    formMessageId: `${id}-form-item-message`,
    ...fieldState,
  };
};

type FormItemContextValue = {
  id: string;
};

const FormItemContext = React.createContext<FormItemContextValue>(
  {} as FormItemContextValue,
);

function FormItem({ className, ...props }: React.ComponentProps<"div">) {
  const id = React.useId();

  return (
    <FormItemContext.Provider value={{ id }}>
      <div
        data-slot="form-item"
        className={cn("grid gap-2", className)}
        {...props}
      />
    </FormItemContext.Provider>
  );
}

function FormLabel({
  className,
  ...props
}: React.ComponentProps<typeof LabelPrimitive.Root>) {
  const { error, formItemId } = useFormField();

  return (
    <Label
      data-slot="form-label"
      data-error={!!error}
      className={cn("data-[error=true]:text-destructive", className)}
      htmlFor={formItemId}
      {...props}
    />
  );
}

function FormControl({ ...props }: React.ComponentProps<typeof Slot>) {
  const { error, formItemId, formDescriptionId, formMessageId } =
    useFormField();

  return (
    <Slot
      data-slot="form-control"
      id={formItemId}
      aria-describedby={
        !error
          ? `${formDescriptionId}`
          : `${formDescriptionId} ${formMessageId}`
      }
      aria-invalid={!!error}
      {...props}
    />
  );
}

function FormDescription({ className, ...props }: React.ComponentProps<"p">) {
  const { formDescriptionId } = useFormField();

  return (
    <p
      data-slot="form-description"
      id={formDescriptionId}
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  );
}

function FormMessage({ className, ...props }: React.ComponentProps<"p">) {
  const { error, formMessageId } = useFormField();
  const body = error ? String(error?.message ?? "") : props.children;

  if (!body) {
    return null;
  }

  return (
    <p
      data-slot="form-message"
      id={formMessageId}
      className={cn("text-destructive text-sm", className)}
      {...props}
    >
      {body}
    </p>
  );
}

export {
  useFormField,
  Form,
  FormItem,
  FormLabel,
  FormControl,
  FormDescription,
  FormMessage,
  FormField,
};
 - - - - - - - - - - - - 
src/components/ui/carousel.tsx

"use client";

import * as React from "react";
import useEmblaCarousel, {
  type UseEmblaCarouselType,
} from "embla-carousel-react@8.6.0";
import { ArrowLeft, ArrowRight } from "lucide-react@0.487.0";

import { cn } from "./utils";
import { Button } from "./button";

type CarouselApi = UseEmblaCarouselType[1];
type UseCarouselParameters = Parameters<typeof useEmblaCarousel>;
type CarouselOptions = UseCarouselParameters[0];
type CarouselPlugin = UseCarouselParameters[1];

type CarouselProps = {
  opts?: CarouselOptions;
  plugins?: CarouselPlugin;
  orientation?: "horizontal" | "vertical";
  setApi?: (api: CarouselApi) => void;
};

type CarouselContextProps = {
  carouselRef: ReturnType<typeof useEmblaCarousel>[0];
  api: ReturnType<typeof useEmblaCarousel>[1];
  scrollPrev: () => void;
  scrollNext: () => void;
  canScrollPrev: boolean;
  canScrollNext: boolean;
} & CarouselProps;

const CarouselContext = React.createContext<CarouselContextProps | null>(null);

function useCarousel() {
  const context = React.useContext(CarouselContext);

  if (!context) {
    throw new Error("useCarousel must be used within a <Carousel />");
  }

  return context;
}

function Carousel({
  orientation = "horizontal",
  opts,
  setApi,
  plugins,
  className,
  children,
  ...props
}: React.ComponentProps<"div"> & CarouselProps) {
  const [carouselRef, api] = useEmblaCarousel(
    {
      ...opts,
      axis: orientation === "horizontal" ? "x" : "y",
    },
    plugins,
  );
  const [canScrollPrev, setCanScrollPrev] = React.useState(false);
  const [canScrollNext, setCanScrollNext] = React.useState(false);

  const onSelect = React.useCallback((api: CarouselApi) => {
    if (!api) return;
    setCanScrollPrev(api.canScrollPrev());
    setCanScrollNext(api.canScrollNext());
  }, []);

  const scrollPrev = React.useCallback(() => {
    api?.scrollPrev();
  }, [api]);

  const scrollNext = React.useCallback(() => {
    api?.scrollNext();
  }, [api]);

  const handleKeyDown = React.useCallback(
    (event: React.KeyboardEvent<HTMLDivElement>) => {
      if (event.key === "ArrowLeft") {
        event.preventDefault();
        scrollPrev();
      } else if (event.key === "ArrowRight") {
        event.preventDefault();
        scrollNext();
      }
    },
    [scrollPrev, scrollNext],
  );

  React.useEffect(() => {
    if (!api || !setApi) return;
    setApi(api);
  }, [api, setApi]);

  React.useEffect(() => {
    if (!api) return;
    onSelect(api);
    api.on("reInit", onSelect);
    api.on("select", onSelect);

    return () => {
      api?.off("select", onSelect);
    };
  }, [api, onSelect]);

  return (
    <CarouselContext.Provider
      value={{
        carouselRef,
        api: api,
        opts,
        orientation:
          orientation || (opts?.axis === "y" ? "vertical" : "horizontal"),
        scrollPrev,
        scrollNext,
        canScrollPrev,
        canScrollNext,
      }}
    >
      <div
        onKeyDownCapture={handleKeyDown}
        className={cn("relative", className)}
        role="region"
        aria-roledescription="carousel"
        data-slot="carousel"
        {...props}
      >
        {children}
      </div>
    </CarouselContext.Provider>
  );
}

function CarouselContent({ className, ...props }: React.ComponentProps<"div">) {
  const { carouselRef, orientation } = useCarousel();

  return (
    <div
      ref={carouselRef}
      className="overflow-hidden"
      data-slot="carousel-content"
    >
      <div
        className={cn(
          "flex",
          orientation === "horizontal" ? "-ml-4" : "-mt-4 flex-col",
          className,
        )}
        {...props}
      />
    </div>
  );
}

function CarouselItem({ className, ...props }: React.ComponentProps<"div">) {
  const { orientation } = useCarousel();

  return (
    <div
      role="group"
      aria-roledescription="slide"
      data-slot="carousel-item"
      className={cn(
        "min-w-0 shrink-0 grow-0 basis-full",
        orientation === "horizontal" ? "pl-4" : "pt-4",
        className,
      )}
      {...props}
    />
  );
}

function CarouselPrevious({
  className,
  variant = "outline",
  size = "icon",
  ...props
}: React.ComponentProps<typeof Button>) {
  const { orientation, scrollPrev, canScrollPrev } = useCarousel();

  return (
    <Button
      data-slot="carousel-previous"
      variant={variant}
      size={size}
      className={cn(
        "absolute size-8 rounded-full",
        orientation === "horizontal"
          ? "top-1/2 -left-12 -translate-y-1/2"
          : "-top-12 left-1/2 -translate-x-1/2 rotate-90",
        className,
      )}
      disabled={!canScrollPrev}
      onClick={scrollPrev}
      {...props}
    >
      <ArrowLeft />
      <span className="sr-only">Previous slide</span>
    </Button>
  );
}

function CarouselNext({
  className,
  variant = "outline",
  size = "icon",
  ...props
}: React.ComponentProps<typeof Button>) {
  const { orientation, scrollNext, canScrollNext } = useCarousel();

  return (
    <Button
      data-slot="carousel-next"
      variant={variant}
      size={size}
      className={cn(
        "absolute size-8 rounded-full",
        orientation === "horizontal"
          ? "top-1/2 -right-12 -translate-y-1/2"
          : "-bottom-12 left-1/2 -translate-x-1/2 rotate-90",
        className,
      )}
      disabled={!canScrollNext}
      onClick={scrollNext}
      {...props}
    >
      <ArrowRight />
      <span className="sr-only">Next slide</span>
    </Button>
  );
}

export {
  type CarouselApi,
  Carousel,
  CarouselContent,
  CarouselItem,
  CarouselPrevious,
  CarouselNext,
};
 - - - - - - - - - - - - 
src/components/MapaDesinfodemico.tsx

import React, { useState, useEffect } from 'react';
import botilitoImage from 'figma:asset/e27a276e6ff0e187a67cf54678c265c1c38adbf7.png';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Badge } from './ui/badge';
import { Tabs, TabsContent, TabsList, TabsTrigger } from './ui/tabs';
import { Progress } from './ui/progress';
import { Separator } from './ui/separator';
import { Alert, AlertDescription, AlertTitle } from './ui/alert';
import { generateMapa } from '../utils/mapaDesinfodemico/api';
import { transformMapaData } from '../utils/mapaDesinfodemico/transformer';
import { 
  Activity, TrendingUp, TrendingDown, AlertTriangle, Shield,
  MapPin, Users, Bot, Gauge, Zap, Clock, Target, Flame,
  Radio, Share2, Eye, BarChart3, PieChart, LineChart,
  AlertCircle, CheckCircle, XCircle, Wind, Thermometer, 
  ArrowUp, ArrowDown, Minus, Calendar, Filter, Download, 
  RefreshCw, Map, Layers, Hash, Percent, Timer, Globe, 
  Mountain, Waves, Trees, Sun, Cloud, Sparkles, FileText,
  TrendingDownIcon, Crosshair, Network, Database, FileCheck,
  UserCheck, BarChart4, CircleDot, Trophy, Syringe, Tag
} from 'lucide-react';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';
import { 
  BarChart, Bar, LineChart as RechartsLineChart, Line, PieChart as RechartsPieChart, Pie, Cell,
  XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, 
  AreaChart, Area, RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, Radar,
  ComposedChart, Treemap
} from 'recharts';

// Datos de ejemplo para el mapa desinfodémico
const regionesColombia = [
  { 
    id: 'caribe', 
    nombre: 'Caribe', 
    icon: Waves,
    color: '#00B4D8',
    departamentos: ['Atlántico', 'Bolívar', 'Cesar', 'Córdoba', 'La Guajira', 'Magdalena', 'Sucre'],
    poblacion: 10654876
  },
  { 
    id: 'pacifica', 
    nombre: 'Pacífica', 
    icon: Waves,
    color: '#0077B6',
    departamentos: ['Chocó', 'Valle del Cauca', 'Cauca', 'Nariño'],
    poblacion: 9773228
  },
  { 
    id: 'andina', 
    nombre: 'Andina', 
    icon: Mountain,
    color: '#7209B7',
    departamentos: ['Antioquia', 'Boyacá', 'Caldas', 'Cundinamarca', 'Huila', 'Norte de Santander', 'Quindío', 'Risaralda', 'Santander', 'Tolima'],
    poblacion: 34140778
  },
  { 
    id: 'orinoquia', 
    nombre: 'Orinoquía', 
    icon: Sun,
    color: '#F72585',
    departamentos: ['Arauca', 'Casanare', 'Meta', 'Vichada'],
    poblacion: 1664489
  },
  { 
    id: 'amazonia', 
    nombre: 'Amazonía', 
    icon: Trees,
    color: '#06FFA5',
    departamentos: ['Amazonas', 'Caquetá', 'Guainía', 'Guaviare', 'Putumayo', 'Vaupés'],
    poblacion: 1206080
  },
  { 
    id: 'insular', 
    nombre: 'Insular', 
    icon: Cloud,
    color: '#FFD60A',
    departamentos: ['San Andrés y Providencia'],
    poblacion: 77701
  }
];

// Colores para gráficos
const COLORS = ['#00B4D8', '#0077B6', '#7209B7', '#F72585', '#06FFA5', '#FFD60A'];

export function MapaDesinfodemico() {
  // State for filters and UI
  const [regionSeleccionada, setRegionSeleccionada] = useState('andina');
  const [periodoTiempo, setPeriodoTiempo] = useState('semanal');
  const [dimensionActiva, setDimensionActiva] = useState('magnitud');
  const [filtroMarcador, setFiltroMarcador] = useState('todos');
  const [filtroPrioridad, setFiltroPrioridad] = useState('todas');
  const [filtroVector, setFiltroVector] = useState('todos');
  const [filtroEstado, setFiltroEstado] = useState('todos');
  const [filtroTema, setFiltroTema] = useState('todos');

  // State for API data
  const [mapaData, setMapaData] = useState<any>(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [jobStatus, setJobStatus] = useState<string>('');

  const region = regionesColombia.find(r => r.id === regionSeleccionada);

  // Load mapa data on mount
  useEffect(() => {
    loadMapaData().catch((err) => {
      console.error('Uncaught error in loadMapaData:', err);
      setError(err.message || 'Error inesperado al cargar el mapa');
      setLoading(false);
    });
  }, []);

  async function loadMapaData() {
    setLoading(true);
    setError(null);

    try {
      const result = await generateMapa((status) => {
        setJobStatus(status);
      });

      if (result.result) {
        const transformed = transformMapaData(result.result);
        setMapaData(transformed);
      }
    } catch (err: any) {
      console.error('Error loading mapa:', err);
      setError(err.message || 'Error al cargar el mapa desinfodémico');
    } finally {
      setLoading(false);
    }
  }

  // DATOS DE INDICADORES POR DIMENSIÓN
  // Use API data if available, otherwise fall back to mock data

  // 1. DIMENSIÓN: MAGNITUD
  const datosMagnitud = mapaData?.datosMagnitud || {
    noticiasReportadas: 1567,
    noticiasReportadasSemana: 234,
    noticiasReportadasMes: 892,
    deteccionesPorIA: 1234,
    deteccionesPorHumanos: 1189,
    tiempoDeteccionIA: 2.3,
    tiempoDeteccionHumanos: 4.8,
    fuentesGeneradoras: [
      { fuente: '@noticiasfalsas_col', casos: 456, tipo: 'Cuenta Twitter' },
      { fuente: 'GrupoWhatsApp "Noticias Urgentes"', casos: 389, tipo: 'WhatsApp' },
      { fuente: 'Portal "InfoVeraz.co"', casos: 312, tipo: 'Sitio Web' },
      { fuente: '@viral_colombia', casos: 267, tipo: 'Instagram' },
      { fuente: 'Canal Telegram "La Verdad Oculta"', casos: 189, tipo: 'Telegram' }
    ]
  };

  // 2. DIMENSIÓN: TEMPORALIDAD
  const datosTemporalidad = mapaData?.datosTemporalidad || {
    velocidadDeteccion: 3.8,
    tiempoViralizacionPromedio: 6.2,
    evolucionSemanal: [
      { semana: 'Sem 1', detectadas: 234, viralizadas: 189, tiempo: 5.8 },
      { semana: 'Sem 2', detectadas: 267, viralizadas: 212, tiempo: 6.1 },
      { semana: 'Sem 3', detectadas: 289, viralizadas: 245, tiempo: 6.4 },
      { semana: 'Sem 4', detectadas: 312, viralizadas: 278, tiempo: 6.2 }
    ],
    comparativaVerdaderasVsFalsas: [
      { tipo: 'Verdaderas', interacciones: 3250, tiempo: 12.4 },
      { tipo: 'Falsas', interacciones: 8975, tiempo: 4.8 }
    ]
  };

  // 3. DIMENSIÓN: ALCANCE O VIRULENCIA
  const datosAlcance = mapaData?.datosAlcance || {
    indiceViralidad: 2.7,
    rangoViralizacion: { min: 100, max: 125000, promedio: 8450 },
    nivelEngagement: 78,
    efectividadAlcance: {
      verdaderas: 3250,
      falsas: 8975,
      ratio: 0.36
    },
    distribucionViralidad: [
      { rango: '0-1K', casos: 456, porcentaje: 29 },
      { rango: '1K-10K', casos: 589, porcentaje: 38 },
      { rango: '10K-50K', casos: 378, porcentaje: 24 },
      { rango: '50K+', casos: 144, porcentaje: 9 }
    ],
    casosCriticos: 0,
    vectoresPrincipales: []
  };

  // 4. DIMENSIÓN: GEOGRÁFICOS
  const datosGeograficos = mapaData?.datosGeograficos || {
    casosPorRegion: regionesColombia.map(r => ({
      region: r.nombre,
      casos: Math.floor(Math.random() * 1000) + 100,
      densidad: (Math.random() * 50 + 10).toFixed(1),
      color: r.color
    })),
    regionMasAfectada: 'Andina',
    fuentesInternacionalesVsNacionales: {
      internacionales: 423,
      nacionales: 1144,
      porcentajeInternacional: 27
    },
    mapaCalor: [
      { departamento: 'Antioquia', casos: 456, lat: 6.2, lon: -75.5 },
      { departamento: 'Bogotá D.C.', casos: 892, lat: 4.6, lon: -74.0 },
      { departamento: 'Valle del Cauca', casos: 378, lat: 3.4, lon: -76.5 },
      { departamento: 'Atlántico', casos: 312, lat: 10.9, lon: -74.8 },
      { departamento: 'Santander', casos: 234, lat: 7.1, lon: -73.1 }
    ]
  };

  // 5. DIMENSIÓN: DESCRIPTIVOS
  const datosDescriptivos = mapaData?.datosDescriptivos || {
    porSector: [
      { sector: 'Política', casos: 567, porcentaje: 36 },
      { sector: 'Salud', casos: 423, porcentaje: 27 },
      { sector: 'Economía', casos: 312, porcentaje: 20 },
      { sector: 'Seguridad', casos: 178, porcentaje: 11 },
      { sector: 'Otros', casos: 87, porcentaje: 6 }
    ],
    plataformasPropagacion: [
      { plataforma: 'WhatsApp', casos: 2345, porcentaje: 38 },
      { plataforma: 'Facebook', casos: 1987, porcentaje: 32 },
      { plataforma: 'Twitter/X', casos: 1234, porcentaje: 20 },
      { plataforma: 'Instagram', casos: 456, porcentaje: 7 },
      { plataforma: 'TikTok', casos: 189, porcentaje: 3 }
    ],
    personalidadesAtacadas: [
      { nombre: 'Presidente de la República', ataques: 234 },
      { nombre: 'Alcalde de Bogotá', ataques: 189 },
      { nombre: 'Ministro de Salud', ataques: 156 },
      { nombre: 'Candidato Opositor', ataques: 134 },
      { nombre: 'Líder Social Regional', ataques: 98 }
    ],
    sectorMasEficiente: {
      sector: 'Salud',
      alcancePromedio: 12500,
      viralidad: 85
    }
  };

  // 6. DIMENSIÓN: MITIGACIÓN
  const datosMitigacion = mapaData?.datosMitigacion || {
    consensoValidacionHumana: 84,
    consensoHumanoVsIA: {
      acuerdo: 81,
      desacuerdo: 19
    },
    casosEnDesacuerdo: 190,
    distribucionDesacuerdo: [
      { categoria: 'IA dice Falso, Humanos Verdadero', casos: 67, porcentaje: 35 },
      { categoria: 'IA dice Verdadero, Humanos Falso', casos: 45, porcentaje: 24 },
      { categoria: 'Desacuerdo en clasificación', casos: 78, porcentaje: 41 }
    ],
    noticiasMasReportadas: [
      { titulo: 'Vacuna causa efectos secundarios graves', reportes: 456 },
      { titulo: 'Alcalde involucrado en corrupción', reportes: 389 },
      { titulo: 'Nueva cepa de virus detectada en Colombia', reportes: 312 },
      { titulo: 'Subsidio del gobierno es un fraude', reportes: 267 },
      { titulo: 'Celebridad apoya candidato político', reportes: 234 }
    ],
    recomendaciones: [],
    // Nuevos indicadores basados en otras interfaces
    casosPorPrioridad: [
      { prioridad: 'Alta', casos: 234, porcentaje: 15 },
      { prioridad: 'Media', casos: 589, porcentaje: 38 },
      { prioridad: 'Baja', casos: 744, porcentaje: 47 }
    ],
    redEpidemiologos: {
      totalActivos: 47,
      casosProcesados: 1189,
      tiempoPromedioVerificacion: 4.8,
      consensoPromedio: 84
    },
    redInmunizadores: {
      totalActivos: 32,
      estrategiasDesarrolladas: 156,
      estrategiasActivas: 134,
      alcanceTotal: 1250000
    },
    marcadoresDiagnostico: [
      { tipo: 'Falso', casos: 567, porcentaje: 36, color: '#ef4444' },
      { tipo: 'Engañoso', casos: 423, porcentaje: 27, color: '#f97316' },
      { tipo: 'Sensacionalista', casos: 312, porcentaje: 20, color: '#fb923c' },
      { tipo: 'Sin contexto', casos: 178, porcentaje: 11, color: '#f59e0b' },
      { tipo: 'Otros', casos: 87, porcentaje: 6, color: '#6b7280' }
    ],
    vectoresContagio: [
      { tipo: 'Texto (T)', casos: 734, porcentaje: 47, codigo: 'T' },
      { tipo: 'Imagen (I)', casos: 423, porcentaje: 27, codigo: 'I' },
      { tipo: 'Video (V)', casos: 267, porcentaje: 17, codigo: 'V' },
      { tipo: 'Audio (A)', casos: 143, porcentaje: 9, codigo: 'A' }
    ],
    casosPorEstado: [
      { estado: 'Verificados', casos: 1189, porcentaje: 76, color: '#10b981' },
      { estado: 'Solo IA', casos: 378, porcentaje: 24, color: '#3b82f6' }
    ],
    sistemaCodificacion: {
      totalCasos: 1567,
      casosHoy: 34,
      casosSemana: 234,
      formatoEjemplo: 'T-WB-20241015-156'
    }
  };

  // Función para obtener ícono de tendencia
  const getTendenciaIcon = (tendencia: string) => {
    if (tendencia === 'up') return <TrendingUp className="h-4 w-4 text-red-600" />;
    if (tendencia === 'down') return <TrendingDown className="h-4 w-4 text-green-600" />;
    return <Minus className="h-4 w-4 text-gray-600" />;
  };

  // Función para obtener color de riesgo
  const getRiesgoColor = (valor: number, max: number = 100) => {
    const porcentaje = (valor / max) * 100;
    if (porcentaje >= 70) return 'text-red-600 bg-red-50 border-red-200';
    if (porcentaje >= 40) return 'text-orange-600 bg-orange-50 border-orange-200';
    return 'text-green-600 bg-green-50 border-green-200';
  };

  // Show loading state
  if (loading) {
    return (
      <div className="flex flex-col items-center justify-center min-h-[60vh] space-y-8">
        <div className="flex justify-center">
          <img
            src={botilitoImage}
            alt="Botilito generando mapa"
            className="w-48 h-48 object-contain animate-bounce"
          />
        </div>
        <Card className="w-full max-w-3xl shadow-lg border-2">
          <CardContent className="p-8 space-y-6">
            <h2 className="text-2xl font-bold flex items-center justify-center gap-2">
              <Bot className="h-6 w-6 text-primary" />
              Generando mapa desinfodémico...
            </h2>
            <div className="space-y-2">
              <Progress value={jobStatus === 'completed' ? 100 : jobStatus === 'processing' ? 60 : 30} className="w-full h-3" />
              <p className="text-sm text-center text-muted-foreground">
                Estado: {jobStatus === 'pending' ? 'Iniciando análisis...' :
                        jobStatus === 'processing' ? 'Procesando datos...' :
                        'Finalizando...'}
              </p>
            </div>
          </CardContent>
        </Card>
      </div>
    );
  }

  // Show error state
  if (error) {
    return (
      <div className="flex flex-col items-center justify-center min-h-[60vh] space-y-6">
        <Alert variant="destructive" className="max-w-2xl">
          <AlertCircle className="h-4 w-4" />
          <AlertTitle>Error al cargar el mapa</AlertTitle>
          <AlertDescription className="mt-2">
            {error}
          </AlertDescription>
        </Alert>
        <Button onClick={loadMapaData} variant="outline" className="gap-2">
          <RefreshCw className="h-4 w-4" />
          Reintentar
        </Button>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Mensaje de Botilito */}
      <div className="bg-[#ffe97a] border-2 border-[#ffda00] rounded-lg p-4 shadow-lg">
        <div className="flex items-center space-x-4">
          <img 
            src={botilitoImage} 
            alt="Botilito" 
            className="w-24 h-24 object-contain mt-[0px] mr-[16px] mb-[-18px] ml-[0px]"
          />
          <div className="flex-1">
            <p className="text-xl">
              ¡Bienvenido al epicentro del análisis desinfodémico! 🗺️🔬
            </p>
            <p className="text-sm mt-1 opacity-80">
              Explora las 6 dimensiones de virulencia y descubre cómo se comporta la desinformación. ¡Pura epidemiología digital! 📊💉
            </p>
          </div>
        </div>
      </div>

      {/* Header */}
      <div className="flex items-start justify-between">
        <div className="space-y-2">
          <div className="flex items-center space-x-3">
            <div className="p-3 bg-primary rounded-lg">
              <Activity className="h-8 w-8 text-primary-foreground" />
            </div>
            <div>
              <h1 className="text-3xl">Mapa Desinfodémico de Colombia</h1>
              <p className="text-muted-foreground">
                Análisis epidemiológico en tiempo real por dimensiones de virulencia
              </p>
            </div>
          </div>
        </div>
        
        <div className="flex items-center space-x-2">
          <Button variant="outline" size="sm">
            <RefreshCw className="h-4 w-4 mr-2" />
            Actualizar
          </Button>
          <Button variant="outline" size="sm">
            <Download className="h-4 w-4 mr-2" />
            Exportar
          </Button>
        </div>
      </div>

      {/* Filtros Globales */}
      <div className="flex flex-wrap items-center gap-3">
        <div className="flex items-center space-x-2 text-muted-foreground">
          <Filter className="h-4 w-4" />
          <span className="text-sm">Filtrar:</span>
        </div>
        
        <Select value={periodoTiempo} onValueChange={setPeriodoTiempo}>
          <SelectTrigger className="w-[140px] border-gray-300">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="diario">Últimas 24h</SelectItem>
            <SelectItem value="semanal">Última semana</SelectItem>
            <SelectItem value="mensual">Último mes</SelectItem>
            <SelectItem value="trimestral">Trimestre</SelectItem>
          </SelectContent>
        </Select>

        <Select value={filtroMarcador} onValueChange={setFiltroMarcador}>
          <SelectTrigger className="w-[145px] border-gray-300">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="todos">Todos los tipos</SelectItem>
            <SelectItem value="falso">Falso</SelectItem>
            <SelectItem value="enganoso">Engañoso</SelectItem>
            <SelectItem value="sensacionalista">Sensacionalista</SelectItem>
            <SelectItem value="sin-contexto">Sin contexto</SelectItem>
          </SelectContent>
        </Select>

        <Select value={filtroPrioridad} onValueChange={setFiltroPrioridad}>
          <SelectTrigger className="w-[130px] border-gray-300">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="todas">Todas</SelectItem>
            <SelectItem value="alta">Alta</SelectItem>
            <SelectItem value="media">Media</SelectItem>
            <SelectItem value="baja">Baja</SelectItem>
          </SelectContent>
        </Select>

        <Select value={filtroVector} onValueChange={setFiltroVector}>
          <SelectTrigger className="w-[125px] border-gray-300">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="todos">Todos</SelectItem>
            <SelectItem value="texto">Texto (T)</SelectItem>
            <SelectItem value="imagen">Imagen (I)</SelectItem>
            <SelectItem value="video">Video (V)</SelectItem>
            <SelectItem value="audio">Audio (A)</SelectItem>
          </SelectContent>
        </Select>

        <Select value={filtroEstado} onValueChange={setFiltroEstado}>
          <SelectTrigger className="w-[135px] border-gray-300">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="todos">Todos</SelectItem>
            <SelectItem value="verificado">Verificados</SelectItem>
            <SelectItem value="solo-ia">Solo IA</SelectItem>
            <SelectItem value="revision">En revisión</SelectItem>
          </SelectContent>
        </Select>

        <Select value={filtroTema} onValueChange={setFiltroTema}>
          <SelectTrigger className="w-[135px] border-gray-300">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="todos">Todos</SelectItem>
            <SelectItem value="politica">Política</SelectItem>
            <SelectItem value="salud">Salud</SelectItem>
            <SelectItem value="economia">Economía</SelectItem>
            <SelectItem value="seguridad">Seguridad</SelectItem>
          </SelectContent>
        </Select>

        <Select value={regionSeleccionada} onValueChange={setRegionSeleccionada}>
          <SelectTrigger className="w-[145px] border-gray-300">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            {regionesColombia.map(region => {
              const IconComponent = region.icon;
              return (
                <SelectItem key={region.id} value={region.id}>
                  <div className="flex items-center space-x-2">
                    <IconComponent className="h-4 w-4" style={{ color: region.color }} />
                    <span>{region.nombre}</span>
                  </div>
                </SelectItem>
              );
            })}
          </SelectContent>
        </Select>
      </div>

      {/* Tabs de Dimensiones de Virulencia */}
      <Tabs value={dimensionActiva} onValueChange={setDimensionActiva} className="space-y-6">
        <TabsList className="grid w-full grid-cols-2 lg:grid-cols-6 h-auto">
          <TabsTrigger value="magnitud" className="flex flex-col items-center py-3 px-2">
            <Database className="h-5 w-5 mb-1" />
            <span className="text-xs">Magnitud</span>
          </TabsTrigger>
          <TabsTrigger value="temporalidad" className="flex flex-col items-center py-3 px-2">
            <Clock className="h-5 w-5 mb-1" />
            <span className="text-xs">Temporalidad</span>
          </TabsTrigger>
          <TabsTrigger value="alcance" className="flex flex-col items-center py-3 px-2">
            <Flame className="h-5 w-5 mb-1" />
            <span className="text-xs">Virulencia</span>
          </TabsTrigger>
          <TabsTrigger value="geograficos" className="flex flex-col items-center py-3 px-2">
            <MapPin className="h-5 w-5 mb-1" />
            <span className="text-xs">Geográficos</span>
          </TabsTrigger>
          <TabsTrigger value="descriptivos" className="flex flex-col items-center py-3 px-2">
            <FileText className="h-5 w-5 mb-1" />
            <span className="text-xs">Descriptivos</span>
          </TabsTrigger>
          <TabsTrigger value="mitigacion" className="flex flex-col items-center py-3 px-2">
            <Shield className="h-5 w-5 mb-1" />
            <span className="text-xs">Mitigación</span>
          </TabsTrigger>
        </TabsList>

        {/* DIMENSIÓN 1: MAGNITUD */}
        <TabsContent value="magnitud" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Database className="h-6 w-6 text-primary" />
                <span>Dimensión de Magnitud</span>
              </CardTitle>
              <CardDescription>
                Cuantifica el volumen total de contenidos reportados, detectados como falsos por IA y validados por humanos
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              {/* Indicadores Principales */}
              <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                <Card className="bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-blue-700">Noticias Reportadas</CardDescription>
                    <CardTitle className="text-3xl text-blue-900">{datosMagnitud.noticiasReportadas.toLocaleString()}</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center justify-between text-xs text-blue-700">
                      <span>Esta semana: +{datosMagnitud.noticiasReportadasSemana}</span>
                      <TrendingUp className="h-3 w-3" />
                    </div>
                  </CardContent>
                </Card>

                <Card className="bg-gradient-to-br from-red-50 to-red-100 border-red-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-red-700">Detectadas por IA</CardDescription>
                    <CardTitle className="text-3xl text-red-900">{datosMagnitud.deteccionesPorIA.toLocaleString()}</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center justify-between text-xs text-red-700">
                      <span>Tiempo promedio: {datosMagnitud.tiempoDeteccionIA}h</span>
                      <Bot className="h-3 w-3" />
                    </div>
                  </CardContent>
                </Card>

                <Card className="bg-gradient-to-br from-green-50 to-green-100 border-green-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-green-700">Validadas por Humanos</CardDescription>
                    <CardTitle className="text-3xl text-green-900">{datosMagnitud.deteccionesPorHumanos.toLocaleString()}</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center justify-between text-xs text-green-700">
                      <span>Tiempo promedio: {datosMagnitud.tiempoDeteccionHumanos}h</span>
                      <Users className="h-3 w-3" />
                    </div>
                  </CardContent>
                </Card>
              </div>

              {/* Gráfico de evolución de reportes */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Evolución de Noticias Reportadas</CardTitle>
                  <CardDescription>Tendencia de reportes por unidad de tiempo y mecanismo</CardDescription>
                </CardHeader>
                <CardContent>
                  <ResponsiveContainer width="100%" height={300}>
                    <AreaChart data={[
                      { mes: 'Ene', reportadas: 890, iaDetectadas: 745, humanasValidadas: 712 },
                      { mes: 'Feb', reportadas: 1120, iaDetectadas: 934, humanasValidadas: 889 },
                      { mes: 'Mar', reportadas: 1456, iaDetectadas: 1189, humanasValidadas: 1134 },
                      { mes: 'Abr', reportadas: 1567, iaDetectadas: 1234, humanasValidadas: 1189 }
                    ]}>
                      <CartesianGrid strokeDasharray="3 3" />
                      <XAxis dataKey="mes" />
                      <YAxis />
                      <Tooltip />
                      <Legend />
                      <Area type="monotone" dataKey="reportadas" stackId="1" stroke="#3b82f6" fill="#3b82f6" name="Reportadas" />
                      <Area type="monotone" dataKey="iaDetectadas" stackId="2" stroke="#ef4444" fill="#ef4444" name="IA Detectadas" />
                      <Area type="monotone" dataKey="humanasValidadas" stackId="3" stroke="#10b981" fill="#10b981" name="Validadas Humanos" />
                    </AreaChart>
                  </ResponsiveContainer>
                </CardContent>
              </Card>

              {/* Ranking de Fuentes Generadoras */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Ranking de Fuentes Generadoras de Desinformación</CardTitle>
                  <CardDescription>Identifica los actores clave que generan contenido falso</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="space-y-3">
                    {datosMagnitud.fuentesGeneradoras.map((fuente, idx) => (
                      <div key={idx} className="p-4 border rounded-lg bg-gradient-to-r from-red-50 to-orange-50">
                        <div className="flex items-center justify-between mb-2">
                          <div className="flex items-center space-x-3">
                            <Badge className="bg-red-600 text-white">#{idx + 1}</Badge>
                            <div>
                              <p className="font-medium">{fuente.fuente}</p>
                              <p className="text-xs text-muted-foreground">{fuente.tipo}</p>
                            </div>
                          </div>
                          <div className="text-right">
                            <p className="text-2xl text-red-700">{fuente.casos}</p>
                            <p className="text-xs text-muted-foreground">casos detectados</p>
                          </div>
                        </div>
                        <Progress value={(fuente.casos / datosMagnitud.fuentesGeneradoras[0].casos) * 100} className="h-2" />
                      </div>
                    ))}
                  </div>
                </CardContent>
              </Card>
            </CardContent>
          </Card>
        </TabsContent>

        {/* DIMENSIÓN 2: TEMPORALIDAD */}
        <TabsContent value="temporalidad" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Clock className="h-6 w-6 text-primary" />
                <span>Dimensión de Temporalidad</span>
              </CardTitle>
              <CardDescription>
                Tiempo de ocurrencia y velocidad de detección y viralización de noticias falsas versus verdaderas
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              {/* Indicadores Temporales */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <Card className="bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-purple-700">Velocidad de Detección</CardDescription>
                    <CardTitle className="text-3xl text-purple-900">{datosTemporalidad.velocidadDeteccion}h</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center space-x-1 text-xs text-purple-700">
                      <Zap className="h-3 w-3" />
                      <span>Tiempo promedio de detección</span>
                    </div>
                  </CardContent>
                </Card>

                <Card className="bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-orange-700">Tiempo de Viralización *</CardDescription>
                    <CardTitle className="text-3xl text-orange-900">{datosTemporalidad.tiempoViralizacionPromedio}h *</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center space-x-1 text-xs text-orange-700">
                      <Radio className="h-3 w-3" />
                      <span>Ventana crítica de intervención</span>
                    </div>
                  </CardContent>
                </Card>
              </div>

              {/* Evolución Temporal */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Evolución Temporal de Detección vs Viralización</CardTitle>
                  <CardDescription>Comparativa de casos detectados versus viralizados por semana</CardDescription>
                </CardHeader>
                <CardContent>
                  <ResponsiveContainer width="100%" height={300}>
                    <AreaChart data={datosTemporalidad.evolucionSemanal}>
                      <CartesianGrid strokeDasharray="3 3" />
                      <XAxis dataKey="semana" />
                      <YAxis />
                      <Tooltip />
                      <Legend />
                      <Area type="monotone" dataKey="detectadas" stroke="#8b5cf6" fill="#8b5cf6" fillOpacity={0.6} name="Detectadas" />
                      <Area type="monotone" dataKey="viralizadas" stroke="#f97316" fill="#f97316" fillOpacity={0.6} name="Viralizadas" />
                    </AreaChart>
                  </ResponsiveContainer>
                </CardContent>
              </Card>

              {/* Comparativa Verdaderas vs Falsas */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Tiempo de Viralización: Noticias Verdaderas vs Falsas *</CardTitle>
                  <CardDescription>Comparación de peligrosidad por velocidad de propagación *</CardDescription>
                </CardHeader>
                <CardContent>
                  <ResponsiveContainer width="100%" height={250}>
                    <BarChart data={datosTemporalidad.comparativaVerdaderasVsFalsas} layout="vertical">
                      <CartesianGrid strokeDasharray="3 3" />
                      <XAxis type="number" />
                      <YAxis dataKey="tipo" type="category" />
                      <Tooltip />
                      <Legend />
                      <Bar dataKey="interacciones" fill="#3b82f6" name="Interacciones" />
                      <Bar dataKey="tiempo" fill="#f59e0b" name="Tiempo (horas)" />
                    </BarChart>
                  </ResponsiveContainer>
                  <Alert className="mt-4 border-orange-200 bg-orange-50">
                    <AlertTriangle className="h-4 w-4 text-orange-600" />
                    <AlertDescription className="text-orange-800">
                      Las noticias falsas se viralizan <strong>2.6x más rápido *</strong> que las verdaderas, con un tiempo promedio de {datosTemporalidad.comparativaVerdaderasVsFalsas[1].tiempo}h vs {datosTemporalidad.comparativaVerdaderasVsFalsas[0].tiempo}h *
                    </AlertDescription>
                  </Alert>
                </CardContent>
              </Card>
            </CardContent>
          </Card>
        </TabsContent>

        {/* DIMENSIÓN 3: ALCANCE O VIRULENCIA */}
        <TabsContent value="alcance" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Flame className="h-6 w-6 text-primary" />
                <span>Dimensión de Alcance o Virulencia</span>
              </CardTitle>
              <CardDescription>
                Evalúa el índice de viralidad, porcentaje de mayor viralización y nivel de engagement
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              {/* Métricas de Virulencia */}
              <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                <Card className="bg-gradient-to-br from-red-50 to-red-100 border-red-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-red-700">Índice de Viralidad</CardDescription>
                    <CardTitle className="text-3xl text-red-900">{datosAlcance.indiceViralidad}</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center space-x-1 text-xs text-red-700">
                      <Flame className="h-3 w-3" />
                      <span>Potencial de contagio</span>
                    </div>
                  </CardContent>
                </Card>

                <Card className="bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-yellow-700">Nivel de Engagement *</CardDescription>
                    <CardTitle className="text-3xl text-yellow-900">{datosAlcance.nivelEngagement}% *</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center space-x-1 text-xs text-yellow-700">
                      <Target className="h-3 w-3" />
                      <span>Impacto emocional promedio</span>
                    </div>
                  </CardContent>
                </Card>

                <Card className="bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-purple-700">Alcance Promedio *</CardDescription>
                    <CardTitle className="text-2xl text-purple-900">{datosAlcance.rangoViralizacion.promedio.toLocaleString()} *</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center justify-between text-xs text-purple-700">
                      <span>Min: {datosAlcance.rangoViralizacion.min} *</span>
                      <span>Max: {(datosAlcance.rangoViralizacion.max / 1000).toFixed(0)}K *</span>
                    </div>
                  </CardContent>
                </Card>
              </div>

              {/* Distribución de Viralidad */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Distribución de Viralización por Rango *</CardTitle>
                  <CardDescription>Porcentaje y rango de mayor viralización de noticias falsas *</CardDescription>
                </CardHeader>
                <CardContent>
                  <ResponsiveContainer width="100%" height={300}>
                    <BarChart data={datosAlcance.distribucionViralidad} layout="vertical">
                      <CartesianGrid strokeDasharray="3 3" />
                      <XAxis type="number" />
                      <YAxis dataKey="rango" type="category" width={100} />
                      <Tooltip />
                      <Legend />
                      <Bar dataKey="casos" fill="#f59e0b" name="Casos" />
                      <Bar dataKey="porcentaje" fill="#ef4444" name="Porcentaje %" />
                    </BarChart>
                  </ResponsiveContainer>
                </CardContent>
              </Card>

              {/* Efectividad de Alcance */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Efectividad de Alcance: Verdaderas vs Falsas *</CardTitle>
                  <CardDescription>Evalúa competencia comunicacional entre información verificada y desinformación *</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="grid grid-cols-2 gap-4 mb-4">
                    <div className="p-4 bg-green-50 border-2 border-green-200 rounded-lg text-center">
                      <p className="text-sm text-green-700 mb-1">Noticias Verdaderas *</p>
                      <p className="text-3xl text-green-900">{datosAlcance.efectividadAlcance.verdaderas.toLocaleString()} *</p>
                      <p className="text-xs text-green-600 mt-1">interacciones promedio</p>
                    </div>
                    <div className="p-4 bg-red-50 border-2 border-red-200 rounded-lg text-center">
                      <p className="text-sm text-red-700 mb-1">Noticias Falsas *</p>
                      <p className="text-3xl text-red-900">{datosAlcance.efectividadAlcance.falsas.toLocaleString()} *</p>
                      <p className="text-xs text-red-600 mt-1">interacciones promedio</p>
                    </div>
                  </div>
                  <Alert className="border-red-200 bg-red-50">
                    <AlertCircle className="h-4 w-4 text-red-600" />
                    <AlertDescription className="text-red-800">
                      <strong>Brecha de efectividad *:</strong> Las noticias falsas tienen {(datosAlcance.efectividadAlcance.falsas / datosAlcance.efectividadAlcance.verdaderas).toFixed(1)}x más alcance que las verdaderas. Ratio de competencia: {(datosAlcance.efectividadAlcance.ratio * 100).toFixed(0)}% *
                    </AlertDescription>
                  </Alert>
                </CardContent>
              </Card>
            </CardContent>
          </Card>
        </TabsContent>

        {/* DIMENSIÓN 4: GEOGRÁFICOS */}
        <TabsContent value="geograficos" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <MapPin className="h-6 w-6 text-primary" />
                <span>Dimensión Geográfica</span>
              </CardTitle>
              <CardDescription>
                Alcance espacial de noticias falsas, agrupación en clústeres y patrones espaciales
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              {/* Casos por Región */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Cantidad de Noticias Falsas por Región</CardTitle>
                  <CardDescription>Detecta patrones territoriales de desinformación</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="space-y-3">
                    {datosGeograficos.casosPorRegion.map((region, idx) => (
                      <div key={idx} className="space-y-2">
                        <div className="flex items-center justify-between">
                          <div className="flex items-center space-x-3">
                            <div className="w-4 h-4 rounded" style={{ backgroundColor: region.color }}></div>
                            <span className="font-medium">{region.region}</span>
                          </div>
                          <div className="flex items-center space-x-3">
                            <Badge variant="outline">{region.casos} casos</Badge>
                            <Badge variant="outline" className="text-xs">
                              {region.densidad} por 100k hab
                            </Badge>
                          </div>
                        </div>
                        <Progress value={(region.casos / 1000) * 100} className="h-2" style={{ backgroundColor: `${region.color}30` }} />
                      </div>
                    ))}
                  </div>
                </CardContent>
              </Card>

              {/* Mapa de Calor */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Mapa de Calor Geográfico de Desinformación</CardTitle>
                  <CardDescription>Visualiza densidades por ubicación geográfica (Top 5 departamentos)</CardDescription>
                </CardHeader>
                <CardContent>
                  <ResponsiveContainer width="100%" height={300}>
                    <BarChart data={datosGeograficos.mapaCalor}>
                      <CartesianGrid strokeDasharray="3 3" />
                      <XAxis dataKey="departamento" angle={-15} textAnchor="end" height={80} />
                      <YAxis />
                      <Tooltip />
                      <Legend />
                      <Bar dataKey="casos" fill="#ef4444" name="Casos detectados" />
                    </BarChart>
                  </ResponsiveContainer>
                  <div className="mt-4 p-4 bg-red-50 border border-red-200 rounded-lg">
                    <h4 className="text-sm text-red-900 mb-2">🔥 Zona de Mayor Concentración</h4>
                    <p className="text-xs text-red-700">
                      <strong>{datosGeograficos.mapaCalor?.[1]?.departamento || 'Bogotá D.C.'}</strong> presenta la mayor densidad con {datosGeograficos.mapaCalor?.[1]?.casos || 892} casos detectados,
                      representando una zona crítica que requiere atención prioritaria.
                    </p>
                  </div>
                </CardContent>
              </Card>

              {/* Fuentes Internacionales vs Nacionales */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Fuentes Internacionales vs Nacionales *</CardTitle>
                  <CardDescription>Analiza el origen de los emisores de desinformación *</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="grid grid-cols-2 gap-4 mb-4">
                    <div className="p-6 bg-blue-50 border-2 border-blue-200 rounded-lg text-center">
                      <Globe className="h-8 w-8 text-blue-600 mx-auto mb-2" />
                      <p className="text-3xl text-blue-900 mb-1">{datosGeograficos.fuentesInternacionalesVsNacionales.internacionales} *</p>
                      <p className="text-sm text-blue-700">Fuentes Internacionales</p>
                      <Badge className="bg-blue-600 text-white mt-2">
                        {datosGeograficos.fuentesInternacionalesVsNacionales.porcentajeInternacional}% *
                      </Badge>
                    </div>
                    <div className="p-6 bg-green-50 border-2 border-green-200 rounded-lg text-center">
                      <MapPin className="h-8 w-8 text-green-600 mx-auto mb-2" />
                      <p className="text-3xl text-green-900 mb-1">{datosGeograficos.fuentesInternacionalesVsNacionales.nacionales} *</p>
                      <p className="text-sm text-green-700">Fuentes Nacionales</p>
                      <Badge className="bg-green-600 text-white mt-2">
                        {100 - datosGeograficos.fuentesInternacionalesVsNacionales.porcentajeInternacional}% *
                      </Badge>
                    </div>
                  </div>
                  <ResponsiveContainer width="100%" height={200}>
                    <RechartsPieChart>
                      <Pie
                        data={[
                          { name: 'Internacionales', value: datosGeograficos.fuentesInternacionalesVsNacionales.internacionales },
                          { name: 'Nacionales', value: datosGeograficos.fuentesInternacionalesVsNacionales.nacionales }
                        ]}
                        cx="50%"
                        cy="50%"
                        labelLine={false}
                        label={({ name, percent }) => `${name}: ${(percent * 100).toFixed(0)}%`}
                        outerRadius={80}
                        fill="#8884d8"
                        dataKey="value"
                      >
                        <Cell fill="#3b82f6" />
                        <Cell fill="#10b981" />
                      </Pie>
                      <Tooltip />
                    </RechartsPieChart>
                  </ResponsiveContainer>
                </CardContent>
              </Card>
            </CardContent>
          </Card>
        </TabsContent>

        {/* DIMENSIÓN 5: DESCRIPTIVOS */}
        <TabsContent value="descriptivos" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <FileText className="h-6 w-6 text-primary" />
                <span>Dimensión Descriptiva</span>
              </CardTitle>
              <CardDescription>
                Caracteriza los principales componentes de una posible situación de virulencia
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              {/* Noticias Falsas por Sector */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Porcentaje de Noticias Falsas por Sector</CardTitle>
                  <CardDescription>Clasifica por temática (salud, política, economía, etc.)</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="grid md:grid-cols-2 gap-6">
                    <ResponsiveContainer width="100%" height={300}>
                      <RechartsPieChart>
                        <Pie
                          data={datosDescriptivos.porSector}
                          cx="50%"
                          cy="50%"
                          labelLine={false}
                          label={({ sector, porcentaje }) => `${sector}: ${porcentaje}%`}
                          outerRadius={100}
                          fill="#8884d8"
                          dataKey="casos"
                        >
                          {datosDescriptivos.porSector.map((entry, index) => (
                            <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
                          ))}
                        </Pie>
                        <Tooltip />
                      </RechartsPieChart>
                    </ResponsiveContainer>
                    <div className="space-y-2">
                      {datosDescriptivos.porSector.map((sector, idx) => (
                        <div key={idx} className="p-3 border rounded-lg hover:bg-gray-50 transition-colors">
                          <div className="flex items-center justify-between mb-2">
                            <div className="flex items-center space-x-2">
                              <div className="w-3 h-3 rounded" style={{ backgroundColor: COLORS[idx % COLORS.length] }}></div>
                              <span className="font-medium">{sector.sector}</span>
                            </div>
                            <Badge>{sector.porcentaje}%</Badge>
                          </div>
                          <div className="flex items-center justify-between text-xs text-muted-foreground">
                            <span>{sector.casos} casos</span>
                            <Progress value={sector.porcentaje} className="w-20 h-1" />
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                </CardContent>
              </Card>

              {/* Plataformas con Mayor Propagación */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Plataformas con Mayor Propagación</CardTitle>
                  <CardDescription>Identifica las redes sociales más activas en la difusión</CardDescription>
                </CardHeader>
                <CardContent>
                  <ResponsiveContainer width="100%" height={300}>
                    <BarChart data={datosDescriptivos.plataformasPropagacion} layout="vertical">
                      <CartesianGrid strokeDasharray="3 3" />
                      <XAxis type="number" />
                      <YAxis dataKey="plataforma" type="category" width={100} />
                      <Tooltip />
                      <Legend />
                      <Bar dataKey="casos" fill="#7209B7" name="Casos detectados" />
                    </BarChart>
                  </ResponsiveContainer>
                  <Alert className="mt-4 border-purple-200 bg-purple-50">
                    <Share2 className="h-4 w-4 text-purple-600" />
                    <AlertDescription className="text-purple-800">
                      <strong>Plataforma líder:</strong> WhatsApp concentra el {datosDescriptivos.plataformasPropagacion[0].porcentaje}% 
                      de la propagación con {datosDescriptivos.plataformasPropagacion[0].casos.toLocaleString()} casos detectados
                    </AlertDescription>
                  </Alert>
                </CardContent>
              </Card>

              {/* Ranking de Personalidades Atacadas */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Ranking de Personalidades Más Atacadas *</CardTitle>
                  <CardDescription>Lista de figuras públicas difamadas o mencionadas en desinformación *</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="space-y-3">
                    {datosDescriptivos.personalidadesAtacadas.map((persona, idx) => (
                      <div key={idx} className="flex items-center justify-between p-4 border rounded-lg bg-gradient-to-r from-orange-50 to-red-50">
                        <div className="flex items-center space-x-3">
                          <Badge className="bg-orange-600 text-white text-lg w-10 h-10 flex items-center justify-center">
                            #{idx + 1}
                          </Badge>
                          <span className="font-medium">{persona.nombre}</span>
                        </div>
                        <div className="text-right">
                          <p className="text-2xl text-orange-700">{persona.ataques}</p>
                          <p className="text-xs text-muted-foreground">ataques detectados</p>
                        </div>
                      </div>
                    ))}
                  </div>
                </CardContent>
              </Card>

              {/* Sector Más Eficiente */}
              <Card className="bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200">
                <CardHeader>
                  <CardTitle className="text-lg">Sector Más Eficiente en Alcance *</CardTitle>
                  <CardDescription>Compara viralización por área temática *</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="text-center p-6">
                    <Trophy className="h-12 w-12 text-yellow-500 mx-auto mb-4" />
                    <h3 className="text-2xl mb-2">{datosDescriptivos.sectorMasEficiente.sector} *</h3>
                    <div className="grid grid-cols-2 gap-4 mt-4">
                      <div className="p-3 bg-white rounded-lg">
                        <p className="text-xs text-muted-foreground mb-1">Alcance Promedio *</p>
                        <p className="text-xl text-blue-700">{datosDescriptivos.sectorMasEficiente.alcancePromedio.toLocaleString()} *</p>
                      </div>
                      <div className="p-3 bg-white rounded-lg">
                        <p className="text-xs text-muted-foreground mb-1">Nivel de Viralidad *</p>
                        <p className="text-xl text-purple-700">{datosDescriptivos.sectorMasEficiente.viralidad}% *</p>
                      </div>
                    </div>
                  </div>
                </CardContent>
              </Card>
            </CardContent>
          </Card>
        </TabsContent>

        {/* DIMENSIÓN 6: MITIGACIÓN */}
        <TabsContent value="mitigacion" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Shield className="h-6 w-6 text-primary" />
                <span>Dimensión de Mitigación</span>
              </CardTitle>
              <CardDescription>
                Sistema de aprendizaje activo donde la fricción entre IA y humanos mejora la confiabilidad
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              {/* Consenso de Validación */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <Card className="bg-gradient-to-br from-green-50 to-green-100 border-green-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-green-700">Consenso Validación Humana</CardDescription>
                    <CardTitle className="text-3xl text-green-900">{datosMitigacion.consensoValidacionHumana}%</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center space-x-1 text-xs text-green-700">
                      <UserCheck className="h-3 w-3" />
                      <span>Acuerdo entre validadores</span>
                    </div>
                    <Progress value={datosMitigacion.consensoValidacionHumana} className="mt-2 h-2" />
                  </CardContent>
                </Card>

                <Card className="bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-blue-700">Consenso Humano + IA</CardDescription>
                    <CardTitle className="text-3xl text-blue-900">{datosMitigacion.consensoHumanoVsIA.acuerdo}%</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center space-x-1 text-xs text-blue-700">
                      <Bot className="h-3 w-3" />
                      <span>Concordancia IA-Humanos</span>
                    </div>
                    <Progress value={datosMitigacion.consensoHumanoVsIA.acuerdo} className="mt-2 h-2" />
                  </CardContent>
                </Card>
              </div>

              {/* Consenso vs Desacuerdo */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Consenso Humano vs IA</CardTitle>
                  <CardDescription>Evalúa concordancia y señala límites de automatización</CardDescription>
                </CardHeader>
                <CardContent>
                  <ResponsiveContainer width="100%" height={250}>
                    <RechartsPieChart>
                      <Pie
                        data={[
                          { name: 'Consenso', value: datosMitigacion.consensoHumanoVsIA.acuerdo, fill: '#10b981' },
                          { name: 'Desacuerdo', value: datosMitigacion.consensoHumanoVsIA.desacuerdo, fill: '#f59e0b' }
                        ]}
                        cx="50%"
                        cy="50%"
                        labelLine={false}
                        label={({ name, percent }) => `${name}: ${(percent * 100).toFixed(0)}%`}
                        outerRadius={80}
                        fill="#8884d8"
                        dataKey="value"
                        innerRadius={40}
                      >
                      </Pie>
                      <Tooltip />
                    </RechartsPieChart>
                  </ResponsiveContainer>
                </CardContent>
              </Card>

              {/* Distribución de Desacuerdos */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Porcentaje de Desacuerdo Humano vs IA *</CardTitle>
                  <CardDescription>Señala límites de automatización y áreas de mejora para la IA *</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="space-y-3">
                    {datosMitigacion.distribucionDesacuerdo.map((item, idx) => (
                      <div key={idx} className="space-y-2">
                        <div className="flex items-center justify-between">
                          <span className="text-sm font-medium">{item.categoria}</span>
                          <Badge variant="outline">{item.porcentaje}%</Badge>
                        </div>
                        <div className="flex items-center space-x-2">
                          <Progress value={item.porcentaje} className="flex-1 h-2" />
                          <span className="text-xs text-muted-foreground">{item.casos} casos</span>
                        </div>
                      </div>
                    ))}
                  </div>
                  <Alert className="mt-4 border-yellow-200 bg-yellow-50">
                    <AlertCircle className="h-4 w-4 text-yellow-600" />
                    <AlertDescription className="text-yellow-800">
                      El {datosMitigacion.consensoHumanoVsIA.desacuerdo}% de desacuerdo representa oportunidades de aprendizaje 
                      para mejorar los algoritmos de IA y refinar los criterios de validación humana
                    </AlertDescription>
                  </Alert>
                </CardContent>
              </Card>

              {/* Ranking de Noticias Más Reportadas */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Ranking de Noticias Más Reportadas *</CardTitle>
                  <CardDescription>Detecta alertas ciudadanas y temas de mayor preocupación *</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="space-y-3">
                    {datosMitigacion.noticiasMasReportadas.map((noticia, idx) => (
                      <div key={idx} className="flex items-center justify-between p-4 border rounded-lg bg-gradient-to-r from-blue-50 to-purple-50 hover:shadow-md transition-shadow">
                        <div className="flex items-center space-x-3 flex-1">
                          <Badge className="bg-blue-600 text-white text-lg w-10 h-10 flex items-center justify-center flex-shrink-0">
                            #{idx + 1}
                          </Badge>
                          <p className="font-medium text-sm">{noticia.titulo}</p>
                        </div>
                        <div className="text-right ml-4">
                          <p className="text-2xl text-blue-700">{noticia.reportes}</p>
                          <p className="text-xs text-muted-foreground">reportes</p>
                        </div>
                      </div>
                    ))}
                  </div>
                  <Alert className="mt-4 border-blue-200 bg-blue-50">
                    <Eye className="h-4 w-4 text-blue-600" />
                    <AlertDescription className="text-blue-800">
                      <strong>Detección ciudadana:</strong> Los temas relacionados con salud y política concentran 
                      el {((datosMitigacion.noticiasMasReportadas[0].reportes + datosMitigacion.noticiasMasReportadas[1].reportes) / 
                      datosMitigacion.noticiasMasReportadas.reduce((sum, n) => sum + n.reportes, 0) * 100).toFixed(0)}% 
                      de los reportes ciudadanos
                    </AlertDescription>
                  </Alert>
                </CardContent>
              </Card>

              {/* Nuevos Indicadores: Red de Epidemiólogos e Inmunizadores */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <Card className="bg-gradient-to-br from-emerald-50 to-teal-100 border-emerald-200">
                  <CardHeader>
                    <CardTitle className="flex items-center space-x-2">
                      <Users className="h-5 w-5 text-emerald-700" />
                      <span>Red de Epidemiólogos</span>
                    </CardTitle>
                    <CardDescription>Especialistas en diagnóstico desinfodémico</CardDescription>
                  </CardHeader>
                  <CardContent className="space-y-3">
                    <div className="flex items-center justify-between">
                      <span className="text-sm text-muted-foreground">Epidemiólogos activos *</span>
                      <Badge className="bg-emerald-600 text-white text-lg px-3 py-1">
                        {datosMitigacion.redEpidemiologos.totalActivos} *
                      </Badge>
                    </div>
                    <Separator />
                    <div className="space-y-2">
                      <div className="flex items-center justify-between text-sm">
                        <span className="text-muted-foreground">Casos procesados</span>
                        <span className="font-medium">{datosMitigacion.redEpidemiologos.casosProcesados.toLocaleString()}</span>
                      </div>
                      <div className="flex items-center justify-between text-sm">
                        <span className="text-muted-foreground">Tiempo promedio</span>
                        <span className="font-medium">{datosMitigacion.redEpidemiologos.tiempoPromedioVerificacion}h</span>
                      </div>
                      <div className="flex items-center justify-between text-sm">
                        <span className="text-muted-foreground">Consenso promedio</span>
                        <span className="font-medium">{datosMitigacion.redEpidemiologos.consensoPromedio}%</span>
                      </div>
                    </div>
                  </CardContent>
                </Card>

                <Card className="bg-gradient-to-br from-purple-50 to-indigo-100 border-purple-200">
                  <CardHeader>
                    <CardTitle className="flex items-center space-x-2">
                      <Syringe className="h-5 w-5 text-purple-700" />
                      <span>Red de Inmunizadores *</span>
                    </CardTitle>
                    <CardDescription>Especialistas en estrategias de inmunización *</CardDescription>
                  </CardHeader>
                  <CardContent className="space-y-3">
                    <div className="flex items-center justify-between">
                      <span className="text-sm text-muted-foreground">Inmunizadores activos *</span>
                      <Badge className="bg-purple-600 text-white text-lg px-3 py-1">
                        {datosMitigacion.redInmunizadores.totalActivos} *
                      </Badge>
                    </div>
                    <Separator />
                    <div className="space-y-2">
                      <div className="flex items-center justify-between text-sm">
                        <span className="text-muted-foreground">Estrategias desarrolladas *</span>
                        <span className="font-medium">{datosMitigacion.redInmunizadores.estrategiasDesarrolladas} *</span>
                      </div>
                      <div className="flex items-center justify-between text-sm">
                        <span className="text-muted-foreground">Estrategias activas *</span>
                        <span className="font-medium">{datosMitigacion.redInmunizadores.estrategiasActivas} *</span>
                      </div>
                      <div className="flex items-center justify-between text-sm">
                        <span className="text-muted-foreground">Alcance total *</span>
                        <span className="font-medium">{(datosMitigacion.redInmunizadores.alcanceTotal / 1000000).toFixed(1)}M *</span>
                      </div>
                    </div>
                  </CardContent>
                </Card>
              </div>

              {/* Marcadores de Diagnóstico */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Distribución de Marcadores de Diagnóstico</CardTitle>
                  <CardDescription>Tipos de desinformación más detectados por el sistema</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="grid md:grid-cols-2 gap-6">
                    <ResponsiveContainer width="100%" height={300}>
                      <RechartsPieChart>
                        <Pie
                          data={datosMitigacion.marcadoresDiagnostico}
                          cx="50%"
                          cy="50%"
                          labelLine={false}
                          label={({ tipo, porcentaje }) => `${tipo}: ${porcentaje}%`}
                          outerRadius={100}
                          fill="#8884d8"
                          dataKey="casos"
                        >
                          {datosMitigacion.marcadoresDiagnostico.map((entry, index) => (
                            <Cell key={`cell-${index}`} fill={entry.color} />
                          ))}
                        </Pie>
                        <Tooltip />
                      </RechartsPieChart>
                    </ResponsiveContainer>
                    <div className="space-y-2">
                      {datosMitigacion.marcadoresDiagnostico.map((marcador, idx) => (
                        <div key={idx} className="p-3 border rounded-lg hover:bg-gray-50 transition-colors">
                          <div className="flex items-center justify-between mb-2">
                            <div className="flex items-center space-x-2">
                              <div className="w-3 h-3 rounded" style={{ backgroundColor: marcador.color }}></div>
                              <span className="font-medium">{marcador.tipo}</span>
                            </div>
                            <Badge>{marcador.porcentaje}%</Badge>
                          </div>
                          <div className="flex items-center justify-between text-xs text-muted-foreground">
                            <span>{marcador.casos} casos</span>
                            <Progress value={marcador.porcentaje} className="w-20 h-1" />
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                </CardContent>
              </Card>

              {/* Vectores de Contagio */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Vectores de Contagio (Tipo de Contenido) *</CardTitle>
                  <CardDescription>Distribución por formato del contenido desinfodémico *</CardDescription>
                </CardHeader>
                <CardContent>
                  <ResponsiveContainer width="100%" height={300}>
                    <BarChart data={datosMitigacion.vectoresContagio}>
                      <CartesianGrid strokeDasharray="3 3" />
                      <XAxis dataKey="tipo" />
                      <YAxis />
                      <Tooltip />
                      <Legend />
                      <Bar dataKey="casos" fill="#7209B7" name="Casos" />
                    </BarChart>
                  </ResponsiveContainer>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-3 mt-4">
                    {datosMitigacion.vectoresContagio.map((vector, idx) => (
                      <div key={idx} className="p-4 border rounded-lg text-center bg-gradient-to-br from-purple-50 to-blue-50">
                        <Badge className="bg-purple-600 text-white mb-2">{vector.codigo}</Badge>
                        <p className="text-2xl font-bold text-purple-900">{vector.casos}</p>
                        <p className="text-xs text-muted-foreground mt-1">{vector.porcentaje}%</p>
                      </div>
                    ))}
                  </div>
                </CardContent>
              </Card>

              {/* Casos por Prioridad y Estado */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <Card>
                  <CardHeader>
                    <CardTitle className="text-lg">Casos por Nivel de Prioridad *</CardTitle>
                    <CardDescription>Clasificación según urgencia de intervención *</CardDescription>
                  </CardHeader>
                  <CardContent>
                    <div className="space-y-3">
                      {datosMitigacion.casosPorPrioridad.map((prioridad, idx) => {
                        const colors = {
                          'Alta': { bg: 'bg-red-50', text: 'text-red-700', border: 'border-red-200', badge: 'bg-red-600' },
                          'Media': { bg: 'bg-orange-50', text: 'text-orange-700', border: 'border-orange-200', badge: 'bg-orange-600' },
                          'Baja': { bg: 'bg-blue-50', text: 'text-blue-700', border: 'border-blue-200', badge: 'bg-blue-600' }
                        };
                        const color = colors[prioridad.prioridad as keyof typeof colors];
                        return (
                          <div key={idx} className={`p-4 border-2 rounded-lg ${color.bg} ${color.border}`}>
                            <div className="flex items-center justify-between mb-2">
                              <span className={`font-medium ${color.text}`}>{prioridad.prioridad}</span>
                              <Badge className={`${color.badge} text-white`}>{prioridad.porcentaje}%</Badge>
                            </div>
                            <div className="flex items-center justify-between">
                              <span className="text-2xl font-bold">{prioridad.casos}</span>
                              <Progress value={prioridad.porcentaje} className="w-24 h-2" />
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  </CardContent>
                </Card>

                <Card>
                  <CardHeader>
                    <CardTitle className="text-lg">Estado de Verificación</CardTitle>
                    <CardDescription>Casos verificados vs solo análisis IA</CardDescription>
                  </CardHeader>
                  <CardContent>
                    <ResponsiveContainer width="100%" height={200}>
                      <RechartsPieChart>
                        <Pie
                          data={datosMitigacion.casosPorEstado}
                          cx="50%"
                          cy="50%"
                          labelLine={false}
                          label={({ estado, porcentaje }) => `${estado}: ${porcentaje}%`}
                          outerRadius={80}
                          fill="#8884d8"
                          dataKey="casos"
                        >
                          {datosMitigacion.casosPorEstado.map((entry, index) => (
                            <Cell key={`cell-${index}`} fill={entry.color} />
                          ))}
                        </Pie>
                        <Tooltip />
                      </RechartsPieChart>
                    </ResponsiveContainer>
                    <div className="space-y-2 mt-4">
                      {datosMitigacion.casosPorEstado.map((estado, idx) => (
                        <div key={idx} className="flex items-center justify-between p-3 border rounded-lg">
                          <div className="flex items-center space-x-2">
                            <div className="w-3 h-3 rounded" style={{ backgroundColor: estado.color }}></div>
                            <span className="font-medium">{estado.estado}</span>
                          </div>
                          <div className="text-right">
                            <p className="font-bold">{estado.casos}</p>
                            <p className="text-xs text-muted-foreground">{estado.porcentaje}%</p>
                          </div>
                        </div>
                      ))}
                    </div>
                  </CardContent>
                </Card>
              </div>

              {/* Sistema de Codificación */}
              <Card className="bg-gradient-to-br from-yellow-50 to-amber-100 border-yellow-200">
                <CardHeader>
                  <CardTitle className="flex items-center space-x-2">
                    <Hash className="h-5 w-5 text-yellow-700" />
                    <span>Sistema de Codificación de Casos</span>
                  </CardTitle>
                  <CardDescription>Formato estándar: TIPO-VECTOR-FECHA-SECUENCIA *</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div className="p-4 bg-white border-2 border-yellow-300 rounded-lg text-center">
                      <p className="text-sm text-muted-foreground mb-1">Total de casos</p>
                      <p className="text-3xl font-bold text-yellow-900">{datosMitigacion.sistemaCodificacion.totalCasos}</p>
                    </div>
                    <div className="p-4 bg-white border-2 border-yellow-300 rounded-lg text-center">
                      <p className="text-sm text-muted-foreground mb-1">Casos hoy *</p>
                      <p className="text-3xl font-bold text-yellow-900">{datosMitigacion.sistemaCodificacion.casosHoy} *</p>
                    </div>
                    <div className="p-4 bg-white border-2 border-yellow-300 rounded-lg text-center">
                      <p className="text-sm text-muted-foreground mb-1">Esta semana</p>
                      <p className="text-3xl font-bold text-yellow-900">{datosMitigacion.sistemaCodificacion.casosSemana}</p>
                    </div>
                    <div className="p-4 bg-white border-2 border-yellow-300 rounded-lg text-center flex flex-col items-center justify-center">
                      <p className="text-sm text-muted-foreground mb-1">Formato *</p>
                      <Badge className="bg-yellow-600 text-white font-mono text-xs px-2 py-1">
                        {datosMitigacion.sistemaCodificacion.formatoEjemplo} *
                      </Badge>
                    </div>
                  </div>
                  <Alert className="mt-4 border-yellow-300 bg-yellow-50">
                    <Hash className="h-4 w-4 text-yellow-700" />
                    <AlertDescription className="text-yellow-900">
                      <strong>Sistema unificado:</strong> Cada caso tiene un código único que identifica tipo de contenido, 
                      vector de propagación, fecha y número secuencial. Esto permite trazabilidad epidemiológica completa.
                    </AlertDescription>
                  </Alert>
                </CardContent>
              </Card>
            </CardContent>
          </Card>
        </TabsContent>
      </Tabs>

      {/* Alertas y Recomendaciones Globales */}
      <Card className="border-orange-200 bg-orange-50/50">
        <CardHeader>
          <CardTitle className="flex items-center space-x-2 text-orange-900">
            <AlertTriangle className="h-6 w-6" />
            <span>Recomendaciones de Intervención Epidemiológica</span>
          </CardTitle>
          <CardDescription>Alertas y acciones sugeridas según las dimensiones de virulencia analizadas</CardDescription>
        </CardHeader>
        <CardContent className="space-y-3">
          <div className="flex items-start space-x-3 p-3 bg-red-50 border border-red-200 rounded-lg">
            <AlertCircle className="h-5 w-5 text-red-600 mt-0.5 flex-shrink-0" />
            <div>
              <h4 className="text-sm text-red-900">Alta Magnitud de Casos Detectada</h4>
              <p className="text-xs text-red-700 mt-1">
                Se han reportado {datosMagnitud.noticiasReportadas.toLocaleString()} casos totales. 
                Se requiere aumentar la capacidad de verificación humana para mantener tiempos de respuesta óptimos.
              </p>
            </div>
          </div>

          <div className="flex items-start space-x-3 p-3 bg-orange-50 border border-orange-200 rounded-lg">
            <Clock className="h-5 w-5 text-orange-600 mt-0.5 flex-shrink-0" />
            <div>
              <h4 className="text-sm text-orange-900">Ventana Crítica de {datosTemporalidad.tiempoViralizacionPromedio}h *</h4>
              <p className="text-xs text-orange-700 mt-1">
                Las noticias falsas se viralizan en promedio en {datosTemporalidad.tiempoViralizacionPromedio} horas *.
                Priorizar detección temprana y respuesta rápida dentro de esta ventana crítica.
              </p>
            </div>
          </div>

          <div className="flex items-start space-x-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
            <Flame className="h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0" />
            <div>
              <h4 className="text-sm text-yellow-900">Índice de Viralidad en {datosAlcance.indiceViralidad}</h4>
              <p className="text-xs text-yellow-700 mt-1">
                El potencial de contagio es significativo con engagement del {datosAlcance.nivelEngagement}% *.
                Implementar estrategias de inmunización en sectores de mayor riesgo.
              </p>
            </div>
          </div>

          <div className="flex items-start space-x-3 p-3 bg-green-50 border border-green-200 rounded-lg">
            <CheckCircle className="h-5 w-5 text-green-600 mt-0.5 flex-shrink-0" />
            <div>
              <h4 className="text-sm text-green-900">Consenso Humano-IA: {datosMitigacion.consensoHumanoVsIA.acuerdo}%</h4>
              <p className="text-xs text-green-700 mt-1">
                La confiabilidad del sistema es alta con {datosMitigacion.consensoHumanoVsIA.acuerdo}% de consenso. 
                Continuar el proceso de aprendizaje activo con los {datosMitigacion.consensoHumanoVsIA.desacuerdo}% de casos en desacuerdo.
              </p>
            </div>
          </div>
        </CardContent>
      </Card>

      {/* Leyenda de Datos Mock */}
      <Alert className="border-blue-200 bg-blue-50/50">
        <AlertCircle className="h-4 w-4 text-blue-600" />
        <AlertDescription className="text-blue-800 text-sm">
          <strong>* = Datos de prueba:</strong> Los valores marcados con asterisco (*) son datos de ejemplo o estimaciones.
          Una vez la API esté completamente estable, estos serán reemplazados con datos reales del sistema.
        </AlertDescription>
      </Alert>
    </div>
  );
}
 - - - - - - - - - - - - 
src/components/VerificationSuccessDialog.tsx

import React from 'react';
import botilitoImage from 'figma:asset/e27a276e6ff0e187a67cf54678c265c1c38adbf7.png';
import { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from './ui/dialog';
import { Button } from './ui/button';
import { Badge } from './ui/badge';
import { Progress } from './ui/progress';
import { Sparkles, Trophy, Microscope, Flame, TrendingUp, Award, CheckCircle } from 'lucide-react';

interface VerificationSuccessDialogProps {
  isOpen: boolean;
  onClose: () => void;
  gamificationData: any;
}

export function VerificationSuccessDialog({ isOpen, onClose, gamificationData }: VerificationSuccessDialogProps) {
  if (!gamificationData) return null;
  return (
    <Dialog open={isOpen} onOpenChange={(open) => { if (!open) onClose(); }}>
      <DialogContent className="max-w-md border-4 border-primary shadow-2xl" onEscapeKeyDown={(e) => e.preventDefault()} onPointerDownOutside={(e) => e.preventDefault()}>
          <DialogHeader className="relative z-10">
            <div className="flex flex-col items-center space-y-4 py-4">
              <div className="relative"><img src={botilitoImage} alt="Botilito" className="w-32 h-32 object-contain animate-bounce-subtle"/><div className="absolute -top-2 -right-2 bg-primary text-primary-foreground rounded-full p-2 animate-pulse-glow"><Trophy className="h-6 w-6" /></div></div>
              <DialogTitle className="text-center text-3xl">¡Berraquísimo, parcero! 🎉</DialogTitle>
              <DialogDescription className="text-center text-lg">Tu diagnóstico está más afilado que un bisturí. ¡Sos una chimba contribuyendo a la inmunización digital del país! 💉💛</DialogDescription>
            </div>
          </DialogHeader>
          <div className="space-y-4 py-4 relative z-10">
            <div className="bg-gradient-to-br from-primary/30 via-primary/20 to-primary/10 border-2 border-primary rounded-lg p-6 text-center">
              <div className="flex items-center justify-center space-x-2 mb-2"><Sparkles className="h-6 w-6 text-primary animate-pulse" /><p className="text-sm text-muted-foreground">¡Ganaste XP!</p></div>
              <p className="text-5xl font-bold text-primary mb-1">+{gamificationData.pointsEarned}</p>
              <p className="text-sm text-muted-foreground">puntos de experiencia</p>
            </div>
            {gamificationData.newBadge && (
              <div className="bg-gradient-to-r from-yellow-400 via-yellow-300 to-yellow-400 rounded-lg p-4 text-center border-2 border-yellow-500 shadow-lg animate-pulse-glow">
                <div className="flex items-center justify-center space-x-2 mb-2"><Award className="h-6 w-6 text-yellow-800" /><p className="text-yellow-900">¡Insignia Desbloqueada!</p></div>
                <div className="flex items-center justify-center space-x-2 mb-1"><span className="text-2xl">{gamificationData.newBadgeIcon}</span><p className="text-lg text-yellow-900">{gamificationData.newBadge}</p></div>
                <p className="text-xs text-yellow-800">{gamificationData.newBadgeDescription}</p>
              </div>
            )}
            <Button onClick={onClose} className="w-full bg-primary hover:bg-primary/90 text-primary-foreground text-lg py-6"><CheckCircle className="mr-2 h-5 w-5" />¡A darle duro al siguiente caso!</Button>
          </div>
      </DialogContent>
    </Dialog>
  );
}
 - - - - - - - - - - - - 
src/components/DashboardSummaryView.tsx

import React, { useState, useEffect } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Badge } from './ui/badge';
import { Button } from './ui/button';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';
import { Progress } from './ui/progress';
import { Tabs, TabsContent, TabsList, TabsTrigger } from './ui/tabs';
import { 
  AreaChart, Area, BarChart, Bar, LineChart, Line, PieChart, Pie, Cell,
  XAxis, YAxis, CartesianGrid, ResponsiveContainer, Tooltip, Legend
} from 'recharts';
import { 
  Activity, TrendingUp, TrendingDown, AlertTriangle, Shield, 
  Zap, Clock, MapPin, Users, Globe, Bug, Stethoscope, 
  Target, Thermometer, ShieldCheck, AlertOctagon, Eye, Microscope,
  FileText, Image, Video, Volume2, CheckCircle, BarChart3, Map,
  Layers, Filter, Maximize2, Minimize2
} from 'lucide-react';
import { Alert, AlertDescription } from './ui/alert';
import { WhatsAppIcon, FacebookIcon, TwitterIcon, TelegramIcon, TikTokIcon, WebIcon } from './PlatformIcons';
import { AdvancedAnalytics } from './AdvancedAnalytics';
import { FloatingNotifications } from './FloatingNotifications';
import { RealTimeStats } from './RealTimeStats';
import { motion, AnimatePresence } from 'motion/react';

export function DashboardSummaryView() {
  const [viewMode, setViewMode] = useState('overview'); // overview, map, analytics
  const [selectedRegion, setSelectedRegion] = useState('colombia');
  const [timeRange, setTimeRange] = useState('24h');
  const [alertsExpanded, setAlertsExpanded] = useState(false);
  const [mapExpanded, setMapExpanded] = useState(false);

  // Datos epidemiológicos en tiempo real
  const [realTimeData, setRealTimeData] = useState({
    casosActivos: 2847,
    tasaInfeccion: 3.2,
    inmunidadDigital: 67,
    tiempoDeteccion: 4.2
  });

  // Simular actualización en tiempo real
  useEffect(() => {
    const interval = setInterval(() => {
      setRealTimeData(prev => ({
        casosActivos: prev.casosActivos + Math.floor(Math.random() * 10 - 5),
        tasaInfeccion: Math.max(0, prev.tasaInfeccion + (Math.random() - 0.5) * 0.1),
        inmunidadDigital: Math.min(100, Math.max(0, prev.inmunidadDigital + (Math.random() - 0.5) * 2)),
        tiempoDeteccion: Math.max(1, prev.tiempoDeteccion + (Math.random() - 0.5) * 0.2)
      }));
    }, 5000);

    return () => clearInterval(interval);
  }, []);

  // Datos del dashboard
  const epidemicStats = [
    { 
      title: 'Casos Activos', 
      value: realTimeData.casosActivos.toLocaleString(), 
      icon: Bug, 
      change: '+15%', 
      color: 'text-red-600', 
      bgColor: 'bg-red-50',
      trend: 'up'
    },
    { 
      title: 'Tasa de Infección', 
      value: `${realTimeData.tasaInfeccion.toFixed(1)}/h`, 
      icon: Activity, 
      change: '+8%', 
      color: 'text-orange-600', 
      bgColor: 'bg-orange-50',
      trend: 'up'
    },
    { 
      title: 'Inmunidad Digital', 
      value: `${Math.round(realTimeData.inmunidadDigital)}%`, 
      icon: Shield, 
      change: '+2%', 
      color: 'text-green-600', 
      bgColor: 'bg-green-50',
      trend: 'up'
    },
    { 
      title: 'Tiempo Detección', 
      value: `${realTimeData.tiempoDeteccion.toFixed(1)}h`, 
      icon: Clock, 
      change: '-12%', 
      color: 'text-blue-600', 
      bgColor: 'bg-blue-50',
      trend: 'down'
    },
  ];

  const geographicSpread = [
    { region: 'Región Andina', casos: 1456, tasa: 5.2, estado: 'Brote Activo', lat: 4.5709, lng: -74.2973 },
    { region: 'Región Caribe', casos: 934, tasa: 4.1, estado: 'En Aumento', lat: 10.4806, lng: -75.5138 },
    { region: 'Región Pacífico', casos: 687, tasa: 3.8, estado: 'Controlado', lat: 2.9273, lng: -75.2819 },
    { region: 'Región Orinoquía', casos: 234, tasa: 2.3, estado: 'Estable', lat: 6.1701, lng: -67.4977 },
    { region: 'Región Amazonia', casos: 156, tasa: 1.9, estado: 'Bajo Control', lat: -1.2136, lng: -69.8062 },
    { region: 'Región Insular', casos: 43, tasa: 0.8, estado: 'Bajo Control', lat: 12.5564, lng: -81.7152 },
  ];

  const alertsData = [
    {
      id: 1,
      type: 'critical',
      title: 'Brote detectado en Región Andina',
      message: 'Incremento del 45% en casos en las últimas 6 horas',
      timestamp: 'hace 12 min',
      region: 'Andina'
    },
    {
      id: 2,
      type: 'warning',
      title: 'Patrón anómalo en redes sociales',
      message: 'Detección de campaña coordinada en WhatsApp',
      timestamp: 'hace 25 min',
      region: 'Caribe'
    },
    {
      id: 3,
      type: 'info',
      title: 'Neutralización exitosa',
      message: '234 casos verificados y marcados como falsos',
      timestamp: 'hace 1h',
      region: 'Nacional'
    }
  ];

  const getRegionStatus = (estado: string) => {
    switch (estado) {
      case 'Brote Crítico':
        return <Badge className="bg-red-100 text-red-800 border-red-300 animate-pulse">🔴 {estado}</Badge>;
      case 'Brote Activo':
        return <Badge className="bg-orange-100 text-orange-800 border-orange-300">🟡 {estado}</Badge>;
      case 'En Aumento':
        return <Badge className="bg-yellow-100 text-yellow-800 border-yellow-300">📈 {estado}</Badge>;
      case 'Controlado':
        return <Badge className="bg-blue-100 text-blue-800 border-blue-300">🔵 {estado}</Badge>;
      case 'Estable':
        return <Badge className="bg-gray-100 text-gray-800 border-gray-300">⚪ {estado}</Badge>;
      case 'Bajo Control':
        return <Badge className="bg-green-100 text-green-800 border-green-300">🟢 {estado}</Badge>;
      default:
        return <Badge variant="outline">{estado}</Badge>;
    }
  };

  const getAlertIcon = (type: string) => {
    switch (type) {
      case 'critical': return <AlertTriangle className="h-4 w-4 text-red-500" />;
      case 'warning': return <AlertOctagon className="h-4 w-4 text-orange-500" />;
      case 'info': return <CheckCircle className="h-4 w-4 text-blue-500" />;
      default: return <AlertTriangle className="h-4 w-4" />;
    }
  };

  const renderInteractiveMap = () => (
    <div className="relative h-96 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl overflow-hidden">
      {/* Mapa SVG de Colombia */}
      <svg
        viewBox="0 0 400 500"
        className="w-full h-full"
        style={{ filter: 'drop-shadow(0 4px 6px rgba(0,0,0,0.1))' }}
      >
        <defs>
          <linearGradient id="andinaGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#FF6B35" />
            <stop offset="100%" stopColor="#E55A2E" />
          </linearGradient>
          <linearGradient id="caribeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#FFD60A" />
            <stop offset="100%" stopColor="#FFC107" />
          </linearGradient>
          <linearGradient id="pacificoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#00B4D8" />
            <stop offset="100%" stopColor="#0096C7" />
          </linearGradient>
          <linearGradient id="orinoquiaGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#6C757D" />
            <stop offset="100%" stopColor="#495057" />
          </linearGradient>
          <linearGradient id="amazoniaGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#00E676" />
            <stop offset="100%" stopColor="#00C853" />
          </linearGradient>
        </defs>
        
        {/* Región Andina - Brote Activo */}
        <motion.path
          d="M120 100 L280 110 L290 170 L275 270 L190 310 L140 280 L110 250 L120 180 Z"
          fill="url(#andinaGradient)"
          stroke="#fff"
          strokeWidth="3"
          className="cursor-pointer"
          whileHover={{ scale: 1.02 }}
          onClick={() => setSelectedRegion('andina')}
        />
        
        {/* Región Caribe - En Aumento */}
        <motion.path
          d="M70 40 L330 40 L330 100 L280 110 L220 125 L170 115 L120 100 L70 85 Z"
          fill="url(#caribeGradient)"
          stroke="#fff"
          strokeWidth="3"
          className="cursor-pointer"
          whileHover={{ scale: 1.02 }}
          onClick={() => setSelectedRegion('caribe')}
        />
        
        {/* Región Pacífico - Controlado */}
        <motion.path
          d="M40 90 L120 100 L110 250 L90 350 L70 400 L50 380 L35 320 L25 250 L30 180 Z"
          fill="url(#pacificoGradient)"
          stroke="#fff"
          strokeWidth="3"
          className="cursor-pointer"
          whileHover={{ scale: 1.02 }}
          onClick={() => setSelectedRegion('pacifico')}
        />
        
        {/* Región Orinoquía - Estable */}
        <motion.path
          d="M280 110 L370 130 L365 260 L320 285 L290 270 L275 220 L290 170 Z"
          fill="url(#orinoquiaGradient)"
          stroke="#fff"
          strokeWidth="3"
          className="cursor-pointer"
          whileHover={{ scale: 1.02 }}
          onClick={() => setSelectedRegion('orinoquia')}
        />
        
        {/* Región Amazonía - Bajo Control */}
        <motion.path
          d="M110 250 L275 270 L320 285 L340 360 L300 430 L200 440 L140 410 L90 350 Z"
          fill="url(#amazoniaGradient)"
          stroke="#fff"
          strokeWidth="3"
          className="cursor-pointer"
          whileHover={{ scale: 1.02 }}
          onClick={() => setSelectedRegion('amazonia')}
        />
        
        {/* Pulsos en regiones críticas */}
        <motion.circle 
          cx="200" 
          cy="200" 
          r="6" 
          fill="#FF6B35" 
          opacity="0.8"
          animate={{ 
            scale: [1, 1.5, 1],
            opacity: [0.8, 0.3, 0.8]
          }}
          transition={{ 
            duration: 2,
            repeat: Infinity,
            ease: "easeInOut"
          }}
        />
      </svg>
      
      {/* Controles del mapa */}
      <div className="absolute top-4 right-4 flex flex-col space-y-2">
        <Button
          size="sm"
          variant="secondary"
          onClick={() => setMapExpanded(!mapExpanded)}
          className="bg-white/90 backdrop-blur-sm"
        >
          {mapExpanded ? <Minimize2 className="h-4 w-4" /> : <Maximize2 className="h-4 w-4" />}
        </Button>
        <Button
          size="sm"
          variant="secondary"
          className="bg-white/90 backdrop-blur-sm"
        >
          <Filter className="h-4 w-4" />
        </Button>
      </div>
      
      {/* Información de región seleccionada */}
      {selectedRegion !== 'colombia' && (
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          className="absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-lg p-4 shadow-lg"
        >
          <h4 className="font-medium mb-2">Región {selectedRegion}</h4>
          <div className="text-sm text-muted-foreground">
            <div>Casos activos: 1,456</div>
            <div>Tasa: 5.2/hora</div>
            <div>Estado: Brote Activo</div>
          </div>
        </motion.div>
      )}
    </div>
  );

  return (
    <>
      <FloatingNotifications />
      <div className="space-y-6">
        {/* Header dinámico */}
      <div className="flex flex-col lg:flex-row lg:items-center justify-between gap-4">
        <div>
          <h1 className="text-3xl font-semibold mb-2">Centro de Control Desinfodémico</h1>
          <p className="text-muted-foreground">
            Monitoreo epidemiológico en tiempo real de la desinformación en Colombia
          </p>
        </div>
        
        <div className="flex items-center space-x-3">
          <Select value={timeRange} onValueChange={setTimeRange}>
            <SelectTrigger className="w-32">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="1h">Última hora</SelectItem>
              <SelectItem value="24h">24 horas</SelectItem>
              <SelectItem value="7d">7 días</SelectItem>
              <SelectItem value="30d">30 días</SelectItem>
            </SelectContent>
          </Select>
          
          <Tabs value={viewMode} onValueChange={setViewMode} className="w-auto">
            <TabsList className="grid w-full grid-cols-3">
              <TabsTrigger value="overview" className="flex items-center space-x-1">
                <BarChart3 className="h-4 w-4" />
                <span>Vista General</span>
              </TabsTrigger>
              <TabsTrigger value="map" className="flex items-center space-x-1">
                <Map className="h-4 w-4" />
                <span>Mapa</span>
              </TabsTrigger>
              <TabsTrigger value="analytics" className="flex items-center space-x-1">
                <Activity className="h-4 w-4" />
                <span>Análisis</span>
              </TabsTrigger>
            </TabsList>
          </Tabs>
        </div>
      </div>

      {/* Panel de alertas expandible */}
      <Card className="border-orange-200 bg-orange-50/30">
        <CardHeader className="pb-3">
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-2">
              <AlertTriangle className="h-5 w-5 text-orange-500 animate-pulse" />
              <CardTitle className="text-orange-800">Alertas Epidemiológicas</CardTitle>
              <Badge variant="destructive" className="animate-pulse">3 ACTIVAS</Badge>
            </div>
            <Button
              variant="ghost"
              size="sm"
              onClick={() => setAlertsExpanded(!alertsExpanded)}
            >
              {alertsExpanded ? 'Contraer' : 'Expandir'}
            </Button>
          </div>
        </CardHeader>
        <CardContent>
          <AnimatePresence>
            {alertsExpanded ? (
              <motion.div
                initial={{ height: 0, opacity: 0 }}
                animate={{ height: 'auto', opacity: 1 }}
                exit={{ height: 0, opacity: 0 }}
                className="space-y-3"
              >
                {alertsData.map((alert) => (
                  <div key={alert.id} className="flex items-start space-x-3 p-3 bg-white rounded-lg border">
                    {getAlertIcon(alert.type)}
                    <div className="flex-1">
                      <div className="font-medium">{alert.title}</div>
                      <div className="text-sm text-muted-foreground">{alert.message}</div>
                      <div className="text-xs text-muted-foreground mt-1">
                        {alert.region} • {alert.timestamp}
                      </div>
                    </div>
                  </div>
                ))}
              </motion.div>
            ) : (
              <motion.div
                initial={{ opacity: 0 }}
                animate={{ opacity: 1 }}
                className="text-sm text-orange-700"
              >
                {alertsData.length} alertas requieren atención inmediata
              </motion.div>
            )}
          </AnimatePresence>
        </CardContent>
      </Card>

      {/* Métricas principales animadas */}
      <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
        {epidemicStats.map((stat, index) => (
          <motion.div
            key={stat.title}
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: index * 0.1 }}
          >
            <Card className={`${stat.bgColor} border-0 overflow-hidden relative`}>
              <CardContent className="p-6">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-sm font-medium text-muted-foreground">{stat.title}</p>
                    <div className="flex items-center space-x-2">
                      <motion.p 
                        className={`text-2xl font-semibold ${stat.color}`}
                        key={stat.value}
                        initial={{ scale: 1.2 }}
                        animate={{ scale: 1 }}
                        transition={{ duration: 0.3 }}
                      >
                        {stat.value}
                      </motion.p>
                      <Badge 
                        variant={stat.trend === 'up' ? 'destructive' : 'default'}
                        className="text-xs"
                      >
                        {stat.trend === 'up' ? <TrendingUp className="h-3 w-3" /> : <TrendingDown className="h-3 w-3" />}
                        {stat.change}
                      </Badge>
                    </div>
                  </div>
                  <div className={`${stat.color} opacity-20`}>
                    <stat.icon className="h-8 w-8" />
                  </div>
                </div>
                
                {/* Indicador de pulso para datos críticos */}
                {stat.title === 'Casos Activos' && (
                  <div className="absolute top-2 right-2">
                    <div className="w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                  </div>
                )}
              </CardContent>
            </Card>
          </motion.div>
        ))}
      </div>

      {/* Contenido principal dinámico */}
      <div className="grid gap-6 lg:grid-cols-3">
        <div className="lg:col-span-2">
          <AnimatePresence mode="wait">
            {viewMode === 'analytics' ? (
              <motion.div
                key="analytics"
                initial={{ opacity: 0, x: -20 }}
                animate={{ opacity: 1, x: 0 }}
                exit={{ opacity: 0, x: 20 }}
              >
                <AdvancedAnalytics />
              </motion.div>
            ) : viewMode === 'map' ? (
              <motion.div
                key="map"
                initial={{ opacity: 0, x: -20 }}
                animate={{ opacity: 1, x: 0 }}
                exit={{ opacity: 0, x: 20 }}
              >
                <Card>
                  <CardHeader>
                    <CardTitle className="flex items-center space-x-2">
                      <MapPin className="h-5 w-5 text-primary" />
                      <span>Mapa Epidemiológico Interactivo</span>
                    </CardTitle>
                    <CardDescription>
                      Haz clic en las regiones para ver detalles específicos
                    </CardDescription>
                  </CardHeader>
                  <CardContent>
                    {renderInteractiveMap()}
                  </CardContent>
                </Card>
              </motion.div>
            ) : (
              <motion.div
                key="overview"
                initial={{ opacity: 0, x: -20 }}
                animate={{ opacity: 1, x: 0 }}
                exit={{ opacity: 0, x: 20 }}
              >
                <Card>
                  <CardHeader>
                    <CardTitle className="flex items-center space-x-2">
                      <MapPin className="h-5 w-5 text-primary" />
                      <span>Propagación Geográfica</span>
                    </CardTitle>
                    <CardDescription>
                      Estado epidemiológico por región
                    </CardDescription>
                  </CardHeader>
                  <CardContent>
                    <div className="space-y-3">
                      {geographicSpread.map((item, index) => (
                        <motion.div
                          key={index}
                          initial={{ opacity: 0, x: -20 }}
                          animate={{ opacity: 1, x: 0 }}
                          transition={{ delay: index * 0.1 }}
                          className="flex items-center justify-between p-3 bg-muted/30 rounded hover:bg-muted/50 transition-colors cursor-pointer"
                          onClick={() => {
                            setSelectedRegion(item.region.toLowerCase().replace('región ', ''));
                            setViewMode('map');
                          }}
                        >
                          <div>
                            <div className="font-medium">{item.region}</div>
                            <div className="text-sm text-muted-foreground">
                              {item.casos.toLocaleString()} casos • Tasa: {item.tasa}/hora
                            </div>
                          </div>
                          <div className="text-right">
                            {getRegionStatus(item.estado)}
                          </div>
                        </motion.div>
                      ))}
                    </div>
                  </CardContent>
                </Card>
              </motion.div>
            )}
          </AnimatePresence>
        </div>

        {/* Panel lateral con métricas adicionales */}
        <div className="space-y-6">
          <RealTimeStats />
          
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Target className="h-5 w-5 text-primary" />
                <span>Acciones Rápidas</span>
              </CardTitle>
            </CardHeader>
            <CardContent className="space-y-3">
              <Button className="w-full justify-start" variant="outline">
                <AlertTriangle className="h-4 w-4 mr-2" />
                Crear Alerta Manual
              </Button>
              <Button className="w-full justify-start" variant="outline">
                <Eye className="h-4 w-4 mr-2" />
                Análisis Detallado
              </Button>
              <Button className="w-full justify-start" variant="outline">
                <Shield className="h-4 w-4 mr-2" />
                Verificación Masiva
              </Button>
            </CardContent>
          </Card>
        </div>
      </div>
    </div>
    </>
  );
} - - - - - - - - - - - - 
src/components/DocumentacionIndicadores.tsx

import React, { useState } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Badge } from './ui/badge';
import { Tabs, TabsContent, TabsList, TabsTrigger } from './ui/tabs';
import { Separator } from './ui/separator';
import { ScrollArea } from './ui/scroll-area';
import { 
  BookOpen, Activity, TrendingUp, Share2, Flame, Hash,
  Clock, Eye, Gauge, Shield, Target, Radio, Zap, Users,
  AlertCircle, Info, Code, Calculator, Database, ArrowRight,
  CheckCircle, Download, Search, Globe, BarChart3
} from 'lucide-react';

export function DocumentacionIndicadores() {
  const [selectedIndicador, setSelectedIndicador] = useState<string | null>(null);

  const indicadores = [
    {
      id: 'r0',
      nombre: 'R₀ - Tasa de Reproducción',
      icon: Radio,
      categoria: 'epidemiologica',
      color: 'purple',
      descripcion: 'Número promedio de nuevos casos que genera cada caso de desinformación',
      formula: 'R₀ = Nuevos casos (T) / Casos activos (T-1)',
      ejemplo: 'Si había 100 casos y aparecen 230 nuevos: R₀ = 230/100 = 2.3',
      interpretacion: [
        { rango: 'R₀ < 1.0', significado: 'Controlado - cada caso genera menos de 1 nuevo', color: 'green' },
        { rango: 'R₀ = 1.0', significado: 'Estable - cada caso genera 1 nuevo', color: 'yellow' },
        { rango: 'R₀ > 1.0', significado: 'Crecimiento - cada caso genera más de 1 nuevo', color: 'orange' },
        { rango: 'R₀ ≥ 2.5', significado: 'CRÍTICO - Propagación exponencial', color: 'red' }
      ],
      datosNecesarios: ['nuevosCasos (últimos 7 días)', 'casosActivos (período anterior)'],
      codigoEjemplo: `const R0 = nuevosCasos / casosActivosAntes;
// Ejemplo: 89 / 67 = 1.33
// Interpretación: Cada caso genera 1.33 nuevos casos`
    },
    {
      id: 'velocidad',
      nombre: 'Velocidad de Transmisión',
      icon: Zap,
      categoria: 'epidemiologica',
      color: 'orange',
      descripcion: 'Qué tan rápido se propaga la desinformación una vez que comienza a circular',
      formula: 'Velocidad = ((Casos 24h × 3) / Casos 72h) × 100',
      ejemplo: 'Casos últimas 24h: 15, últimas 72h: 38 → (15×3)/38 × 100 = 118% → 85% normalizado',
      interpretacion: [
        { rango: '0-30%', significado: 'Propagación lenta', color: 'green' },
        { rango: '31-60%', significado: 'Propagación moderada', color: 'yellow' },
        { rango: '61-85%', significado: 'Propagación rápida', color: 'orange' },
        { rango: '86-100%', significado: 'Propagación viral', color: 'red' }
      ],
      datosNecesarios: ['Casos últimas 24 horas', 'Casos últimas 72 horas', 'Plataforma de origen'],
      codigoEjemplo: `const velocidad = ((casosUltimas24h * 3) / casosUltimas72h) * 100;
// Factor plataforma: WhatsApp 1.5x, Twitter 1.3x, Facebook 1.2x`
    },
    {
      id: 'infectividad',
      nombre: 'Infectividad',
      icon: Share2,
      categoria: 'epidemiologica',
      color: 'red',
      descripcion: 'Probabilidad de que un usuario que ve la desinformación la comparta o crea',
      formula: 'Infectividad = (Virulencia × 0.6) + (Velocidad × 0.4)',
      ejemplo: 'Virulencia 75% + Velocidad 85% → (75×0.6)+(85×0.4) = 79%',
      interpretacion: [
        { rango: '0-30%', significado: 'Baja - poca gente lo comparte', color: 'green' },
        { rango: '31-60%', significado: 'Moderada', color: 'yellow' },
        { rango: '61-80%', significado: 'Alta infectividad', color: 'orange' },
        { rango: '81-100%', significado: 'Extremadamente contagioso', color: 'red' }
      ],
      datosNecesarios: ['Marcadores detectados', 'Virulencia de marcadores', 'Velocidad de transmisión'],
      codigoEjemplo: `const infectividad = (virulenciaPromedio * 0.6) + (velocidad * 0.4);
// Con datos reales: (75 * 0.6) + (85 * 0.4) = 79%`
    },
    {
      id: 'virulencia',
      nombre: 'Virulencia Promedio',
      icon: Flame,
      categoria: 'epidemiologica',
      color: 'yellow',
      descripcion: 'Nivel de peligrosidad o daño potencial de la desinformación',
      formula: 'Virulencia = Σ(virulencia_marcador × casos) / total_casos',
      ejemplo: 'Falso (90×456) + Engañoso (75×389) = 87,375 / 1,157 casos = 75.5%',
      interpretacion: [
        { rango: '0-30%', significado: 'Leve (mayormente satírico)', color: 'green' },
        { rango: '31-60%', significado: 'Moderada', color: 'yellow' },
        { rango: '61-80%', significado: 'Alta - contenido peligroso', color: 'orange' },
        { rango: '81-100%', significado: 'Extremadamente peligroso', color: 'red' }
      ],
      datosNecesarios: ['Marcadores detectados por caso', 'Virulencia de cada marcador', 'Cantidad casos'],
      codigoEjemplo: `const virulencias = { falso: 90, enganoso: 75, satirico: 20 };
const promedio = casos.reduce((sum, c) => 
  sum + virulencias[c.marcador], 0) / casos.length;`
    },
    {
      id: 'casosActivos',
      nombre: 'Casos Activos',
      icon: Activity,
      categoria: 'prevalencia',
      color: 'blue',
      descripcion: 'Casos de desinformación actualmente en circulación',
      formula: 'Casos con status activo o reportados en últimos 30 días',
      ejemplo: '456 casos en la región Andina actualmente en seguimiento',
      interpretacion: [
        { rango: 'Número alto', significado: 'Mucha desinformación activa', color: 'red' },
        { rango: 'Incremento rápido', significado: 'Brote desinfodémico', color: 'orange' }
      ],
      datosNecesarios: ['Lista de casos', 'Estado de cada caso', 'Fecha de reporte'],
      codigoEjemplo: `const activos = casos.filter(c => 
  c.status === 'en_verificacion' || 
  (Date.now() - new Date(c.submittedAt)) < 30_DIAS
).length;`
    },
    {
      id: 'densidad',
      nombre: 'Densidad (por 100k hab)',
      icon: Users,
      categoria: 'prevalencia',
      color: 'teal',
      descripcion: 'Casos normalizados por población, permite comparar regiones',
      formula: 'Densidad = (Casos activos / Población) × 100,000',
      ejemplo: 'Andina: 456 casos / 34,140,778 hab × 100k = 1.34 casos/100k',
      interpretacion: [
        { rango: 'Densidad alta', significado: 'Mayor exposición per cápita', color: 'orange' },
        { rango: 'Permite comparar', significado: 'Regiones de diferentes tamaños', color: 'blue' }
      ],
      datosNecesarios: ['Casos activos región', 'Población total región'],
      codigoEjemplo: `const densidad = (casosActivos / poblacionRegion) * 100000;
// Región Andina: (456 / 34140778) * 100000 = 1.34`
    },
    {
      id: 'tiempoDeteccion',
      nombre: 'Tiempo de Detección',
      icon: Clock,
      categoria: 'prevalencia',
      color: 'cyan',
      descripcion: 'Tiempo promedio desde circulación hasta reporte',
      formula: 'Promedio(fecha_reporte - fecha_publicación)',
      ejemplo: 'Región Andina: 3.8 horas promedio de detección',
      interpretacion: [
        { rango: '< 4 horas', significado: 'Detección muy rápida', color: 'green' },
        { rango: '4-8 horas', significado: 'Detección rápida', color: 'yellow' },
        { rango: '8-24 horas', significado: 'Detección moderada', color: 'orange' },
        { rango: '> 24 horas', significado: 'Detección lenta', color: 'red' }
      ],
      datosNecesarios: ['Fecha publicación original', 'Fecha reporte en Botilito'],
      codigoEjemplo: `const tiempos = casos.map(c => 
  (c.submittedAt - c.originalPublishDate) / 3600000
);
const promedio = tiempos.reduce((a,b) => a+b) / tiempos.length;`
    },
    {
      id: 'tasaReporte',
      nombre: 'Tasa de Reporte',
      icon: Eye,
      categoria: 'prevalencia',
      color: 'violet',
      descripcion: 'Porcentaje de participación ciudadana en reportar',
      formula: 'Tasa = (Usuarios que reportaron / Total usuarios) × 100',
      ejemplo: 'Región Andina: 74% de participación ciudadana',
      interpretacion: [
        { rango: '< 40%', significado: 'Baja participación', color: 'red' },
        { rango: '40-70%', significado: 'Participación moderada', color: 'yellow' },
        { rango: '> 70%', significado: 'Alta participación', color: 'green' }
      ],
      datosNecesarios: ['Usuarios únicos reportantes', 'Total usuarios registrados'],
      codigoEjemplo: `const tasaReporte = (usuariosReportaron / totalUsuarios) * 100;
// O por población: (reportes / poblacion) * 100k normalizado`
    },
    {
      id: 'consenso',
      nombre: 'Consenso Humano + IA',
      icon: Gauge,
      categoria: 'prevalencia',
      color: 'pink',
      descripcion: 'Coincidencia entre diagnósticos de IA y verificadores humanos',
      formula: 'Consenso = (Marcadores comunes / Marcadores únicos) × 100',
      ejemplo: 'Región Andina: 83% de consenso - alta confiabilidad',
      interpretacion: [
        { rango: '< 40%', significado: 'Bajo - discrepancia significativa', color: 'red' },
        { rango: '40-69%', significado: 'Moderado - necesita más verificación', color: 'yellow' },
        { rango: '70-89%', significado: 'Alto consenso - confiable', color: 'green' },
        { rango: '≥ 90%', significado: 'Excelente - muy confiable', color: 'green' }
      ],
      datosNecesarios: ['consensusMarkers (humanos)', 'aiAnalysis.detectedMarkers'],
      codigoEjemplo: `const common = humanMarkers.filter(m => aiMarkers.includes(m));
const total = new Set([...humanMarkers, ...aiMarkers]).size;
const consenso = (common.length / total) * 100;`
    },
    {
      id: 'igc',
      nombre: 'Índice de Gravedad Combinada',
      icon: Target,
      categoria: 'derivado',
      color: 'indigo',
      descripcion: 'Indicador compuesto: Virulencia × Velocidad × R₀',
      formula: 'IGC = (Virulencia × 0.4) + (Velocidad × 0.35) + (R₀ norm × 0.25)',
      ejemplo: 'Virulencia 75, Velocidad 85, R₀ 2.7 → IGC = 73.25 (Alto riesgo)',
      interpretacion: [
        { rango: '0-40', significado: 'Bajo riesgo', color: 'green' },
        { rango: '41-65', significado: 'Riesgo moderado', color: 'yellow' },
        { rango: '66-85', significado: 'Alto riesgo', color: 'orange' },
        { rango: '86-100', significado: 'Crítico - intervención inmediata', color: 'red' }
      ],
      datosNecesarios: ['Virulencia', 'Velocidad', 'R₀'],
      codigoEjemplo: `const r0Norm = Math.min((r0 / 5) * 100, 100);
const igc = (virulencia * 0.4) + (velocidad * 0.35) + (r0Norm * 0.25);
// Ejemplo: (75*0.4) + (85*0.35) + (54*0.25) = 73.25`
    },
    {
      id: 'vectorTransmision',
      nombre: 'Vector de Transmisión',
      icon: Globe,
      categoria: 'transmision',
      color: 'blue',
      descripcion: 'Plataforma principal desde donde se propaga la desinformación',
      formula: 'Contar casos por plataforma, ordenar descendente',
      ejemplo: 'WhatsApp: 38% de todos los casos (Vector principal)',
      interpretacion: [
        { rango: 'Vector principal', significado: 'Dónde concentrar monitoreo', color: 'blue' },
        { rango: 'Por plataforma', significado: 'Estrategias específicas', color: 'purple' }
      ],
      datosNecesarios: ['sources en aiAnalysis por cada caso'],
      codigoEjemplo: `const porPlataforma = {};
casos.forEach(c => c.sources.forEach(s => 
  porPlataforma[s] = (porPlataforma[s] || 0) + 1
));
const principal = Object.entries(porPlataforma).sort((a,b) => b[1]-a[1])[0];`
    }
  ];

  const categorias = [
    { id: 'epidemiologica', nombre: 'Métricas Epidemiológicas', color: 'purple', descripcion: 'Indicadores del comportamiento viral' },
    { id: 'prevalencia', nombre: 'Prevalencia y Detección', color: 'blue', descripcion: 'Métricas de casos y respuesta' },
    { id: 'derivado', nombre: 'Indicadores Derivados', color: 'orange', descripcion: 'Combinaciones y análisis avanzados' },
    { id: 'transmision', nombre: 'Fuentes y Transmisión', color: 'green', descripcion: 'Vectores y plataformas' }
  ];

  const virulenciasMarcadores = [
    { marcador: 'Incitación a la violencia', virulencia: 98, color: 'red' },
    { marcador: 'Discurso de odio/racismo', virulencia: 95, color: 'red' },
    { marcador: 'Falso', virulencia: 90, color: 'red' },
    { marcador: 'Manipulado', virulencia: 85, color: 'orange' },
    { marcador: 'Teoría conspirativa', virulencia: 80, color: 'purple' },
    { marcador: 'Engañoso', virulencia: 75, color: 'orange' },
    { marcador: 'Sin contexto', virulencia: 60, color: 'yellow' },
    { marcador: 'Sensacionalista', virulencia: 55, color: 'yellow' },
    { marcador: 'No verificable', virulencia: 35, color: 'gray' },
    { marcador: 'Satírico', virulencia: 20, color: 'blue' },
    { marcador: 'Verdadero', virulencia: 0, color: 'green' }
  ];

  const getColorClass = (color: string) => {
    const colors: Record<string, string> = {
      purple: 'bg-purple-50 text-purple-700 border-purple-200',
      orange: 'bg-orange-50 text-orange-700 border-orange-200',
      red: 'bg-red-50 text-red-700 border-red-200',
      yellow: 'bg-yellow-50 text-yellow-700 border-yellow-200',
      blue: 'bg-blue-50 text-blue-700 border-blue-200',
      teal: 'bg-teal-50 text-teal-700 border-teal-200',
      cyan: 'bg-cyan-50 text-cyan-700 border-cyan-200',
      violet: 'bg-violet-50 text-violet-700 border-violet-200',
      pink: 'bg-pink-50 text-pink-700 border-pink-200',
      indigo: 'bg-indigo-50 text-indigo-700 border-indigo-200',
      green: 'bg-green-50 text-green-700 border-green-200',
      gray: 'bg-gray-50 text-gray-700 border-gray-200'
    };
    return colors[color] || colors.blue;
  };

  const indicadorSeleccionado = indicadores.find(i => i.id === selectedIndicador);

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-start justify-between">
        <div className="space-y-2">
          <div className="flex items-center space-x-3">
            <div className="p-3 bg-primary rounded-lg">
              <BookOpen className="h-8 w-8 text-primary-foreground" />
            </div>
            <div>
              <h1 className="text-3xl">Documentación de Indicadores Epidemiológicos</h1>
              <p className="text-muted-foreground">
                Guía completa para entender y calcular cada métrica del Mapa Desinfodémico
              </p>
            </div>
          </div>
        </div>
        
        <Button variant="outline" size="sm">
          <Download className="h-4 w-4 mr-2" />
          Exportar PDF
        </Button>
      </div>

      {/* Tabs principales */}
      <Tabs defaultValue="indicadores" className="w-full">
        <TabsList className="grid w-full grid-cols-4">
          <TabsTrigger value="indicadores">
            <BarChart3 className="h-4 w-4 mr-2" />
            Indicadores
          </TabsTrigger>
          <TabsTrigger value="categorias">
            <Activity className="h-4 w-4 mr-2" />
            Por Categoría
          </TabsTrigger>
          <TabsTrigger value="marcadores">
            <Flame className="h-4 w-4 mr-2" />
            Virulencia
          </TabsTrigger>
          <TabsTrigger value="implementacion">
            <Code className="h-4 w-4 mr-2" />
            Implementación
          </TabsTrigger>
        </TabsList>

        {/* Tab 1: Lista de Indicadores */}
        <TabsContent value="indicadores" className="space-y-4 mt-6">
          <Card>
            <CardHeader>
              <CardTitle>Todos los Indicadores ({indicadores.length})</CardTitle>
              <CardDescription>Haz clic en cualquier indicador para ver detalles completos</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                {indicadores.map(indicador => {
                  const IconComponent = indicador.icon;
                  return (
                    <Card 
                      key={indicador.id}
                      className={`cursor-pointer transition-all hover:shadow-md ${
                        selectedIndicador === indicador.id ? 'ring-2 ring-primary' : ''
                      }`}
                      onClick={() => setSelectedIndicador(indicador.id)}
                    >
                      <CardHeader className="pb-3">
                        <div className="flex items-start justify-between">
                          <div className={`p-2 rounded-lg ${getColorClass(indicador.color)}`}>
                            <IconComponent className="h-5 w-5" />
                          </div>
                          <Badge variant="outline" className="text-xs">
                            {indicador.categoria}
                          </Badge>
                        </div>
                        <CardTitle className="text-base mt-2">{indicador.nombre}</CardTitle>
                      </CardHeader>
                      <CardContent>
                        <p className="text-sm text-muted-foreground line-clamp-2">
                          {indicador.descripcion}
                        </p>
                      </CardContent>
                    </Card>
                  );
                })}
              </div>
            </CardContent>
          </Card>

          {/* Detalle del indicador seleccionado */}
          {indicadorSeleccionado && (
            <Card className="border-2 border-primary">
              <CardHeader>
                <div className="flex items-start justify-between">
                  <div className="flex items-center space-x-3">
                    {React.createElement(indicadorSeleccionado.icon, { 
                      className: "h-8 w-8 text-primary" 
                    })}
                    <div>
                      <CardTitle className="text-2xl">{indicadorSeleccionado.nombre}</CardTitle>
                      <CardDescription className="mt-1 text-base">
                        {indicadorSeleccionado.descripcion}
                      </CardDescription>
                    </div>
                  </div>
                  <Button 
                    variant="ghost" 
                    size="sm"
                    onClick={() => setSelectedIndicador(null)}
                  >
                    Cerrar
                  </Button>
                </div>
              </CardHeader>
              <CardContent className="space-y-6">
                {/* Fórmula */}
                <div>
                  <div className="flex items-center space-x-2 mb-2">
                    <Calculator className="h-5 w-5 text-primary" />
                    <h3>Fórmula de Cálculo</h3>
                  </div>
                  <div className="p-4 bg-muted rounded-lg font-mono text-sm">
                    {indicadorSeleccionado.formula}
                  </div>
                </div>

                {/* Ejemplo */}
                <div>
                  <div className="flex items-center space-x-2 mb-2">
                    <Info className="h-5 w-5 text-primary" />
                    <h3>Ejemplo Práctico</h3>
                  </div>
                  <div className="p-4 bg-blue-50 border border-blue-200 rounded-lg">
                    <p className="text-sm">{indicadorSeleccionado.ejemplo}</p>
                  </div>
                </div>

                {/* Interpretación */}
                <div>
                  <div className="flex items-center space-x-2 mb-3">
                    <CheckCircle className="h-5 w-5 text-primary" />
                    <h3>Interpretación de Valores</h3>
                  </div>
                  <div className="space-y-2">
                    {indicadorSeleccionado.interpretacion.map((interp, idx) => (
                      <div 
                        key={idx}
                        className={`p-3 rounded-lg border ${getColorClass(interp.color)}`}
                      >
                        <div className="flex items-center justify-between">
                          <Badge variant="outline" className="font-mono text-xs">
                            {interp.rango}
                          </Badge>
                          <ArrowRight className="h-4 w-4 mx-2" />
                          <span className="text-sm flex-1">{interp.significado}</span>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>

                {/* Datos necesarios */}
                <div>
                  <div className="flex items-center space-x-2 mb-2">
                    <Database className="h-5 w-5 text-primary" />
                    <h3>Datos Necesarios</h3>
                  </div>
                  <div className="flex flex-wrap gap-2">
                    {indicadorSeleccionado.datosNecesarios.map((dato, idx) => (
                      <Badge key={idx} variant="secondary">
                        {dato}
                      </Badge>
                    ))}
                  </div>
                </div>

                {/* Código ejemplo */}
                <div>
                  <div className="flex items-center space-x-2 mb-2">
                    <Code className="h-5 w-5 text-primary" />
                    <h3>Código de Ejemplo</h3>
                  </div>
                  <div className="p-4 bg-gray-900 text-green-400 rounded-lg font-mono text-sm overflow-x-auto">
                    <pre>{indicadorSeleccionado.codigoEjemplo}</pre>
                  </div>
                </div>
              </CardContent>
            </Card>
          )}
        </TabsContent>

        {/* Tab 2: Por Categoría */}
        <TabsContent value="categorias" className="space-y-4 mt-6">
          {categorias.map(categoria => {
            const indicadoresCategoria = indicadores.filter(i => i.categoria === categoria.id);
            return (
              <Card key={categoria.id}>
                <CardHeader className={`${getColorClass(categoria.color)}`}>
                  <CardTitle>{categoria.nombre}</CardTitle>
                  <CardDescription className="text-current opacity-80">
                    {categoria.descripcion} • {indicadoresCategoria.length} indicadores
                  </CardDescription>
                </CardHeader>
                <CardContent className="pt-6">
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                    {indicadoresCategoria.map(indicador => {
                      const IconComponent = indicador.icon;
                      return (
                        <div 
                          key={indicador.id}
                          className="p-4 border rounded-lg hover:shadow-md cursor-pointer transition-all"
                          onClick={() => setSelectedIndicador(indicador.id)}
                        >
                          <div className="flex items-start space-x-3">
                            <div className={`p-2 rounded-lg ${getColorClass(indicador.color)}`}>
                              <IconComponent className="h-5 w-5" />
                            </div>
                            <div className="flex-1">
                              <h4 className="font-medium">{indicador.nombre}</h4>
                              <p className="text-sm text-muted-foreground mt-1">
                                {indicador.descripcion}
                              </p>
                              <div className="mt-2 p-2 bg-muted rounded text-xs font-mono">
                                {indicador.formula}
                              </div>
                            </div>
                          </div>
                        </div>
                      );
                    })}
                  </div>
                </CardContent>
              </Card>
            );
          })}
        </TabsContent>

        {/* Tab 3: Tabla de Virulencia */}
        <TabsContent value="marcadores" className="mt-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Flame className="h-6 w-6 text-primary" />
                <span>Tabla de Virulencia por Marcador</span>
              </CardTitle>
              <CardDescription>
                Nivel de peligrosidad de cada tipo de desinformación (escala 0-100)
              </CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-3">
                {virulenciasMarcadores.map((item, idx) => (
                  <div key={idx} className="flex items-center space-x-4">
                    <div className="flex-1">
                      <div className="flex items-center justify-between mb-2">
                        <span className="font-medium">{item.marcador}</span>
                        <Badge className={`${getColorClass(item.color)}`}>
                          {item.virulencia}%
                        </Badge>
                      </div>
                      <div className="h-2 bg-muted rounded-full overflow-hidden">
                        <div 
                          className={`h-full ${
                            item.virulencia >= 80 ? 'bg-red-600' :
                            item.virulencia >= 60 ? 'bg-orange-600' :
                            item.virulencia >= 40 ? 'bg-yellow-600' :
                            item.virulencia >= 20 ? 'bg-blue-600' :
                            'bg-green-600'
                          }`}
                          style={{ width: `${item.virulencia}%` }}
                        />
                      </div>
                    </div>
                  </div>
                ))}
              </div>

              <Separator className="my-6" />

              <div className="space-y-3">
                <h4 className="flex items-center space-x-2">
                  <Calculator className="h-5 w-5 text-primary" />
                  <span>Cálculo de Virulencia Promedio Regional</span>
                </h4>
                <div className="p-4 bg-muted rounded-lg font-mono text-sm space-y-2">
                  <div>VirulenciaPromedio = Σ(virulencia_marcador × casos) / total_casos</div>
                  <Separator />
                  <div className="text-green-600">// Ejemplo Región Andina:</div>
                  <div>Falso: 892 casos × 90 = 80,280</div>
                  <div>Engañoso: 756 casos × 75 = 56,700</div>
                  <div>Sensacionalista: 645 casos × 55 = 35,475</div>
                  <div>...</div>
                  <div className="text-blue-600">Total: 259,380 / 3,456 casos = 75% virulencia</div>
                </div>
              </div>
            </CardContent>
          </Card>
        </TabsContent>

        {/* Tab 4: Guía de Implementación */}
        <TabsContent value="implementacion" className="space-y-4 mt-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Code className="h-6 w-6 text-primary" />
                <span>Guía de Implementación Técnica</span>
              </CardTitle>
            </CardHeader>
            <CardContent className="space-y-6">
              {/* Estructura de datos */}
              <div>
                <h3 className="mb-3 flex items-center space-x-2">
                  <Database className="h-5 w-5 text-primary" />
                  <span>Estructura de Datos Necesaria</span>
                </h3>
                <div className="p-4 bg-gray-900 text-green-400 rounded-lg font-mono text-sm overflow-x-auto">
                  <pre>{`interface Caso {
  id: string;
  type: 'text' | 'image' | 'video' | 'audio';
  submittedBy: string;
  submittedAt: string; // ISO timestamp
  region: string;
  aiAnalysis: {
    veracity: string;
    confidence: number;
    detectedMarkers: string[];
    sources: string[]; // Plataformas
  };
  consensusMarkers: string[];
  votesCount: number;
  status: 'pendiente' | 'en_verificacion' | 'verificado';
}`}</pre>
                </div>
              </div>

              {/* Constantes */}
              <div>
                <h3 className="mb-3 flex items-center space-x-2">
                  <Hash className="h-5 w-5 text-primary" />
                  <span>Constantes Necesarias</span>
                </h3>
                <div className="p-4 bg-gray-900 text-green-400 rounded-lg font-mono text-sm overflow-x-auto">
                  <pre>{`const VIRULENCIA_MARCADORES = {
  'incitacion_violencia': 98,
  'discurso_odio_racismo': 95,
  'falso': 90,
  'manipulado': 85,
  'teoria_conspirativa': 80,
  'enganoso': 75,
  'sin_contexto': 60,
  'sensacionalista': 55,
  'no_verificable': 35,
  'satirico': 20,
  'verdadero': 0
};

const POBLACION_REGIONES = {
  'caribe': 10654876,
  'andina': 34140778,
  // ...
};`}</pre>
                </div>
              </div>

              {/* Frecuencias de actualización */}
              <div>
                <h3 className="mb-3 flex items-center space-x-2">
                  <Clock className="h-5 w-5 text-primary" />
                  <span>Frecuencias de Actualización Recomendadas</span>
                </h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                  <div className="p-3 border rounded-lg">
                    <div className="font-medium text-sm mb-1">Tiempo Real</div>
                    <div className="text-xs text-muted-foreground">
                      Casos activos, nuevos casos
                    </div>
                  </div>
                  <div className="p-3 border rounded-lg">
                    <div className="font-medium text-sm mb-1">Cada 6 horas</div>
                    <div className="text-xs text-muted-foreground">
                      Virulencia promedio
                    </div>
                  </div>
                  <div className="p-3 border rounded-lg">
                    <div className="font-medium text-sm mb-1">Diario</div>
                    <div className="text-xs text-muted-foreground">
                      R₀, velocidad, infectividad, densidad
                    </div>
                  </div>
                  <div className="p-3 border rounded-lg">
                    <div className="font-medium text-sm mb-1">Semanal</div>
                    <div className="text-xs text-muted-foreground">
                      Tiempo detección, tasa reporte
                    </div>
                  </div>
                </div>
              </div>

              {/* Recomendaciones */}
              <div>
                <h3 className="mb-3 flex items-center space-x-2">
                  <AlertCircle className="h-5 w-5 text-primary" />
                  <span>Recomendaciones de Implementación</span>
                </h3>
                <div className="space-y-2">
                  {[
                    'Cachear cálculos pesados como R₀ y virulencia promedio',
                    'Usar agregaciones en base de datos para conteos',
                    'Crear índices en timestamps para filtros por fecha',
                    'Precalcular métricas en jobs programados',
                    'Usar ventanas temporales (rolling windows) para tendencias',
                    'Normalizar todos los indicadores a escala 0-100 para comparabilidad'
                  ].map((rec, idx) => (
                    <div key={idx} className="flex items-start space-x-2 p-2 bg-green-50 border border-green-200 rounded">
                      <CheckCircle className="h-4 w-4 text-green-600 mt-0.5 flex-shrink-0" />
                      <span className="text-sm text-green-900">{rec}</span>
                    </div>
                  ))}
                </div>
              </div>
            </CardContent>
          </Card>
        </TabsContent>
      </Tabs>

      {/* Footer con glosario */}
      <Card className="bg-gradient-to-r from-primary/10 to-secondary/10">
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <BookOpen className="h-5 w-5 text-primary" />
            <span>Glosario Epidemiológico</span>
          </CardTitle>
        </CardHeader>
        <CardContent>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {[
              { termino: 'Caso', definicion: 'Instancia de desinformación reportada' },
              { termino: 'Marcador de diagnóstico', definicion: 'Tipo/categoría de desinformación' },
              { termino: 'Vector', definicion: 'Plataforma/medio de transmisión' },
              { termino: 'Incidencia', definicion: 'Nuevos casos en un período' },
              { termino: 'Prevalencia', definicion: 'Casos totales existentes' },
              { termino: 'Virulencia', definicion: 'Nivel de peligrosidad/daño' },
              { termino: 'R₀', definicion: 'Tasa de reproducción básica' },
              { termino: 'Consenso', definicion: 'Acuerdo entre diagnósticos' },
              { termino: 'Desinfodémico', definicion: 'Epidemia de desinformación' }
            ].map((item, idx) => (
              <div key={idx} className="p-3 bg-white rounded-lg border">
                <div className="font-medium text-sm text-primary">{item.termino}</div>
                <div className="text-xs text-muted-foreground mt-1">{item.definicion}</div>
              </div>
            ))}
          </div>
        </CardContent>
      </Card>
    </div>
  );
}
 - - - - - - - - - - - - 
src/components/UserProfile.tsx

import React, { useState, useEffect } from 'react';
import botilitoImage from 'figma:asset/e27a276e6ff0e187a67cf54678c265c1c38adbf7.png';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Badge } from './ui/badge';
import { Progress } from './ui/progress';
import { Button } from './ui/button';
import { Avatar, AvatarFallback, AvatarImage } from './ui/avatar';
import { Separator } from './ui/separator';
import { Input } from './ui/input';
import { 
  User, 
  Mail, 
  Calendar, 
  Shield, 
  Trophy, 
  Target, 
  Activity, 
  TrendingUp, 
  Eye, 
  CheckCircle, 
  XCircle, 
  AlertTriangle, 
  Clock, 
  Microscope, 
  Skull, 
  Ban, 
  Flame,
  Award,
  Star,
  Lock,
  Camera,
  Edit3,
  Settings,
  Zap,
  Brain,
  Crown,
  Medal,
  Sparkles,
  Gift,
  Coffee,
  Bot,
  Globe,
  Users,
  FileText,
  BarChart3,
  TrendingDown,
  Siren,
  Crosshair,
  Stethoscope,
  HeartPulse,
  Syringe,
  Copy,
  Share2,
  UserPlus,
  Send,
  Upload
} from 'lucide-react';
import { motion, AnimatePresence } from 'motion/react';

interface Mission {
  id: string;
  title: string;
  description: string;
  xpReward: number;
  progress: number;
  target: number;
  type: 'weekly' | 'special' | 'daily';
  deadline: string;
  icon: React.ReactNode;
  color: string;
  completed: boolean;
}

interface Badge {
  id: string;
  name: string;
  description: string;
  icon: React.ReactNode;
  color: string;
  unlocked: boolean;
  unlockedAt?: string;
  levelRequired: number;
}

interface Level {
  level: number;
  title: string;
  subtitle: string;
  minXP: number;
  maxXP: number;
  color: string;
  badge: string;
  perks: string[];
  responsibilities: string[];
}

interface Referral {
  id: string;
  name: string;
  joinedAt: string;
  status: 'active' | 'pending' | 'completed';
  xpEarned: number;
}

export function UserProfile() {
  const [isAnimating, setIsAnimating] = useState(false);
  const [showLevelUp, setShowLevelUp] = useState(false);
  const [showShareModal, setShowShareModal] = useState(false);
  const [showAvatarModal, setShowAvatarModal] = useState(false);
  const [dailyStreak, setDailyStreak] = useState(12);
  const [referralCode, setReferralCode] = useState('BOTILITO-MG2024');

  // Sistema de niveles epidemiológicos
  const levels: Level[] = [
    { 
      level: 1, 
      title: 'VIGILANTE CENTINELA', 
      subtitle: 'Primera Línea de Defensa',
      minXP: 0, 
      maxXP: 500, 
      color: 'bg-blue-500', 
      badge: '👁️',
      perks: [
        'Reportar contenido sospechoso (+10 XP)',
        'Acceso al dashboard básico',
        'Alertas de brotes detectados',
        'Sistema de referidos activo'
      ],
      responsibilities: [
        'Detectar contenido potencialmente peligroso',
        'Alertar sobre posibles brotes de desinformación',
        'Ser los ojos y oídos de la comunidad digital'
      ]
    },
    { 
      level: 2, 
      title: 'EPIDEMIÓLOGO DIGITAL VOLUNTARIO', 
      subtitle: 'Analista de Contagio',
      minXP: 500, 
      maxXP: 2000, 
      color: 'bg-purple-500', 
      badge: '🔬',
      perks: [
        'Realizar diagnósticos completos (+20 XP)',
        'Aplicar etiquetas y marcadores',
        'Evaluar virulencia del contenido',
        'Calificar análisis de otros usuarios',
        'Participar en desafíos semanales',
        'Invitar a nuevos validadores (+5 XP c/u)'
      ],
      responsibilities: [
        'Analizar muestras de desinformación',
        'Aplicar criterios epidemiológicos',
        'Documentar patrones de transmisión',
        'Contribuir al aprendizaje colectivo'
      ]
    },
    { 
      level: 3, 
      title: 'ESPECIALISTA EN INMUNOLOGÍA INFORMATIVA', 
      subtitle: 'Educomunicador Estratégico',
      minXP: 2000, 
      maxXP: 999999, 
      color: 'bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500', 
      badge: '💉',
      perks: [
        'Crear contenido de inmunización (+100 XP)',
        'Diseñar contra-narrativas efectivas',
        'Liderar misiones complejas',
        'Análisis macro de campañas coordinadas',
        'Identificar patrones de contagio global',
        'Palabra respetada en la comunidad',
        'Herramientas de prevención avanzadas'
      ],
      responsibilities: [
        'Vacunar contra la desinformación',
        'Prevenir próximos brotes epidémicos',
        'Liderar estrategias de inmunización',
        'Mantener protegido el ecosistema digital',
        'Formar a nuevos epidemiólogos'
      ]
    }
  ];

  // Datos del usuario actual
  const userData = {
    id: 'BOT-COL-2024-001',
    name: 'María Rodríguez',
    email: 'maria.rodriguez@botilito.co',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=MariaRodriguez&backgroundColor=ffda00',
    joinedAt: '2024-09-15',
    currentXP: 850,
    totalReports: 45,
    totalDiagnosis: 28,
    totalImmunizations: 3,
    accuracyRate: 92.5,
    currentStreak: dailyStreak,
    rank: 87,
    totalUsers: 1250,
    region: 'Región Andina',
    verificationSpeed: 3.8,
    referralsCompleted: 4
  };

  // Calcular nivel actual
  const getCurrentLevel = (xp: number): Level => {
    return levels.find(level => xp >= level.minXP && xp < level.maxXP) || levels[levels.length - 1];
  };

  const currentLevel = getCurrentLevel(userData.currentXP);
  const nextLevel = levels.find(level => level.level === currentLevel.level + 1);
  const progressToNext = nextLevel ? 
    ((userData.currentXP - currentLevel.minXP) / (nextLevel.minXP - currentLevel.minXP)) * 100 
    : 100;

  // Insignias desbloqueables por nivel
  const badges: Badge[] = [
    {
      id: 'alerta-temprana',
      name: 'Alerta Temprana',
      description: 'Insignia de Nivel 1: Vigilante Centinela',
      icon: <Siren className="h-5 w-5" />,
      color: 'bg-blue-500',
      unlocked: userData.currentXP >= 0,
      unlockedAt: userData.joinedAt,
      levelRequired: 1
    },
    {
      id: 'analista-contagio',
      name: 'Analista de Contagio',
      description: 'Insignia de Nivel 2: Epidemiólogo Digital Voluntario',
      icon: <Microscope className="h-5 w-5" />,
      color: 'bg-purple-500',
      unlocked: userData.currentXP >= 500,
      unlockedAt: userData.currentXP >= 500 ? '2024-10-02' : undefined,
      levelRequired: 2
    },
    {
      id: 'estratega-antiviral',
      name: 'Estratega Antiviral',
      description: 'Insignia de Nivel 3: Especialista en Inmunología Informativa',
      icon: <Syringe className="h-5 w-5" />,
      color: 'bg-gradient-to-r from-yellow-400 to-orange-500',
      unlocked: userData.currentXP >= 2000,
      unlockedAt: undefined,
      levelRequired: 3
    },
    {
      id: 'detector-100',
      name: 'Detector Prolífico',
      description: 'Reportaste 100 casos sospechosos',
      icon: <Eye className="h-5 w-5" />,
      color: 'bg-green-500',
      unlocked: false,
      levelRequired: 1
    },
    {
      id: 'racha-fuego',
      name: 'Llama Inextinguible',
      description: 'Mantén una racha de 30 días consecutivos',
      icon: <Flame className="h-5 w-5" />,
      color: 'bg-orange-500',
      unlocked: false,
      levelRequired: 1
    },
    {
      id: 'precision-quirurgica',
      name: 'Precisión Quirúrgica',
      description: '95%+ de precisión en 50 diagnósticos',
      icon: <Crosshair className="h-5 w-5" />,
      color: 'bg-red-500',
      unlocked: false,
      levelRequired: 2
    }
  ];

  // Misiones activas
  const missions: Mission[] = [
    {
      id: 'escuadron-anti-panico',
      title: 'Misión: Escuadrón Anti-Pánico',
      description: 'Desmentir los 3 fakes más virales sobre la economía esta semana',
      xpReward: 150,
      progress: 1,
      target: 3,
      type: 'weekly',
      deadline: '2025-10-19',
      icon: <Shield className="h-5 w-5" />,
      color: 'bg-red-500',
      completed: false
    },
    {
      id: 'diagnostico-rapido',
      title: 'Desafío: Diagnóstico Rápido',
      description: 'Realiza 10 análisis esta semana',
      xpReward: 100,
      progress: 7,
      target: 10,
      type: 'weekly',
      deadline: '2025-10-19',
      icon: <Zap className="h-5 w-5" />,
      color: 'bg-yellow-500',
      completed: false
    },
    {
      id: 'centinela-diario',
      title: 'Reto Diario: Vigilancia Activa',
      description: 'Reporta al menos 3 contenidos sospechosos hoy',
      xpReward: 50,
      progress: 2,
      target: 3,
      type: 'daily',
      deadline: '2025-10-12',
      icon: <Eye className="h-5 w-5" />,
      color: 'bg-blue-500',
      completed: false
    },
    {
      id: 'inmunizador-regional',
      title: 'Misión Especial: Inmunizador Regional',
      description: 'Crea contenido educativo sobre un tema desinfodémico de tu región',
      xpReward: 200,
      progress: 0,
      target: 1,
      type: 'special',
      deadline: '2025-10-26',
      icon: <Syringe className="h-5 w-5" />,
      color: 'bg-purple-500',
      completed: false
    }
  ];

  // Referidos del usuario
  const referrals: Referral[] = [
    {
      id: 'REF-001',
      name: 'Carlos Pérez',
      joinedAt: '2024-10-05',
      status: 'completed',
      xpEarned: 5
    },
    {
      id: 'REF-002',
      name: 'Ana Martínez',
      joinedAt: '2024-10-08',
      status: 'completed',
      xpEarned: 5
    },
    {
      id: 'REF-003',
      name: 'Luis Gómez',
      joinedAt: '2024-10-10',
      status: 'active',
      xpEarned: 5
    },
    {
      id: 'REF-004',
      name: 'Diana López',
      joinedAt: '2024-10-11',
      status: 'completed',
      xpEarned: 5
    }
  ];

  const totalReferralXP = referrals.reduce((sum, ref) => sum + ref.xpEarned, 0);

  const unlockedBadges = badges.filter(b => b.unlocked);
  const lockedBadges = badges.filter(b => !b.unlocked);

  // Copiar código de referido
  const copyReferralCode = () => {
    navigator.clipboard.writeText(referralCode);
    // Aquí podrías mostrar un toast de confirmación
  };

  // Simular animación de level up
  useEffect(() => {
    const timer = setTimeout(() => {
      if (Math.random() > 0.9) {
        setShowLevelUp(true);
        setTimeout(() => setShowLevelUp(false), 4000);
      }
    }, 2000);
    return () => clearTimeout(timer);
  }, []);

  return (
    <motion.div 
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      className="space-y-8 relative"
    >
      {/* Mensaje de Botilito */}
      <div className="bg-[#ffe97a] border-2 border-[#ffda00] rounded-lg p-4 shadow-lg">
        <div className="flex items-center space-x-4">
          <img 
            src={botilitoImage} 
            alt="Botilito" 
            className="w-24 h-24 object-contain mt-[0px] mr-[16px] mb-[-18px] ml-[0px]"
          />
          <div className="flex-1">
            <p className="text-xl">
              ¡Qué más parce! Este es tu espacio personal 👤✨
            </p>
            <p className="text-sm mt-1 opacity-80">
              Acá está tu nivel, XP, insignias y misiones. Mientras más analices, más subes de nivel. ¡A darle con toda! 💪🏆
            </p>
          </div>
        </div>
      </div>

      {/* Notificación de Level Up - Estilo colombiano */}
      <AnimatePresence>
        {showLevelUp && (
          <motion.div
            initial={{ scale: 0, rotate: -180 }}
            animate={{ scale: 1, rotate: 0 }}
            exit={{ scale: 0, rotate: 180 }}
            className="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50"
          >
            <Card className="border-4 border-primary bg-gradient-to-br from-yellow-50 via-orange-50 to-yellow-50 shadow-2xl">
              <CardContent className="p-8 text-center">
                <div className="text-6xl mb-4">🎉🔬</div>
                <h2 className="mb-2">¡OMBE, SUBISTE DE NIVEL PARCE!</h2>
                <p className="text-lg mb-2">Ahora sos un/a:</p>
                <Badge className="bg-purple-500 text-white text-lg px-4 py-2 mb-3">
                  🔬 EPIDEMIÓLOGO DIGITAL VOLUNTARIO
                </Badge>
                <p className="text-sm text-muted-foreground mb-4">Ya puedes hacer diagnósticos completos y participar en misiones especiales</p>
                <Badge className="bg-primary text-primary-foreground">+20 XP por análisis</Badge>
              </CardContent>
            </Card>
          </motion.div>
        )}
      </AnimatePresence>

      {/* Header del Perfil Epidemiológico */}
      <Card className="relative overflow-hidden border-2 border-primary/20">
        <div className="absolute inset-0 bg-gradient-to-br from-primary/10 via-secondary/10 to-transparent" />
        <CardContent className="pt-8 relative">
          <div className="flex flex-col lg:flex-row lg:items-start space-y-6 lg:space-y-0 lg:space-x-8">
            {/* Avatar y Nivel */}
            <div className="flex items-start space-x-6">
              <div className="relative">
                <motion.div
                  whileHover={{ scale: 1.05 }}
                  className="relative"
                >
                  <Avatar className="h-32 w-32 border-4 border-primary/20 shadow-lg">
                    <AvatarImage src={userData.avatar} alt={userData.name} />
                    <AvatarFallback className="text-2xl bg-primary text-primary-foreground">
                      {userData.name.split(' ').map(n => n[0]).join('')}
                    </AvatarFallback>
                  </Avatar>
                  <div className="absolute -bottom-2 -right-2 bg-white rounded-full p-1 shadow-md">
                    <Button 
                      size="icon" 
                      variant="outline" 
                      className="h-8 w-8 hover:bg-primary hover:text-primary-foreground transition-all"
                      onClick={() => setShowAvatarModal(true)}
                      title="Cambiar foto de perfil"
                    >
                      <Camera className="h-4 w-4" />
                    </Button>
                  </div>
                </motion.div>
                
                {/* Badge del Nivel Actual */}
                <motion.div 
                  className="absolute -top-2 -left-2"
                  whileHover={{ scale: 1.1 }}
                >
                  <div className={`${currentLevel.color} text-white rounded-full w-16 h-16 flex flex-col items-center justify-center shadow-lg border-2 border-white`}>
                    <div className="text-2xl">{currentLevel.badge}</div>
                    <div className="text-xs">Nv.{currentLevel.level}</div>
                  </div>
                </motion.div>
              </div>
              
              {/* Información Básica */}
              <div className="space-y-3">
                <div>
                  <h1 className="text-3xl">{userData.name}</h1>
                  <p className="text-sm text-muted-foreground">{userData.email}</p>
                  <div className="flex items-center space-x-2 mt-3">
                    <Badge className={`${currentLevel.color} text-white`}>
                      {currentLevel.title}
                    </Badge>
                    <Badge variant="outline" className="text-xs">
                      {userData.region}
                    </Badge>
                  </div>
                  <p className="text-xs text-muted-foreground mt-2 italic">"{currentLevel.subtitle}"</p>
                </div>
                
                {/* Barra de Experiencia */}
                <div className="w-80">
                  <div className="flex justify-between text-sm mb-2">
                    <span>Experiencia (XP)</span>
                    <span>{userData.currentXP.toLocaleString()} / {nextLevel?.minXP.toLocaleString() || 'MAX'} XP</span>
                  </div>
                  <div className="relative">
                    <Progress value={progressToNext} className="h-3" />
                    <motion.div
                      className="absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent"
                      animate={{ x: [-100, 300] }}
                      transition={{ duration: 2, repeat: Infinity, repeatDelay: 3 }}
                    />
                  </div>
                  {nextLevel && (
                    <p className="text-xs text-muted-foreground mt-1">
                      ¡Te faltan {(nextLevel.minXP - userData.currentXP).toLocaleString()} XP para ser {nextLevel.title}!
                    </p>
                  )}
                  {!nextLevel && (
                    <p className="text-xs text-green-600 mt-1">
                      🌟 ¡Nivel máximo alcanzado! Sos un verdadero Especialista en Inmunología Informativa
                    </p>
                  )}
                </div>
              </div>
            </div>

            {/* Estadísticas de Contribución */}
            <div className="flex-1 grid grid-cols-2 md:grid-cols-4 gap-4">
              <motion.div 
                whileHover={{ scale: 1.05 }}
                className="text-center p-4 bg-blue-50 border-2 border-blue-200 rounded-lg backdrop-blur-sm"
              >
                <div className="flex items-center justify-center mb-1">
                  <Eye className="h-4 w-4 text-blue-600 mr-1" />
                  <div className="text-2xl text-blue-700">{userData.totalReports}</div>
                </div>
                <div className="text-xs text-blue-600 mb-1">Reportes</div>
                <Badge className="bg-blue-500 text-white text-xs">+10 XP c/u</Badge>
              </motion.div>
              
              <motion.div 
                whileHover={{ scale: 1.05 }}
                className="text-center p-4 bg-purple-50 border-2 border-purple-200 rounded-lg backdrop-blur-sm"
              >
                <div className="flex items-center justify-center mb-1">
                  <Microscope className="h-4 w-4 text-purple-600 mr-1" />
                  <div className="text-2xl text-purple-700">{userData.totalDiagnosis}</div>
                </div>
                <div className="text-xs text-purple-600 mb-1">Diagnósticos</div>
                <Badge className="bg-purple-500 text-white text-xs">+20 XP c/u</Badge>
              </motion.div>
              
              <motion.div 
                whileHover={{ scale: 1.05 }}
                className="text-center p-4 bg-orange-50 border-2 border-orange-200 rounded-lg backdrop-blur-sm"
              >
                <div className="flex items-center justify-center mb-1">
                  <Syringe className="h-4 w-4 text-orange-600 mr-1" />
                  <div className="text-2xl text-orange-700">{userData.totalImmunizations}</div>
                </div>
                <div className="text-xs text-orange-600 mb-1">Inmunizaciones</div>
                <Badge className="bg-orange-500 text-white text-xs">+100 XP c/u</Badge>
              </motion.div>
              
              <motion.div 
                whileHover={{ scale: 1.05 }}
                className="text-center p-4 bg-green-50 border-2 border-green-200 rounded-lg backdrop-blur-sm"
              >
                <div className="flex items-center justify-center mb-1">
                  <Target className="h-4 w-4 text-green-600 mr-1" />
                  <div className="text-2xl text-green-700">{userData.accuracyRate}%</div>
                </div>
                <div className="text-xs text-green-600 mb-1">Precisión</div>
                <Badge className="bg-green-500 text-white text-xs">Excelente</Badge>
              </motion.div>
            </div>
          </div>

          {/* Racha Diaria */}
          <div className="mt-6 pt-6 border-t border-primary/20">
            <div className="flex items-center justify-between">
              <div className="flex items-center space-x-3">
                <div className="p-3 bg-orange-100 rounded-full">
                  <Flame className="h-6 w-6 text-orange-600" />
                </div>
                <div>
                  <p className="font-medium">Racha de Vigilancia</p>
                  <p className="text-sm text-muted-foreground">
                    ¡Llevás {dailyStreak} días consecutivos protegiendo la verdad!
                  </p>
                </div>
              </div>
              <div className="text-center">
                <div className="text-3xl text-orange-600">{dailyStreak}</div>
                <div className="text-xs text-orange-600">días 🔥</div>
              </div>
            </div>
          </div>
        </CardContent>
      </Card>

      {/* Misiones y Desafíos Activos */}
      <Card>
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <Target className="h-5 w-5 text-primary" />
            <span>Misiones y Desafíos Activos</span>
            <Badge variant="secondary">{missions.filter(m => !m.completed).length}</Badge>
          </CardTitle>
          <CardDescription>¡Completá misiones y ganá XP adicional, parce! 🎯</CardDescription>
        </CardHeader>
        <CardContent>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            {missions.map((mission) => (
              <motion.div
                key={mission.id}
                whileHover={{ scale: 1.02 }}
                className={`p-4 rounded-lg border-2 transition-all ${
                  mission.completed 
                    ? 'border-green-200 bg-green-50' 
                    : 'border-primary/20 bg-gradient-to-br from-white to-secondary/10 shadow-sm'
                }`}
              >
                <div className="flex items-start space-x-3 mb-3">
                  <div className={`p-2 rounded-full ${mission.color} text-white flex-shrink-0`}>
                    {mission.icon}
                  </div>
                  <div className="flex-1">
                    <div className="flex items-center justify-between mb-1">
                      <h4 className="font-medium text-sm">{mission.title}</h4>
                      <Badge className={`text-xs ${mission.type === 'daily' ? 'bg-blue-500' : mission.type === 'weekly' ? 'bg-purple-500' : 'bg-orange-500'} text-white`}>
                        {mission.type === 'daily' ? 'Diario' : mission.type === 'weekly' ? 'Semanal' : 'Especial'}
                      </Badge>
                    </div>
                    <p className="text-xs text-muted-foreground mb-2">{mission.description}</p>
                  </div>
                </div>
                
                <div className="space-y-2">
                  <div className="flex justify-between text-xs">
                    <span>Progreso</span>
                    <span className="font-medium">{mission.progress} / {mission.target}</span>
                  </div>
                  <Progress value={(mission.progress / mission.target) * 100} className="h-2" />
                  
                  <div className="flex items-center justify-between pt-2">
                    <Badge className="bg-primary text-primary-foreground text-xs">
                      +{mission.xpReward} XP
                    </Badge>
                    <div className="text-xs text-muted-foreground">
                      <Clock className="h-3 w-3 inline mr-1" />
                      {new Date(mission.deadline).toLocaleDateString('es-CO', { month: 'short', day: 'numeric' })}
                    </div>
                  </div>
                </div>
              </motion.div>
            ))}
          </div>
        </CardContent>
      </Card>

      {/* Sistema de Referidos */}
      <Card className="border-2 border-primary/30">
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <UserPlus className="h-5 w-5 text-primary" />
            <span>¡Invitá a tu Parce!</span>
            <Badge className="bg-primary text-primary-foreground">{referrals.length} referidos</Badge>
          </CardTitle>
          <CardDescription>
            Ganás 5 XP por cada persona que invites y complete su primer diagnóstico. ¡Hagamos crecer el equipo! 💪
          </CardDescription>
        </CardHeader>
        <CardContent>
          <div className="space-y-4">
            {/* Código de Referido */}
            <div className="p-4 bg-gradient-to-r from-primary/10 to-secondary/10 rounded-lg border-2 border-primary/30">
              <p className="text-sm mb-2">Tu código de referido:</p>
              <div className="flex items-center space-x-2">
                <Input 
                  value={referralCode} 
                  readOnly 
                  className="bg-white text-lg text-center tracking-wider"
                />
                <Button 
                  onClick={copyReferralCode}
                  className="flex-shrink-0"
                >
                  <Copy className="h-4 w-4 mr-2" />
                  Copiar
                </Button>
                <Button 
                  variant="outline"
                  onClick={() => setShowShareModal(true)}
                >
                  <Share2 className="h-4 w-4 mr-2" />
                  Compartir
                </Button>
              </div>
            </div>

            {/* Estadísticas de Referidos */}
            <div className="grid grid-cols-3 gap-4 text-center">
              <div className="p-3 bg-blue-50 rounded-lg border border-blue-200">
                <div className="text-2xl text-blue-600">{referrals.length}</div>
                <div className="text-xs text-blue-600">Total Invitados</div>
              </div>
              <div className="p-3 bg-green-50 rounded-lg border border-green-200">
                <div className="text-2xl text-green-600">{referrals.filter(r => r.status === 'completed').length}</div>
                <div className="text-xs text-green-600">Activos</div>
              </div>
              <div className="p-3 bg-yellow-50 rounded-lg border border-yellow-200">
                <div className="text-2xl text-yellow-600">{totalReferralXP}</div>
                <div className="text-xs text-yellow-600">XP Ganados</div>
              </div>
            </div>

            {/* Lista de Referidos */}
            {referrals.length > 0 && (
              <div className="space-y-2">
                <h4 className="text-sm font-medium mb-2">Tus referidos:</h4>
                <div className="space-y-2 max-h-48 overflow-y-auto custom-scrollbar">
                  {referrals.map((referral, index) => (
                    <div 
                      key={referral.id}
                      className="flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200 hover:border-primary transition-all"
                    >
                      <div className="flex items-center space-x-3">
                        <Avatar className="h-10 w-10 border-2 border-secondary">
                          <AvatarImage 
                            src={`https://api.dicebear.com/7.x/avataaars/svg?seed=${referral.name.replace(' ', '')}&backgroundColor=${
                              index === 0 ? 'ffda00' : 
                              index === 1 ? 'ffe97a' : 
                              index === 2 ? '00b4d8' : 
                              'f72585'
                            }`} 
                            alt={referral.name}
                          />
                          <AvatarFallback className="text-xs bg-secondary">
                            {referral.name.split(' ').map(n => n[0]).join('')}
                          </AvatarFallback>
                        </Avatar>
                        <div>
                          <p className="text-sm font-medium">{referral.name}</p>
                          <p className="text-xs text-muted-foreground">
                            Unido: {new Date(referral.joinedAt).toLocaleDateString('es-CO')}
                          </p>
                        </div>
                      </div>
                      <div className="flex items-center space-x-2">
                        <Badge className={`text-xs ${
                          referral.status === 'completed' ? 'bg-green-500' : 
                          referral.status === 'active' ? 'bg-blue-500' : 'bg-gray-400'
                        } text-white`}>
                          {referral.status === 'completed' ? '✓ Completado' : 
                           referral.status === 'active' ? 'Activo' : 'Pendiente'}
                        </Badge>
                        {referral.status === 'completed' && (
                          <Badge className="bg-primary text-primary-foreground text-xs">
                            +{referral.xpEarned} XP
                          </Badge>
                        )}
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            )}
          </div>
        </CardContent>
      </Card>

      {/* Insignias Desbloqueadas */}
      <div className="grid gap-6 lg:grid-cols-2">
        {/* Insignias Activas */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Trophy className="h-5 w-5 text-primary" />
              <span>Insignias Desbloqueadas</span>
              <Badge variant="secondary">{unlockedBadges.length}</Badge>
            </CardTitle>
            <CardDescription>Tus medallas en la lucha por la verdad 🏆</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-3 max-h-96 overflow-y-auto custom-scrollbar">
              {unlockedBadges.map((badge) => (
                <motion.div
                  key={badge.id}
                  initial={{ opacity: 0, x: -20 }}
                  animate={{ opacity: 1, x: 0 }}
                  whileHover={{ scale: 1.02 }}
                  className={`p-4 rounded-lg border-2 border-primary/30 bg-gradient-to-br from-white to-secondary/10 shadow-sm transition-all hover:shadow-md`}
                >
                  <div className="flex items-start space-x-3">
                    <div className={`p-3 rounded-full ${badge.color} text-white flex-shrink-0`}>
                      {badge.icon}
                    </div>
                    <div className="flex-1">
                      <div className="flex items-center justify-between mb-1">
                        <h4 className="font-medium">{badge.name}</h4>
                        <Badge className="bg-green-500 text-white text-xs">
                          Nivel {badge.levelRequired}
                        </Badge>
                      </div>
                      <p className="text-sm text-muted-foreground mb-2">{badge.description}</p>
                      {badge.unlockedAt && (
                        <div className="text-xs text-green-600">
                          <CheckCircle className="h-3 w-3 inline mr-1" />
                          Desbloqueada: {new Date(badge.unlockedAt).toLocaleDateString('es-CO')}
                        </div>
                      )}
                    </div>
                  </div>
                </motion.div>
              ))}
            </div>
          </CardContent>
        </Card>

        {/* Insignias Bloqueadas */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Lock className="h-5 w-5 text-muted-foreground" />
              <span>Próximas Insignias</span>
              <Badge variant="outline">{lockedBadges.length}</Badge>
            </CardTitle>
            <CardDescription>¡Seguí trabajando para desbloquearlas!</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-3 max-h-96 overflow-y-auto custom-scrollbar">
              {lockedBadges.map((badge) => (
                <motion.div
                  key={badge.id}
                  whileHover={{ scale: 1.02 }}
                  className="p-4 rounded-lg border-2 border-dashed border-muted-foreground/30 bg-muted/20 transition-all hover:bg-muted/30"
                >
                  <div className="flex items-start space-x-3">
                    <div className="p-3 rounded-full bg-muted text-muted-foreground flex-shrink-0">
                      <Lock className="h-5 w-5" />
                    </div>
                    <div className="flex-1">
                      <div className="flex items-center justify-between mb-1">
                        <h4 className="font-medium text-muted-foreground">{badge.name}</h4>
                        <Badge variant="outline" className="text-xs">
                          Nivel {badge.levelRequired}
                        </Badge>
                      </div>
                      <p className="text-sm text-muted-foreground">{badge.description}</p>
                    </div>
                  </div>
                </motion.div>
              ))}
            </div>
          </CardContent>
        </Card>
      </div>

      {/* Progresión de Niveles Epidemiológicos */}
      <Card>
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <Stethoscope className="h-5 w-5 text-primary" />
            <span>Tu Carrera como Epidemiólogo Digital</span>
          </CardTitle>
          <CardDescription>
            Tu evolución en la lucha contra el virus de la desinformación 🦠
          </CardDescription>
        </CardHeader>
        <CardContent>
          <div className="space-y-6">
            {levels.map((level, index) => (
              <motion.div
                key={level.level}
                initial={{ opacity: 0, x: -20 }}
                animate={{ opacity: 1, x: 0 }}
                transition={{ delay: index * 0.1 }}
                className={`p-6 rounded-lg border-2 transition-all ${
                  level.level === currentLevel.level
                    ? 'border-primary bg-primary/5 shadow-md'
                    : level.level < currentLevel.level
                    ? 'border-green-200 bg-green-50/30'
                    : 'border-gray-200 bg-gray-50/30 opacity-70'
                }`}
              >
                <div className="flex items-start space-x-4">
                  {/* Badge del Nivel */}
                  <div className={`w-16 h-16 rounded-full flex items-center justify-center text-white text-2xl ${
                    level.level <= currentLevel.level ? level.color : 'bg-gray-400'
                  } shadow-lg flex-shrink-0`}>
                    {level.badge}
                  </div>
                  
                  {/* Información del Nivel */}
                  <div className="flex-1">
                    <div className="flex items-center justify-between mb-2">
                      <div>
                        <div className="flex items-center space-x-2">
                          <h3 className="font-bold">Nivel {level.level}: {level.title}</h3>
                          {level.level === currentLevel.level && (
                            <Badge className="bg-primary text-primary-foreground text-xs animate-pulse">
                              ⭐ NIVEL ACTUAL
                            </Badge>
                          )}
                          {level.level < currentLevel.level && (
                            <CheckCircle className="h-5 w-5 text-green-500" />
                          )}
                        </div>
                        <p className="text-sm text-muted-foreground italic">{level.subtitle}</p>
                      </div>
                      <div className="text-right text-sm">
                        <div className="font-medium">{level.minXP.toLocaleString()} - {level.maxXP === 999999 ? '∞' : level.maxXP.toLocaleString()} XP</div>
                        {level.level === currentLevel.level && (
                          <div className="text-xs text-primary">{progressToNext.toFixed(0)}% completado</div>
                        )}
                      </div>
                    </div>
                    
                    {/* Beneficios y Responsabilidades */}
                    <div className="grid md:grid-cols-2 gap-4 mt-4">
                      <div>
                        <h4 className="text-sm font-medium mb-2 text-green-600">✓ Beneficios:</h4>
                        <ul className="space-y-1">
                          {level.perks.map((perk, idx) => (
                            <li key={idx} className="text-xs flex items-start space-x-2">
                              <CheckCircle className="h-3 w-3 text-green-500 flex-shrink-0 mt-0.5" />
                              <span>{perk}</span>
                            </li>
                          ))}
                        </ul>
                      </div>
                      <div>
                        <h4 className="text-sm font-medium mb-2 text-blue-600">🎯 Responsabilidades:</h4>
                        <ul className="space-y-1">
                          {level.responsibilities.map((resp, idx) => (
                            <li key={idx} className="text-xs flex items-start space-x-2">
                              <Target className="h-3 w-3 text-blue-500 flex-shrink-0 mt-0.5" />
                              <span>{resp}</span>
                            </li>
                          ))}
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </motion.div>
            ))}
          </div>
        </CardContent>
      </Card>

      {/* Ranking y Comunidad */}
      <div className="grid gap-6 lg:grid-cols-3">
        {/* Ranking Global */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Trophy className="h-5 w-5 text-primary" />
              <span>Ranking</span>
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-center space-y-4">
              <div>
                <div className="text-4xl">#{userData.rank}</div>
                <div className="text-sm text-muted-foreground">de {userData.totalUsers.toLocaleString()} vigilantes</div>
                <div className="text-xs text-muted-foreground mt-1">
                  Top {((userData.rank / userData.totalUsers) * 100).toFixed(1)}%
                </div>
              </div>
              <Separator />
              <div className="space-y-2 text-left">
                <div className="flex justify-between text-sm">
                  <span>Región:</span>
                  <span className="font-medium">{userData.region}</span>
                </div>
                <div className="flex justify-between text-sm">
                  <span>Miembro desde:</span>
                  <span className="font-medium">
                    {new Date(userData.joinedAt).toLocaleDateString('es-CO', { month: 'short', year: 'numeric' })}
                  </span>
                </div>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Velocidad de Análisis */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Zap className="h-5 w-5 text-primary" />
              <span>Velocidad</span>
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-center space-y-4">
              <div>
                <div className="flex items-center justify-center">
                  <Zap className="h-6 w-6 text-yellow-500 mr-2" />
                  <div className="text-4xl text-yellow-600">{userData.verificationSpeed}m</div>
                </div>
                <div className="text-sm text-muted-foreground">Tiempo promedio de análisis</div>
                <Badge className="bg-yellow-500 text-white text-xs mt-2">
                  ⚡ Verificación Rápida
                </Badge>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Impacto Total */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <HeartPulse className="h-5 w-5 text-primary" />
              <span>Impacto</span>
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="space-y-3">
              <div className="text-center">
                <div className="text-3xl text-red-600">
                  {userData.totalReports + userData.totalDiagnosis + userData.totalImmunizations}
                </div>
                <div className="text-sm text-muted-foreground">Casos totales</div>
              </div>
              <Separator />
              <div className="space-y-2">
                <div className="flex justify-between text-xs">
                  <span className="flex items-center">
                    <Eye className="h-3 w-3 mr-1 text-blue-500" />
                    Reportes
                  </span>
                  <span className="font-medium">{userData.totalReports}</span>
                </div>
                <div className="flex justify-between text-xs">
                  <span className="flex items-center">
                    <Microscope className="h-3 w-3 mr-1 text-purple-500" />
                    Diagnósticos
                  </span>
                  <span className="font-medium">{userData.totalDiagnosis}</span>
                </div>
                <div className="flex justify-between text-xs">
                  <span className="flex items-center">
                    <Syringe className="h-3 w-3 mr-1 text-orange-500" />
                    Inmunizaciones
                  </span>
                  <span className="font-medium">{userData.totalImmunizations}</span>
                </div>
              </div>
            </div>
          </CardContent>
        </Card>
      </div>

      {/* Modal de Cambio de Avatar */}
      <AnimatePresence>
        {showAvatarModal && (
          <motion.div
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4"
            onClick={() => setShowAvatarModal(false)}
          >
            <motion.div
              initial={{ scale: 0.9, y: 20 }}
              animate={{ scale: 1, y: 0 }}
              exit={{ scale: 0.9, y: 20 }}
              onClick={(e) => e.stopPropagation()}
              className="max-w-md w-full"
            >
              <Card>
                <CardHeader>
                  <CardTitle className="flex items-center space-x-2">
                    <Camera className="h-5 w-5 text-primary" />
                    <span>Cambiar Foto de Perfil</span>
                  </CardTitle>
                  <CardDescription>
                    Personaliza tu avatar epidemiológico
                  </CardDescription>
                </CardHeader>
                <CardContent className="space-y-4">
                  {/* Avatar Actual */}
                  <div className="flex flex-col items-center space-y-3">
                    <Avatar className="h-32 w-32 border-4 border-primary/20 shadow-lg">
                      <AvatarImage src={userData.avatar} alt={userData.name} />
                      <AvatarFallback className="text-2xl bg-primary text-primary-foreground">
                        {userData.name.split(' ').map(n => n[0]).join('')}
                      </AvatarFallback>
                    </Avatar>
                    <p className="text-sm text-muted-foreground text-center">
                      {userData.name}
                    </p>
                  </div>

                  <Separator />

                  {/* Opciones de Cambio */}
                  <div className="space-y-3">
                    <Button 
                      className="w-full" 
                      variant="outline"
                      onClick={() => {
                        // Simular clic en input file
                        alert('¡Próximamente! Podrás subir tu propia foto 📸');
                      }}
                    >
                      <Upload className="h-4 w-4 mr-2" />
                      Subir nueva foto
                    </Button>
                    
                    <div className="grid grid-cols-4 gap-3">
                      {/* Avatares digitales de ejemplo */}
                      {[
                        { style: 'avataaars', seed: 'Felix', bg: 'ffda00' },
                        { style: 'bottts', seed: 'Robot1', bg: 'ffe97a' },
                        { style: 'avataaars', seed: 'Aneka', bg: 'ff6b35' },
                        { style: 'personas', seed: 'Digital1', bg: '00b4d8' },
                        { style: 'avataaars', seed: 'Sofia', bg: 'f72585' },
                        { style: 'bottts', seed: 'Bot2024', bg: '7209b7' },
                        { style: 'personas', seed: 'Alex', bg: '06ffa5' },
                        { style: 'avataaars', seed: 'Carlos', bg: 'ffd60a' },
                      ].map((avatar, idx) => (
                        <button
                          key={idx}
                          onClick={() => {
                            alert(`Avatar ${idx + 1} seleccionado. En la versión final, esto cambiará tu foto de perfil.`);
                            setShowAvatarModal(false);
                          }}
                          className="relative group"
                        >
                          <Avatar className="h-16 w-16 border-2 border-gray-200 hover:border-primary transition-all cursor-pointer hover:scale-110 shadow-sm">
                            <AvatarImage src={`https://api.dicebear.com/7.x/${avatar.style}/svg?seed=${avatar.seed}&backgroundColor=${avatar.bg}`} />
                            <AvatarFallback>#{idx + 1}</AvatarFallback>
                          </Avatar>
                          <div className="absolute inset-0 bg-primary/0 group-hover:bg-primary/20 rounded-full transition-all" />
                        </button>
                      ))}
                    </div>
                  </div>

                  <Separator />

                  {/* Botones de Acción */}
                  <div className="flex space-x-2">
                    <Button 
                      variant="outline" 
                      className="flex-1"
                      onClick={() => setShowAvatarModal(false)}
                    >
                      Cancelar
                    </Button>
                    <Button 
                      className="flex-1 bg-primary hover:bg-primary/90"
                      onClick={() => {
                        setShowAvatarModal(false);
                        alert('¡Avatar actualizado con éxito! 🎉');
                      }}
                    >
                      <CheckCircle className="h-4 w-4 mr-2" />
                      Guardar
                    </Button>
                  </div>
                </CardContent>
              </Card>
            </motion.div>
          </motion.div>
        )}
      </AnimatePresence>
    </motion.div>
  );
}
 - - - - - - - - - - - - 
src/components/extension/QuickAnalysisBadge.tsx

import React, { useState } from 'react';
import { Button } from '../ui/button';
import { Badge } from '../ui/badge';
import { Shield, CheckCircle, AlertTriangle, XCircle, ExternalLink } from 'lucide-react';

interface QuickAnalysisBadgeProps {
  status: 'safe' | 'warning' | 'alert';
  position?: { x: number; y: number };
  compact?: boolean;
}

export function QuickAnalysisBadge({ 
  status, 
  position = { x: 0, y: 0 },
  compact = false 
}: QuickAnalysisBadgeProps) {
  const [showDetails, setShowDetails] = useState(false);

  const statusConfig = {
    safe: {
      color: 'bg-green-500',
      text: 'Verificado',
      icon: <CheckCircle className="h-4 w-4" />,
      message: 'Este contenido ha sido verificado'
    },
    warning: {
      color: 'bg-orange-500',
      text: '⚠️ Precaución',
      icon: <AlertTriangle className="h-4 w-4" />,
      message: 'Este contenido presenta señales sospechosas'
    },
    alert: {
      color: 'bg-red-500',
      text: '⛔ No Verificado',
      icon: <XCircle className="h-4 w-4" />,
      message: 'Alto riesgo de desinformación detectado'
    }
  };

  const config = statusConfig[status];

  if (compact) {
    return (
      <div 
        className="fixed z-[9999]"
        style={{ 
          left: `${position.x}px`, 
          top: `${position.y}px` 
        }}
      >
        <Badge 
          className={`${config.color} text-white cursor-pointer shadow-lg hover:scale-105 transition-transform`}
          onClick={() => setShowDetails(!showDetails)}
        >
          <Shield className="h-3 w-3 mr-1" />
          {config.text}
        </Badge>

        {showDetails && (
          <div className="absolute top-full left-0 mt-2 w-64 bg-white border-2 border-black rounded-lg shadow-xl p-3 space-y-2">
            <div className="flex items-start space-x-2">
              <div className={`${config.color} p-1.5 rounded text-white`}>
                {config.icon}
              </div>
              <div className="flex-1">
                <p className="text-sm mb-2">{config.message}</p>
                <Button 
                  variant="outline" 
                  size="sm" 
                  className="w-full text-xs"
                  onClick={() => window.open('https://botilito.app/analysis', '_blank')}
                >
                  <ExternalLink className="h-3 w-3 mr-1" />
                  Ver análisis completo
                </Button>
              </div>
            </div>
          </div>
        )}
      </div>
    );
  }

  return (
    <div 
      className="fixed z-[9999] bg-white border-4 border-primary rounded-lg shadow-2xl p-4"
      style={{ 
        left: `${position.x}px`, 
        top: `${position.y}px`,
        maxWidth: '320px'
      }}
    >
      <div className="flex items-start space-x-3">
        <div className={`${config.color} p-2 rounded-lg text-white`}>
          <Shield className="h-6 w-6" />
        </div>
        <div className="flex-1">
          <div className="flex items-center justify-between mb-2">
            <Badge className={`${config.color} text-white`}>
              {config.text}
            </Badge>
          </div>
          <p className="text-sm mb-3">{config.message}</p>
          <Button 
            size="sm"
            className="w-full text-xs"
            onClick={() => window.open('https://botilito.app/analysis', '_blank')}
          >
            <ExternalLink className="h-3 w-3 mr-1" />
            Ver más detalles
          </Button>
        </div>
      </div>
      <div className="mt-3 pt-3 border-t text-center">
        <p className="text-xs text-muted-foreground">
          Verificado por <span className="text-primary font-medium">Botilito</span>
        </p>
      </div>
    </div>
  );
}
 - - - - - - - - - - - - 
src/components/extension/ExtensionApp.tsx

import React, { useState } from 'react';
import { ExtensionPopup } from './ExtensionPopup';
import { InPageOverlay } from './InPageOverlay';
import { QuickAnalysisBadge } from './QuickAnalysisBadge';
import { ExtensionSettings } from './ExtensionSettings';

type ViewType = 'popup' | 'overlay' | 'badge' | 'settings';

export function ExtensionApp() {
  const [currentView, setCurrentView] = useState<ViewType>('popup');

  return (
    <div className="min-h-screen bg-gray-50 p-8">
      {/* Demo Controls */}
      <div className="max-w-4xl mx-auto mb-8">
        <div className="bg-white p-4 rounded-lg shadow-md border-2 border-primary">
          <h2 className="text-lg mb-3">
            🎨 Vista Previa de Extensión de Navegador
          </h2>
          <div className="flex flex-wrap gap-2">
            <button
              onClick={() => setCurrentView('popup')}
              className={`px-4 py-2 rounded-lg transition-colors ${
                currentView === 'popup'
                  ? 'bg-primary text-black'
                  : 'bg-secondary/40 hover:bg-secondary'
              }`}
            >
              Popup Principal
            </button>
            <button
              onClick={() => setCurrentView('overlay')}
              className={`px-4 py-2 rounded-lg transition-colors ${
                currentView === 'overlay'
                  ? 'bg-primary text-black'
                  : 'bg-secondary/40 hover:bg-secondary'
              }`}
            >
              Overlay In-Page
            </button>
            <button
              onClick={() => setCurrentView('badge')}
              className={`px-4 py-2 rounded-lg transition-colors ${
                currentView === 'badge'
                  ? 'bg-primary text-black'
                  : 'bg-secondary/40 hover:bg-secondary'
              }`}
            >
              Badge Rápido
            </button>
            <button
              onClick={() => setCurrentView('settings')}
              className={`px-4 py-2 rounded-lg transition-colors ${
                currentView === 'settings'
                  ? 'bg-primary text-black'
                  : 'bg-secondary/40 hover:bg-secondary'
              }`}
            >
              Configuración
            </button>
          </div>
          <p className="text-sm text-muted-foreground mt-2">
            Estas son las interfaces que verán los usuarios en la extensión del navegador
          </p>
        </div>
      </div>

      {/* Current View */}
      <div className="flex justify-center items-start min-h-[600px]">
        {currentView === 'popup' && (
          <div className="shadow-2xl rounded-lg overflow-hidden border-4 border-black">
            <ExtensionPopup />
          </div>
        )}

        {currentView === 'overlay' && (
          <div className="relative w-full max-w-4xl h-[600px] bg-white rounded-lg shadow-inner p-8">
            <div className="text-center mb-4">
              <p className="text-muted-foreground">
                Simulación de página web con overlay de análisis
              </p>
            </div>
            <div className="prose max-w-none">
              <h1>Artículo de Ejemplo</h1>
              <p>
                Este es un ejemplo de cómo se vería el overlay de Botilito sobre 
                una página web real. El overlay aparece cuando se detecta contenido 
                sospechoso y puede ser posicionado estratégicamente.
              </p>
            </div>
            <InPageOverlay position={{ x: 50, y: 150 }} />
          </div>
        )}

        {currentView === 'badge' && (
          <div className="relative w-full max-w-4xl h-[600px] bg-white rounded-lg shadow-inner p-8">
            <div className="text-center mb-4">
              <p className="text-muted-foreground">
                Ejemplos de badges de verificación rápida
              </p>
            </div>
            <div className="space-y-8">
              <QuickAnalysisBadge 
                status="safe" 
                position={{ x: 100, y: 100 }}
              />
              <QuickAnalysisBadge 
                status="warning" 
                position={{ x: 100, y: 250 }}
              />
              <QuickAnalysisBadge 
                status="alert" 
                position={{ x: 100, y: 400 }}
              />
            </div>
          </div>
        )}

        {currentView === 'settings' && (
          <div className="w-full max-w-4xl">
            <ExtensionSettings />
          </div>
        )}
      </div>
    </div>
  );
}
 - - - - - - - - - - - - 
src/components/extension/ExtensionSettings.tsx

import React, { useState } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../ui/card';
import { Button } from '../ui/button';
import { Switch } from '../ui/switch';
import { Label } from '../ui/label';
import { Badge } from '../ui/badge';
import { 
  Settings, Bell, Shield, Zap, Eye, Globe, 
  Database, ExternalLink, Save, RefreshCw
} from 'lucide-react';

export function ExtensionSettings() {
  const [settings, setSettings] = useState({
    autoAnalysis: true,
    showBadges: true,
    notifications: true,
    analyzeOnHover: false,
    highlightSuspicious: true,
    shareAnonymously: true,
    language: 'es'
  });

  const toggleSetting = (key: keyof typeof settings) => {
    setSettings(prev => ({
      ...prev,
      [key]: !prev[key]
    }));
  };

  return (
    <div className="w-full max-w-2xl mx-auto p-6 bg-background min-h-screen">
      {/* Header */}
      <div className="mb-6">
        <div className="flex items-center space-x-3 mb-2">
          <Settings className="h-8 w-8 text-primary" />
          <h1 className="text-2xl">Configuración de Botilito</h1>
        </div>
        <p className="text-muted-foreground">
          Personaliza cómo la extensión detecta y te notifica sobre desinformación
        </p>
      </div>

      <div className="space-y-4">
        {/* Análisis Automático */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Zap className="h-5 w-5 text-primary" />
              <span>Análisis Automático</span>
            </CardTitle>
            <CardDescription>
              Configura cómo y cuándo Botilito analiza el contenido
            </CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="flex items-center justify-between">
              <div className="space-y-0.5">
                <Label>Analizar páginas automáticamente</Label>
                <p className="text-sm text-muted-foreground">
                  Botilito analizará las páginas que visites
                </p>
              </div>
              <Switch
                checked={settings.autoAnalysis}
                onCheckedChange={() => toggleSetting('autoAnalysis')}
              />
            </div>

            <div className="flex items-center justify-between">
              <div className="space-y-0.5">
                <Label>Mostrar badges en páginas</Label>
                <p className="text-sm text-muted-foreground">
                  Muestra indicadores visuales en contenido analizado
                </p>
              </div>
              <Switch
                checked={settings.showBadges}
                onCheckedChange={() => toggleSetting('showBadges')}
              />
            </div>

            <div className="flex items-center justify-between">
              <div className="space-y-0.5">
                <Label>Analizar al pasar el cursor</Label>
                <p className="text-sm text-muted-foreground">
                  Análisis rápido al mantener el cursor sobre texto
                </p>
              </div>
              <Switch
                checked={settings.analyzeOnHover}
                onCheckedChange={() => toggleSetting('analyzeOnHover')}
              />
            </div>
          </CardContent>
        </Card>

        {/* Notificaciones */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Bell className="h-5 w-5 text-primary" />
              <span>Notificaciones</span>
            </CardTitle>
            <CardDescription>
              Controla cómo te notificamos sobre contenido sospechoso
            </CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="flex items-center justify-between">
              <div className="space-y-0.5">
                <Label>Activar notificaciones</Label>
                <p className="text-sm text-muted-foreground">
                  Recibe alertas sobre contenido no verificado
                </p>
              </div>
              <Switch
                checked={settings.notifications}
                onCheckedChange={() => toggleSetting('notifications')}
              />
            </div>

            <div className="flex items-center justify-between">
              <div className="space-y-0.5">
                <Label>Resaltar contenido sospechoso</Label>
                <p className="text-sm text-muted-foreground">
                  Destaca visualmente contenido con señales de alerta
                </p>
              </div>
              <Switch
                checked={settings.highlightSuspicious}
                onCheckedChange={() => toggleSetting('highlightSuspicious')}
              />
            </div>
          </CardContent>
        </Card>

        {/* Privacidad */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Shield className="h-5 w-5 text-primary" />
              <span>Privacidad y Datos</span>
            </CardTitle>
            <CardDescription>
              Gestiona cómo compartimos tus datos para mejorar el servicio
            </CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="flex items-center justify-between">
              <div className="space-y-0.5">
                <Label>Compartir análisis anónimamente</Label>
                <p className="text-sm text-muted-foreground">
                  Ayuda a mejorar Botilito compartiendo datos anónimos
                </p>
              </div>
              <Switch
                checked={settings.shareAnonymously}
                onCheckedChange={() => toggleSetting('shareAnonymously')}
              />
            </div>

            <div className="p-3 bg-secondary/20 rounded-lg border border-secondary/40">
              <div className="flex items-start space-x-2">
                <Eye className="h-4 w-4 text-primary mt-0.5" />
                <div>
                  <p className="text-sm">
                    Nunca compartimos información personal. Solo enviamos patrones 
                    de desinformación para mejorar la detección global.
                  </p>
                </div>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Estadísticas */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Database className="h-5 w-5 text-primary" />
              <span>Estadísticas de Uso</span>
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="grid grid-cols-3 gap-4 text-center">
              <div>
                <p className="text-2xl">2,847</p>
                <p className="text-xs text-muted-foreground">Páginas analizadas</p>
              </div>
              <div>
                <p className="text-2xl">142</p>
                <p className="text-xs text-muted-foreground">Alertas emitidas</p>
              </div>
              <div>
                <p className="text-2xl">95%</p>
                <p className="text-xs text-muted-foreground">Precisión</p>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Acciones */}
        <div className="flex space-x-3">
          <Button className="flex-1">
            <Save className="h-4 w-4 mr-2" />
            Guardar Cambios
          </Button>
          <Button variant="outline">
            <RefreshCw className="h-4 w-4 mr-2" />
            Restablecer
          </Button>
        </div>

        {/* Footer */}
        <div className="pt-4 border-t text-center space-y-2">
          <Button 
            variant="ghost" 
            className="text-sm"
            onClick={() => window.open('https://botilito.app', '_blank')}
          >
            <ExternalLink className="h-4 w-4 mr-2" />
            Abrir aplicación web completa
          </Button>
          <div className="flex items-center justify-center space-x-2">
            <Badge variant="secondary">Versión 1.0.0</Badge>
            <span className="text-xs text-muted-foreground">•</span>
            <p className="text-xs text-muted-foreground">Digital-IA © 2024</p>
          </div>
        </div>
      </div>
    </div>
  );
}
 - - - - - - - - - - - - 
src/components/extension/InPageOverlay.tsx

import React, { useState } from 'react';
import { Button } from '../ui/button';
import { Badge } from '../ui/badge';
import { Card, CardContent, CardHeader, CardTitle } from '../ui/card';
import { 
  X, Shield, AlertTriangle, CheckCircle, XCircle, 
  ExternalLink, ChevronDown, ChevronUp
} from 'lucide-react';

interface InPageOverlayProps {
  onClose?: () => void;
  position?: { x: number; y: number };
}

export function InPageOverlay({ onClose, position = { x: 20, y: 20 } }: InPageOverlayProps) {
  const [isExpanded, setIsExpanded] = useState(true);
  const [analysisResult] = useState({
    status: 'warning',
    title: 'Contenido sospechoso detectado',
    markers: [
      { type: 'Sensacionalista', confidence: 0.82 },
      { type: 'Manipulado', confidence: 0.75 },
      { type: 'Sin Verificar', confidence: 0.68 }
    ],
    summary: 'Este artículo presenta características típicas de contenido sensacionalista. Recomendamos verificar las fuentes antes de compartir.',
    caseNumber: 'T-WA-20241014-789'
  });

  const getStatusConfig = (status: string) => {
    const configs: { [key: string]: any } = {
      'safe': {
        color: 'bg-green-500',
        icon: <CheckCircle className="h-5 w-5" />,
        borderColor: 'border-green-500'
      },
      'warning': {
        color: 'bg-orange-500',
        icon: <AlertTriangle className="h-5 w-5" />,
        borderColor: 'border-orange-500'
      },
      'alert': {
        color: 'bg-red-500',
        icon: <XCircle className="h-5 w-5" />,
        borderColor: 'border-red-500'
      }
    };
    return configs[status] || configs['warning'];
  };

  const config = getStatusConfig(analysisResult.status);

  return (
    <div 
      className="fixed z-[9999] shadow-2xl"
      style={{ 
        left: `${position.x}px`, 
        top: `${position.y}px`,
        maxWidth: '420px'
      }}
    >
      <Card className={`border-4 ${config.borderColor} bg-white`}>
        <CardHeader className="pb-3 bg-primary/10">
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-2">
              <Shield className="h-5 w-5 text-primary" />
              <CardTitle className="text-base">Análisis de Botilito</CardTitle>
            </div>
            <div className="flex items-center space-x-1">
              <Button
                variant="ghost"
                size="sm"
                className="h-6 w-6 p-0"
                onClick={() => setIsExpanded(!isExpanded)}
              >
                {isExpanded ? (
                  <ChevronUp className="h-4 w-4" />
                ) : (
                  <ChevronDown className="h-4 w-4" />
                )}
              </Button>
              <Button
                variant="ghost"
                size="sm"
                className="h-6 w-6 p-0"
                onClick={onClose}
              >
                <X className="h-4 w-4" />
              </Button>
            </div>
          </div>
        </CardHeader>

        {isExpanded && (
          <CardContent className="space-y-3 pt-3">
            {/* Status Badge */}
            <div className={`flex items-center space-x-2 p-3 rounded-lg ${analysisResult.status === 'alert' ? 'bg-red-700' : config.color} ${analysisResult.status === 'alert' ? '' : 'bg-opacity-20'} border-2 ${config.borderColor}`}>
              <div className={`${analysisResult.status === 'alert' ? 'bg-red-900' : config.color} p-1.5 rounded text-white`}>
                {config.icon}
              </div>
              <div>
                <p className={`font-medium text-sm ${analysisResult.status === 'alert' ? 'text-white' : ''}`}>{analysisResult.title}</p>
                <Badge variant="outline" className={`text-xs mt-1 ${analysisResult.status === 'alert' ? 'text-white border-white' : ''}`}>
                  Caso: {analysisResult.caseNumber}
                </Badge>
              </div>
            </div>

            {/* Marcadores Detectados */}
            <div>
              <p className="text-xs text-muted-foreground mb-2">
                Marcadores detectados:
              </p>
              <div className="grid grid-cols-2 gap-2">
                {analysisResult.markers.map((marker, idx) => (
                  <Badge 
                    key={idx} 
                    variant="secondary"
                    className="text-xs"
                  >
                    {marker.type}
                    <span className="ml-1 opacity-70">
                      {(marker.confidence * 100).toFixed(0)}%
                    </span>
                  </Badge>
                ))}
              </div>
            </div>

            {/* Resumen */}
            <div className="p-3 bg-secondary/20 rounded-lg border border-secondary/40">
              <p className="text-sm leading-relaxed">
                {analysisResult.summary}
              </p>
            </div>

            {/* Acciones */}
            <div className="flex space-x-2">
              <Button 
                variant="outline" 
                size="sm"
                className="flex-1 text-xs"
                onClick={() => window.open('https://botilito.app/analysis', '_blank')}
              >
                <ExternalLink className="h-3 w-3 mr-1" />
                Ver detalles
              </Button>
              <Button 
                size="sm"
                className="flex-1 text-xs"
              >
                <Shield className="h-3 w-3 mr-1" />
                Reportar
              </Button>
            </div>

            {/* Footer */}
            <div className="pt-2 border-t text-center">
              <p className="text-xs text-muted-foreground">
                Análisis por <span className="text-primary font-medium">Botilito</span> • Digital-IA
              </p>
            </div>
          </CardContent>
        )}
      </Card>
    </div>
  );
} - - - - - - - - - - - - 
src/components/extension/ExtensionPopup.tsx

import React, { useState } from 'react';
import botilitoLogo from 'figma:asset/8604399dafdf4284ef499af970e8af43ff13e21b.png';
import { Button } from '../ui/button';
import { Badge } from '../ui/badge';
import { Card, CardContent, CardHeader, CardTitle } from '../ui/card';
import { Textarea } from '../ui/textarea';
import { 
  Shield, Send, ExternalLink, Clock, CheckCircle, 
  XCircle, AlertTriangle, Bot, Zap
} from 'lucide-react';

export function ExtensionPopup() {
  const [contentToAnalyze, setContentToAnalyze] = useState('');
  const [isAnalyzing, setIsAnalyzing] = useState(false);
  const [quickResult, setQuickResult] = useState<any>(null);

  const analyzeCurrentPage = () => {
    setIsAnalyzing(true);
    // Simular análisis rápido
    setTimeout(() => {
      setQuickResult({
        status: 'warning',
        markers: ['Sensacionalista', 'Manipulado'],
        confidence: 0.75,
        message: 'Este contenido presenta señales de desinformación'
      });
      setIsAnalyzing(false);
    }, 1500);
  };

  const analyzeSelection = () => {
    if (!contentToAnalyze.trim()) return;
    setIsAnalyzing(true);
    setTimeout(() => {
      setQuickResult({
        status: 'alert',
        markers: ['Falso', 'Conspiración'],
        confidence: 0.89,
        message: 'Alto riesgo de desinformación detectado'
      });
      setIsAnalyzing(false);
    }, 1500);
  };

  const getStatusColor = (status: string) => {
    const colors: { [key: string]: string } = {
      'safe': 'bg-green-500',
      'warning': 'bg-orange-500',
      'alert': 'bg-red-500'
    };
    return colors[status] || 'bg-gray-500';
  };

  const getStatusIcon = (status: string) => {
    const icons: { [key: string]: React.ReactNode } = {
      'safe': <CheckCircle className="h-5 w-5" />,
      'warning': <AlertTriangle className="h-5 w-5" />,
      'alert': <XCircle className="h-5 w-5" />
    };
    return icons[status] || <Shield className="h-5 w-5" />;
  };

  return (
    <div className="w-[380px] h-[600px] bg-background overflow-y-auto custom-scrollbar">
      {/* Header */}
      <div className="bg-[rgb(255,255,255)] p-4 border border-gray-400">
        <div className="flex items-center justify-between">
          <div className="flex items-center space-x-2">
            <img src={botilitoLogo} alt="Botilito" className="h-10 object-contain" />
          </div>
          <Badge variant="secondary" className="text-xs">v1.0</Badge>
        </div>
        <p className="text-xs text-black mt-1">
          Detector de Desinformación
        </p>
      </div>

      <div className="p-4 space-y-4">
        {/* Análisis Rápido de Página */}
        <Card className="border-2 border-primary/40">
          <CardHeader className="pb-[0px] pt-[17px] px-4 pr-[16px] pl-[16px]">
            <CardTitle className="text-sm flex items-center space-x-2">
              <Zap className="h-4 w-4 text-primary" />
              <span>Análisis Rápido</span>
            </CardTitle>
          </CardHeader>
          <CardContent className="space-y-2 pt-[0px] pr-[24px] pb-[20px] pl-[24px] mt-[-14px] mr-[0px] mb-[1px] ml-[0px]">
            <Button 
              onClick={analyzeCurrentPage}
              disabled={isAnalyzing}
              className="w-full px-[10px] py-[0px]"
              size="sm"
            >
              {isAnalyzing ? (
                <Clock className="h-4 w-4 mr-2 animate-spin" />
              ) : (
                <Shield className="h-4 w-4 mr-2" />
              )}
              {isAnalyzing ? 'Analizando...' : 'Analizar esta página'}
            </Button>

            {quickResult && (
              <div className={`p-2 rounded-lg border-2 ${getStatusColor(quickResult.status)} bg-opacity-10`}>
                <div className="flex items-start space-x-2 mb-1.5">
                  <div className={`${getStatusColor(quickResult.status)} p-1 rounded text-white`}>
                    {getStatusIcon(quickResult.status)}
                  </div>
                  <div className="flex-1">
                    <p className="text-sm mb-1">{quickResult.message}</p>
                    <div className="grid grid-cols-2 gap-1">
                      {quickResult.markers.map((marker: string, idx: number) => (
                        <Badge key={idx} variant="secondary" className="text-xs">
                          {marker}
                        </Badge>
                      ))}
                    </div>
                  </div>
                </div>
                <Button 
                  variant="outline" 
                  size="sm" 
                  className="w-full mt-1.5 text-xs"
                  onClick={() => window.open('https://botilito.app/analysis', '_blank')}
                >
                  <ExternalLink className="h-3 w-3 mr-1" />
                  Ver análisis completo
                </Button>
              </div>
            )}
          </CardContent>
        </Card>

        {/* Analizar Texto Seleccionado */}
        <Card className="border-2 border-secondary/40">
          <CardHeader className="pb-[0px] pt-[20px] px-4 pr-[0px] pl-[16px]">
            <CardTitle className="text-sm flex items-center space-x-2">
              <Bot className="h-4 w-4 text-primary" />
              <span>Analizar Contenido</span>
            </CardTitle>
          </CardHeader>
          <CardContent className="space-y-1.5 pt-[0px] pr-[24px] pb-[20px] pl-[24px]">
            <Textarea
              placeholder="Pega aquí el texto que quieres verificar..."
              value={contentToAnalyze}
              onChange={(e) => setContentToAnalyze(e.target.value)}
              rows={2}
              className="resize-none text-sm border border-gray-300 mt-[-15px] mr-[0px] mb-[9px] ml-[0px]"
            />
            <Button 
              onClick={analyzeSelection}
              disabled={!contentToAnalyze.trim() || isAnalyzing}
              className="w-full"
              size="sm"
            >
              <Send className="h-4 w-4 mr-2" />
              Enviar a Botilito
            </Button>
          </CardContent>
        </Card>

        {/* Estadísticas Rápidas */}
        <Card className="border border-secondary/40">
          <CardContent className="pt-4">
            <div className="grid grid-cols-2 gap-3">
              {/* Casos analizados hoy */}
              <div className="bg-blue-50 border-2 border-blue-200 rounded-lg p-3 text-center transition-all hover:shadow-md">
                <div className="flex items-center justify-center mb-1">
                  <Zap className="h-4 w-4 text-blue-600 mr-1" />
                  <p className="text-2xl text-blue-700">47</p>
                </div>
                <p className="text-xs text-blue-600">Casos analizados hoy</p>
              </div>
              
              {/* Precisión */}
              <div className="bg-green-50 border-2 border-green-200 rounded-lg p-3 text-center transition-all hover:shadow-md">
                <div className="flex items-center justify-center mb-1">
                  <CheckCircle className="h-4 w-4 text-green-600 mr-1" />
                  <p className="text-2xl text-green-700">92%</p>
                </div>
                <p className="text-xs text-green-600">Precisión</p>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Footer */}
        <div className="text-center pt-2 border-t">
          <Button 
            variant="ghost" 
            size="sm" 
            className="text-xs"
            onClick={() => window.open('https://botilito.app', '_blank')}
          >
            Abrir aplicación completa
            <ExternalLink className="h-3 w-3 ml-1" />
          </Button>
        </div>
      </div>
    </div>
  );
} - - - - - - - - - - - - 
src/components/Login.tsx

import React, { useState } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Input } from './ui/input';
import { Label } from './ui/label';
import { Eye, EyeOff, Loader2 } from 'lucide-react';
import exampleImage from 'figma:asset/444e8e22665a8cbdab132760610010dba89f3e67.png';
import botilitoImage from 'figma:asset/ce81bb4aba8c9f36807cd145a086a12ce7f876dc.png';
import digitalIALogo from 'figma:asset/1c413bccac94a45a38e7dde790a3aa8c525d334b.png';
import { signIn } from '../utils/supabase/auth';

interface LoginProps {
  onLogin: () => void;
  onGoToRegister: () => void;
}

export function Login({ onLogin, onGoToRegister }: LoginProps) {
  const [showPassword, setShowPassword] = useState(false);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [credentials, setCredentials] = useState({
    email: '',
    password: ''
  });

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsLoading(true);
    setError(null);

    try {
      await signIn({
        email: credentials.email,
        password: credentials.password
      });
      onLogin();
    } catch (err: any) {
      console.error('Login error:', err);
      setError(err.message || 'Error al iniciar sesión. Por favor, verifica tus credenciales.');
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="min-h-screen bg-primary">
      <div className="w-full h-screen">
        {/* Contenedor principal con la imagen de referencia como fondo */}
        <div className="relative bg-white h-full overflow-hidden">
          {/* Imagen de fondo de referencia */}
          <div className="absolute inset-0 opacity-10">
            <img 
              src={exampleImage} 
              alt="Botilito Login Reference" 
              className="w-full h-full object-cover"
            />
          </div>
          
          <div className="relative z-10 grid lg:grid-cols-2 gap-0 h-full">
            {/* Lado izquierdo - Presentación de Botilito */}
            <div className="bg-gradient-to-br from-primary to-secondary lg:p-12 flex flex-col justify-center items-center text-center p-[48px]">
              {/* Burbuja de diálogo */}
              <div className="bg-white rounded-2xl p-6 mb-8 relative shadow-lg max-w-md">
                <h1 className="text-3xl font-bold text-black mb-4">
                  ¡Kiubo! Soy Botilito
                </h1>
                <p className="text-gray-700 leading-relaxed">
                  Un ex-agente digital de una granja de bots! Me escapé para venirme al bando de los que luchan contra la desinformación desde digitalia.gov.co.
                </p>
                {/* Flecha de la burbuja */}
                <div className="absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full">
                  <div className="w-0 h-0 border-l-[15px] border-r-[15px] border-t-[20px] border-l-transparent border-r-transparent border-t-white"></div>
                </div>
              </div>

              {/* Botilito Character - Imagen oficial */}
              <div className="relative">
                <img 
                  src={botilitoImage} 
                  alt="Botilito - El ex-agente digital convertido en luchador contra la desinformación" 
                  className="w-72 h-auto drop-shadow-2xl"
                />
              </div>
            </div>

            {/* Lado derecho - Formulario de login */}
            <div className="bg-white lg:p-12 flex flex-col justify-center px-[130px] py-[48px]">
              <div className="max-w-xl mx-auto w-full">
                {/* Header del formulario */}
                <div className="text-center mb-6">
                  <div className="inline-block bg-primary text-black px-8 py-4 rounded-2xl text-2xl font-bold mb-4">
                    ¿Me acompañas?
                  </div>
                </div>

                {/* Formulario */}
                <form onSubmit={handleSubmit} className="space-y-5">
                  {/* Error message */}
                  {error && (
                    <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg">
                      {error}
                    </div>
                  )}

                  {/* Campo de usuario/email */}
                  <div className="space-y-2">
                    <Label htmlFor="email" className="text-gray-700 text-lg">
                      Usuario o correo electrónico
                    </Label>
                    <Input
                      id="email"
                      type="text"
                      value={credentials.email}
                      onChange={(e) => setCredentials(prev => ({ ...prev, email: e.target.value }))}
                      className="w-full px-6 py-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                      placeholder="usuario@ejemplo.com"
                      required
                    />
                  </div>

                  {/* Campo de contraseña */}
                  <div className="space-y-2">
                    <Label htmlFor="password" className="text-gray-700 text-lg">
                      Contraseña
                    </Label>
                    <div className="relative">
                      <Input
                        id="password"
                        type={showPassword ? 'text' : 'password'}
                        value={credentials.password}
                        onChange={(e) => setCredentials(prev => ({ ...prev, password: e.target.value }))}
                        className="w-full px-6 py-4 pr-14 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                        placeholder="••••••••"
                        required
                      />
                      <button
                        type="button"
                        onClick={() => setShowPassword(!showPassword)}
                        className="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors"
                      >
                        {showPassword ? (
                          <EyeOff className="h-6 w-6" />
                        ) : (
                          <Eye className="h-6 w-6" />
                        )}
                      </button>
                    </div>
                  </div>

                  {/* Enlace "Olvidé mi contraseña" */}
                  <div className="text-right">
                    <button
                      type="button"
                      className="text-base text-gray-600 hover:text-gray-800 transition-colors"
                    >
                      Olvidé mi contraseña
                    </button>
                  </div>

                  {/* Botón de ingresar */}
                  <Button
                    type="submit"
                    disabled={isLoading}
                    className="w-full bg-black hover:bg-gray-800 text-white py-4 text-lg rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                  >
                    {isLoading ? (
                      <>
                        <Loader2 className="mr-2 h-5 w-5 animate-spin inline" />
                        Ingresando...
                      </>
                    ) : (
                      '¡Pa\' dentro!'
                    )}
                  </Button>

                  {/* Enlace de registro */}
                  <div className="text-center">
                    <span className="text-gray-600 text-base">¿No eres miembro? </span>
                    <button
                      type="button"
                      onClick={onGoToRegister}
                      className="text-primary hover:text-secondary font-medium text-base transition-colors no-hover-effect"
                    >
                      Regístrate ahora
                    </button>
                  </div>
                </form>
                
                {/* Logo de Digital-IA en la parte inferior */}
                <div className="mt-8 pt-6 border-t border-gray-200 flex justify-center">
                  <a 
                    href="https://digitalia.gov.co" 
                    target="_blank" 
                    rel="noopener noreferrer"
                    className="no-hover-effect"
                  >
                    <img 
                      src={digitalIALogo} 
                      alt="Digital-IA - Educomunicación para la paz" 
                      className="h-28 w-auto object-contain hover:opacity-80 transition-opacity cursor-pointer"
                    />
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
} - - - - - - - - - - - - 
src/components/auth/AuthBuilder.tsx

import React, { useMemo, useState, useEffect } from 'react';
import { useConfig } from '@/providers/ConfigProvider';
import { useSchema, type SchemaModel } from '@/providers/SchemaProvider';
import { useMessages } from '@/providers/MessageProvider';
import { SchemaForm } from '@/components/form-fields/SchemaForm';
import { Loader2, AlertTriangle } from 'lucide-react';
import { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';
import { signIn, signUp } from '@/utils/supabase/auth';

interface AuthBuilderProps {
  workflowName: "loginFlow" | "registerFlow";
  onSuccess: () => void;
}

const AuthBuilder: React.FC<AuthBuilderProps> = ({ workflowName, onSuccess }) => {
  const { builderConfig, isLoading: isConfigLoading } = useConfig();
  const { getOrFetchSchema } = useSchema();
  const { messages, isLoading: isLoadingMessages } = useMessages();
  
  const [modelSchema, setModelSchema] = useState<SchemaModel | null>(null);
  const [isLoadingSchema, setIsLoadingSchema] = useState(true);
  const [schemaError, setSchemaError] = useState<string | null>(null);
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [authError, setAuthError] = useState<string | null>(null);

  const workflow = useMemo(() => builderConfig?.authFlows[workflowName], [builderConfig, workflowName]);
  const messageKey = workflowName === 'loginFlow' ? 'login' : 'register';
  const workflowMessages = useMemo(() => messages?.auth?.[messageKey], [messages, messageKey]);

  useEffect(() => {
    if (workflow?.baseModel && getOrFetchSchema) {
      setIsLoadingSchema(true);
      setSchemaError(null);
      getOrFetchSchema(workflow.baseModel)
        .then(schema => setModelSchema(schema))
        .catch(err => setSchemaError(err.message))
        .finally(() => setIsLoadingSchema(false));
    } else {
        setIsLoadingSchema(false);
    }
  }, [workflow, getOrFetchSchema]);

  const handleSubmit = async (formData: Record<string, unknown>) => {
    setIsSubmitting(true);
    setAuthError(null);
    try {
        if (workflowName === 'loginFlow') {
            await signIn({ email: formData.email as string, password: formData.password as string });
        } else if (workflowName === 'registerFlow') {
            if (formData.password !== formData.confirmPassword) throw new Error("Las contraseñas no coinciden.");
            await signUp({
                email: formData.email as string,
                password: formData.password as string,
                name: formData.fullName as string,
                phone: formData.phone as string,
                location: `${formData.city}, ${formData.department}`,
                birthDate: formData.birthDate as string
            });
            alert("¡Registro exitoso! Por favor, revisa tu correo para verificar tu cuenta.");
        }
        onSuccess();
    } catch (err: any) {
        setAuthError(err.message || "Ocurrió un error.");
    } finally {
        setIsSubmitting(false);
    }
  };

  const isLoading = isConfigLoading || isLoadingSchema || isLoadingMessages;
  if (isLoading || !builderConfig || !workflow || !modelSchema) {
    return <div className="flex h-64 w-full items-center justify-center"><Loader2 className="h-6 w-6 animate-spin" /></div>;
  }
  
  if (schemaError) { return (<Alert variant="destructive"><AlertTriangle className="h-4 w-4" /><AlertTitle>Error de Formulario</AlertTitle><AlertDescription>{schemaError}</AlertDescription></Alert>); }

  return (
    <>
      {authError && (<Alert variant="destructive" className="my-4"><AlertTriangle className="h-4 w-4" /><AlertTitle>Error</AlertTitle><AlertDescription>{authError}</AlertDescription></Alert>)}
      <SchemaForm modelSchema={modelSchema} view={workflow.view} onSubmit={handleSubmit} isSubmitting={isSubmitting} submitText={workflowMessages?.submit_button}/>
    </>
  );
};

export default AuthBuilder;
 - - - - - - - - - - - - 
src/components/FloatingNotifications.tsx

import React, { useState, useEffect } from 'react';
import { motion, AnimatePresence } from 'motion/react';
import { Badge } from './ui/badge';
import { Button } from './ui/button';
import { X, Bell, AlertTriangle, CheckCircle, Info } from 'lucide-react';

interface Notification {
  id: string;
  type: 'alert' | 'success' | 'info' | 'warning';
  title: string;
  message: string;
  timestamp: Date;
  region?: string;
}

export function FloatingNotifications() {
  const [notifications, setNotifications] = useState<Notification[]>([]);
  const [isVisible, setIsVisible] = useState(true);

  // Simular notificaciones en tiempo real
  useEffect(() => {
    const mockNotifications = [
      {
        id: '1',
        type: 'alert' as const,
        title: 'Brote detectado',
        message: 'Incremento súbito de casos en Región Andina (+45% en 1h)',
        timestamp: new Date(),
        region: 'Andina'
      },
      {
        id: '2',
        type: 'warning' as const,
        title: 'Patrón anómalo',
        message: 'Campaña coordinada detectada en WhatsApp',
        timestamp: new Date(Date.now() - 5 * 60 * 1000),
        region: 'Caribe'
      },
      {
        id: '3',
        type: 'success' as const,
        title: 'Neutralización exitosa',
        message: '156 casos verificados como falsos en última hora',
        timestamp: new Date(Date.now() - 10 * 60 * 1000),
        region: 'Nacional'
      }
    ];

    setNotifications(mockNotifications);

    // Simular nuevas notificaciones cada 30 segundos
    const interval = setInterval(() => {
      const newNotification: Notification = {
        id: Date.now().toString(),
        type: Math.random() > 0.5 ? 'info' : 'warning',
        title: 'Nueva actividad detectada',
        message: `${Math.floor(Math.random() * 50 + 10)} casos nuevos registrados`,
        timestamp: new Date(),
        region: ['Andina', 'Caribe', 'Pacífico'][Math.floor(Math.random() * 3)]
      };

      setNotifications(prev => [newNotification, ...prev.slice(0, 4)]);
    }, 30000);

    return () => clearInterval(interval);
  }, []);

  const removeNotification = (id: string) => {
    setNotifications(prev => prev.filter(n => n.id !== id));
  };

  const getNotificationIcon = (type: string) => {
    switch (type) {
      case 'alert': return <AlertTriangle className="h-4 w-4 text-red-500" />;
      case 'warning': return <AlertTriangle className="h-4 w-4 text-orange-500" />;
      case 'success': return <CheckCircle className="h-4 w-4 text-green-500" />;
      case 'info': return <Info className="h-4 w-4 text-blue-500" />;
      default: return <Bell className="h-4 w-4" />;
    }
  };

  const getBgColor = (type: string) => {
    switch (type) {
      case 'alert': return 'bg-red-50 border-red-200';
      case 'warning': return 'bg-orange-50 border-orange-200';
      case 'success': return 'bg-green-50 border-green-200';
      case 'info': return 'bg-blue-50 border-blue-200';
      default: return 'bg-gray-50 border-gray-200';
    }
  };

  const formatTimestamp = (timestamp: Date) => {
    const now = new Date();
    const diff = Math.floor((now.getTime() - timestamp.getTime()) / 1000);
    
    if (diff < 60) return 'ahora';
    if (diff < 3600) return `hace ${Math.floor(diff / 60)}m`;
    if (diff < 86400) return `hace ${Math.floor(diff / 3600)}h`;
    return `hace ${Math.floor(diff / 86400)}d`;
  };

  if (!isVisible || notifications.length === 0) {
    return (
      <motion.div
        initial={{ opacity: 0, x: 20 }}
        animate={{ opacity: 1, x: 0 }}
        className="fixed top-24 right-6 z-40"
      >
        <Button
          onClick={() => setIsVisible(true)}
          className="bg-primary hover:bg-primary/90 shadow-lg rounded-full p-3"
        >
          <Bell className="h-5 w-5" />
          {notifications.length > 0 && (
            <Badge className="absolute -top-2 -right-2 bg-red-500 text-white text-xs min-w-[20px] h-5 rounded-full flex items-center justify-center">
              {notifications.length}
            </Badge>
          )}
        </Button>
      </motion.div>
    );
  }

  return (
    <div className="fixed top-24 right-6 w-80 z-40">
      <motion.div
        initial={{ opacity: 0, x: 20 }}
        animate={{ opacity: 1, x: 0 }}
        className="space-y-3"
      >
        {/* Header */}
        <div className="bg-white/95 backdrop-blur-sm rounded-lg border shadow-lg p-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-2">
              <Bell className="h-5 w-5 text-primary" />
              <span className="font-medium">Alertas en Tiempo Real</span>
              <Badge variant="destructive" className="animate-pulse">
                {notifications.length}
              </Badge>
            </div>
            <Button
              variant="ghost"
              size="sm"
              onClick={() => setIsVisible(false)}
              className="h-6 w-6 p-0"
            >
              <X className="h-4 w-4" />
            </Button>
          </div>
        </div>

        {/* Notifications */}
        <AnimatePresence>
          {notifications.map((notification, index) => (
            <motion.div
              key={notification.id}
              initial={{ opacity: 0, x: 20, scale: 0.9 }}
              animate={{ opacity: 1, x: 0, scale: 1 }}
              exit={{ opacity: 0, x: 20, scale: 0.9 }}
              transition={{ delay: index * 0.1 }}
              className={`${getBgColor(notification.type)} border rounded-lg p-4 shadow-lg backdrop-blur-sm`}
            >
              <div className="flex items-start space-x-3">
                <div className="mt-0.5">
                  {getNotificationIcon(notification.type)}
                </div>
                <div className="flex-1 min-w-0">
                  <div className="flex items-center justify-between">
                    <h4 className="text-sm font-medium truncate">{notification.title}</h4>
                    <Button
                      variant="ghost"
                      size="sm"
                      onClick={() => removeNotification(notification.id)}
                      className="h-5 w-5 p-0 opacity-50 hover:opacity-100"
                    >
                      <X className="h-3 w-3" />
                    </Button>
                  </div>
                  <p className="text-sm text-muted-foreground mt-1 leading-relaxed">
                    {notification.message}
                  </p>
                  <div className="flex items-center justify-between mt-2">
                    {notification.region && (
                      <Badge variant="outline" className="text-xs">
                        {notification.region}
                      </Badge>
                    )}
                    <span className="text-xs text-muted-foreground">
                      {formatTimestamp(notification.timestamp)}
                    </span>
                  </div>
                </div>
              </div>
            </motion.div>
          ))}
        </AnimatePresence>

        {/* Actions */}
        {notifications.length > 0 && (
          <motion.div
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            className="bg-white/95 backdrop-blur-sm rounded-lg border shadow-lg p-3"
          >
            <div className="flex space-x-2">
              <Button
                size="sm"
                variant="outline"
                onClick={() => setNotifications([])}
                className="flex-1 text-xs"
              >
                Marcar como leídas
              </Button>
              <Button
                size="sm"
                className="flex-1 text-xs"
              >
                Ver todas
              </Button>
            </div>
          </motion.div>
        )}
      </motion.div>
    </div>
  );
} - - - - - - - - - - - - 
src/components/AnalysisResultDisplay.tsx

import React from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Badge } from './ui/badge';
import { Progress } from './ui/progress';
import { Alert, AlertDescription } from './ui/alert';
import { Label } from './ui/label';
import { Button } from './ui/button';
import { 
  AlertTriangle, XCircle, Hash, FileText, Flame, Ban, Skull, Target, 
  Stethoscope, Bot, ArrowRight, UserCheck, Crosshair, ExternalLink, Activity, 
  Share2, Facebook, Twitter, Linkedin, MessageCircle, Calendar, Link, FileType,
  Download, CheckCircle, Smile, Image as ImageIcon, HelpCircle, Eye
} from 'lucide-react';
import type { FullAnalysisResponse } from '../types/botilito';

interface AnalysisResultDisplayProps {
  response: FullAnalysisResponse;
}

// Mapeo de colores y íconos para los marcadores de diagnóstico
const getMarkerVisuals = (type: string) => {
    const lowerType = type.toLowerCase();
    if (lowerType.includes('falso')) return { icon: <XCircle className="h-4 w-4" />, color: 'bg-red-500 hover:bg-red-600' };
    if (lowerType.includes('odio') || lowerType.includes('xenofobia')) return { icon: <Skull className="h-4 w-4" />, color: 'bg-red-700 hover:bg-red-800' };
    if (lowerType.includes('violencia')) return { icon: <Ban className="h-4 w-4" />, color: 'bg-red-900 hover:bg-red-950' };
    if (lowerType.includes('sensacionalista')) return { icon: <Flame className="h-4 w-4" />, color: 'bg-orange-400 hover:bg-orange-500' };
    if (lowerType.includes('engañoso')) return { icon: <AlertTriangle className="h-4 w-4" />, color: 'bg-orange-500 hover:bg-orange-600' };
    if (lowerType.includes('manipulado')) return { icon: <ImageIcon className="h-4 w-4" />, color: 'bg-purple-500 hover:bg-purple-600' };
    if (lowerType.includes('contexto')) return { icon: <AlertTriangle className="h-4 w-4" />, color: 'bg-amber-500 hover:bg-amber-600' };
    if (lowerType.includes('satírico')) return { icon: <Smile className="h-4 w-4" />, color: 'bg-blue-500 hover:bg-blue-600' };
    if (lowerType.includes('conspirativa')) return { icon: <Eye className="h-4 w-4" />, color: 'bg-violet-600 hover:bg-violet-700' };
    if (lowerType.includes('verificable')) return { icon: <HelpCircle className="h-4 w-4" />, color: 'bg-gray-500 hover:bg-gray-600' };
    if (lowerType.includes('verdadero')) return { icon: <CheckCircle className="h-4 w-4" />, color: 'bg-emerald-500 hover:bg-emerald-600' };
    return { icon: <Target className="h-4 w-4" />, color: 'bg-gray-500 hover:bg-gray-600' };
};

const getRiskColor = (level: string | undefined) => {
    if (!level) return 'border-gray-500 bg-gray-50';
    switch (level.toLowerCase()) {
      case 'crítico': return 'border-red-500 bg-red-50';
      case 'alto': return 'border-orange-500 bg-orange-50';
      case 'medio': return 'border-yellow-500 bg-yellow-50';
      case 'bajo': return 'border-green-500 bg-green-50';
      default: return 'border-gray-500 bg-gray-50';
    }
};

export function AnalysisResultDisplay({ response }: AnalysisResultDisplayProps) {
    const { id, created_at, title, summary, metadata, case_study } = response;
    const primaryDiagnosis = case_study?.metadata?.ai_labels ? Object.keys(case_study.metadata.ai_labels)[0] : 'Indeterminado';
    const riskLevel = 'Crítico'; // Simulado, ya que no viene en la API
    const confidence = 0.96; // Simulado

    const markersDetected = case_study?.metadata?.ai_labels ? 
        Object.entries(case_study.metadata.ai_labels).map(([type, justification]) => ({
            type,
            justification,
            confidence: Math.random() * (0.98 - 0.7) + 0.7 // Simulado
        })) : [];

    const handleShare = (platform: string) => {
        const text = `Diagnóstico Desinfodémico - Caso ${id}: ${primaryDiagnosis} detectado por Botilito`;
        const url = window.location.href;
        switch(platform) {
            case 'twitter': window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank'); break;
            case 'facebook': window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank'); break;
            case 'linkedin': window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`, '_blank'); break;
            case 'whatsapp': window.open(`https://wa.me/?text=${encodeURIComponent(text + ' ' + url)}`, '_blank'); break;
        }
    };

    return (
        <div className="space-y-6">
            <Card className="border-2 border-primary shadow-lg">
                <CardHeader className="bg-primary/10 border-b border-primary/20">
                    <div className="flex items-center justify-between">
                        <CardTitle className="flex items-center space-x-2">
                            <Stethoscope className="h-6 w-6 text-primary" />
                            <span>Diagnóstico Desinfodémico de Botilito</span>
                        </CardTitle>
                        <Badge className="bg-primary text-primary-foreground"><Bot className="h-3 w-3 mr-1" /> IA</Badge>
                    </div>
                </CardHeader>
                <CardContent className="p-6 space-y-6">
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-muted/30 rounded-lg">
                        <div className="flex items-start space-x-3">
                            <Hash className="h-5 w-5 text-primary mt-0.5" />
                            <div>
                                <div className="text-sm text-muted-foreground">Número de Caso</div>
                                <div className="font-mono">Caso: {case_study?.case_number || id.substring(0, 8)}</div>
                            </div>
                        </div>
                        <div className="flex items-start space-x-3">
                            <Calendar className="h-5 w-5 text-primary mt-0.5" />
                            <div>
                                <div className="text-sm text-muted-foreground">Fecha de Análisis</div>
                                <div>{new Date(created_at).toLocaleString('es-CO')}</div>
                            </div>
                        </div>
                        <div className="flex items-start space-x-3">
                            <FileType className="h-5 w-5 text-primary mt-0.5" />
                            <div>
                                <div className="text-sm text-muted-foreground">Tipo de Contenido</div>
                                <div className="capitalize">{metadata?.submissionType || 'No especificado'}</div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <Label className="flex items-center space-x-2 mb-2"><FileText className="h-4 w-4 text-primary" /><span>Título del Contenido</span></Label>
                        <div className="bg-red-50 p-4 rounded-lg border-l-4 border-red-500"><p className="italic">{title}</p></div>
                    </div>
                    
                    <div className={`p-6 rounded-lg border-2 ${getRiskColor(riskLevel)}`}>
                        <div className="flex items-start justify-between mb-4">
                            <div className="space-y-2">
                                <div className="flex items-center space-x-2"><Stethoscope className="h-5 w-5 text-primary" /><span className="text-sm text-muted-foreground">Diagnóstico Principal</span></div>
                                <h3 className="text-red-600">{primaryDiagnosis}</h3>
                            </div>
                            <div className="text-right space-y-1">
                                <Badge className="bg-red-500 text-white">RIESGO {riskLevel.toUpperCase()}</Badge>
                                <div className="text-sm text-muted-foreground">{(confidence * 100).toFixed(1)}% certeza</div>
                            </div>
                        </div>
                        <Progress value={confidence * 100} className="h-3" />
                    </div>

                    <div>
                        <Label className="flex items-center space-x-2 mb-3"><Crosshair className="h-4 w-4 text-primary" /><span>Marcadores de Diagnóstico Detectados</span><Badge variant="secondary">{markersDetected.length}</Badge></Label>
                        <div className="flex flex-wrap gap-2">
                            {markersDetected.map((marker, index) => {
                                const visuals = getMarkerVisuals(marker.type);
                                return (
                                    <Badge key={index} className={`${visuals.color} text-white px-3 py-1`}>
                                        {visuals.icon}
                                        <span className="ml-1">{marker.type}</span>
                                        <span className="ml-2 text-xs opacity-80">{(marker.confidence * 100).toFixed(0)}%</span>
                                    </Badge>
                                );
                            })}
                        </div>
                    </div>
                    
                    <div className="pt-4 border-t">
                        <Label className="flex items-center space-x-2 mb-3"><Share2 className="h-4 w-4 text-primary" /><span>Compartir Diagnóstico</span></Label>
                        <div className="flex flex-wrap gap-2">
                            <button onClick={() => handleShare('twitter')} className="flex items-center space-x-2 px-4 py-2 bg-[#1DA1F2] text-white rounded-lg hover:opacity-90 transition-opacity"><Twitter className="h-4 w-4" /><span>Twitter</span></button>
                            <button onClick={() => handleShare('facebook')} className="flex items-center space-x-2 px-4 py-2 bg-[#1877F2] text-white rounded-lg hover:opacity-90 transition-opacity"><Facebook className="h-4 w-4" /><span>Facebook</span></button>
                            <button onClick={() => handleShare('linkedin')} className="flex items-center space-x-2 px-4 py-2 bg-[#0A66C2] text-white rounded-lg hover:opacity-90 transition-opacity"><Linkedin className="h-4 w-4" /><span>LinkedIn</span></button>
                            <button onClick={() => handleShare('whatsapp')} className="flex items-center space-x-2 px-4 py-2 bg-[#25D366] text-white rounded-lg hover:opacity-90 transition-opacity"><MessageCircle className="h-4 w-4" /><span>WhatsApp</span></button>
                        </div>
                    </div>
                </CardContent>
            </Card>
        </div>
    );
}
 - - - - - - - - - - - - 
src/components/UnifiedDashboard.tsx

import React, { useState } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Badge } from './ui/badge';
import { Button } from './ui/button';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';
import { Progress } from './ui/progress';
import { Tabs, TabsContent, TabsList, TabsTrigger } from './ui/tabs';
import { 
  AreaChart, Area, BarChart, Bar, LineChart, Line, PieChart, Pie, Cell,
  XAxis, YAxis, CartesianGrid, ResponsiveContainer, Tooltip, Legend
} from 'recharts';
import { 
  Activity, TrendingUp, TrendingDown, AlertTriangle, Shield, 
  Zap, Clock, MapPin, Users, Globe, Bug, Stethoscope, 
  Target, Thermometer, ShieldCheck, AlertOctagon, Eye, Microscope,
  FileText, Image, Video, Volume2, CheckCircle, BarChart3
} from 'lucide-react';
import { Alert, AlertDescription } from './ui/alert';
import { WhatsAppIcon, FacebookIcon, TwitterIcon, TelegramIcon, TikTokIcon, WebIcon } from './PlatformIcons';

export function UnifiedDashboard() {
  const [timeRange, setTimeRange] = useState('24h');
  const [region, setRegion] = useState('colombia');

  // Datos del Dashboard original
  const dashboardStats = [
    { title: 'Total Contenidos', value: '1,247', icon: FileText, change: '+12%' },
    { title: 'Analizados por IA', value: '1,089', icon: CheckCircle, change: '+8%' },
    { title: 'Verificados Humanos', value: '456', icon: Users, change: '+15%' },
    { title: 'En Proceso', value: '158', icon: Clock, change: '-3%' },
  ];

  // Datos epidemiológicos del Mapa Desinfodémico
  const epidemicStats = [
    { title: 'Casos Activos', value: '2,847', icon: Bug, change: '+15%', color: 'text-red-600', bgColor: 'bg-red-50' },
    { title: 'Tasa de Infección', value: '3.2/h', icon: Activity, change: '+8%', color: 'text-orange-600', bgColor: 'bg-orange-50' },
    { title: 'Inmunidad Digital', value: '67%', icon: Shield, change: '+2%', color: 'text-green-600', bgColor: 'bg-green-50' },
    { title: 'Tiempo Promedio Detección', value: '4.2h', icon: Clock, change: '-12%', color: 'text-blue-600', bgColor: 'bg-blue-50' },
  ];

  const verificationData = [
    { month: 'Ene', contenidos: 85, verificados: 72 },
    { month: 'Feb', contenidos: 120, verificados: 98 },
    { month: 'Mar', contenidos: 150, verificados: 145 },
    { month: 'Abr', contenidos: 180, verificados: 165 },
    { month: 'May', contenidos: 210, verificados: 189 },
    { month: 'Jun', contenidos: 185, verificados: 176 },
  ];

  const infectivityData = [
    { time: '00:00', casos: 120, nuevos: 23, resueltos: 15 },
    { time: '04:00', casos: 145, nuevos: 31, resueltos: 18 },
    { time: '08:00', casos: 189, nuevos: 67, resueltos: 24 },
    { time: '12:00', casos: 234, nuevos: 89, resueltos: 35 },
    { time: '16:00', casos: 298, nuevos: 112, resueltos: 48 },
    { time: '20:00', casos: 267, nuevos: 78, resueltos: 109 },
    { time: '24:00', casos: 189, nuevos: 45, resueltos: 123 },
  ];

  const pieData = [
    { name: 'Veraz', value: 65, color: '#00E676' },
    { name: 'Desinformación', value: 20, color: '#F72585' },
    { name: 'Satírico', value: 10, color: '#FF6B35' },
    { name: 'Fuera de Contexto', value: 5, color: '#7209B7' },
  ];

  const contentTypes = [
    { name: 'Texto', value: 45, icon: FileText },
    { name: 'Imagen', value: 30, icon: Image },
    { name: 'Video', value: 20, icon: Video },
    { name: 'Audio', value: 5, icon: Volume2 },
  ];

  const transmissionVectors = [
    { platform: 'WhatsApp', cases: 856, percentage: 28, color: '#25D366' },
    { platform: 'Facebook', cases: 723, percentage: 24, color: '#1877F2' },
    { platform: 'Twitter/X', cases: 534, percentage: 18, color: '#000000' },
    { platform: 'Telegram', cases: 298, percentage: 10, color: '#0088CC' },
    { platform: 'TikTok', cases: 267, percentage: 9, color: '#FF0050' },
    { platform: 'Web', cases: 334, percentage: 11, color: '#4285F4' },
  ];

  const geographicSpread = [
    { region: 'Región Andina', casos: 1456, tasa: 5.2, estado: 'Brote Activo' },
    { region: 'Región Caribe', casos: 934, tasa: 4.1, estado: 'En Aumento' },
    { region: 'Región Pacífico', casos: 687, tasa: 3.8, estado: 'Controlado' },
    { region: 'Región Orinoquía', casos: 234, tasa: 2.3, estado: 'Estable' },
    { region: 'Región Amazonia', casos: 156, tasa: 1.9, estado: 'Bajo Control' },
    { region: 'Región Insular', casos: 43, tasa: 0.8, estado: 'Bajo Control' },
  ];

  const getRegionStatus = (estado: string) => {
    switch (estado) {
      case 'Brote Crítico':
        return <Badge className="bg-red-100 text-red-800 border-red-300">🔴 {estado}</Badge>;
      case 'Brote Activo':
        return <Badge className="bg-orange-100 text-orange-800 border-orange-300">🟡 {estado}</Badge>;
      case 'En Aumento':
        return <Badge className="bg-yellow-100 text-yellow-800 border-yellow-300">📈 {estado}</Badge>;
      case 'Controlado':
        return <Badge className="bg-blue-100 text-blue-800 border-blue-300">🔵 {estado}</Badge>;
      case 'Estable':
        return <Badge className="bg-green-100 text-green-800 border-green-300">🟢 {estado}</Badge>;
      case 'Bajo Control':
        return <Badge className="bg-green-100 text-green-800 border-green-300">✅ {estado}</Badge>;
      default:
        return <Badge variant="outline">{estado}</Badge>;
    }
  };

  const getPlatformIcon = (platform: string) => {
    switch (platform) {
      case 'WhatsApp': return WhatsAppIcon;
      case 'Facebook': return FacebookIcon;
      case 'Twitter/X': return TwitterIcon;
      case 'Telegram': return TelegramIcon;
      case 'TikTok': return TikTokIcon;
      case 'Web': return WebIcon;
      default: return Globe;
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex items-center justify-between">
        <div>
          <h1 className="flex items-center space-x-3">
            <BarChart3 className="h-8 w-8 text-primary" />
            <span>Dashboard & Mapa Desinfodémico</span>
          </h1>
          <p className="text-muted-foreground">
            Análisis integral de verificación y monitoreo epidemiológico de desinformación
          </p>
        </div>
        
        <div className="flex space-x-3">
          <Select value={timeRange} onValueChange={setTimeRange}>
            <SelectTrigger className="w-32">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="1h">Última hora</SelectItem>
              <SelectItem value="24h">24 horas</SelectItem>
              <SelectItem value="7d">7 días</SelectItem>
              <SelectItem value="30d">30 días</SelectItem>
            </SelectContent>
          </Select>
          
          <Select value={region} onValueChange={setRegion}>
            <SelectTrigger className="w-40">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="colombia">Colombia</SelectItem>
              <SelectItem value="andina">Región Andina</SelectItem>
              <SelectItem value="caribe">Región Caribe</SelectItem>
              <SelectItem value="pacifico">Región Pacífico</SelectItem>
              <SelectItem value="orinoquia">Región Orinoquía</SelectItem>
              <SelectItem value="amazonia">Región Amazonia</SelectItem>
              <SelectItem value="insular">Región Insular</SelectItem>
            </SelectContent>
          </Select>
        </div>
      </div>

      {/* Alert de Brote */}
      <Alert className="border-red-200 bg-red-50">
        <AlertOctagon className="h-4 w-4 text-red-600" />
        <AlertDescription className="text-red-800">
          <strong>⚠️ Alerta Epidemiológica:</strong> Se detectó un brote de desinformación sobre tratamientos médicos. 
          Tasa de contagio: +45% en las últimas 6 horas. <Button variant="outline" size="sm" className="ml-2">Ver Detalles</Button>
        </AlertDescription>
      </Alert>

      <Tabs defaultValue="dashboard" className="w-full">
        <TabsList className="grid w-full grid-cols-2 bg-muted/20 p-1 rounded-lg">
          <TabsTrigger 
            value="dashboard" 
            className="border border-gray-300 data-[state=active]:bg-secondary data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md font-medium"
          >
            Dashboard de Verificación
          </TabsTrigger>
          <TabsTrigger 
            value="epidemic" 
            className="border border-gray-300 data-[state=active]:bg-secondary data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md font-medium"
          >
            Análisis Epidemiológico
          </TabsTrigger>
        </TabsList>

        <TabsContent value="dashboard" className="space-y-6">
          {/* Statistics Cards - Dashboard */}
          <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
            {dashboardStats.map((stat) => (
              <Card key={stat.title}>
                <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                  <CardTitle className="text-sm">{stat.title}</CardTitle>
                  <stat.icon className="h-4 w-4 text-muted-foreground" />
                </CardHeader>
                <CardContent>
                  <div className="text-2xl">{stat.value}</div>
                  <p className="text-xs text-muted-foreground">
                    <span className={`${stat.change.includes('+') ? 'text-green-600' : 'text-red-600'}`}>
                      {stat.change}
                    </span>
                    {' '}desde el mes pasado
                  </p>
                </CardContent>
              </Card>
            ))}
          </div>

          <div className="grid gap-6 md:grid-cols-2">
            {/* Content Analysis Chart */}
            <Card>
              <CardHeader>
                <CardTitle>Análisis por Mes</CardTitle>
                <CardDescription>
                  Contenidos analizados vs verificados por humanos
                </CardDescription>
              </CardHeader>
              <CardContent>
                <ResponsiveContainer width="100%" height={300}>
                  <BarChart data={verificationData}>
                    <CartesianGrid strokeDasharray="3 3" />
                    <XAxis dataKey="month" />
                    <YAxis />
                    <Bar dataKey="contenidos" fill="var(--color-primary)" name="Analizados" />
                    <Bar dataKey="verificados" fill="var(--color-chart-2)" name="Verificados" />
                  </BarChart>
                </ResponsiveContainer>
              </CardContent>
            </Card>

            {/* Verification Results */}
            <Card>
              <CardHeader>
                <CardTitle>Resultados de Verificación</CardTitle>
                <CardDescription>
                  Distribución de etiquetas asignadas por la IA
                </CardDescription>
              </CardHeader>
              <CardContent>
                <ResponsiveContainer width="100%" height={300}>
                  <PieChart>
                    <Pie
                      data={pieData}
                      cx="50%"
                      cy="50%"
                      innerRadius={60}
                      outerRadius={100}
                      dataKey="value"
                    >
                      {pieData.map((entry, index) => (
                        <Cell key={index} fill={entry.color} />
                      ))}
                    </Pie>
                  </PieChart>
                </ResponsiveContainer>
                <div className="mt-4 grid grid-cols-2 gap-2">
                  {pieData.map((item) => (
                    <div key={item.name} className="flex items-center space-x-2">
                      <div 
                        className="w-3 h-3 rounded-full" 
                        style={{ backgroundColor: item.color }}
                      />
                      <span className="text-sm">{item.name}: {item.value}%</span>
                    </div>
                  ))}
                </div>
              </CardContent>
            </Card>
          </div>

          {/* Content Types Distribution */}
          <Card>
            <CardHeader>
              <CardTitle>Tipos de Contenido</CardTitle>
              <CardDescription>Distribución por tipo de media analizada</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-4">
                {contentTypes.map((type) => (
                  <div key={type.name} className="flex items-center justify-between">
                    <div className="flex items-center space-x-3">
                      <type.icon className="h-5 w-5 text-muted-foreground" />
                      <span>{type.name}</span>
                    </div>
                    <div className="flex items-center space-x-3 min-w-0 flex-1 ml-[35px]">
                      <Progress value={type.value} className="flex-1" />
                      <span className="text-sm text-muted-foreground">{type.value}%</span>
                    </div>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>

          {/* Recent Activity */}
          <Card>
            <CardHeader>
              <CardTitle>Actividad Reciente</CardTitle>
              <CardDescription>Últimas verificaciones y análisis</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-4">
                {[
                  { type: 'Imagen', status: 'Veraz', user: 'Ana García', time: 'Hace 5 min' },
                  { type: 'Video', status: 'Desinformación', user: 'Carlos López', time: 'Hace 12 min' },
                  { type: 'Texto', status: 'Satírico', user: 'María Torres', time: 'Hace 23 min' },
                  { type: 'Audio', status: 'Fuera de Contexto', user: 'Luis Martín', time: 'Hace 1h' },
                ].map((activity, index) => (
                  <div key={index} className="flex items-center justify-between py-2">
                    <div className="flex items-center space-x-3">
                      <Badge variant="outline">{activity.type}</Badge>
                      <Badge 
                        variant={
                          activity.status === 'Veraz' ? 'default' :
                          activity.status === 'Desinformación' ? 'destructive' :
                          'secondary'
                        }
                      >
                        {activity.status}
                      </Badge>
                    </div>
                    <div className="text-sm text-muted-foreground">
                      Verificado por {activity.user} • {activity.time}
                    </div>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>
        </TabsContent>

        <TabsContent value="epidemic" className="space-y-6">
          {/* Métricas Epidemiológicas Principales */}
          <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
            {epidemicStats.map((stat) => (
              <Card key={stat.title}>
                <CardContent className="p-4">
                  <div className="flex items-center space-x-3">
                    <div className={`p-3 rounded-lg ${stat.bgColor}`}>
                      <stat.icon className={`h-6 w-6 ${stat.color}`} />
                    </div>
                    <div>
                      <p className="text-2xl font-bold text-primary">{stat.value}</p>
                      <p className="text-sm text-muted-foreground">{stat.title}</p>
                      <p className={`text-xs ${stat.change.includes('+') ? 'text-red-600' : 'text-green-600'}`}>
                        {stat.change} vs período anterior
                      </p>
                    </div>
                  </div>
                </CardContent>
              </Card>
            ))}
          </div>

          <div className="grid gap-6 lg:grid-cols-2">
            {/* Curva de Infectividad */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <Activity className="h-5 w-5 text-primary" />
                  <span>Curva de Infectividad</span>
                </CardTitle>
                <CardDescription>
                  Propagación de desinformación en tiempo real
                </CardDescription>
              </CardHeader>
              <CardContent>
                <ResponsiveContainer width="100%" height={300}>
                  <AreaChart data={infectivityData}>
                    <CartesianGrid strokeDasharray="3 3" />
                    <XAxis dataKey="time" />
                    <YAxis />
                    <Tooltip />
                    <Legend />
                    <Area 
                      type="monotone" 
                      dataKey="casos" 
                      stackId="1" 
                      stroke="#F72585" 
                      fill="#F7258540" 
                      name="Casos Activos"
                    />
                    <Area 
                      type="monotone" 
                      dataKey="nuevos" 
                      stackId="2" 
                      stroke="#FF6B35" 
                      fill="#FF6B3540" 
                      name="Nuevos Casos"
                    />
                    <Area 
                      type="monotone" 
                      dataKey="resueltos" 
                      stackId="3" 
                      stroke="#00E676" 
                      fill="#00E67640" 
                      name="Casos Resueltos"
                    />
                  </AreaChart>
                </ResponsiveContainer>
              </CardContent>
            </Card>

            {/* Vectores de Transmisión */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <Globe className="h-5 w-5 text-primary" />
                  <span>Vectores de Transmisión</span>
                </CardTitle>
                <CardDescription>
                  Plataformas de mayor propagación
                </CardDescription>
              </CardHeader>
              <CardContent>
                <div className="space-y-4">
                  {transmissionVectors.map((platform) => {
                    const PlatformIcon = getPlatformIcon(platform.platform);
                    return (
                      <div key={platform.platform} className="space-y-2">
                        <div className="flex items-center justify-between">
                          <div className="flex items-center space-x-3">
                            <div 
                              className="w-8 h-8 rounded-lg flex items-center justify-center"
                              style={{ backgroundColor: `${platform.color}15` }}
                            >
                              <PlatformIcon 
                                className="w-5 h-5" 
                                style={{ color: platform.color }}
                              />
                            </div>
                            <span className="font-medium">{platform.platform}</span>
                          </div>
                          <div className="text-right">
                            <div className="font-bold">{platform.cases} casos</div>
                            <div className="text-sm text-muted-foreground">{platform.percentage}%</div>
                          </div>
                        </div>
                        <Progress value={platform.percentage} className="h-2" />
                      </div>
                    );
                  })}
                </div>
              </CardContent>
            </Card>
          </div>

          {/* Propagación Geográfica */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <MapPin className="h-5 w-5 text-primary" />
                <span>Propagación Geográfica</span>
              </CardTitle>
              <CardDescription>
                Estado epidemiológico por región
              </CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-3">
                {geographicSpread.map((item, index) => (
                  <div key={index} className="flex items-center justify-between p-3 bg-muted/30 rounded">
                    <div>
                      <div className="font-medium">{item.region}</div>
                      <div className="text-sm text-muted-foreground">
                        {item.casos.toLocaleString()} casos • Tasa: {item.tasa}/hora
                      </div>
                    </div>
                    <div className="text-right">
                      {getRegionStatus(item.estado)}
                    </div>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>

          {/* Panel de Control Epidemiológico */}
          <div className="grid gap-4 md:grid-cols-3">
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <Thermometer className="h-5 w-5 text-primary" />
                  <span>Temperatura Desinfodémica</span>
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="text-center">
                  <div className="text-4xl font-bold text-red-600 mb-2">🌡️ 7.8°C</div>
                  <div className="text-sm text-muted-foreground">Estado: Fiebre Alta</div>
                  <Progress value={78} className="mt-3" />
                </div>
              </CardContent>
            </Card>

            <Card>
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <ShieldCheck className="h-5 w-5 text-primary" />
                  <span>Efectividad de Vacunas</span>
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="space-y-3">
                  <div className="flex justify-between">
                    <span className="text-sm">Verificación de Fuentes:</span>
                    <span className="font-bold text-green-600">89%</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-sm">Educación Digital:</span>
                    <span className="font-bold text-green-600">76%</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-sm">Fact-Checking:</span>
                    <span className="font-bold text-green-600">84%</span>
                  </div>
                </div>
              </CardContent>
            </Card>

            <Card>
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <Eye className="h-5 w-5 text-primary" />
                  <span>Vigilancia Epidemiológica</span>
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="space-y-3">
                  <div className="flex items-center justify-between">
                    <span className="text-sm">Sensores Activos:</span>
                    <span className="font-bold text-primary">1,247</span>
                  </div>
                  <div className="flex items-center justify-between">
                    <span className="text-sm">Cobertura:</span>
                    <span className="font-bold text-primary">94.2%</span>
                  </div>
                  <div className="flex items-center justify-between">
                    <span className="text-sm">Tiempo de Detección:</span>
                    <span className="font-bold text-primary">4.2 min</span>
                  </div>
                </div>
              </CardContent>
            </Card>
          </div>
        </TabsContent>
      </Tabs>
    </div>
  );
} - - - - - - - - - - - - 
src/components/ContentUpload.tsx

import React, { useState, useRef } from 'react';
import botilitoImage from 'figma:asset/e27a276e6ff0e187a67cf54678c265c1c38adbf7.png';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Textarea } from './ui/textarea';
import { Label } from './ui/label';
import { Badge } from './ui/badge';
import { Progress } from './ui/progress';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';
import { 
  Upload, FileText, Send, X, CheckCircle, Clock, Bot, Share2,
  XCircle, Flame, Ban, Skull, Target, Crosshair, Link2, Image, Video, Volume2,
  Download, Twitter, Facebook, MessageCircle, Linkedin, User, Newspaper, ExternalLink, Tag,
  Plus, Paperclip, Mail, Instagram, Music, Hash, Youtube, Smartphone, MessageSquare
} from 'lucide-react';
import { Alert, AlertDescription } from './ui/alert';
import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from './ui/tooltip';
import { generateCaseCode, ContentType, TransmissionVector } from '../utils/caseCodeGenerator';
import { analyzeContent, TransmissionVector as APITransmissionVector, FullAnalysisResponse, Consensus } from '../utils/aiAnalysis';

export function ContentUpload() {
  const [content, setContent] = useState('');
  const [uploadedFiles, setUploadedFiles] = useState<File[]>([]);
  const [contentType, setContentType] = useState<ContentType>('texto');
  const [transmissionMedium, setTransmissionMedium] = useState<TransmissionVector>('Otro');
  const [isAnalyzing, setIsAnalyzing] = useState(false);
  const [analysisProgress, setAnalysisProgress] = useState(0);
  const [analysisComplete, setAnalysisComplete] = useState(false);
  const [aiAnalysis, setAiAnalysis] = useState<any>(null);
  const [isDragging, setIsDragging] = useState(false);
  const [caseNumber, setCaseNumber] = useState('');
  const [newsTitle, setNewsTitle] = useState('');
  const [newsContent, setNewsContent] = useState('');
  const [contentTheme, setContentTheme] = useState('');
  const [newsScreenshot, setNewsScreenshot] = useState('');
  const [reportDateTime, setReportDateTime] = useState('');
  const [newsSource, setNewsSource] = useState<{name: string, url: string} | null>(null);
  const [reportedBy, setReportedBy] = useState('');
  const [textareaRows, setTextareaRows] = useState(1);
  const fileInputRef = useRef<HTMLInputElement>(null);
  const dropZoneRef = useRef<HTMLDivElement>(null);
  const canvasRef = useRef<HTMLCanvasElement>(null);

  const transmissionMediums = [
    { value: 'WhatsApp' as TransmissionVector, label: 'WhatsApp', icon: MessageCircle },
    { value: 'Facebook' as TransmissionVector, label: 'Facebook', icon: Facebook },
    { value: 'Instagram' as TransmissionVector, label: 'Instagram', icon: Instagram },
    { value: 'Twitter/X' as TransmissionVector, label: 'Twitter/X', icon: Twitter },
    { value: 'TikTok' as TransmissionVector, label: 'TikTok', icon: Music },
    { value: 'Telegram' as TransmissionVector, label: 'Telegram', icon: Send },
    { value: 'YouTube' as TransmissionVector, label: 'YouTube', icon: Youtube },
    { value: 'Email' as TransmissionVector, label: 'Email', icon: Mail },
    { value: 'SMS' as TransmissionVector, label: 'SMS', icon: Smartphone },
    { value: 'Web' as TransmissionVector, label: 'Web/Sitio', icon: Link2 },
    { value: 'Otro' as TransmissionVector, label: 'Otra plataforma digital', icon: Share2 },
  ];

  // Auto-expand textarea based on content length
  const calculateTextareaRows = (text: string): number => {
    if (!text || text.length === 0) return 1;

    // Count newlines in the text
    const newlineCount = (text.match(/\n/g) || []).length;

    // Check if it's a URL (short and compact)
    const urlRegex = /(https?:\/\/[^\s]+)/g;
    const isOnlyUrl = urlRegex.test(text.trim()) && text.trim().length < 200 && newlineCount === 0;

    if (isOnlyUrl) return 1;

    // Base calculation on content length
    let rows = 1;
    if (text.length > 50 && text.length <= 150) rows = 2;
    else if (text.length > 150 && text.length <= 300) rows = 3;
    else if (text.length > 300 && text.length <= 500) rows = 4;
    else if (text.length > 500 && text.length <= 800) rows = 5;
    else if (text.length > 800) rows = 6;

    // Add rows for newlines (each newline adds a row)
    rows = Math.max(rows, Math.min(newlineCount + 1, 6));

    // Cap at 6 rows maximum
    return Math.min(rows, 6);
  };

  // Handle content change with auto-detection and auto-expand
  const handleContentChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {
    const newContent = e.target.value;
    setContent(newContent);

    // Auto-expand textarea based on content
    const newRows = calculateTextareaRows(newContent);
    setTextareaRows(newRows);

    // Auto-detect content type (URL vs text)
    const urlRegex = /(https?:\/\/[^\s]+)/g;
    const hasUrl = urlRegex.test(newContent);
    if (hasUrl) {
      setContentType('url');
    } else {
      setContentType('texto');
    }
  };

  const handleFileUpload = (files: FileList | null) => {
    if (!files) return;
    const newFiles = Array.from(files);
    setUploadedFiles(prev => [...prev, ...newFiles]);
    
    // Detectar tipo de contenido basado en el archivo
    if (files.length > 0) {
      const file = files[0];
      if (file.type.startsWith('image/')) {
        setContentType('imagen');
      } else if (file.type.startsWith('video/')) {
        setContentType('video');
      } else if (file.type.startsWith('audio/')) {
        setContentType('audio');
      } else {
        setContentType('texto');
      }
    }
  };

  const handleDragEnter = (e: React.DragEvent) => {
    e.preventDefault();
    e.stopPropagation();
    setIsDragging(true);
  };

  const handleDragLeave = (e: React.DragEvent) => {
    e.preventDefault();
    e.stopPropagation();
    setIsDragging(false);
  };

  const handleDragOver = (e: React.DragEvent) => {
    e.preventDefault();
    e.stopPropagation();
  };

  const handleDrop = (e: React.DragEvent) => {
    e.preventDefault();
    e.stopPropagation();
    setIsDragging(false);
    handleFileUpload(e.dataTransfer.files);
  };

  const removeFile = (index: number) => {
    setUploadedFiles(prev => prev.filter((_, i) => i !== index));
  };

  // Map UI transmission vector to API transmission vector
  const mapTransmissionVector = (uiVector: TransmissionVector): APITransmissionVector => {
    const mapping: Record<string, APITransmissionVector> = {
      'WhatsApp': 'WhatsApp',
      'Facebook': 'Facebook',
      'Instagram': 'Otro', // Not directly supported by API
      'Twitter/X': 'Twitter',
      'TikTok': 'Otro', // Not directly supported by API
      'Telegram': 'Telegram',
      'YouTube': 'Otro', // Not directly supported by API
      'Email': 'Email',
      'SMS': 'Otro', // Not directly supported by API
      'Web': 'Otro',
      'Otro': 'Otro'
    };
    return mapping[uiVector] || 'Otro';
  };

  // Transform API response to UI format
  const transformAPIResponse = (apiResponse: FullAnalysisResponse) => {
    // Get labels from consensus if available, otherwise from classification_labels
    let labels: Record<string, string> = {};
    let consensusState: Consensus['state'] | null = null;

    if (apiResponse.consensus) {
      // Use consensus final_labels
      consensusState = apiResponse.consensus.state;
      const aiLabels = apiResponse.metadata?.classification_labels ||
                       apiResponse.case_study?.metadata?.ai_labels || {};

      // Build labels object from consensus final_labels
      apiResponse.consensus.final_labels.forEach(label => {
        labels[label] = aiLabels[label] || 'Verificado por consenso';
      });
    } else {
      // Use classification_labels directly
      labels = apiResponse.metadata?.classification_labels ||
               apiResponse.case_study?.metadata?.ai_labels || {};
    }

    // Transform labels object to array format for UI
    const markersDetected = Object.entries(labels).map(([type, explanation]) => ({
      type,
      explanation,
      // No confidence scores from API - removed fake values
    }));

    return {
      title: apiResponse.title,
      summary: apiResponse.summary,      
      theme: apiResponse.metadata?.theme,
      region: apiResponse.metadata?.region,
      caseNumber: apiResponse.case_study?.case_number,
      consensusState,
      consensus: apiResponse.consensus,
      markersDetected,
      summaryBotilito: apiResponse.metadata.summaryBotilito,
      judgementBotilito: apiResponse.metadata.judgementBotilito,
      vectores: apiResponse.metadata?.vectores_de_transmision || [],
      relatedDocuments: apiResponse.case_study?.metadata?.related_documents || [],
      webSearchResults: apiResponse.case_study?.metadata?.web_search_results || [],
      finalVerdict: apiResponse.metadata?.judgementBotilito.summary || 'Análisis en proceso',
      fullResult: apiResponse
    };
  };

  const performRealAIAnalysis = async () => {
    setIsAnalyzing(true);
    setAnalysisProgress(0);
    setAnalysisComplete(false);

    try {
      // Determine if it's URL or text
      const urlRegex = /(https?:\/\/[^\s]+)/g;
      const urls = content.match(urlRegex);
      const isUrl = urls && urls.length > 0;

      // Prepare content for analysis
      const analysisContent = isUrl
        ? { url: urls[0] } // Send first URL found
        : { text: content };

      // Map transmission vector to API format
      const apiVector = mapTransmissionVector(transmissionMedium);

      // Call real AI analysis with progress updates
      const result = await analyzeContent(
        analysisContent,
        apiVector,
        (progress, status) => {
          setAnalysisProgress(progress);
        }
      );

      // Analysis complete - set results
      setIsAnalyzing(false);
      setAnalysisComplete(true);
      setAnalysisProgress(100);

      // Transform API response to UI format
      const transformedData = transformAPIResponse(result);

      // Update all UI state with transformed data
      setNewsTitle(transformedData.title);
      console.log(transformedData.summaryBotilito.summary);
      setNewsContent(transformedData.summaryBotilito.summary);

      // Set theme if available
      if (transformedData.theme) {
        setContentTheme(transformedData.theme);
      }

      // Set case number from API (not generated)
      if (transformedData.caseNumber) {
        setCaseNumber(`CASO-${transformedData.caseNumber}`);
      }

      // Determine veracity message based on consensus
      let veracityMessage = 'Análisis Completado';
      if (transformedData.consensusState === 'human_consensus') {
        veracityMessage = 'Verificado por Humanos';
      } else if (transformedData.consensusState === 'conflicted') {
        veracityMessage = 'Opiniones Divididas';
      } else if (transformedData.consensusState === 'ai_only') {
        veracityMessage = 'Análisis AI';
      }

      // Store full analysis result with proper markers
      setAiAnalysis({
        veracity: veracityMessage,
        consensusState: transformedData.consensusState,
        consensus: transformedData.consensus,
        markersDetected: transformedData.markersDetected,
        summary: transformedData.summary,
        theme: transformedData.theme,
        region: transformedData.region,
        sources: transformedData.vectores.length > 0 ? transformedData.vectores : [transmissionMedium],
        recommendation: transformedData.consensusState === 'human_consensus'
          ? 'Análisis verificado por la comunidad'
          : 'Revisa los resultados del análisis',
        finalVerdict: transformedData.finalVerdict,
        fullResult: transformedData.fullResult
      });

    } catch (error: any) {
      console.error('Error en análisis AI:', error);
      setIsAnalyzing(false);
      setAnalysisProgress(0);

      // Show error to user
      setAiAnalysis({
        veracity: 'Error en Análisis',
        confidence: 0,
        markersDetected: [],
        summary: error.message || 'Ocurrió un error durante el análisis. Por favor, intenta de nuevo.',
        sources: [],
        recommendation: 'Verifica tu conexión e intenta nuevamente'
      });
      setAnalysisComplete(true);
    }
  };

  const handleSubmit = () => {
    if (!content && uploadedFiles.length === 0) {
      return;
    }
    if (!transmissionMedium || transmissionMedium === 'Otro') {
      // Si no se seleccionó medio o es "Otro", usar Web como default
      setTransmissionMedium('Web');
    }
    
    // Detectar tipo de contenido si no está definido
    let finalContentType = contentType;
    if (content && content.match(/(https?:\/\/[^\s]+)/g)) {
      finalContentType = 'url';
    }
    
    // Generar número de caso único basado en tipo de contenido y vector de transmisión
    const generatedCaseNumber = generateCaseCode(finalContentType, transmissionMedium);
    setCaseNumber(generatedCaseNumber);
    
    // Generar fecha y hora del reporte
    const now = new Date();
    const dateTimeString = now.toLocaleDateString('es-CO', { 
      year: 'numeric', 
      month: 'long', 
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
    setReportDateTime(dateTimeString);
    
    // Simular usuario que reportó
    const userNames = ['María González', 'Carlos Rodríguez', 'Ana Martínez', 'Juan Pérez', 'Laura Sánchez', 'Diego López'];
    const randomUser = userNames[Math.floor(Math.random() * userNames.length)];
    setReportedBy(randomUser);
    
    // Detectar si es una URL y simular extracción de contenido
    const urlRegex = /(https?:\/\/[^\s]+)/g;
    const urls = content.match(urlRegex);
    
    if (urls && urls.length > 0) {
      // Simular extracción de título y contenido de noticia
      setNewsTitle('Descubren nueva vacuna experimental que promete curar todas las enfermedades en 24 horas');
      setNewsContent('Científicos de una universidad desconocida afirman haber desarrollado una vacuna revolucionaria que puede curar cualquier enfermedad en menos de un día. El tratamiento, que aún no ha sido revisado por pares ni aprobado por ninguna agencia reguladora, está generando controversia en redes sociales. Expertos independientes señalan que no existen evidencias científicas que respalden estas afirmaciones extraordinarias.');
      setContentTheme('Salud y Medicina');
      setNewsScreenshot('https://images.unsplash.com/photo-1504711434969-e33886168f5c?w=800');
      // Simular fuente de la noticia con nombre y URL
      const newsSources = [
        { name: 'El Tiempo', url: 'https://www.eltiempo.com' },
        { name: 'Semana', url: 'https://www.semana.com' },
        { name: 'La República', url: 'https://www.larepublica.co' },
        { name: 'El Espectador', url: 'https://www.elespectador.com' },
        { name: 'Portafolio', url: 'https://www.portafolio.co' },
        { name: 'RCN Noticias', url: 'https://www.canalrcn.com' },
        { name: 'Caracol Noticias', url: 'https://noticias.caracoltv.com' },
        { name: 'BluRadio', url: 'https://www.bluradio.com' },
        { name: 'W Radio', url: 'https://www.wradio.com.co' },
        { name: 'Pulzo', url: 'https://www.pulzo.com' }
      ];
      const randomSource = newsSources[Math.floor(Math.random() * newsSources.length)];
      setNewsSource(randomSource);
    } else {
      // No es URL, limpiar título y contenido pero detectar tema del texto
      setNewsTitle('');
      setNewsContent('');
      setContentTheme('Información General');
      setNewsScreenshot('');
      setNewsSource(null);
    }

    performRealAIAnalysis();
  };

  const resetForm = () => {
    setContent('');
    setUploadedFiles([]);
    setTransmissionMedium('');
    setIsAnalyzing(false);
    setAnalysisComplete(false);
    setAiAnalysis(null);
    setAnalysisProgress(0);
    setCaseNumber('');
    setNewsTitle('');
    setNewsContent('');
    setContentTheme('');
    setNewsScreenshot('');
    setReportDateTime('');
    setNewsSource(null);
    setReportedBy('');
    setTextareaRows(1);
  };

  // Función helper para dibujar rectángulos redondeados
  const drawRoundedRect = (ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number, radius: number) => {
    ctx.beginPath();
    ctx.moveTo(x + radius, y);
    ctx.lineTo(x + width - radius, y);
    ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
    ctx.lineTo(x + width, y + height - radius);
    ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
    ctx.lineTo(x + radius, y + height);
    ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
    ctx.lineTo(x, y + radius);
    ctx.quadraticCurveTo(x, y, x + radius, y);
    ctx.closePath();
  };

  // Función para generar imagen resumen para redes sociales
  const generateSummaryImage = () => {
    const canvas = canvasRef.current;
    if (!canvas || !aiAnalysis) return;

    const ctx = canvas.getContext('2d');
    if (!ctx) return;

    // Configurar dimensiones más grandes para mejor calidad
    canvas.width = 1200;
    canvas.height = 1400;

    // Fondo blanco
    ctx.fillStyle = '#ffffff';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Franja amarilla superior con borde
    ctx.fillStyle = '#ffe97a';
    ctx.fillRect(20, 20, canvas.width - 40, 140);
    ctx.strokeStyle = '#ffda00';
    ctx.lineWidth = 4;
    ctx.strokeRect(20, 20, canvas.width - 40, 140);

    // Logo/Título "BOTILITO" en la franja
    ctx.fillStyle = '#000000';
    ctx.font = 'bold 42px Lexend, sans-serif';
    ctx.fillText('BOTILITO', 40, 70);
    
    // Subtítulo
    ctx.font = '22px Lexend, sans-serif';
    ctx.fillText('Diagnóstico Desinfodémico', 40, 105);

    // Número de caso
    ctx.font = 'bold 20px Lexend, sans-serif';
    ctx.fillText(`Caso: ${caseNumber}`, 40, 140);

    // Tarjeta de contenido con borde
    let yPosition = 200;
    
    // Título de la noticia con fondo
    if (newsTitle) {
      ctx.fillStyle = '#f8f8f8';
      ctx.fillRect(40, yPosition, canvas.width - 80, 120);
      ctx.strokeStyle = '#e5e5e5';
      ctx.lineWidth = 2;
      ctx.strokeRect(40, yPosition, canvas.width - 80, 120);
      
      ctx.fillStyle = '#000000';
      ctx.font = 'bold 26px Lexend, sans-serif';
      const maxWidth = canvas.width - 120;
      const words = newsTitle.split(' ');
      let line = '';
      let y = yPosition + 40;
      let lineCount = 0;
      
      for (let i = 0; i < words.length; i++) {
        const testLine = line + words[i] + ' ';
        const metrics = ctx.measureText(testLine);
        if (metrics.width > maxWidth && i > 0) {
          ctx.fillText(line, 60, y);
          line = words[i] + ' ';
          y += 35;
          lineCount++;
          if (lineCount >= 2) break; // Máximo 3 líneas
        } else {
          line = testLine;
        }
      }
      ctx.fillText(line, 60, y);
      yPosition += 140;
    }

    // Tema del contenido
    if (contentTheme) {
      yPosition += 10;
      ctx.fillStyle = '#666666';
      ctx.font = 'bold 18px Lexend, sans-serif';
      ctx.fillText('TEMA:', 40, yPosition);
      ctx.fillStyle = '#000000';
      ctx.font = '18px Lexend, sans-serif';
      ctx.fillText(contentTheme, 110, yPosition);
      yPosition += 35;
    }

    // Fuente
    if (newsSource) {
      ctx.fillStyle = '#666666';
      ctx.font = 'bold 18px Lexend, sans-serif';
      ctx.fillText('FUENTE:', 40, yPosition);
      ctx.fillStyle = '#000000';
      ctx.font = '18px Lexend, sans-serif';
      ctx.fillText(newsSource.name, 130, yPosition);
      yPosition += 45;
    }

    // Espacio para indicar que hay captura (sin cargar la imagen para evitar problemas async)
    if (newsScreenshot) {
      const imgWidth = canvas.width - 80;
      const imgHeight = 300;
      
      // Fondo gris con indicador de captura
      ctx.fillStyle = '#f0f0f0';
      ctx.fillRect(40, yPosition, imgWidth, imgHeight);
      
      // Borde
      ctx.strokeStyle = '#cccccc';
      ctx.lineWidth = 2;
      ctx.strokeRect(40, yPosition, imgWidth, imgHeight);
      
      // Texto indicando captura
      ctx.fillStyle = '#999999';
      ctx.font = '20px Lexend, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('📸 Captura de pantalla incluida', canvas.width / 2, yPosition + imgHeight / 2);
      ctx.textAlign = 'left';
      
      yPosition += 320;
    } else {
      yPosition += 20;
    }

    // Marcadores detectados con badges coloridos
    ctx.fillStyle = '#000000';
    ctx.font = 'bold 24px Lexend, sans-serif';
    ctx.fillText('Marcadores de Diagnóstico:', 40, yPosition);
    yPosition += 20;

    // Dibujar marcadores como badges
    const topMarkers = aiAnalysis.markersDetected?.slice(0, 5) || [];
    
    topMarkers.forEach((marker: any, index: number) => {
      const markerColors: { [key: string]: string } = {
        'Verdadero': '#10b981',
        'Falso': '#ef4444',
        'Engañoso': '#f97316',
        'Satírico': '#3b82f6',
        'Manipulado': '#a855f7',
        'Discurso de odio': '#991b1b',
        'Discurso de odio (Xenofobia)': '#991b1b',
        'Propaganda': '#6366f1',
        'Spam': '#6b7280',
        'Conspiración': '#8b5cf6',
        'Sesgo Político': '#ec4899',
        'Estafa': '#ef4444',
        'Sensacionalista': '#fb923c',
        'Incitación a la violencia': '#7f1d1d',
        'Descontextualizado': '#f59e0b',
        'Parcialmente Cierto': '#06b6d4',
        'Contenido Patrocinado': '#10b981',
        'Opinión': '#64748b',
        'Rumor': '#14b8a6',
        'Deepfake': '#991b1b',
        'Sin Verificar': '#6b7280'
      };

      const color = markerColors[marker.type] || '#6b7280';
      const confidence = (marker.confidence * 100).toFixed(0);

      // Badge background con sombra
      yPosition += 15;
      ctx.shadowColor = 'rgba(0, 0, 0, 0.1)';
      ctx.shadowBlur = 8;
      ctx.shadowOffsetX = 0;
      ctx.shadowOffsetY = 2;
      
      ctx.fillStyle = color;
      const badgeWidth = canvas.width - 80;
      const badgeHeight = 70;
      drawRoundedRect(ctx, 40, yPosition, badgeWidth, badgeHeight, 12);
      ctx.fill();

      // Resetear sombra
      ctx.shadowColor = 'transparent';
      ctx.shadowBlur = 0;
      ctx.shadowOffsetX = 0;
      ctx.shadowOffsetY = 0;

      // Badge text
      ctx.fillStyle = '#ffffff';
      ctx.font = `bold ${index === 0 ? '32' : '26'}px Lexend, sans-serif`;
      ctx.fillText(`${marker.type}`, 60, yPosition + 30);
      
      ctx.font = `${index === 0 ? '24' : '20'}px Lexend, sans-serif`;
      ctx.fillText(`Confianza: ${confidence}%`, 60, yPosition + 58);

      yPosition += 70;
    });

    // Footer con fecha
    yPosition += 30;
    ctx.fillStyle = '#666666';
    ctx.font = '16px Lexend, sans-serif';
    ctx.fillText(reportDateTime, 40, yPosition);
    
    yPosition += 30;
    ctx.fillStyle = '#000000';
    ctx.font = 'bold 18px Lexend, sans-serif';
    ctx.fillText('Verificado por Botilito - Análisis desinfodémico con IA', 40, yPosition);
  };

  // Función para descargar la imagen
  const handleDownloadImage = () => {
    generateSummaryImage();
    
    setTimeout(() => {
      const canvas = canvasRef.current;
      if (!canvas) return;

      canvas.toBlob((blob) => {
        if (!blob) return;
        
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.download = `botilito-diagnostico-${caseNumber}.png`;
        link.href = url;
        link.click();
        URL.revokeObjectURL(url);
      });
    }, 100);
  };

  // Funciones para compartir en redes sociales
  const shareOnTwitter = () => {
    const topMarker = aiAnalysis?.markersDetected?.[0];
    const markerText = topMarker ? `${topMarker.type} (${(topMarker.confidence * 100).toFixed(0)}%)` : 'contenido analizado';
    const text = `🔍 Botilito detectó: ${markerText}\n${newsTitle ? `\n"${newsTitle}"\n` : ''}\nCaso: ${caseNumber}\n#Botilito #VerificaciónDeFechos #Desinformación`;
    const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
    window.open(url, '_blank');
  };

  const shareOnFacebook = () => {
    const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`;
    window.open(url, '_blank');
  };

  const shareOnWhatsApp = () => {
    const topMarker = aiAnalysis?.markersDetected?.[0];
    const markerText = topMarker ? `${topMarker.type} (${(topMarker.confidence * 100).toFixed(0)}%)` : 'contenido analizado';
    const text = `🔍 *Botilito* detectó: *${markerText}*\n${newsTitle ? `\n"${newsTitle}"\n` : ''}\nCaso: ${caseNumber}\n\nVerificación completa de desinformación con IA`;
    const url = `https://wa.me/?text=${encodeURIComponent(text)}`;
    window.open(url, '_blank');
  };

  const shareOnLinkedIn = () => {
    const url = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(window.location.href)}`;
    window.open(url, '_blank');
  };

  return (
    <div className="max-w-5xl mx-auto space-y-6 pt-[20px] pr-[0px] pb-[0px] pl-[0px]">
      {/* Franja superior de Botilito cuando el análisis está completo */}
      {analysisComplete && !isAnalyzing && (
        <div className="bg-[#ffe97a] border-2 border-[#ffda00] rounded-lg p-4 shadow-lg">
          <div className="flex items-center space-x-4">
            <img 
              src={botilitoImage} 
              alt="Botilito" 
              className="w-24 h-24 object-contain mt-[0px] mr-[16px] mb-[-18px] ml-[0px]"
            />
            <div className="flex-1">
              <p className="text-xl">
                ¡Mis circuitos ya escanearon esto de arriba a abajo! 🔍⚡
              </p>
              <p className="text-sm mt-1 opacity-80">
                Ya le pasé este caso a mis parceros de carne y hueso de <span className="font-medium">Digital-IA</span> para que hagan su diagnóstico humano! 🤝
              </p>
            </div>
          </div>
        </div>
      )}

      {/* Upload Form - Only show when not analyzing and not complete */}
      {!analysisComplete && !isAnalyzing && (
        <>
          {/* Main Upload Card */}
          <Card>
            <CardHeader>
              <CardTitle className="font-bold">Ajá! ¿listos para diagnosticar juntos lo que se esconde detrás de lo evidente?</CardTitle>
            </CardHeader>
            <CardContent>
              {/* Universal Input Area */}
              <div 
                ref={dropZoneRef}
                onDragEnter={handleDragEnter}
                onDragOver={handleDragOver}
                onDragLeave={handleDragLeave}
                onDrop={handleDrop}
                className={`relative border-2 border-solid rounded-xl p-8 transition-all duration-300 bg-[#ffeea9] border-secondary/60 ${
                  isDragging 
                    ? 'bg-[#ffe68f] border-primary scale-[1.02] shadow-lg' 
                    : 'hover:bg-[#ffeb98] hover:border-primary/80 hover:shadow-md'
                }`}
              >
                {/* Layout Horizontal: Botilito a la izquierda, contenido a la derecha */}
                <div className="grid grid-cols-[auto_1fr] gap-8 items-center">
                  {/* Columna Derecha: Contenido */}
                  <div className="space-y-6 col-span-2">
                    {/* Sección Superior: Formatos Soportados */}
                    <div className="flex items-center gap-4 px-[92px] py-[0px] bg-[rgb(255,233,122)] rounded-[10px] border-2 border-[#ffda00]">
                      {/* Botilito a la izquierda */}
                      <img src={botilitoImage} alt="Botilito" className="h-[100px] w-[100px] object-contain flex-shrink-0 pt-[4px] pr-[0px] pb-[0px] pl-[0px]" />
                      
                      {/* Contenido a la derecha */}
                      <div className="flex-1 space-y-3">
                        <p className="text-left px-[7px] py-[0px]">
                          <strong>En Digital-IA me incorporaron tecnología para analizar:</strong>
                        </p>
                        <TooltipProvider>
                          <div className="flex flex-wrap items-center gap-2">
                            {/* Enlaces */}
                            <Tooltip>
                              <TooltipTrigger asChild>
                                <div className="inline-flex items-center gap-2 px-4 py-2 bg-white rounded-full border border-gray-200 cursor-help">
                                  <Link2 className="h-4 w-4 text-black" />
                                  <span className="text-sm">Enlaces</span>
                                </div>
                              </TooltipTrigger>
                              <TooltipContent side="bottom">
                                <p>Pega URLs de redes sociales, noticias o cualquier link pa' verificar</p>
                              </TooltipContent>
                            </Tooltip>

                            {/* Texto */}
                            <Tooltip>
                              <TooltipTrigger asChild>
                                <div className="inline-flex items-center gap-2 px-4 py-2 bg-white rounded-full border border-gray-200 cursor-help">
                                  <FileText className="h-4 w-4 text-black" />
                                  <span className="text-sm">Texto</span>
                                </div>
                              </TooltipTrigger>
                              <TooltipContent side="bottom">
                                <p>Escribe o pega el texto que quieres chequear, parce</p>
                              </TooltipContent>
                            </Tooltip>

                            {/* Imágenes */}
                            <Tooltip>
                              <TooltipTrigger asChild>
                                <div className="inline-flex items-center gap-2 px-4 py-2 bg-white rounded-full border border-gray-200 cursor-help">
                                  <Image className="h-4 w-4 text-black" />
                                  <span className="text-sm">Imágenes</span>
                                </div>
                              </TooltipTrigger>
                              <TooltipContent side="bottom">
                                <p>Sube capturas de pantalla, memes o fotos que te parezcan raras</p>
                              </TooltipContent>
                            </Tooltip>

                            {/* Videos */}
                            <Tooltip>
                              <TooltipTrigger asChild>
                                <div className="inline-flex items-center gap-2 px-4 py-2 bg-white rounded-full border border-gray-200 cursor-help">
                                  <Video className="h-4 w-4 text-black" />
                                  <span className="text-sm">Videos</span>
                                </div>
                              </TooltipTrigger>
                              <TooltipContent side="bottom">
                                <p>Sube tus archivos de video MP4, MOV, AVI o cualquier formato</p>
                              </TooltipContent>
                            </Tooltip>

                            {/* Audios */}
                            <Tooltip>
                              <TooltipTrigger asChild>
                                <div className="inline-flex items-center gap-2 px-4 py-2 bg-white rounded-full border border-gray-200 cursor-help">
                                  <Volume2 className="h-4 w-4 text-black" />
                                  <span className="text-sm">Audios</span>
                                </div>
                              </TooltipTrigger>
                              <TooltipContent side="bottom">
                                <p>Sube notas de voz, podcasts o audios que circulan por ahí</p>
                              </TooltipContent>
                            </Tooltip>
                          </div>
                        </TooltipProvider>
                      </div>
                    </div>

                    {/* Sección Media: Instrucciones */}
                    <div className="text-center">
                      <p>Arrastra y suelta o pega tu contenido aquí</p>
                    </div>

                    {/* Sección Inferior: Barra de Input */}
                    <div className="space-y-2">
                      <div className="relative flex items-start bg-white border-2 border-secondary/60 rounded-[8px] shadow-sm min-h-11">
                        {/* Botón + integrado a la izquierda */}
                        <button
                          type="button"
                          onClick={() => fileInputRef.current?.click()}
                          className="flex-shrink-0 ml-2 p-1.5 rounded-full bg-transparent hover:bg-primary no-hover-effect group transition-colors"
                          title="Adjuntar archivo"
                        >
                          <Plus className="h-4 w-4 text-black/60" />
                        </button>

                        {/* Textarea integrado en el centro */}
                        <Textarea
                          placeholder="Pega aquí una URL, texto sospechoso, o escribe lo que quieras analizar..."
                          value={content}
                          onChange={handleContentChange}
                          onKeyDown={(e) => {
                            if (e.key === 'Enter' && !e.shiftKey) {
                              e.preventDefault();
                              handleSubmit(e as any);
                            }
                          }}
                          rows={textareaRows}
                          className="flex-1 resize-none border-0 bg-transparent px-3 min-h-11 focus:outline-none focus:ring-0 focus-visible:ring-0 focus-visible:border-0 placeholder:text-muted-foreground text-sm leading-relaxed transition-all duration-200"
                        />
                      </div>
                      {content.length > 0 && (
                        <p className="text-xs text-muted-foreground text-right">
                          {content.length} caracteres
                        </p>
                      )}
                    </div>
                  </div>
                </div>

                {/* Input de archivo oculto - Se activa con el botón + de la barra de chat */}
                <input
                  ref={fileInputRef}
                  type="file"
                  multiple
                  className="hidden"
                  accept="image/*,video/*,audio/*"
                  onChange={(e) => handleFileUpload(e.target.files)}
                />

                {/* Uploaded Files List */}
                {uploadedFiles.length > 0 && (
                  <div className="space-y-2 pt-6 mt-6 border-t border-secondary/40">
                    <Label>Archivos seleccionados:</Label>
                    {uploadedFiles.map((file, index) => (
                      <div key={index} className="flex items-center justify-between p-3 bg-white border border-secondary/40 rounded-lg hover:border-primary/60 transition-colors">
                        <div className="flex items-center space-x-3">
                          <div className="p-2 bg-secondary/40 rounded">
                            {file.type.startsWith('image/') && <Image className="h-4 w-4 text-black" />}
                            {file.type.startsWith('video/') && <Video className="h-4 w-4 text-black" />}
                            {file.type.startsWith('audio/') && <Volume2 className="h-4 w-4 text-black" />}
                            {!file.type.startsWith('image/') && !file.type.startsWith('video/') && !file.type.startsWith('audio/') && <FileText className="h-4 w-4 text-black" />}
                          </div>
                          <div>
                            <p className="font-medium">{file.name}</p>
                            <p className="text-xs text-muted-foreground">
                              {(file.size / 1024 / 1024).toFixed(2)} MB
                            </p>
                          </div>
                        </div>
                        <Button
                          variant="ghost"
                          size="sm"
                          onClick={() => removeFile(index)}
                          className="h-8 w-8 p-0 hover:bg-secondary/40"
                        >
                          <X className="h-4 w-4" />
                        </Button>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            </CardContent>
          </Card>

          {/* Transmission Medium Selection */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Share2 className="h-5 w-5" />
                Vector de Transmisión
              </CardTitle>
              <CardDescription>
                ¿Por dónde recibiste este contenido? Esta información nos ayuda a rastrear las rutas epidemiológicas de la desinformación.
              </CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-2">
                <Select value={transmissionMedium} onValueChange={setTransmissionMedium}>
                  <SelectTrigger className="w-full border-2 border-gray-300 focus:border-primary/50 transition-colors">
                    <SelectValue placeholder="Cuéntame, ¿por dónde viste eso?" />
                  </SelectTrigger>
                  <SelectContent>
                    {transmissionMediums.map((medium) => {
                      const IconComponent = medium.icon;
                      return (
                        <SelectItem key={medium.value} value={medium.value}>
                          <div className="flex items-center gap-2">
                            <IconComponent className="h-4 w-4" />
                            <span>{medium.label}</span>
                          </div>
                        </SelectItem>
                      );
                    })}
                  </SelectContent>
                </Select>
              </div>
            </CardContent>
          </Card>

          {/* Submit Button */}
          <div className="flex justify-end">
            <Button 
              onClick={handleSubmit}
              disabled={(!content && uploadedFiles.length === 0) || !transmissionMedium}
              className="flex items-center space-x-2"
            >
              <Send className="h-4 w-4" />
              <span>Iniciar Diagnóstico</span>
            </Button>
          </div>
        </>
      )}

      {/* Loader Page - Clean centered view during analysis */}
      {isAnalyzing && (
        <div className="flex flex-col items-center justify-center min-h-[60vh] space-y-8">
          {/* Botilito Character */}
          <div className="flex justify-center">
            <img
              src={botilitoImage}
              alt="Botilito analizando"
              className="w-48 h-48 object-contain animate-bounce"
            />
          </div>

          {/* Loader Card */}
          <Card className="w-full max-w-3xl shadow-lg border-2">
            <CardContent className="p-8 space-y-6">
              {/* Title */}
              <div className="text-center space-y-3">
                <h2 className="text-2xl font-bold flex items-center justify-center gap-2">
                  <Bot className="h-6 w-6 text-primary" />
                  Botilito está diagnosticando...
                </h2>
                <p className="text-muted-foreground text-base">
                  Aplicando análisis epidemiológico para detectar patrones de desinformación y evaluar su potencial viral
                </p>
              </div>

              {/* Progress Bar */}
              <div className="space-y-4">
                <Progress value={analysisProgress} className="w-full h-3" />

                {/* Status Text */}
                <p className="text-sm text-muted-foreground text-center font-medium">
                  {analysisProgress < 20 && "Secuenciando contenido desinfodémico..."}
                  {analysisProgress >= 20 && analysisProgress < 50 && "Identificando vectores de transmisión..."}
                  {analysisProgress >= 50 && analysisProgress < 80 && "Calculando índice de infectividad..."}
                  {analysisProgress >= 80 && analysisProgress < 95 && "Generando diagnóstico epidemiológico..."}
                  {analysisProgress >= 95 && "Finalizando análisis..."}
                </p>
              </div>
            </CardContent>
          </Card>
        </div>
      )}

      {/* Analysis Results - Only show when complete and not analyzing */}
      {analysisComplete && !isAnalyzing && aiAnalysis && (
        <div className="space-y-6">
          <Card>
            <CardHeader>
              <div className="flex items-center justify-between">
                <CardTitle className="flex items-center space-x-2 text-[24px]">
                  <Bot className="h-5 w-5 text-primary" />
                  <span className="text-[24px] font-bold">Diagnóstico Desinfodémico de Botilito</span>
                </CardTitle>
                <div className="flex flex-col items-end space-y-1">
                  <div className="flex flex-wrap gap-2 justify-end">
                    <Badge variant="outline" className="text-sm bg-[#ffe97a]">
                      Caso: {caseNumber}
                    </Badge>
                    {aiAnalysis.consensusState && (
                      <Badge
                        variant="outline"
                        className={`text-sm ${
                          aiAnalysis.consensusState === 'human_consensus'
                            ? 'bg-emerald-100 border-emerald-500 text-emerald-700'
                            : aiAnalysis.consensusState === 'conflicted'
                            ? 'bg-orange-100 border-orange-500 text-orange-700'
                            : 'bg-blue-100 border-blue-500 text-blue-700'
                        }`}
                      >
                        {aiAnalysis.consensusState === 'human_consensus' && '✓ Verificado por Humanos'}
                        {aiAnalysis.consensusState === 'conflicted' && '⚠ Opiniones Divididas'}
                        {aiAnalysis.consensusState === 'ai_only' && '🤖 Análisis AI'}
                      </Badge>
                    )}
                  </div>
                  {reportDateTime && (
                    <p className="text-xs text-muted-foreground">
                      {reportDateTime}
                    </p>
                  )}
                  {reportedBy && (
                    <div className="flex items-center space-x-1 text-xs text-muted-foreground">
                      <User className="h-3 w-3" />
                      <span className="font-normal font-bold">Reportado por: {reportedBy}</span>
                    </div>
                  )}
                </div>
              </div>
            </CardHeader>
            <CardContent className="space-y-4">
              {/* Título y contenido de la noticia si corresponde */}
              {newsTitle && newsContent && (
                <div className="p-4 bg-secondary/30 border-2 border-secondary/60 rounded-lg space-y-3">
                  {/* Captura de la noticia con etiquetas superpuestas - Formato horizontal compacto */}
                  {newsScreenshot && (
                    <div>
                      <Label>Captura de la noticia:</Label>
                      <div className="mt-2 rounded-lg overflow-hidden border-2 border-secondary/40 relative max-h-48">
                        <img 
                          src={newsScreenshot} 
                          alt="Captura de la noticia" 
                          className="w-full h-48 object-cover object-top"
                        />
                        
                        {/* Overlay con etiquetas detectadas */}
                        <div className="absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent flex items-end justify-center p-4">
                          <TooltipProvider>
                            <div className="flex flex-wrap gap-2 justify-center">
                              {aiAnalysis.markersDetected?.slice(0, 3).map((marker: any, index: number) => {
                              const getMarkerColor = (type: string) => {
                                const colorMap: { [key: string]: string } = {
                                  'Verdadero': 'bg-emerald-500 hover:bg-emerald-600',
                                  'Falso': 'bg-red-500 hover:bg-red-600',
                                  'Engañoso': 'bg-orange-500 hover:bg-orange-600',
                                  'Satírico': 'bg-blue-500 hover:bg-blue-600',
                                  'Manipulado': 'bg-purple-500 hover:bg-purple-600',
                                  'Discurso de odio': 'bg-red-700 hover:bg-red-800',
                                  'Discurso de odio (Xenofobia)': 'bg-red-700 hover:bg-red-800',
                                  'Racismo/Xenofobia': 'bg-red-700 hover:bg-red-800',
                                  'Sexismo/LGBTQ+fobia': 'bg-red-700 hover:bg-red-800',
                                  'Clasismo/Aporofobia': 'bg-red-600 hover:bg-red-700',
                                  'Ableismo': 'bg-red-600 hover:bg-red-700',
                                  'Propaganda': 'bg-indigo-600 hover:bg-indigo-700',
                                  'Spam': 'bg-gray-500 hover:bg-gray-600',
                                  'Conspiración': 'bg-violet-600 hover:bg-violet-700',
                                  'Teoría conspirativa': 'bg-violet-600 hover:bg-violet-700',
                                  'Sesgo Político': 'bg-yellow-600 hover:bg-yellow-700',
                                  'Estafa': 'bg-purple-700 hover:bg-purple-800',
                                  'Sensacionalista': 'bg-orange-400 hover:bg-orange-500',
                                  'Incitación a la violencia': 'bg-red-900 hover:bg-red-950',
                                  'Descontextualizado': 'bg-amber-500 hover:bg-amber-600',
                                  'Sin contexto': 'bg-amber-500 hover:bg-amber-600',
                                  'Parcialmente Cierto': 'bg-orange-500 hover:bg-orange-600',
                                  'Contenido Patrocinado': 'bg-indigo-600 hover:bg-indigo-700',
                                  'Opinión': 'bg-gray-500 hover:bg-gray-600',
                                  'Rumor': 'bg-gray-500 hover:bg-gray-600',
                                  'No verificable': 'bg-gray-500 hover:bg-gray-600',
                                  'Deepfake': 'bg-purple-500 hover:bg-purple-600',
                                  'Sin Verificar': 'bg-gray-500 hover:bg-gray-600',
                                  'Bot/Coordinado': 'bg-indigo-600 hover:bg-indigo-700',
                                  'Suplantación de identidad': 'bg-purple-700 hover:bg-purple-800',
                                  'Acoso/Ciberbullying': 'bg-orange-700 hover:bg-orange-800',
                                  'Contenido prejuicioso': 'bg-yellow-600 hover:bg-yellow-700',
                                  'En revisión': 'bg-gray-400 hover:bg-gray-500',
                                  'Satírico/Humorístico': 'bg-blue-500 hover:bg-blue-600'
                                };
                                return colorMap[type] || 'bg-gray-500 hover:bg-gray-600';
                              };

                              const getMarkerIcon = (type: string) => {
                                const iconMap: { [key: string]: React.ReactNode } = {
                                  'Falso': <XCircle className={index === 0 ? "h-6 w-6" : "h-5 w-5"} />,
                                  'Discurso de odio (Xenofobia)': <Skull className={index === 0 ? "h-6 w-6" : "h-5 w-5"} />,
                                  'Incitación a la violencia': <Ban className={index === 0 ? "h-6 w-6" : "h-5 w-5"} />,
                                  'Sensacionalista': <Flame className={index === 0 ? "h-6 w-6" : "h-5 w-5"} />,
                                };
                                return iconMap[type] || <Target className={index === 0 ? "h-6 w-6" : "h-5 w-5"} />;
                              };

                              return (
                                <Tooltip key={index}>
                                  <TooltipTrigger asChild>
                                    <Badge
                                      className={`${getMarkerColor(marker.type)} text-white shadow-lg cursor-help ${
                                        index === 0
                                          ? 'px-4 py-2 text-base scale-105'
                                          : 'px-3 py-1.5 text-sm'
                                      }`}
                                    >
                                      {getMarkerIcon(marker.type)}
                                      <span className="ml-1.5">{marker.type}</span>
                                    </Badge>
                                  </TooltipTrigger>
                                  <TooltipContent className="max-w-xs">
                                    <p className="text-sm">{marker.explanation}</p>
                                  </TooltipContent>
                                </Tooltip>
                              );
                            })}
                            </div>
                          </TooltipProvider>
                        </div>
                      </div>
                    </div>
                  )}
                  
                  {newsSource && (
                    <div className="flex flex-wrap items-center gap-4 pb-2">
                      {/* Fuente de la noticia */}
                      <div className="flex items-center space-x-2">
                        <Newspaper className="h-4 w-4 text-primary" />
                        <Label className="text-sm">Fuente:</Label>
                        <a 
                          href={newsSource.url} 
                          target="_blank" 
                          rel="noopener noreferrer"
                          className="inline-flex items-center space-x-1.5 px-3 py-1.5 bg-secondary/60 hover:bg-secondary text-secondary-foreground rounded-md transition-colors text-xs no-hover-effect"
                        >
                          <span>{newsSource.name}</span>
                          <ExternalLink className="h-3 w-3" />
                        </a>
                      </div>
                      
                      {/* Tema del contenido */}
                      {contentTheme && (
                        <div className="flex items-center space-x-2">
                          <Tag className="h-4 w-4 text-primary" />
                          <Label className="text-sm">Tema:</Label>
                          <Badge variant="outline" className="text-xs border-primary/40 bg-primary/10">
                            {contentTheme}
                          </Badge>
                        </div>
                      )}

                      {/* Región del contenido */}
                      {aiAnalysis.region && (
                        <div className="flex items-center space-x-2">
                          <Tag className="h-4 w-4 text-primary" />
                          <Label className="text-sm">Región:</Label>
                          <Badge variant="outline" className="text-xs border-primary/40 bg-primary/10">
                            {aiAnalysis.region}
                          </Badge>
                        </div>
                      )}
                    </div>
                  )}
                  
                  <div>
                    <Label>Titular de la noticia:</Label>
                    <div className="mt-1 p-3 bg-primary/20 border border-primary/40 rounded-lg">
                      <p className="font-medium">{newsTitle}</p>
                    </div>
                  </div>
                  <div>
                    <Label>Contenido analizado:</Label>
                    <p className="text-sm text-muted-foreground mt-1 leading-relaxed">{newsContent}</p>
                  </div>
                </div>
              )}

              <div>
                <h4 className="text-[20px]">Evaluación epidemiológica:</h4>
                <p className="text-sm text-muted-foreground mt-1">{aiAnalysis.finalVerdict}</p>
              </div>

              <div>
                <Label className="flex items-center space-x-2">
                  <Share2 className="h-4 w-4 text-primary" />
                  <span>Vectores de transmisión identificados:</span>
                </Label>
                <div className="flex flex-wrap gap-2 mt-3">
                  {aiAnalysis.sources.map((source: string, index: number) => {
                    const getPlatformIcon = (platform: string) => {
                      const lowerPlatform = platform.toLowerCase();
                      if (lowerPlatform.includes('whatsapp')) return <MessageCircle className="h-4 w-4" />;
                      if (lowerPlatform.includes('facebook')) return <Facebook className="h-4 w-4" />;
                      if (lowerPlatform.includes('twitter') || lowerPlatform.includes('x')) return <Twitter className="h-4 w-4" />;
                      if (lowerPlatform.includes('instagram')) return <Instagram className="h-4 w-4" />;
                      if (lowerPlatform.includes('tiktok')) return <Music className="h-4 w-4" />;
                      if (lowerPlatform.includes('youtube')) return <Youtube className="h-4 w-4" />;
                      if (lowerPlatform.includes('telegram')) return <Send className="h-4 w-4" />;
                      if (lowerPlatform.includes('linkedin')) return <Linkedin className="h-4 w-4" />;
                      if (lowerPlatform.includes('email') || lowerPlatform.includes('correo')) return <Mail className="h-4 w-4" />;
                      return <Share2 className="h-4 w-4" />;
                    };

                    const getPlatformColor = (platform: string) => {
                      // Colores de marca de cada vector de transmisión
                      const lowerPlatform = platform.toLowerCase();
                      if (lowerPlatform.includes('whatsapp')) return 'bg-[#25D366] text-white border border-[#1da851]';
                      if (lowerPlatform.includes('facebook')) return 'bg-[#1877F2] text-white border border-[#0c63d4]';
                      if (lowerPlatform.includes('twitter') || lowerPlatform.includes('x')) return 'bg-black text-white border border-gray-800';
                      if (lowerPlatform.includes('instagram')) return 'bg-gradient-to-tr from-[#F58529] via-[#DD2A7B] to-[#8134AF] text-white border border-[#C13584]';
                      if (lowerPlatform.includes('tiktok')) return 'bg-black text-white border border-[#00f2ea]';
                      if (lowerPlatform.includes('youtube')) return 'bg-[#FF0000] text-white border border-[#cc0000]';
                      if (lowerPlatform.includes('telegram')) return 'bg-[#0088cc] text-white border border-[#006ba1]';
                      if (lowerPlatform.includes('linkedin')) return 'bg-[#0A66C2] text-white border border-[#004182]';
                      if (lowerPlatform.includes('email') || lowerPlatform.includes('correo')) return 'bg-[#5f6368] text-white border border-[#4a4d50]';
                      return 'bg-gray-600 text-white border border-gray-700';
                    };

                    return (
                      <Badge 
                        key={index}
                        className={`${getPlatformColor(source)} px-3 py-2 flex items-center space-x-2 shadow-sm`}
                      >
                        {getPlatformIcon(source)}
                        <span>{source}</span>
                      </Badge>
                    );
                  })}
                </div>
              </div>

              {/* Compartir en redes sociales y descargar */}
              <div className="pt-6 border-t space-y-4">
                <div>
                  <Label className="flex items-center space-x-2 mb-3">
                    <Share2 className="h-4 w-4 text-primary" />
                    <span>¡Vamos a inmunizar a todo el país! Comparte este diagnóstico en tus redes sociales.</span>
                  </Label>
                  <div className="flex flex-wrap items-center gap-2">
                    <Button
                      onClick={shareOnTwitter}
                      size="icon"
                      title="Compartir en Twitter/X"
                      className="h-9 w-9 rounded-full bg-black hover:bg-gray-800 text-white no-hover-effect"
                    >
                      <Twitter className="h-4 w-4" />
                    </Button>
                    <Button
                      onClick={shareOnFacebook}
                      size="icon"
                      title="Compartir en Facebook"
                      className="h-9 w-9 rounded-full bg-[#1877F2] hover:bg-[#166fe5] text-white no-hover-effect"
                    >
                      <Facebook className="h-4 w-4" />
                    </Button>
                    <Button
                      onClick={shareOnWhatsApp}
                      size="icon"
                      title="Compartir en WhatsApp"
                      className="h-9 w-9 rounded-full bg-[#25D366] hover:bg-[#20bd5a] text-white no-hover-effect"
                    >
                      <MessageCircle className="h-4 w-4" />
                    </Button>
                    <Button
                      onClick={shareOnLinkedIn}
                      size="icon"
                      title="Compartir en LinkedIn"
                      className="h-9 w-9 rounded-full bg-[#0A66C2] hover:bg-[#095bad] text-white no-hover-effect"
                    >
                      <Linkedin className="h-4 w-4" />
                    </Button>
                    <div className="h-4 w-px bg-border mx-1"></div>
                    <Button
                      onClick={handleDownloadImage}
                      size="sm"
                      title="Descargar imagen resumen"
                      className="rounded-[6px] bg-secondary hover:bg-primary text-primary-foreground px-4"
                    >
                      <Download className="h-4 w-4 mr-2" />
                      <span className="text-sm">Descargar</span>
                    </Button>
                  </div>
                </div>
              </div>

              {/* Canvas oculto para generar imagen */}
              <canvas ref={canvasRef} className="hidden" />
            </CardContent>
          </Card>

          <div className="flex">
            <Button onClick={resetForm} className="bg-secondary hover:bg-primary text-primary-foreground transition-all duration-300">
              Quiero reportar otro contenido!
            </Button>
          </div>
        </div>
      )}
    </div>
  );
}
 - - - - - - - - - - - - 
src/components/ImmunizationStudio.tsx

import React, { useState } from 'react';
import botilitoImage from 'figma:asset/e27a276e6ff0e187a67cf54678c265c1c38adbf7.png';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Badge } from './ui/badge';
import { Textarea } from './ui/textarea';
import { Input } from './ui/input';
import { Label } from './ui/label';
import { Separator } from './ui/separator';
import { Alert, AlertDescription } from './ui/alert';
import { 
  Syringe, 
  Plus,
  Trash2,
  Link2,
  FileText,
  AlertTriangle,
  TrendingUp,
  Save,
  CheckCircle,
  XCircle,
  Bot,
  Users,
  Layers,
  Hash,
  Filter,
  Search,
  ArrowLeft,
  Newspaper,
  ExternalLink,
  Tag,
  Image,
  Video,
  Volume2,
  Shield,
  User,
  Calendar
} from 'lucide-react';
import { motion } from 'motion/react';

// Definición de las 19 categorías de marcadores de diagnóstico
const ETIQUETAS_CATEGORIAS = [
  { id: 'verdadero', label: 'Verdadero', icon: CheckCircle, color: 'text-green-600', bg: 'bg-green-50', border: 'border-green-200' },
  { id: 'falso', label: 'Falso', icon: XCircle, color: 'text-red-600', bg: 'bg-red-50', border: 'border-red-200' },
  { id: 'enganoso', label: 'Engañoso', icon: AlertTriangle, color: 'text-orange-600', bg: 'bg-orange-50', border: 'border-orange-200' },
  { id: 'satirico', label: 'Satírico/Humorístico', icon: CheckCircle, color: 'text-blue-600', bg: 'bg-blue-50', border: 'border-blue-200' },
  { id: 'manipulado', label: 'Manipulado', icon: Image, color: 'text-purple-600', bg: 'bg-purple-50', border: 'border-purple-200' },
  { id: 'sin_contexto', label: 'Sin contexto', icon: AlertTriangle, color: 'text-amber-600', bg: 'bg-amber-50', border: 'border-amber-200' },
  { id: 'no_verificable', label: 'No verificable', icon: CheckCircle, color: 'text-gray-600', bg: 'bg-gray-50', border: 'border-gray-200' },
  { id: 'teoria_conspirativa', label: 'Teoría conspirativa', icon: AlertTriangle, color: 'text-violet-600', bg: 'bg-violet-50', border: 'border-violet-200' },
  { id: 'discurso_odio', label: 'Discurso de odio', icon: XCircle, color: 'text-red-800', bg: 'bg-red-100', border: 'border-red-300' },
  { id: 'sensacionalista', label: 'Sensacionalista', icon: AlertTriangle, color: 'text-orange-500', bg: 'bg-orange-50', border: 'border-orange-200' },
];

interface Vaccine {
  id: string;
  name: string;
  description: string;
  supports: VaccineSupport[];
}

interface VaccineSupport {
  id: string;
  title: string;
  url: string;
}

export function ImmunizationStudio() {
  const [selectedContent, setSelectedContent] = useState<string | null>(null);
  const [vaccines, setVaccines] = useState<Vaccine[]>([]);
  const [newVaccineName, setNewVaccineName] = useState('');
  const [newVaccineDescription, setNewVaccineDescription] = useState('');
  const [newSupportTitle, setNewSupportTitle] = useState('');
  const [newSupportUrl, setNewSupportUrl] = useState('');
  const [editingVaccineId, setEditingVaccineId] = useState<string | null>(null);
  const [selectedFilter, setSelectedFilter] = useState('all');
  const [searchTerm, setSearchTerm] = useState('');
  const [currentPage, setCurrentPage] = useState(1);
  const casesPerPage = 10;

  // Casos verificados - con consenso humano
  const verifiedContents = [
    {
      id: 'T-WA-20241013-045',
      type: 'text',
      title: 'Artículo sobre tratamiento alternativo para diabetes',
      content: 'Un nuevo estudio revela que beber agua con limón en ayunas puede curar la diabetes tipo 2 en solo 30 días. Médicos de Harvard confirman la efectividad del tratamiento...',
      headline: 'Descubren cura milagrosa para diabetes: solo agua con limón en ayunas',
      url: 'https://noticiasfalsas.com/cura-diabetes-limon',
      screenshot: 'https://images.unsplash.com/photo-1504711434969-e33886168f5c?w=800',
      source: { name: 'Noticias Falsas', url: 'https://noticiasfalsas.com' },
      theme: 'Salud y Medicina',
      aiAnalysis: {
        veracity: 'Falso',
        confidence: 0.94,
        detectedMarkers: ['falso', 'enganoso', 'sensacionalista'],
        issues: ['No se encontraron estudios de Harvard sobre este tema', 'Afirmaciones médicas sin respaldo científico', 'Promete "cura" para enfermedad crónica'],
        summary: 'El contenido presenta patrones epidemiológicos consistentes con desinformación médica. Alto riesgo de propagación exponencial debido a apelación emocional y falsa autoridad científica.',
        sources: ['WhatsApp', 'Facebook', 'Twitter'],
        markersDetected: [
          { type: 'Falso', confidence: 0.94 },
          { type: 'Engañoso', confidence: 0.89 },
          { type: 'Sensacionalista', confidence: 0.85 }
        ]
      },
      consensusMarkers: ['falso', 'enganoso', 'sensacionalista'],
      consensusPercentages: {
        'falso': 92,
        'enganoso': 83,
        'sensacionalista': 75
      },
      humanVerified: true,
      verifiedBy: 'Red de Validación Humana',
      submittedBy: 'usuario_123',
      submittedAt: '2024-01-15T10:30:00Z',
      priority: 'high',
      votesCount: 12,
    },
    {
      id: 'I-FB-20241013-067',
      type: 'image',
      title: 'Foto de manifestación en plaza principal',
      url: 'https://redessociales.com/manifestacion-falsa',
      headline: 'Miles protestan contra el gobierno en la plaza central',
      content: 'manifestacion_plaza_central.jpg',
      description: 'Imagen que muestra una gran manifestación en la plaza central con miles de personas',
      screenshot: 'https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?w=800',
      source: { name: 'Redes Sociales', url: 'https://redessociales.com' },
      theme: 'Política y Sociedad',
      aiAnalysis: {
        veracity: 'Fuera de Contexto',
        confidence: 0.82,
        detectedMarkers: ['sin_contexto', 'manipulado'],
        issues: ['La imagen parece ser de otro evento', 'La fecha no coincide con eventos recientes', 'Metadatos sugieren manipulación'],
        summary: 'La imagen corresponde a un evento diferente realizado en 2019. Uso fuera de contexto para generar percepción de crisis actual.',
        sources: ['Facebook', 'Instagram', 'Telegram'],
        markersDetected: [
          { type: 'Sin contexto', confidence: 0.82 },
          { type: 'Manipulado', confidence: 0.68 }
        ]
      },
      consensusMarkers: ['sin_contexto', 'manipulado', 'enganoso'],
      consensusPercentages: {
        'sin_contexto': 88,
        'manipulado': 75,
        'enganoso': 63
      },
      humanVerified: true,
      verifiedBy: 'Red de Validación Humana',
      submittedBy: 'usuario_456',
      submittedAt: '2024-01-15T09:15:00Z',
      priority: 'high',
      votesCount: 8,
    },
    {
      id: 'V-YT-20241012-128',
      type: 'video',
      title: 'Video de declaraciones del ministro de economía',
      url: 'https://videosvirales.com/ministro-economia',
      headline: 'Ministro anuncia sorprendentes medidas económicas',
      content: 'declaraciones_ministro_economia.mp4',
      description: 'Video donde el ministro supuestamente anuncia nuevas medidas económicas',
      screenshot: 'https://images.unsplash.com/photo-1588681664899-f142ff2dc9b1?w=800',
      source: { name: 'Videos Virales', url: 'https://videosvirales.com' },
      theme: 'Economía y Política',
      aiAnalysis: {
        veracity: 'Manipulado',
        confidence: 0.88,
        detectedMarkers: ['manipulado', 'no_verificable'],
        issues: ['Calidad de audio inconsistente', 'Movimientos faciales sospechosos', 'No hay registro oficial de esta declaración'],
        summary: 'Video presenta inconsistencias en sincronización labial y calidad de audio. Posible manipulación mediante deepfake. No existe comunicado oficial que respalde estas declaraciones.',
        sources: ['TikTok', 'YouTube', 'WhatsApp', 'Twitter'],
        markersDetected: [
          { type: 'Manipulado', confidence: 0.88 },
          { type: 'No verificable', confidence: 0.62 }
        ]
      },
      consensusMarkers: ['manipulado', 'falso', 'sensacionalista'],
      consensusPercentages: {
        'manipulado': 90,
        'falso': 80,
        'sensacionalista': 70
      },
      humanVerified: true,
      verifiedBy: 'Red de Validación Humana',
      submittedBy: 'usuario_789',
      submittedAt: '2024-01-15T08:45:00Z',
      priority: 'high',
      votesCount: 10,
    },
  ];

  const getTypeIcon = (type: string) => {
    switch (type) {
      case 'text': return FileText;
      case 'image': return Image;
      case 'video': return Video;
      case 'audio': return Volume2;
      default: return FileText;
    }
  };

  const getPriorityBadge = (priority: string) => {
    switch (priority) {
      case 'high':
        return <Badge variant="destructive">Alta Prioridad</Badge>;
      case 'medium':
        return <Badge variant="default">Prioridad Media</Badge>;
      case 'low':
        return <Badge variant="secondary">Baja Prioridad</Badge>;
      default:
        return <Badge variant="outline">Sin Prioridad</Badge>;
    }
  };

  const getMarcador = (marcadorId: string) => {
    return ETIQUETAS_CATEGORIAS.find(c => c.id === marcadorId);
  };

  const getMarcadorBadgeColor = (marcadorId: string) => {
    const marcador = getMarcador(marcadorId);
    if (!marcador) return 'bg-gray-100 text-gray-700 border-gray-300';
    
    const colorMap: { [key: string]: string } = {
      'verdadero': 'bg-green-100 text-green-700 border-green-300',
      'falso': 'bg-red-100 text-red-700 border-red-300',
      'enganoso': 'bg-orange-100 text-orange-700 border-orange-300',
      'satirico': 'bg-blue-100 text-blue-700 border-blue-300',
      'manipulado': 'bg-purple-100 text-purple-700 border-purple-300',
      'sin_contexto': 'bg-amber-100 text-amber-700 border-amber-300',
      'no_verificable': 'bg-gray-100 text-gray-700 border-gray-300',
      'teoria_conspirativa': 'bg-violet-100 text-violet-700 border-violet-300',
      'discurso_odio': 'bg-red-200 text-red-900 border-red-400',
      'sensacionalista': 'bg-orange-100 text-orange-600 border-orange-300',
    };
    return colorMap[marcadorId] || 'bg-gray-100 text-gray-700 border-gray-300';
  };

  const addVaccine = () => {
    if (!newVaccineName.trim() || !newVaccineDescription.trim()) return;

    const newVaccine: Vaccine = {
      id: `vaccine-${Date.now()}`,
      name: newVaccineName,
      description: newVaccineDescription,
      supports: []
    };

    setVaccines([...vaccines, newVaccine]);
    setNewVaccineName('');
    setNewVaccineDescription('');
    setEditingVaccineId(newVaccine.id);
  };

  const removeVaccine = (vaccineId: string) => {
    setVaccines(vaccines.filter(v => v.id !== vaccineId));
    if (editingVaccineId === vaccineId) {
      setEditingVaccineId(null);
    }
  };

  const addSupport = (vaccineId: string) => {
    if (!newSupportTitle.trim() || !newSupportUrl.trim()) return;

    const newSupport: VaccineSupport = {
      id: `support-${Date.now()}`,
      title: newSupportTitle,
      url: newSupportUrl
    };

    setVaccines(vaccines.map(v => 
      v.id === vaccineId 
        ? { ...v, supports: [...v.supports, newSupport] }
        : v
    ));

    setNewSupportTitle('');
    setNewSupportUrl('');
  };

  const removeSupport = (vaccineId: string, supportId: string) => {
    setVaccines(vaccines.map(v => 
      v.id === vaccineId 
        ? { ...v, supports: v.supports.filter(s => s.id !== supportId) }
        : v
    ));
  };

  const saveImmunizationStrategy = () => {
    if (!selectedContent || vaccines.length === 0) return;
    
    console.log('Guardando estrategia de inmunización:', {
      caseId: selectedContent,
      vaccines: vaccines
    });
    
    alert('¡Berraco parcero! Tu estrategia de inmunización está más afilada que un bisturí 💉✨');
  };

  const selectedContentData = verifiedContents.find(c => c.id === selectedContent);

  // Si no hay caso seleccionado, mostrar la lista
  if (!selectedContent) {
    return (
      <div className="space-y-6">
        {/* Franja de Botilito */}
        <div className="bg-[#ffe97a] border-2 border-[#ffda00] rounded-lg p-4 shadow-lg">
          <div className="flex items-center space-x-4">
            <img 
              src={botilitoImage} 
              alt="Botilito" 
              className="w-24 h-24 object-contain mt-[0px] mr-[16px] mb-[-18px] ml-[0px]"
            />
            <div className="flex-1">
              <p className="text-xl">
                ¡Inmunólogos digitales! Aquí están todos los casos diagnosticados listos para pasar a las vacunas 💉🔬
              </p>
              <p className="text-sm mt-1 opacity-80">
                Ya estos casos pasaron por mi análisis y por el de la red humana. Ahora toca armar las vacunas pa' inmunizar a la gente contra esta desinformación. ¡A darle duro! 💪
              </p>
            </div>
          </div>
        </div>

        {/* Lista de casos verificados */}
        <Card>
          <CardHeader>
            <div className="flex items-center justify-between">
              <div>
                <CardTitle className="flex items-center space-x-2 text-[24px]">
                  <Syringe className="h-5 w-5 text-orange-500" />
                  <span>Casos Verificados</span>
                </CardTitle>
                <CardDescription>
                  Casos ya diagnosticados listos pa' estrategias de inmunización
                </CardDescription>
              </div>
              <Badge variant="outline" className="bg-orange-50 text-orange-700 border-orange-200">
                <Hash className="h-3 w-3 mr-1" />
                {verifiedContents.length} casos disponibles
              </Badge>
            </div>

            {/* Search and Filter Controls */}
            <div className="flex space-x-2 mt-4">
              <div className="relative flex-1">
                <Search className="absolute left-3 top-2.5 h-4 w-4 text-muted-foreground" />
                <Input
                  placeholder="Buscar casos por título o contenido..."
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                  className="pl-10 border border-gray-300"
                />
              </div>
              <div className="flex items-center space-x-2">
                <Filter className="h-4 w-4 text-muted-foreground" />
                <select 
                  value={selectedFilter} 
                  onChange={(e) => setSelectedFilter(e.target.value)}
                  className="px-3 py-2 border rounded-md text-sm bg-background"
                >
                  <option value="all">Todos los casos</option>
                  <option value="high">Alta prioridad</option>
                  <option value="medium">Prioridad media</option>
                  <option value="text">Solo texto</option>
                  <option value="image">Solo imágenes</option>
                  <option value="video">Solo videos</option>
                </select>
              </div>
            </div>
          </CardHeader>
          <CardContent className="space-y-4">
            {/* Lista de casos con altura fija y scroll */}
            <div className="space-y-4 max-h-[600px] min-h-[500px] overflow-y-auto custom-scrollbar">
              {(() => {
                // Calcular índices para la paginación
                const indexOfLastCase = currentPage * casesPerPage;
                const indexOfFirstCase = indexOfLastCase - casesPerPage;
                const currentCases = verifiedContents.slice(indexOfFirstCase, indexOfLastCase);
                
                return currentCases.map((content) => {
                  const TypeIcon = getTypeIcon(content.type);
              
              return (
                <div
                  key={content.id}
                  className="p-4 border rounded-lg cursor-pointer transition-all duration-200 bg-gray-50/50 hover:bg-accent hover:shadow-md hover:border-primary/50"
                  onClick={() => setSelectedContent(content.id)}
                >
                  <div className="flex items-start justify-between space-x-3">
                    <div className="flex items-start space-x-3 flex-1">
                      <div className="p-3 bg-muted rounded-lg">
                        <TypeIcon className="h-6 w-6 text-muted-foreground" />
                      </div>
                      <div className="space-y-2 flex-1">
                        <div className="flex items-center justify-between">
                          <div className="flex items-center space-x-2">
                            <Badge variant="outline" className="text-xs bg-white border-primary/30 font-mono">
                              CASO-{content.id.toString().padStart(3, '0')}
                            </Badge>
                            <h4 className="font-medium text-sm">{content.title}</h4>
                          </div>
                          <div className="flex items-center space-x-2">
                            {getPriorityBadge(content.priority)}
                          </div>
                        </div>
                        
                        <div className="space-y-1">
                          {/* Usuario y votación */}
                          <div className="flex items-center space-x-3 text-xs text-muted-foreground">
                            <div className="flex items-center space-x-1">
                              <Users className="h-3 w-3" />
                              <span>{content.verifiedBy}</span>
                            </div>
                            <div className="flex items-center space-x-1">
                              <CheckCircle className="h-3 w-3 text-green-600" />
                              <span>{content.votesCount} verificadores</span>
                            </div>
                          </div>
                          
                          {/* Contenido preview */}
                          <p className="text-xs text-muted-foreground line-clamp-2">
                            {content.type === 'text' ? content.content : content.description || content.content}
                          </p>
                        </div>
                        
                        <div className="space-y-2">
                          {/* Diagnóstico consensuado */}
                          {content.consensusMarkers && content.consensusMarkers.length > 0 && (
                            <div className="space-y-1">
                              <div className="flex items-center space-x-1 text-xs text-muted-foreground">
                                <Users className="h-3 w-3" />
                                <span>Diagnóstico verificado:</span>
                              </div>
                              <div className="grid grid-cols-2 gap-1">
                                {content.consensusMarkers.map((marcadorId, index) => {
                                  const marcador = getMarcador(marcadorId);
                                  if (!marcador) return null;
                                  const consensusPercentage = content.consensusPercentages?.[marcadorId] || 0;
                                  return (
                                    <Badge 
                                      key={index} 
                                      variant="outline" 
                                      className={`text-xs px-2 py-0.5 ${getMarcadorBadgeColor(marcadorId)}`}
                                    >
                                      {marcador.label} {consensusPercentage}%
                                    </Badge>
                                  );
                                })}
                              </div>
                            </div>
                          )}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              );
            });
              })()}
            </div>
            
            {/* Controles de paginación */}
            {verifiedContents.length > casesPerPage && (
              <div className="pt-4 border-t">
                <div className="flex items-center justify-between">
                  <div className="text-sm text-muted-foreground">
                    Mostrando {((currentPage - 1) * casesPerPage) + 1} - {Math.min(currentPage * casesPerPage, verifiedContents.length)} de {verifiedContents.length} casos
                  </div>
                  <div className="flex items-center space-x-2">
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}
                      disabled={currentPage === 1}
                    >
                      Anterior
                    </Button>
                    <div className="flex items-center space-x-1">
                      {Array.from({ length: Math.ceil(verifiedContents.length / casesPerPage) }, (_, i) => i + 1).map((page) => (
                        <Button
                          key={page}
                          variant={currentPage === page ? "default" : "outline"}
                          size="sm"
                          onClick={() => setCurrentPage(page)}
                          className={currentPage === page ? "bg-primary text-primary-foreground" : ""}
                        >
                          {page}
                        </Button>
                      ))}
                    </div>
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={() => setCurrentPage(prev => Math.min(Math.ceil(verifiedContents.length / casesPerPage), prev + 1))}
                      disabled={currentPage === Math.ceil(verifiedContents.length / casesPerPage)}
                    >
                      Siguiente
                    </Button>
                  </div>
                </div>
              </div>
            )}
          </CardContent>
        </Card>
      </div>
    );
  }

  // Si hay un caso seleccionado, mostrar el detalle con formulario de vacunas
  return (
    <div className="space-y-6">
      {/* Franja de Botilito para el detalle del caso */}
      <div className="bg-[#ffe97a] border-2 border-[#ffda00] rounded-lg p-4 shadow-lg">
        <div className="flex items-center space-x-4">
          <img 
            src={botilitoImage} 
            alt="Botilito" 
            className="w-24 h-24 object-contain mt-[0px] mr-[16px] mb-[-18px] ml-[0px]"
          />
          <div className="flex-1">
            <p className="text-xl">
              ¡Dale berraco! Acá está el caso completo pa' que le armes la estrategia de inmunización 💉🔬
            </p>
            <p className="text-sm mt-1 opacity-80">
              Este caso ya pasó por diagnóstico completo. Ahora crea las vacunas necesarias pa' inmunizar a la gente contra esta desinformación. ¡Tú puedes! 💪
            </p>
          </div>
        </div>
      </div>

      {/* Detalle del caso */}
      <Card>
        <CardHeader>
          {/* Botón de volver */}
          <div className="mb-4">
            <Button
              variant="outline"
              size="sm"
              onClick={() => {
                setSelectedContent(null);
                setVaccines([]);
                setEditingVaccineId(null);
              }}
            >
              <ArrowLeft className="h-4 w-4 mr-2" />
              Volver a la lista
            </Button>
          </div>

          {/* Franja unificada con toda la info del caso */}
          <div className="flex items-center justify-between gap-4 bg-gradient-to-r from-primary/10 via-secondary/10 to-primary/10 px-6 py-4 rounded-lg border-2 border-primary/30 mb-4">
            {/* Código del caso */}
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-primary/20 rounded-lg">
                <Shield className="h-5 w-5 text-primary" />
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Código del Caso</p>
                <p className="font-mono font-medium">{selectedContentData?.id}</p>
              </div>
            </div>

            <Separator orientation="vertical" className="h-12" />

            {/* Prioridad */}
            <div>
              <p className="text-xs text-muted-foreground mb-1">Prioridad</p>
              {getPriorityBadge(selectedContentData?.priority || 'high')}
            </div>

            <Separator orientation="vertical" className="h-12" />

            {/* Reportado por */}
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-blue-100 rounded-lg">
                <Users className="h-4 w-4 text-blue-600" />
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Reportado por</p>
                <p className="text-sm font-medium">{selectedContentData?.submittedBy || 'usuario_123'}</p>
              </div>
            </div>

            <Separator orientation="vertical" className="h-12" />

            {/* Fecha de reporte */}
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-emerald-100 rounded-lg">
                <CheckCircle className="h-4 w-4 text-emerald-600" />
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Fecha de reporte</p>
                <p className="text-sm font-medium">
                  {new Date(selectedContentData?.submittedAt || '2024-01-15T10:30:00Z').toLocaleDateString('es-CO', {
                    day: 'numeric',
                    month: 'short',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                  })}
                </p>
              </div>
            </div>
          </div>

          {/* Título de la sección */}
          <CardTitle className="flex items-center space-x-2">
            <Syringe className="h-5 w-5 text-primary" />
            <span>Caso Verificado - Estudio de Inmunización</span>
          </CardTitle>
        </CardHeader>
        <CardContent className="space-y-6">
          {/* Content Details - igual que en HumanVerification */}
          <div>
            <div className="p-4 bg-secondary/30 border-2 border-secondary/60 rounded-lg space-y-3">
              {/* Captura de la noticia con etiquetas superpuestas */}
              {selectedContentData?.screenshot && (
                <div>
                  <Label>Captura de la noticia:</Label>
                  <div className="mt-2 rounded-lg overflow-hidden border-2 border-secondary/40 relative max-h-48">
                    <img 
                      src={selectedContentData.screenshot} 
                      alt="Captura de la noticia" 
                      className="w-full h-48 object-cover object-top"
                    />
                    
                    {/* Overlay con etiquetas detectadas */}
                    <div className="absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent flex flex-col items-center justify-end p-4 space-y-2">
                      <div className="flex flex-wrap gap-2 justify-center">
                        {selectedContentData.consensusMarkers?.slice(0, 3).map((marcadorId, index) => {
                          const marcador = getMarcador(marcadorId);
                          if (!marcador) return null;
                          
                          const getMarkerColor = (id: string) => {
                            const colorMap: { [key: string]: string } = {
                              'verdadero': 'bg-emerald-500 hover:bg-emerald-600',
                              'falso': 'bg-red-500 hover:bg-red-600',
                              'enganoso': 'bg-orange-500 hover:bg-orange-600',
                              'satirico': 'bg-blue-500 hover:bg-blue-600',
                              'manipulado': 'bg-purple-500 hover:bg-purple-600',
                              'sin_contexto': 'bg-amber-500 hover:bg-amber-600',
                              'no_verificable': 'bg-gray-500 hover:bg-gray-600',
                              'teoria_conspirativa': 'bg-violet-600 hover:bg-violet-700',
                              'discurso_odio': 'bg-red-700 hover:bg-red-800',
                              'sensacionalista': 'bg-orange-400 hover:bg-orange-500',
                            };
                            return colorMap[id] || 'bg-gray-500 hover:bg-gray-600';
                          };

                          const Icon = marcador.icon;
                          const consensusPercentage = selectedContentData.consensusPercentages?.[marcadorId] || 0;
                          
                          return (
                            <Badge 
                              key={index}
                              className={`${getMarkerColor(marcadorId)} text-white shadow-lg ${
                                index === 0 
                                  ? 'px-4 py-2 text-base scale-105' 
                                  : 'px-3 py-1.5 text-sm'
                              }`}
                            >
                              <Icon className={index === 0 ? "h-6 w-6" : "h-5 w-5"} />
                              <span className="ml-1.5">{marcador.label}</span>
                              <span className={`ml-1.5 opacity-90 ${index === 0 ? 'text-sm' : 'text-xs'}`}>
                                {consensusPercentage}%
                              </span>
                            </Badge>
                          );
                        })}
                      </div>
                    </div>
                  </div>
                </div>
              )}
              
              {/* Fuente y tema */}
              {(selectedContentData?.source || selectedContentData?.theme) && (
                <div className="flex flex-wrap items-center gap-4 pb-2">
                  {/* Fuente de la noticia */}
                  {selectedContentData.source && (
                    <div className="flex items-center space-x-2">
                      <Newspaper className="h-4 w-4 text-primary" />
                      <Label className="text-sm">Fuente:</Label>
                      <a 
                        href={selectedContentData.source.url} 
                        target="_blank" 
                        rel="noopener noreferrer"
                        className="inline-flex items-center space-x-1.5 px-3 py-1.5 bg-secondary/60 hover:bg-secondary text-secondary-foreground rounded-md transition-colors text-xs no-hover-effect"
                      >
                        <span>{selectedContentData.source.name}</span>
                        <ExternalLink className="h-3 w-3" />
                      </a>
                    </div>
                  )}
                  
                  {/* Tema del contenido */}
                  {selectedContentData.theme && (
                    <div className="flex items-center space-x-2">
                      <Tag className="h-4 w-4 text-primary" />
                      <Label className="text-sm">Tema:</Label>
                      <Badge variant="outline" className="text-xs border-primary/40 bg-primary/10">
                        {selectedContentData.theme}
                      </Badge>
                    </div>
                  )}
                </div>
              )}
              
              {/* Titular de la noticia */}
              {selectedContentData?.headline && (
                <div>
                  <Label>Titular de la noticia:</Label>
                  <div className="mt-1 p-3 bg-primary/20 border border-primary/40 rounded-lg">
                    <p className="font-medium">{selectedContentData.headline}</p>
                  </div>
                </div>
              )}
              
              {/* Contenido analizado */}
              <div>
                <Label>Contenido analizado:</Label>
                <p className="text-sm text-muted-foreground mt-1 leading-relaxed">
                  {selectedContentData?.type === 'text' ? 
                    selectedContentData.content : 
                    selectedContentData?.description || selectedContentData?.content
                  }
                </p>
              </div>
            </div>

            {/* Evaluación epidemiológica */}
            {selectedContentData?.aiAnalysis.summary && (
              <div className="mt-6">
                <h4>Evaluación epidemiológica:</h4>
                <p className="text-sm text-muted-foreground mt-1">{selectedContentData.aiAnalysis.summary}</p>
              </div>
            )}
          </div>

          <Separator />

          {/* Estrategia de Inmunización */}
          <div>
            <Label className="mb-3 flex items-center space-x-2">
              <Syringe className="h-4 w-4 text-orange-500" />
              <span>Estrategia de Inmunización</span>
            </Label>
            <p className="text-xs text-muted-foreground mb-4">
              Crea las vacunas necesarias pa' inmunizar contra este caso. Cada vacuna debe tener un nombre, descripción y soportes (evidencias, recursos educativos, referencias).
            </p>

            {/* Agregar Nueva Vacuna */}
            <div className="p-4 bg-blue-50 border-2 border-blue-200 rounded-lg space-y-3 mb-4">
              <h4 className="flex items-center space-x-2">
                <Plus className="h-4 w-4 text-blue-600" />
                <span>Agregar Nueva Vacuna</span>
              </h4>
              
              <div className="space-y-2">
                <Label htmlFor="vaccine-name">Nombre de la Vacuna</Label>
                <Input
                  id="vaccine-name"
                  placeholder="Ej: Alfabetización mediática sobre salud"
                  value={newVaccineName}
                  onChange={(e) => setNewVaccineName(e.target.value)}
                  className="bg-white"
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="vaccine-description">Descripción</Label>
                <Textarea
                  id="vaccine-description"
                  placeholder="Describe cómo esta vacuna inmuniza contra el caso seleccionado..."
                  value={newVaccineDescription}
                  onChange={(e) => setNewVaccineDescription(e.target.value)}
                  rows={4}
                  className="bg-white resize-none"
                />
              </div>

              <Button
                onClick={addVaccine}
                disabled={!newVaccineName.trim() || !newVaccineDescription.trim()}
                className="w-full flex items-center justify-center space-x-2"
              >
                <Plus className="h-4 w-4" />
                <span>Agregar Vacuna</span>
              </Button>
            </div>

            {/* Lista de Vacunas */}
            {vaccines.length > 0 && (
              <div className="space-y-4">
                <h4 className="flex items-center space-x-2">
                  <Syringe className="h-4 w-4 text-green-600" />
                  <span>Vacunas Propuestas ({vaccines.length})</span>
                </h4>

                {vaccines.map((vaccine, index) => (
                  <motion.div
                    key={vaccine.id}
                    initial={{ opacity: 0, y: 20 }}
                    animate={{ opacity: 1, y: 0 }}
                    className="p-4 bg-white border-2 border-green-200 rounded-lg space-y-3"
                  >
                    <div className="flex items-start justify-between">
                      <div className="flex-1">
                        <div className="flex items-center space-x-2 mb-1">
                          <Badge className="bg-green-500 text-white">
                            Vacuna #{index + 1}
                          </Badge>
                          <h4>{vaccine.name}</h4>
                        </div>
                        <p className="text-sm text-muted-foreground">{vaccine.description}</p>
                      </div>
                      <Button
                        variant="ghost"
                        size="icon"
                        onClick={() => removeVaccine(vaccine.id)}
                        className="flex-shrink-0"
                      >
                        <Trash2 className="h-4 w-4 text-red-500" />
                      </Button>
                    </div>

                    <Separator />

                    {/* Soportes de la Vacuna */}
                    <div className="space-y-2">
                      <Label className="text-xs">Soportes (evidencias, recursos, referencias)</Label>
                      
                      {/* Lista de Soportes */}
                      {vaccine.supports.length > 0 && (
                        <div className="space-y-2 mb-2">
                          {vaccine.supports.map((support) => (
                            <div
                              key={support.id}
                              className="flex items-center justify-between p-2 bg-gray-50 border border-gray-200 rounded"
                            >
                              <div className="flex items-center space-x-2 flex-1 min-w-0">
                                <Link2 className="h-3 w-3 text-blue-600 flex-shrink-0" />
                                <div className="min-w-0 flex-1">
                                  <p className="text-xs truncate">{support.title}</p>
                                  <a
                                    href={support.url}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    className="text-xs text-blue-600 hover:underline truncate block"
                                  >
                                    {support.url}
                                  </a>
                                </div>
                              </div>
                              <Button
                                variant="ghost"
                                size="icon"
                                onClick={() => removeSupport(vaccine.id, support.id)}
                                className="h-6 w-6 flex-shrink-0"
                              >
                                <Trash2 className="h-3 w-3 text-red-500" />
                              </Button>
                            </div>
                          ))}
                        </div>
                      )}

                      {/* Agregar Soporte */}
                      {editingVaccineId === vaccine.id && (
                        <div className="grid grid-cols-12 gap-2">
                          <div className="col-span-5">
                            <Input
                              placeholder="Título del soporte"
                              value={newSupportTitle}
                              onChange={(e) => setNewSupportTitle(e.target.value)}
                              className="bg-white text-xs h-8"
                            />
                          </div>
                          <div className="col-span-6">
                            <Input
                              placeholder="URL del soporte"
                              value={newSupportUrl}
                              onChange={(e) => setNewSupportUrl(e.target.value)}
                              className="bg-white text-xs h-8"
                            />
                          </div>
                          <div className="col-span-1">
                            <Button
                              onClick={() => addSupport(vaccine.id)}
                              disabled={!newSupportTitle.trim() || !newSupportUrl.trim()}
                              className="w-full h-8 p-0"
                            >
                              <Plus className="h-3 w-3" />
                            </Button>
                          </div>
                        </div>
                      )}

                      {editingVaccineId !== vaccine.id && (
                        <Button
                          variant="outline"
                          size="sm"
                          onClick={() => setEditingVaccineId(vaccine.id)}
                          className="w-full text-xs h-8"
                        >
                          <Plus className="h-3 w-3 mr-1" />
                          Agregar Soporte
                        </Button>
                      )}
                    </div>
                  </motion.div>
                ))}
              </div>
            )}

            {/* Botón de Guardar Estrategia */}
            {vaccines.length > 0 && (
              <div className="pt-4 border-t">
                <Button
                  onClick={saveImmunizationStrategy}
                  className="w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-orange-500 to-red-500"
                >
                  <Save className="h-4 w-4" />
                  <span>Guardar Estrategia de Inmunización</span>
                </Button>
              </div>
            )}
          </div>
        </CardContent>
      </Card>
    </div>
  );
} - - - - - - - - - - - - 
src/components/Register.tsx

import React, { useState } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Input } from './ui/input';
import { Label } from './ui/label';
import { Checkbox } from './ui/checkbox';
import { Eye, EyeOff, Phone, MapPin, Calendar, Loader2 } from 'lucide-react';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';
import registerImage from 'figma:asset/60be6d6fe2b2bb2089603fb76c90d0926c3104a3.png';
import botilitoImage from 'figma:asset/ce81bb4aba8c9f36807cd145a086a12ce7f876dc.png';
import { signUp } from '../utils/supabase/auth';

interface RegisterProps {
  onRegister: () => void;
  onBackToLogin: () => void;
}

export function Register({ onRegister, onBackToLogin }: RegisterProps) {
  const [showPassword, setShowPassword] = useState(false);
  const [showConfirmPassword, setShowConfirmPassword] = useState(false);
  const [acceptTerms, setAcceptTerms] = useState(false);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [credentials, setCredentials] = useState({
    fullName: '',
    email: '',
    password: '',
    confirmPassword: '',
    phone: '',
    department: '',
    city: '',
    birthDate: ''
  });

  // Departamentos de Colombia
  const departments = [
    'Amazonas', 'Antioquia', 'Arauca', 'Atlántico', 'Bolívar', 'Boyacá', 'Caldas',
    'Caquetá', 'Casanare', 'Cauca', 'Cesar', 'Chocó', 'Córdoba', 'Cundinamarca',
    'Guainía', 'Guaviare', 'Huila', 'La Guajira', 'Magdalena', 'Meta', 'Nariño',
    'Norte de Santander', 'Putumayo', 'Quindío', 'Risaralda', 'San Andrés y Providencia',
    'Santander', 'Sucre', 'Tolima', 'Valle del Cauca', 'Vaupés', 'Vichada'
  ];

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setError(null);

    // Validaciones básicas
    if (credentials.password !== credentials.confirmPassword) {
      setError('Las contraseñas no coinciden');
      return;
    }

    if (!acceptTerms) {
      setError('Debes aceptar los términos y condiciones');
      return;
    }

    if (credentials.password.length < 6) {
      setError('La contraseña debe tener al menos 6 caracteres');
      return;
    }

    setIsLoading(true);

    try {
      await signUp({
        email: credentials.email,
        password: credentials.password,
        name: credentials.fullName,
        phone: credentials.phone,
        location: `${credentials.city}, ${credentials.department}`,
        birthDate: credentials.birthDate
      });
      onRegister();
    } catch (err: any) {
      console.error('Registration error:', err);
      setError(err.message || 'Error al crear la cuenta. Por favor, intenta de nuevo.');
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="min-h-screen bg-primary">
      <div className="w-full h-screen">
        {/* Contenedor principal con la imagen de referencia como fondo */}
        <div className="relative bg-white h-full overflow-hidden">
          {/* Imagen de fondo de referencia */}
          <div className="absolute inset-0 opacity-10">
            <img 
              src={registerImage} 
              alt="Botilito Register Reference" 
              className="w-full h-full object-cover"
            />
          </div>
          
          <div className="relative z-10 grid lg:grid-cols-2 gap-0 h-full">
            {/* Lado izquierdo - Presentación de Botilito */}
            <div className="bg-gradient-to-br from-primary to-secondary p-8 lg:p-12 flex flex-col justify-center items-center text-center">
              {/* Burbuja de diálogo */}
              <div className="bg-white rounded-2xl p-6 mb-8 relative shadow-lg max-w-md">
                <h1 className="text-3xl font-bold text-black mb-4">
                  ¡Únete a la lucha!
                </h1>
                <p className="text-gray-700 leading-relaxed">
                  Ayúdame a combatir la desinformación y crear un internet más seguro para todos.
                </p>
                {/* Flecha de la burbuja */}
                <div className="absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full">
                  <div className="w-0 h-0 border-l-[15px] border-r-[15px] border-t-[20px] border-l-transparent border-r-transparent border-t-white"></div>
                </div>
              </div>

              {/* Botilito Character - Imagen oficial */}
              <div className="relative">
                <img 
                  src={botilitoImage} 
                  alt="Botilito - El ex-agente digital convertido en luchador contra la desinformación" 
                  className="w-80 h-auto drop-shadow-2xl"
                />
              </div>
            </div>

            {/* Lado derecho - Formulario de registro */}
            <div className="bg-white p-8 lg:p-12 flex flex-col justify-center">
              <div className="max-w-md mx-auto w-full">
                {/* Header del formulario */}
                <div className="text-center mb-8">
                  <div className="inline-block bg-primary text-black px-6 py-3 rounded-2xl text-xl font-bold mb-6">
                    ¡A camellar contra las noticias falsas!
                  </div>
                </div>

                {/* Formulario */}
                <form onSubmit={handleSubmit} className="space-y-6">
                  {/* Error message */}
                  {error && (
                    <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg">
                      {error}
                    </div>
                  )}

                  {/* Campo de nombre completo */}
                  <div className="space-y-2">
                    <Label htmlFor="fullName" className="text-gray-700">
                      Nombre y apellido
                    </Label>
                    <Input
                      id="fullName"
                      type="text"
                      value={credentials.fullName}
                      onChange={(e) => setCredentials(prev => ({ ...prev, fullName: e.target.value }))}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                      placeholder="Tu nombre completo"
                      required
                    />
                  </div>

                  {/* Campo de email */}
                  <div className="space-y-2">
                    <Label htmlFor="email" className="text-gray-700">
                      Correo electrónico
                    </Label>
                    <Input
                      id="email"
                      type="email"
                      value={credentials.email}
                      onChange={(e) => setCredentials(prev => ({ ...prev, email: e.target.value }))}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                      placeholder="tu@ejemplo.com"
                      required
                    />
                  </div>

                  {/* Campo de teléfono */}
                  <div className="space-y-2">
                    <Label htmlFor="phone" className="text-gray-700 flex items-center space-x-2">
                      <Phone className="h-4 w-4" />
                      <span>Número de teléfono</span>
                    </Label>
                    <Input
                      id="phone"
                      type="tel"
                      value={credentials.phone}
                      onChange={(e) => setCredentials(prev => ({ ...prev, phone: e.target.value }))}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                      placeholder="3001234567"
                      required
                    />
                  </div>

                  {/* Ubicación: Departamento y Ciudad */}
                  <div className="grid grid-cols-2 gap-4">
                    <div className="space-y-2">
                      <Label htmlFor="department" className="text-gray-700 flex items-center space-x-2">
                        <MapPin className="h-4 w-4" />
                        <span>Departamento</span>
                      </Label>
                      <Select
                        value={credentials.department}
                        onValueChange={(value) => setCredentials(prev => ({ ...prev, department: value }))}
                        required
                      >
                        <SelectTrigger className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors">
                          <SelectValue placeholder="Selecciona" />
                        </SelectTrigger>
                        <SelectContent className="max-h-60">
                          {departments.map((dept) => (
                            <SelectItem key={dept} value={dept}>
                              {dept}
                            </SelectItem>
                          ))}
                        </SelectContent>
                      </Select>
                    </div>

                    <div className="space-y-2">
                      <Label htmlFor="city" className="text-gray-700">
                        Ciudad/Municipio
                      </Label>
                      <Input
                        id="city"
                        type="text"
                        value={credentials.city}
                        onChange={(e) => setCredentials(prev => ({ ...prev, city: e.target.value }))}
                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                        placeholder="Tu ciudad"
                        required
                      />
                    </div>
                  </div>

                  {/* Fecha de nacimiento */}
                  <div className="space-y-2">
                    <Label htmlFor="birthDate" className="text-gray-700 flex items-center space-x-2">
                      <Calendar className="h-4 w-4" />
                      <span>Fecha de nacimiento</span>
                    </Label>
                    <Input
                      id="birthDate"
                      type="date"
                      value={credentials.birthDate}
                      onChange={(e) => setCredentials(prev => ({ ...prev, birthDate: e.target.value }))}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                      required
                    />
                  </div>

                  {/* Campos de contraseña en fila */}
                  <div className="grid grid-cols-2 gap-4">
                    {/* Campo de contraseña */}
                    <div className="space-y-2">
                      <Label htmlFor="password" className="text-gray-700">
                        Contraseña
                      </Label>
                      <div className="relative">
                        <Input
                          id="password"
                          type={showPassword ? 'text' : 'password'}
                          value={credentials.password}
                          onChange={(e) => setCredentials(prev => ({ ...prev, password: e.target.value }))}
                          className="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                          placeholder="••••••••"
                          required
                        />
                        <button
                          type="button"
                          onClick={() => setShowPassword(!showPassword)}
                          className="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors"
                        >
                          {showPassword ? (
                            <EyeOff className="h-5 w-5" />
                          ) : (
                            <Eye className="h-5 w-5" />
                          )}
                        </button>
                      </div>
                    </div>

                    {/* Campo de confirmar contraseña */}
                    <div className="space-y-2">
                      <Label htmlFor="confirmPassword" className="text-gray-700">
                        Confirmar contraseña
                      </Label>
                      <div className="relative">
                        <Input
                          id="confirmPassword"
                          type={showConfirmPassword ? 'text' : 'password'}
                          value={credentials.confirmPassword}
                          onChange={(e) => setCredentials(prev => ({ ...prev, confirmPassword: e.target.value }))}
                          className="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                          placeholder="••••••••"
                          required
                        />
                        <button
                          type="button"
                          onClick={() => setShowConfirmPassword(!showConfirmPassword)}
                          className="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors"
                        >
                          {showConfirmPassword ? (
                            <EyeOff className="h-5 w-5" />
                          ) : (
                            <Eye className="h-5 w-5" />
                          )}
                        </button>
                      </div>
                    </div>
                  </div>

                  {/* Checkbox de términos y condiciones */}
                  <div className="flex items-start gap-3">
                    <Checkbox
                      id="terms"
                      checked={acceptTerms}
                      onCheckedChange={(checked) => setAcceptTerms(!!checked)}
                      className="mt-1"
                    />
                    <Label htmlFor="terms" className="text-sm text-gray-600 leading-relaxed cursor-pointer">
                      <div>Al crear una cuenta confirmas que has leído y aceptas nuestros:</div>
                      <div className="mt-1">
                        <button type="button" className="text-[rgba(0,0,0,1)] hover:text-secondary font-medium underline">
                          Términos y Condiciones
                        </button>
                      </div>
                      <div className="mt-1">
                        <button type="button" className="text-[rgba(0,0,0,1)] hover:text-secondary font-medium underline">
                          Política de Privacidad
                        </button>
                      </div>
                    </Label>
                  </div>

                  {/* Botón de registrarse */}
                  <Button
                    type="submit"
                    className="w-full bg-black hover:bg-gray-800 text-white py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                    disabled={!acceptTerms || isLoading}
                  >
                    {isLoading ? (
                      <>
                        <Loader2 className="mr-2 h-5 w-5 animate-spin inline" />
                        Creando cuenta...
                      </>
                    ) : (
                      '¡Vamos pa\'dentro!'
                    )}
                  </Button>

                  {/* Enlace de login */}
                  <div className="text-center">
                    <span className="text-gray-600">¿Ya eres miembro? </span>
                    <button
                      type="button"
                      onClick={onBackToLogin}
                      className="text-primary hover:text-secondary font-medium transition-colors font-bold"
                    >
                      Inicia sesión
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
} - - - - - - - - - - - - 
src/components/HumanVerification.tsx

import React, { useState, useEffect } from 'react';
import botilitoImage from 'figma:asset/e27a276e6ff0e187a67cf54678c265c1c38adbf7.png';
import { useVerificationData } from '../utils/humanVerification/useVerificationData';
import { CONSENSUS_STATES, PRIORITY_LEVELS, DIAGNOSTIC_LABELS } from '../utils/humanVerification/types';
import { submitHumanVerification } from '../utils/humanVerification/api';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Badge } from './ui/badge';
import { Textarea } from './ui/textarea';
import { Input } from './ui/input';
import { Label } from './ui/label';
import { Checkbox } from './ui/checkbox';
import { RadioGroup, RadioGroupItem } from './ui/radio-group';
import { Progress } from './ui/progress';
import { motion, AnimatePresence } from 'motion/react';
import { Separator } from './ui/separator';
import { 
  Users, CheckCircle, XCircle, AlertTriangle, Bot, 
  FileText, Image, Video, Volume2, ThumbsUp, ThumbsDown, 
  MessageSquare, Award, Clock, Send, Smile, Heart, Shield,
  Target, Flame, Vote, DollarSign, Zap, Eye, Ban, Skull,
  Microscope, AlertCircle, HelpCircle,
  Megaphone, Calendar, 
  Filter, Search, Layers, Hash,
  User, Gauge, Timer, Link, ExternalLink, ArrowLeft, Link2,
  Newspaper, Tag, Trophy, Star, Sparkles, TrendingUp
} from 'lucide-react';
import { Alert, AlertDescription } from './ui/alert';
import { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from './ui/dialog';

// Definición de las 19 categorías de marcadores de diagnóstico con enfoque epidemiológico
const ETIQUETAS_CATEGORIAS = [
  { id: 'verdadero', label: 'Verdadero', icon: CheckCircle, color: 'text-green-600', bg: 'bg-green-50', border: 'border-green-200', virulencia: 0, descripcion: 'Información verificada y respaldada por fuentes confiables' },
  { id: 'falso', label: 'Falso', icon: XCircle, color: 'text-red-600', bg: 'bg-red-50', border: 'border-red-200', virulencia: 90, descripcion: 'Información completamente falsa sin sustento verificable' },
  { id: 'enganoso', label: 'Engañoso', icon: AlertTriangle, color: 'text-orange-600', bg: 'bg-orange-50', border: 'border-orange-200', virulencia: 75, descripcion: 'Mezcla hechos reales con interpretaciones falsas o exageradas' },
  { id: 'satirico', label: 'Satírico/Humorístico', icon: Smile, color: 'text-blue-600', bg: 'bg-blue-50', border: 'border-blue-200', virulencia: 20, descripcion: 'Contenido humorístico o satírico que puede confundirse con noticias reales' },
  { id: 'manipulado', label: 'Manipulado', icon: Image, color: 'text-purple-600', bg: 'bg-purple-50', border: 'border-purple-200', virulencia: 85, descripcion: 'Contenido editado o alterado para cambiar su significado original' },
  { id: 'sin_contexto', label: 'Sin contexto', icon: AlertCircle, color: 'text-amber-600', bg: 'bg-amber-50', border: 'border-amber-200', virulencia: 60, descripcion: 'Contenido real usado fuera de su contexto temporal o situacional' },
  { id: 'no_verificable', label: 'No verificable', icon: HelpCircle, color: 'text-gray-600', bg: 'bg-gray-50', border: 'border-gray-200', virulencia: 35, descripcion: 'Información que no puede confirmarse con fuentes disponibles' },
  { id: 'teoria_conspirativa', label: 'Teoría conspirativa', icon: Eye, color: 'text-violet-600', bg: 'bg-violet-50', border: 'border-violet-200', virulencia: 80, descripcion: 'Narrativas que sugieren conspiraciones sin evidencia sólida' },
  { id: 'discurso_odio_racismo', label: 'Racismo/Xenofobia', icon: Skull, color: 'text-red-800', bg: 'bg-red-100', border: 'border-red-300', virulencia: 95, descripcion: 'Contenido que promueve odio contra grupos raciales o étnicos' },
  { id: 'discurso_odio_sexismo', label: 'Sexismo/LGBTQ+fobia', icon: Ban, color: 'text-red-700', bg: 'bg-red-100', border: 'border-red-300', virulencia: 95, descripcion: 'Contenido discriminatorio por género u orientación sexual' },
  { id: 'discurso_odio_clasismo', label: 'Clasismo/Aporofobia', icon: DollarSign, color: 'text-red-700', bg: 'bg-red-100', border: 'border-red-300', virulencia: 90, descripcion: 'Discriminación basada en clase social o condición económica' },
  { id: 'discurso_odio_ableismo', label: 'Ableismo', icon: Shield, color: 'text-red-700', bg: 'bg-red-100', border: 'border-red-300', virulencia: 90, descripcion: 'Discriminación contra personas con discapacidades' },
  { id: 'incitacion_violencia', label: 'Incitación a la violencia', icon: Flame, color: 'text-red-900', bg: 'bg-red-100', border: 'border-red-400', virulencia: 98, descripcion: 'Contenido que promueve o incita actos violentos' },
  { id: 'acoso_ciberbullying', label: 'Acoso/Ciberbullying', icon: Target, color: 'text-orange-700', bg: 'bg-orange-100', border: 'border-orange-300', virulencia: 85, descripcion: 'Ataques sistemáticos contra individuos específicos en línea' },
  { id: 'contenido_prejuicioso', label: 'Contenido prejuicioso', icon: AlertTriangle, color: 'text-yellow-700', bg: 'bg-yellow-50', border: 'border-yellow-200', virulencia: 70, descripcion: 'Presenta sesgos evidentes sin considerar otras perspectivas' },
  { id: 'bot_coordinado', label: 'Bot/Coordinado', icon: Bot, color: 'text-indigo-600', bg: 'bg-indigo-50', border: 'border-indigo-200', virulencia: 65, descripcion: 'Contenido generado o amplificado por cuentas automatizadas' },
  { id: 'suplantacion_identidad', label: 'Suplantación de identidad', icon: User, color: 'text-purple-700', bg: 'bg-purple-100', border: 'border-purple-300', virulencia: 88, descripcion: 'Se hace pasar por otra persona, organización o medio legítimo' },
  { id: 'sensacionalista', label: 'Sensacionalista', icon: Megaphone, color: 'text-orange-500', bg: 'bg-orange-50', border: 'border-orange-200', virulencia: 55, descripcion: 'Exagera o dramatiza para generar clics o emociones fuertes' },
  { id: 'en_revision', label: 'En revisión', icon: Clock, color: 'text-gray-500', bg: 'bg-gray-50', border: 'border-gray-200', virulencia: 40, descripcion: 'Contenido pendiente de verificación adicional' }
];

export function HumanVerification() {
  const [selectedContent, setSelectedContent] = useState<string | null>(null);
  const [verificationNotes, setVerificationNotes] = useState('');
  const [verificationResult, setVerificationResult] = useState<string>('');
  const [marcadoresDiagnostico, setMarcadoresDiagnostico] = useState<string[]>([]);
  const [marcadoresJustificaciones, setMarcadoresJustificaciones] = useState<{ [key: string]: string }>({});
  const [marcadoresEnlaces, setMarcadoresEnlaces] = useState<{ [key: string]: string }>({});
  const [selectedFilter, setSelectedFilter] = useState('all');
  const [searchTerm, setSearchTerm] = useState('');
  const [currentPage, setCurrentPage] = useState(1);
  const casesPerPage = 10;
  const [showSuccessDialog, setShowSuccessDialog] = useState(false);
  const [gamificationData, setGamificationData] = useState({
    pointsEarned: 0,
    currentLevel: '',
    currentLevelBadge: '',
    currentLevelSubtitle: '',
    totalDiagnoses: 0,
    streak: 0,
    newBadge: null as string | null,
    newBadgeIcon: null as string | null,
    newBadgeDescription: null as string | null,
    currentXP: 0,
    nextLevelXP: 0,
    progressToNext: 0
  });

  // Use the verification data hook
  const { loading, error, summaryData, cases, userStats, refresh } = useVerificationData();

  // Use API data if available, otherwise fall back to mock data
  const pendingContents = cases.length > 0 ? cases : [
    {
      id: 'T-WB-20241014-001',
      type: 'text',
      title: 'Artículo sobre tratamiento alternativo para diabetes',
      content: 'Un nuevo estudio revela que beber agua con limón en ayunas puede curar la diabetes tipo 2 en solo 30 días. Médicos de Harvard confirman la efectividad del tratamiento...',
      headline: 'Descubren cura milagrosa para diabetes: solo agua con limón en ayunas',
      url: 'https://noticiasfalsas.com/cura-diabetes-limon',
      screenshot: 'https://images.unsplash.com/photo-1504711434969-e33886168f5c?w=800',
      source: { name: 'Noticias Falsas', url: 'https://noticiasfalsas.com' },
      theme: 'Salud y Medicina',
      aiAnalysis: {
        veracity: 'Posible Desinformación',
        confidence: 0.89,
        detectedMarkers: ['enganoso', 'sensacionalista', 'no_verificable'],
        issues: ['No se encontraron estudios de Harvard sobre este tema', 'Afirmaciones médicas sin respaldo científico', 'Promete "cura" para enfermedad crónica'],
        summary: 'El contenido presenta patrones epidemiológicos consistentes con desinformación médica. Alto riesgo de propagación exponencial debido a apelación emocional y falsa autoridad científica.',
        sources: ['WhatsApp', 'Facebook', 'Twitter'],
        markersDetected: [
          { type: 'Engañoso', confidence: 0.89 },
          { type: 'Sensacionalista', confidence: 0.85 },
          { type: 'No verificable', confidence: 0.78 }
        ]
      },
      consensusMarkers: [],
      submittedBy: 'usuario_123',
      submittedAt: '2024-01-15T10:30:00Z',
      priority: 'high',
      votesCount: 0,
    },
    {
      id: 'I-FB-20241014-002',
      type: 'image',
      title: 'Foto de manifestación en plaza principal',
      url: 'https://redessociales.com/manifestacion-falsa',
      headline: 'Miles protestan contra el gobierno en la plaza central',
      content: 'manifestacion_plaza_central.jpg',
      description: 'Imagen que muestra una gran manifestación en la plaza central con miles de personas',
      screenshot: 'https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?w=800',
      source: { name: 'Redes Sociales', url: 'https://redessociales.com' },
      theme: 'Política y Sociedad',
      aiAnalysis: {
        veracity: 'Fuera de Contexto',
        confidence: 0.76,
        detectedMarkers: ['sin_contexto', 'manipulado'],
        issues: ['La imagen parece ser de otro evento', 'La fecha no coincide con eventos recientes', 'Metadatos sugieren manipulación'],
        summary: 'La imagen corresponde a un evento diferente realizado en 2019. Uso fuera de contexto para generar percepción de crisis actual.',
        sources: ['Facebook', 'Instagram', 'Telegram'],
        markersDetected: [
          { type: 'Sin contexto', confidence: 0.76 },
          { type: 'Manipulado', confidence: 0.68 },
          { type: 'Engañoso', confidence: 0.72 }
        ]
      },
      consensusMarkers: ['sin_contexto', 'enganoso'],
      submittedBy: 'usuario_456',
      submittedAt: '2024-01-15T09:15:00Z',
      priority: 'medium',
      votesCount: 2,
    },
    {
      id: 'V-TK-20241014-003',
      type: 'video',
      title: 'Video de declaraciones del ministro de economía',
      url: 'https://videosvirales.com/ministro-economia',
      headline: 'Ministro anuncia sorprendentes medidas económicas',
      content: 'declaraciones_ministro_economia.mp4',
      description: 'Video donde el ministro supuestamente anuncia nuevas medidas económicas',
      screenshot: 'https://images.unsplash.com/photo-1588681664899-f142ff2dc9b1?w=800',
      source: { name: 'Videos Virales', url: 'https://videosvirales.com' },
      theme: 'Economía y Política',
      aiAnalysis: {
        veracity: 'Requiere Verificación',
        confidence: 0.62,
        detectedMarkers: ['manipulado', 'no_verificable'],
        issues: ['Calidad de audio inconsistente', 'Movimientos faciales sospechosos', 'No hay registro oficial de esta declaración'],
        summary: 'Video presenta inconsistencias en sincronización labial y calidad de audio. Posible manipulación mediante deepfake. No existe comunicado oficial que respalde estas declaraciones.',
        sources: ['TikTok', 'YouTube', 'WhatsApp', 'Twitter'],
        markersDetected: [
          { type: 'Manipulado', confidence: 0.82 },
          { type: 'No verificable', confidence: 0.62 },
          { type: 'Sensacionalista', confidence: 0.71 }
        ]
      },
      consensusMarkers: ['manipulado'],
      submittedBy: 'usuario_789',
      submittedAt: '2024-01-15T08:45:00Z',
      priority: 'high',
      votesCount: 1,
    },
    {
      id: '4',
      type: 'text',
      title: 'Supuesto mensaje del alcalde sobre toque de queda',
      url: null,
      headline: 'URGENTE: Toque de queda total desde mañana',
      content: 'El alcalde anuncia toque de queda total desde mañana por tres semanas. Compartir urgente con todos sus contactos. La policía patrullará las calles y multará a quien salga.',
      aiAnalysis: {
        veracity: 'Falso',
        confidence: 0.94,
        detectedMarkers: ['falso', 'sensacionalista'],
        issues: ['No hay comunicado oficial de la alcaldía', 'Lenguaje alarmista típico de cadenas falsas', 'No coincide con protocolos municipales']
      },
      consensusMarkers: ['falso', 'sensacionalista', 'suplantacion_identidad'],
      submittedBy: 'usuario_234',
      submittedAt: '2024-01-15T08:20:00Z',
      priority: 'high',
      votesCount: 5,
    },
    {
      id: '5',
      type: 'image',
      title: 'Captura de pantalla de chat WhatsApp',
      url: null,
      headline: null,
      content: 'chat_supuesta_amenaza.jpg',
      description: 'Conversación donde supuestamente se planea un ataque en zona comercial',
      aiAnalysis: {
        veracity: 'Posible Desinformación',
        confidence: 0.81,
        detectedMarkers: ['no_verificable', 'sensacionalista'],
        issues: ['No es posible verificar autenticidad del chat', 'Contenido alarmista', 'No hay reportes oficiales relacionados']
      },
      consensusMarkers: ['no_verificable', 'enganoso', 'sensacionalista'],
      submittedBy: 'usuario_567',
      submittedAt: '2024-01-15T07:55:00Z',
      priority: 'high',
      votesCount: 3,
    },
    {
      id: '6',
      type: 'video',
      title: 'Influencer promocionando inversión cripto "garantizada"',
      url: null,
      headline: null,
      content: 'video_cripto_inversion.mp4',
      description: 'Persona conocida promete ganancias del 300% en criptomonedas',
      aiAnalysis: {
        veracity: 'Engañoso',
        confidence: 0.88,
        detectedMarkers: ['enganoso', 'sensacionalista'],
        issues: ['Promesas de retorno irreales', 'Presión para inversión inmediata', 'Características de esquema Ponzi']
      },
      consensusMarkers: ['enganoso', 'falso', 'sensacionalista'],
      submittedBy: 'usuario_890',
      submittedAt: '2024-01-15T07:30:00Z',
      priority: 'medium',
      votesCount: 7,
    },
    {
      id: '7',
      type: 'text',
      title: 'Noticia sobre subsidio del gobierno',
      url: 'https://subsidios-gov-colombia.online/registro-500mil',
      headline: 'Gobierno Nacional anuncia subsidio de $500.000 para todos los ciudadanos',
      content: 'El gobierno anuncia nuevo subsidio de $500.000 para todos los ciudadanos mayores de edad. Regístrese en este link antes del viernes para reclamar su dinero. Se necesita cédula, RUT y datos bancarios para el pago inmediato.',
      aiAnalysis: {
        veracity: 'Posible Phishing',
        confidence: 0.92,
        detectedMarkers: ['suplantacion_identidad', 'falso', 'enganoso'],
        issues: ['Link no corresponde a dominio gubernamental', 'No hay anuncio oficial', 'Solicita datos personales sensibles']
      },
      consensusMarkers: ['suplantacion_identidad', 'falso', 'enganoso', 'sensacionalista'],
      submittedBy: 'usuario_345',
      submittedAt: '2024-01-15T07:10:00Z',
      priority: 'high',
      votesCount: 9,
    },
    {
      id: '8',
      type: 'audio',
      title: 'Audio de supuesto secuestro en el barrio',
      url: null,
      headline: null,
      content: 'audio_alerta_secuestro.mp3',
      description: 'Mensaje de voz advirtiendo sobre secuestros en la zona',
      aiAnalysis: {
        veracity: 'Fuera de Contexto',
        confidence: 0.73,
        detectedMarkers: ['sin_contexto', 'sensacionalista'],
        issues: ['El audio es de hace 2 años en otra ciudad', 'No hay reportes recientes de secuestros', 'Metadatos de archivo antiguo']
      },
      consensusMarkers: ['sin_contexto', 'enganoso', 'sensacionalista'],
      submittedBy: 'usuario_678',
      submittedAt: '2024-01-15T06:45:00Z',
      priority: 'medium',
      votesCount: 4,
    },
    {
      id: '9',
      type: 'text',
      title: 'Publicación sobre vacunas y autismo',
      url: 'https://medicinanatural.info/vacunas-autismo-verdad-oculta',
      headline: 'Estudio científico comprueba relación directa entre vacunas infantiles y autismo',
      content: 'Un estudio reciente comprueba la relación entre vacunas infantiles y autismo que los médicos y las farmacéuticas están ocultando. Miles de padres reportan que sus hijos desarrollaron autismo después de la vacunación. La verdad que no quieren que sepas.',
      aiAnalysis: {
        veracity: 'Falso',
        confidence: 0.97,
        detectedMarkers: ['falso', 'teoria_conspirativa', 'enganoso'],
        issues: ['Múltiples estudios científicos desmienten esta teoría', 'Información puede causar daño a la salud pública', 'No cita fuentes verificables']
      },
      consensusMarkers: ['falso', 'teoria_conspirativa', 'enganoso', 'sensacionalista'],
      submittedBy: 'usuario_901',
      submittedAt: '2024-01-15T06:20:00Z',
      priority: 'high',
      votesCount: 12,
    },
    {
      id: '10',
      type: 'image',
      title: 'Foto de celebridad con político controversial',
      url: null,
      headline: null,
      content: 'foto_celebridad_politico.jpg',
      description: 'Imagen sugiere apoyo de celebridad a candidato político',
      aiAnalysis: {
        veracity: 'Manipulado',
        confidence: 0.85,
        detectedMarkers: ['manipulado', 'enganoso'],
        issues: ['Análisis forense muestra inconsistencias en iluminación', 'La celebridad desmintió la foto públicamente', 'Bordes borrosos alrededor de las figuras']
      },
      consensusMarkers: ['manipulado', 'falso', 'enganoso'],
      submittedBy: 'usuario_112',
      submittedAt: '2024-01-15T05:50:00Z',
      priority: 'medium',
      votesCount: 6,
    },
    {
      id: '11',
      type: 'video',
      title: 'Tutorial de "remedio casero" para COVID-19',
      url: null,
      headline: null,
      content: 'video_remedio_covid.mp4',
      description: 'Persona explica cómo curar COVID con productos naturales',
      aiAnalysis: {
        veracity: 'Desinformación Peligrosa',
        confidence: 0.96,
        detectedMarkers: ['falso', 'enganoso', 'sensacionalista'],
        issues: ['Contradice recomendaciones de OMS', 'No hay evidencia científica de efectividad', 'Puede causar que personas eviten tratamiento médico real']
      },
      consensusMarkers: ['falso', 'enganoso', 'sensacionalista', 'contenido_prejuicioso'],
      submittedBy: 'usuario_223',
      submittedAt: '2024-01-15T05:15:00Z',
      priority: 'high',
      votesCount: 15,
    }
  ];

  // Usar las mismas categorías del banco de marcadores de diagnóstico
  const verificationOptions = ETIQUETAS_CATEGORIAS;

  const getTypeIcon = (type: string) => {
    switch (type) {
      case 'text': return FileText;
      case 'image': return Image;
      case 'video': return Video;
      case 'audio': return Volume2;
      default: return FileText;
    }
  };

  const getPriorityBadge = (priority: string) => {
    switch (priority) {
      case 'high':
        return <Badge variant="destructive">Alta Prioridad</Badge>;
      case 'medium':
        return <Badge variant="default">Prioridad Media</Badge>;
      case 'low':
        return <Badge variant="secondary">Baja Prioridad</Badge>;
      default:
        return <Badge variant="outline">Sin Prioridad</Badge>;
    }
  };

  const handleVerificationSubmit = async () => {
    if (!selectedContent || marcadoresDiagnostico.length === 0) return;

    try {
      // Submit actual verification to API
      const result = await submitHumanVerification(
        selectedContent,
        marcadoresDiagnostico,
        verificationNotes
      );

      if (!result.success) {
        console.error('Error al enviar verificación:', result.message);
        // Could show error toast here
        return;
      }

      console.log('Verificación enviada exitosamente:', {
        contenido: selectedContent,
        marcadores: marcadoresDiagnostico,
        justificaciones: marcadoresJustificaciones,
        enlaces: marcadoresEnlaces,
        notas: verificationNotes
      });
    } catch (error) {
      console.error('Error al enviar verificación:', error);
      // Could show error toast here
      return;
    }

    // Calcular puntos basados en criterios detallados
    const basePoints = 20; // XP base por realizar un diagnóstico
    const markerBonus = marcadoresDiagnostico.length * 5; // 5 XP por cada marcador aplicado
    const justificationBonus = Object.keys(marcadoresJustificaciones).filter(k => marcadoresJustificaciones[k].length > 20).length * 10; // 10 XP por justificación detallada
    const linkBonus = Object.keys(marcadoresEnlaces).filter(k => marcadoresEnlaces[k]).length * 15; // 15 XP por cada enlace de fuente
    const totalPoints = basePoints + markerBonus + justificationBonus + linkBonus;
    
    // Sistema de niveles epidemiológicos (mismo que UserProfile)
    const levels = [
      { 
        level: 1, 
        title: 'VIGILANTE CENTINELA', 
        subtitle: 'Primera Línea de Defensa',
        minXP: 0, 
        maxXP: 500, 
        badge: '👁️'
      },
      { 
        level: 2, 
        title: 'EPIDEMIÓLOGO DIGITAL VOLUNTARIO', 
        subtitle: 'Analista de Contagio',
        minXP: 500, 
        maxXP: 2000, 
        badge: '🔬'
      },
      { 
        level: 3, 
        title: 'ESPECIALISTA EN INMUNOLOGÍA INFORMATIVA', 
        subtitle: 'Educomunicador Estratégico',
        minXP: 2000, 
        maxXP: 999999, 
        badge: '💉'
      }
    ];
    
    // Simular XP actual del usuario (850 = Nivel 2)
    const currentXP = 850 + totalPoints;
    const getCurrentLevel = (xp: number) => {
      return levels.find(level => xp >= level.minXP && xp < level.maxXP) || levels[levels.length - 1];
    };
    
    const currentLevel = getCurrentLevel(currentXP);
    const nextLevel = levels.find(level => level.level === currentLevel.level + 1);
    const progressToNext = nextLevel ? 
      Math.round(((currentXP - currentLevel.minXP) / (nextLevel.minXP - currentLevel.minXP)) * 100)
      : 100;
    
    // Simular total de diagnósticos completados
    const totalDiagnoses = 28 + 1; // María tiene 28, ahora 29
    
    // Racha diaria
    const streak = 12; // Misma racha que en el perfil
    
    // Insignias desbloqueables (alineadas con UserProfile)
    const availableBadges = [
      { id: 'analista-contagio', name: 'Analista de Contagio', icon: '🔬', description: 'Nivel 2 desbloqueado', threshold: 500 },
      { id: 'detector-25', name: 'Detector Activo', icon: '👁️', description: '25 diagnósticos completados', threshold: 25 },
      { id: 'racha-7', name: 'Constancia Inicial', icon: '🔥', description: '7 días consecutivos', threshold: 7 },
      { id: 'precision', name: 'Precisión Destacada', icon: '🎯', description: '90%+ de precisión', threshold: 90 }
    ];
    
    // Verificar si se desbloquea una nueva insignia
    let newBadge = null;
    if (totalDiagnoses === 25) {
      newBadge = availableBadges.find(b => b.id === 'detector-25');
    } else if (totalDiagnoses === 30) {
      newBadge = availableBadges.find(b => b.id === 'precision');
    }
    
    setGamificationData({
      pointsEarned: totalPoints,
      currentLevel: currentLevel.title,
      currentLevelBadge: currentLevel.badge,
      currentLevelSubtitle: currentLevel.subtitle,
      totalDiagnoses,
      streak,
      newBadge: newBadge ? newBadge.name : null,
      newBadgeIcon: newBadge ? newBadge.icon : null,
      newBadgeDescription: newBadge ? newBadge.description : null,
      currentXP,
      nextLevelXP: nextLevel ? nextLevel.minXP : currentLevel.maxXP,
      progressToNext
    });
    // Mostrar diálogo de éxito
    setShowSuccessDialog(true);

    // Refresh data after successful submission
    refresh();
  };

  const handleCloseSuccessDialog = () => {
    // Cerrar el diálogo
    setShowSuccessDialog(false);
    
    // Limpiar formulario y regresar a la cola
    setTimeout(() => {
      setSelectedContent(null);
      setVerificationNotes('');
      setVerificationResult('');
      setMarcadoresDiagnostico([]);
      setMarcadoresJustificaciones({});
      setMarcadoresEnlaces({});
    }, 300);
  };

  const toggleMarcadorDiagnostico = (marcadorId: string) => {
    setMarcadoresDiagnostico(prev => {
      if (prev.includes(marcadorId)) {
        // Si se está quitando, también eliminar su justificación y enlace
        const newJustificaciones = { ...marcadoresJustificaciones };
        const newEnlaces = { ...marcadoresEnlaces };
        delete newJustificaciones[marcadorId];
        delete newEnlaces[marcadorId];
        setMarcadoresJustificaciones(newJustificaciones);
        setMarcadoresEnlaces(newEnlaces);
        return prev.filter(m => m !== marcadorId);
      } else {
        return [...prev, marcadorId];
      }
    });
  };

  const updateMarcadorJustificacion = (marcadorId: string, justificacion: string) => {
    setMarcadoresJustificaciones(prev => ({
      ...prev,
      [marcadorId]: justificacion
    }));
  };

  const updateMarcadorEnlace = (marcadorId: string, enlace: string) => {
    setMarcadoresEnlaces(prev => ({
      ...prev,
      [marcadorId]: enlace
    }));
  };

  const getMarcador = (marcadorId: string) => {
    return ETIQUETAS_CATEGORIAS.find(c => c.id === marcadorId);
  };

  const getMarcadorBadgeColor = (marcadorId: string) => {
    const marcador = getMarcador(marcadorId);
    if (!marcador) return 'bg-gray-100 text-gray-700 border-gray-300';
    
    const colorMap: { [key: string]: string } = {
      'verdadero': 'bg-green-100 text-green-700 border-green-300',
      'falso': 'bg-red-100 text-red-700 border-red-300',
      'enganoso': 'bg-orange-100 text-orange-700 border-orange-300',
      'satirico': 'bg-blue-100 text-blue-700 border-blue-300',
      'manipulado': 'bg-purple-100 text-purple-700 border-purple-300',
      'sin_contexto': 'bg-amber-100 text-amber-700 border-amber-300',
      'no_verificable': 'bg-gray-100 text-gray-700 border-gray-300',
      'teoria_conspirativa': 'bg-violet-100 text-violet-700 border-violet-300',
      'discurso_odio_racismo': 'bg-red-200 text-red-900 border-red-400',
      'discurso_odio_sexismo': 'bg-red-200 text-red-900 border-red-400',
      'discurso_odio_clasismo': 'bg-red-200 text-red-900 border-red-400',
      'discurso_odio_ableismo': 'bg-red-200 text-red-900 border-red-400',
      'incitacion_violencia': 'bg-red-300 text-red-950 border-red-500',
      'acoso_ciberbullying': 'bg-orange-200 text-orange-900 border-orange-400',
      'contenido_prejuicioso': 'bg-yellow-100 text-yellow-800 border-yellow-300',
      'bot_coordinado': 'bg-indigo-100 text-indigo-700 border-indigo-300',
      'suplantacion_identidad': 'bg-purple-200 text-purple-900 border-purple-400',
      'sensacionalista': 'bg-orange-100 text-orange-600 border-orange-300',
      'en_revision': 'bg-gray-100 text-gray-600 border-gray-300'
    };
    return colorMap[marcadorId] || 'bg-gray-100 text-gray-700 border-gray-300';
  };

  const getMarcadorColor = (marcadorId: string) => {
    const colorMap: { [key: string]: string } = {
      'verdadero': 'bg-emerald-500 hover:bg-emerald-600',
      'falso': 'bg-red-500 hover:bg-red-600',
      'enganoso': 'bg-orange-500 hover:bg-orange-600',
      'satirico': 'bg-blue-500 hover:bg-blue-600',
      'manipulado': 'bg-purple-500 hover:bg-purple-600',
      'sin_contexto': 'bg-amber-500 hover:bg-amber-600',
      'no_verificable': 'bg-gray-500 hover:bg-gray-600',
      'teoria_conspirativa': 'bg-violet-600 hover:bg-violet-700',
      'discurso_odio_racismo': 'bg-red-700 hover:bg-red-800',
      'discurso_odio_sexismo': 'bg-red-700 hover:bg-red-800',
      'discurso_odio_clasismo': 'bg-red-600 hover:bg-red-700',
      'discurso_odio_ableismo': 'bg-red-600 hover:bg-red-700',
      'incitacion_violencia': 'bg-red-900 hover:bg-red-950',
      'acoso_ciberbullying': 'bg-orange-700 hover:bg-orange-800',
      'contenido_prejuicioso': 'bg-yellow-600 hover:bg-yellow-700',
      'bot_coordinado': 'bg-indigo-600 hover:bg-indigo-700',
      'suplantacion_identidad': 'bg-purple-700 hover:bg-purple-800',
      'sensacionalista': 'bg-orange-400 hover:bg-orange-500',
      'en_revision': 'bg-gray-400 hover:bg-gray-500'
    };
    return colorMap[marcadorId] || 'bg-gray-500 hover:bg-gray-600';
  };

  const selectedContentData = pendingContents.find(c => c.id === selectedContent);

  // Loading state
  if (loading) {
    return (
      <div className="flex flex-col items-center justify-center min-h-[500px] space-y-4">
        <div className="animate-spin rounded-full h-16 w-16 border-4 border-yellow-400 border-t-transparent"></div>
        <p className="text-gray-600">Cargando casos pendientes de verificación...</p>
      </div>
    );
  }

  // Error state
  if (error && !cases.length) {
    return (
      <div className="flex flex-col items-center justify-center min-h-[500px] space-y-4">
        <AlertTriangle className="h-16 w-16 text-orange-500" />
        <p className="text-gray-600">Error al cargar los casos</p>
        <p className="text-sm text-gray-500">{error}</p>
        <Button onClick={refresh} variant="outline">
          Intentar de nuevo
        </Button>
      </div>
    );
  }

  // Componente de diálogo de éxito gamificado (alineado con sistema de UserProfile)
  const renderSuccessDialog = () => (
    <Dialog open={showSuccessDialog} onOpenChange={(open) => {
      // Solo permitir cerrar mediante el botón, no con ESC o clic fuera
      if (!open) return;
    }}>
      <DialogContent 
        className="max-w-md border-4 border-primary shadow-2xl [&>button]:hidden"
        onEscapeKeyDown={(e) => e.preventDefault()}
        onPointerDownOutside={(e) => e.preventDefault()}
      >
        <div className="relative">
          {/* Confetti effect background */}
          <div className="absolute inset-0 overflow-hidden pointer-events-none">
            <div className="absolute top-0 left-0 w-full h-full opacity-20">
              {[...Array(20)].map((_, i) => (
                <div
                  key={i}
                  className="absolute animate-bounce-subtle"
                  style={{
                    left: `${Math.random() * 100}%`,
                    top: `${Math.random() * 100}%`,
                    animationDelay: `${Math.random() * 2}s`,
                    fontSize: `${Math.random() * 20 + 10}px`
                  }}
                >
                  {['🎉', '⭐', '🔬', '💛', '✨', '🏆'][Math.floor(Math.random() * 6)]}
                </div>
              ))}
            </div>
          </div>

          <DialogHeader className="relative z-10">
            <div className="flex flex-col items-center space-y-4 py-4">
              {/* Botilito celebrando */}
              <div className="relative">
                <img 
                  src={botilitoImage} 
                  alt="Botilito" 
                  className="w-32 h-32 object-contain animate-bounce-subtle"
                />
                <div className="absolute -top-2 -right-2 bg-primary text-primary-foreground rounded-full p-2 animate-pulse-glow">
                  <Trophy className="h-6 w-6" />
                </div>
              </div>

              <DialogTitle className="text-center text-3xl">
                ¡Berraquísimo, parcero! 🎉
              </DialogTitle>
              
              <DialogDescription className="text-center text-lg">
                Tu diagnóstico está más afilado que un bisturí. ¡Sos una chimba contribuyendo a la inmunización digital del país! 💉💛
              </DialogDescription>
            </div>
          </DialogHeader>

          <div className="space-y-4 py-4 relative z-10">
            {/* Puntos ganados - diseño destacado */}
            <div className="bg-gradient-to-br from-primary/30 via-primary/20 to-primary/10 border-2 border-primary rounded-lg p-6 text-center">
              <div className="flex items-center justify-center space-x-2 mb-2">
                <Sparkles className="h-6 w-6 text-primary animate-pulse" />
                <p className="text-sm text-muted-foreground">¡Ganaste XP!</p>
              </div>
              <p className="text-5xl font-bold text-primary mb-1">+{gamificationData.pointsEarned}</p>
              <p className="text-sm text-muted-foreground">puntos de experiencia</p>
            </div>

            {/* Nivel actual - badge epidemiológico */}
            <div className="bg-gradient-to-r from-purple-100 via-purple-50 to-purple-100 border-2 border-purple-300 rounded-lg p-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-3">
                  <div className="text-4xl">{gamificationData.currentLevelBadge}</div>
                  <div>
                    <p className="text-xs text-purple-600 uppercase tracking-wider">Tu rango actual</p>
                    <p className="text-sm">{gamificationData.currentLevel}</p>
                    <p className="text-xs text-muted-foreground">{gamificationData.currentLevelSubtitle}</p>
                  </div>
                </div>
              </div>
              
              {/* Barra de progreso al siguiente nivel */}
              {gamificationData.progressToNext < 100 && (
                <div className="mt-3 space-y-1">
                  <div className="flex justify-between text-xs text-muted-foreground">
                    <span>{gamificationData.currentXP} XP</span>
                    <span>{gamificationData.nextLevelXP} XP</span>
                  </div>
                  <div className="w-full bg-gray-200 rounded-full h-2">
                    <div 
                      className="bg-gradient-to-r from-purple-500 to-purple-600 h-2 rounded-full transition-all duration-500"
                      style={{ width: `${gamificationData.progressToNext}%` }}
                    />
                  </div>
                  <p className="text-xs text-center text-muted-foreground mt-1">
                    {gamificationData.progressToNext}% al siguiente nivel
                  </p>
                </div>
              )}
            </div>

            {/* Estadísticas clave */}
            <div className="grid grid-cols-3 gap-2">
              <div className="bg-secondary/30 rounded-lg p-3 text-center border border-secondary/40">
                <div className="flex items-center justify-center mb-1">
                  <Microscope className="h-4 w-4 text-primary" />
                </div>
                <p className="text-xl">{gamificationData.totalDiagnoses}</p>
                <p className="text-xs text-muted-foreground">Diagnósticos</p>
              </div>
              
              <div className="bg-orange-50 rounded-lg p-3 text-center border border-orange-200">
                <div className="flex items-center justify-center mb-1">
                  <Flame className="h-4 w-4 text-orange-500" />
                </div>
                <p className="text-xl">{gamificationData.streak}</p>
                <p className="text-xs text-muted-foreground">Días racha</p>
              </div>
              
              <div className="bg-green-50 rounded-lg p-3 text-center border border-green-200">
                <div className="flex items-center justify-center mb-1">
                  <TrendingUp className="h-4 w-4 text-green-500" />
                </div>
                <p className="text-xl">92%</p>
                <p className="text-xs text-muted-foreground">Precisión</p>
              </div>
            </div>

            {/* Insignia desbloqueada */}
            {gamificationData.newBadge && (
              <div className="bg-gradient-to-r from-yellow-400 via-yellow-300 to-yellow-400 rounded-lg p-4 text-center border-2 border-yellow-500 shadow-lg animate-pulse-glow">
                <div className="flex items-center justify-center space-x-2 mb-2">
                  <Award className="h-6 w-6 text-yellow-800" />
                  <p className="text-yellow-900">¡Insignia Desbloqueada!</p>
                </div>
                <div className="flex items-center justify-center space-x-2 mb-1">
                  <span className="text-2xl">{gamificationData.newBadgeIcon}</span>
                  <p className="text-lg text-yellow-900">{gamificationData.newBadge}</p>
                </div>
                <p className="text-xs text-yellow-800">{gamificationData.newBadgeDescription}</p>
              </div>
            )}

            {/* Mensaje motivacional con tono colombiano */}
            <div className="bg-muted/30 rounded-lg p-4 text-center border border-muted">
              <p className="text-sm italic">
                "Cada diagnóstico que haces ayuda a proteger a miles de colombianos de la desinformación. ¡Sigue así, crack!" 💪🇨🇴
              </p>
            </div>

            {/* Botón para continuar */}
            <Button
              onClick={handleCloseSuccessDialog}
              className="w-full bg-primary hover:bg-primary/90 text-primary-foreground text-lg py-6"
            >
              <CheckCircle className="mr-2 h-5 w-5" />
              ¡A darle duro al siguiente caso!
            </Button>
          </div>
        </div>
      </DialogContent>
    </Dialog>
  );

  // FLUJO NUEVO: Si no hay contenido seleccionado, mostrar solo la cola
  if (!selectedContentData) {
    return (
      <div className="space-y-6">
        {/* Franja superior de Botilito */}
        <div className="bg-[#ffe97a] border-2 border-[#ffda00] rounded-lg p-4 shadow-lg">
          <div className="flex items-center space-x-4">
            <img
              src={botilitoImage}
              alt="Botilito"
              className="w-24 h-24 object-contain mt-[0px] mr-[16px] mb-[-18px] ml-[0px]"
            />
            <div className="flex-1">
              <p className="text-xl">
                ¡Ey parcero! Acá están los casos que necesitan ojo humano 🔍👀
              </p>
              <p className="text-sm mt-1 opacity-80">
                Ya hice mi tarea con la IA, pero ahora necesito que vos y tus colegas hagan el diagnóstico fino. ¡Entre todos le paramos bolas a la desinformación! 💪
              </p>
            </div>
          </div>
        </div>

        {/* Estadísticas del Sistema */}
        {summaryData && (
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            <Card className="bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200">
              <CardContent className="p-4">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-sm text-blue-600 font-medium">Casos Totales</p>
                    <p className="text-2xl font-bold text-blue-900">
                      {summaryData.kpis.total_cases.toLocaleString()}
                    </p>
                  </div>
                  <FileText className="h-8 w-8 text-blue-500 opacity-50" />
                </div>
              </CardContent>
            </Card>

            <Card className="bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200">
              <CardContent className="p-4">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-sm text-purple-600 font-medium">Documentos</p>
                    <p className="text-2xl font-bold text-purple-900">
                      {summaryData.kpis.total_documents.toLocaleString()}
                    </p>
                  </div>
                  <Layers className="h-8 w-8 text-purple-500 opacity-50" />
                </div>
              </CardContent>
            </Card>

            <Card className="bg-gradient-to-br from-green-50 to-green-100 border-green-200">
              <CardContent className="p-4">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-sm text-green-600 font-medium">Pendientes de Verificación</p>
                    <p className="text-2xl font-bold text-green-900">
                      {pendingContents.filter(c => c.consensusState === 'ai_only').length}
                    </p>
                  </div>
                  <Clock className="h-8 w-8 text-green-500 opacity-50" />
                </div>
              </CardContent>
            </Card>
          </div>
        )}

        {/* Solo la cola de casos pendientes */}
        <Card>
          <CardHeader>
            <div className="flex items-center justify-between">
              <div>
                <CardTitle className="flex items-center space-x-2 text-[24px]">
                  <Layers className="h-5 w-5 text-primary" />
                  <span>Listado de Casos</span>
                </CardTitle>
                <CardDescription>
                  Casos bajo análisis epidemiológico que requieren diagnóstico especializado
                </CardDescription>
              </div>
              <Badge variant="outline" className="bg-yellow-50 text-yellow-700 border-yellow-200">
                <Hash className="h-3 w-3 mr-1" />
                {pendingContents.length} casos activos
              </Badge>
            </div>

            {/* Search and Filter Controls */}
            <div className="flex space-x-2 mt-4">
              <div className="relative flex-1">
                <Search className="absolute left-3 top-2.5 h-4 w-4 text-muted-foreground" />
                <Input
                  placeholder="Buscar casos por título o contenido..."
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                  className="pl-10 border border-gray-300"
                />
              </div>
              <div className="flex items-center space-x-2">
                <Filter className="h-4 w-4 text-muted-foreground" />
                <select 
                  value={selectedFilter} 
                  onChange={(e) => setSelectedFilter(e.target.value)}
                  className="px-3 py-2 border rounded-md text-sm bg-background"
                >
                  <option value="all">Todos los casos</option>
                  <option value="high">Alta prioridad</option>
                  <option value="medium">Prioridad media</option>
                  <option value="text">Solo texto</option>
                  <option value="image">Solo imágenes</option>
                  <option value="video">Solo videos</option>
                </select>
              </div>
            </div>
          </CardHeader>
          <CardContent className="space-y-4">
            {/* Lista de casos con altura fija y scroll */}
            <div className="space-y-4 max-h-[600px] min-h-[500px] overflow-y-auto custom-scrollbar">
              {(() => {
                // Calcular índices para la paginación
                const indexOfLastCase = currentPage * casesPerPage;
                const indexOfFirstCase = indexOfLastCase - casesPerPage;
                const currentCases = pendingContents.slice(indexOfFirstCase, indexOfLastCase);
                
                return currentCases.map((content) => {
                  const TypeIcon = getTypeIcon(content.type);
              
              return (
                <div
                  key={content.id}
                  className="p-4 border rounded-lg cursor-pointer transition-all duration-200 bg-gray-50/50 hover:bg-accent hover:shadow-md hover:border-primary/50"
                  onClick={() => setSelectedContent(content.id)}
                >
                  <div className="flex items-start justify-between space-x-3">
                    <div className="flex items-start space-x-3 flex-1">
                      <div className="p-3 bg-muted rounded-lg">
                        <TypeIcon className="h-6 w-6 text-muted-foreground" />
                      </div>
                      <div className="space-y-2 flex-1">
                        <div className="flex items-center justify-between">
                          <div className="flex items-center space-x-2">
                            <Badge variant="outline" className="text-xs bg-white border-primary/30 font-mono">
                              {content.id}
                            </Badge>
                            {content.title && <h4 className="font-medium text-sm">{content.title}</h4>}
                          </div>
                          <div className="flex items-center space-x-2">
                            {getPriorityBadge(content.priority)}
                          </div>
                        </div>
                        
                        <div className="space-y-1">
                          {/* Fecha y hora de reporte + Usuario */}
                          <div className="flex items-center flex-wrap gap-x-3 gap-y-1 text-xs text-muted-foreground">
                            <div className="flex items-center space-x-1">
                              <Calendar className="h-3 w-3" />
                              <span>
                                {new Date(content.submittedAt).toLocaleDateString('es-CO', { 
                                  year: 'numeric', 
                                  month: 'short', 
                                  day: 'numeric',
                                  hour: '2-digit',
                                  minute: '2-digit'
                                })}
                                <span className="ml-1">
                                  (hace {Math.floor((Date.now() - new Date(content.submittedAt).getTime()) / (1000 * 60 * 60))}h)
                                </span>
                              </span>
                            </div>
                            
                            <Separator orientation="vertical" className="h-3" />
                            
                            <div className="flex items-center space-x-1">
                              <User className="h-3 w-3" />
                              <span>Reportado por: <span className="font-medium">{content.submittedBy}</span></span>
                            </div>
                          </div>
                          
                          {/* Cantidad de diagnósticos previos */}
                          {content.votesCount > 0 && (
                            <div className="flex items-center space-x-1 text-xs text-muted-foreground">
                              <Users className="h-3 w-3" />
                              <span>{content.votesCount} diagnósticos humanos</span>
                            </div>
                          )}
                          
                          {/* Consenso Humano + IA: Porcentaje de coincidencia */}
                          <div className="flex items-center space-x-1 text-xs">
                            <Gauge className="h-3 w-3 text-purple-600" />
                            <span className="text-muted-foreground">Consenso Humano + IA:</span>
                            {(() => {
                              const humanMarkers = content.consensusMarkers || [];
                              const aiMarkers = content.aiAnalysis?.detectedMarkers || [];
                              
                              // Si no hay consenso humano todavía
                              if (humanMarkers.length === 0) {
                                return (
                                  <Badge variant="outline" className="text-[10px] px-1.5 py-0 bg-gray-100 text-gray-600 border-gray-300">
                                    Sin datos
                                  </Badge>
                                );
                              }
                              
                              // Calcular coincidencia
                              const commonMarkers = humanMarkers.filter(marker => aiMarkers.includes(marker));
                              const totalUniqueMarkers = new Set([...humanMarkers, ...aiMarkers]).size;
                              const coincidencePercentage = totalUniqueMarkers > 0 
                                ? Math.round((commonMarkers.length / totalUniqueMarkers) * 100) 
                                : 0;
                              
                              // Determinar color basado en el porcentaje
                              const coincidenceColor = coincidencePercentage >= 70
                                ? 'bg-green-100 text-green-700 border-green-300'
                                : coincidencePercentage >= 40
                                  ? 'bg-yellow-100 text-yellow-700 border-yellow-300'
                                  : 'bg-red-100 text-red-700 border-red-300';
                              
                              return (
                                <Badge variant="outline" className={`text-[10px] px-1.5 py-0 ${coincidenceColor}`}>
                                  {coincidencePercentage}% coincidencia
                                </Badge>
                              );
                            })()}
                          </div>
                        </div>
                        
                        <div className="space-y-2">
                          {/* Diagnóstico desinfodémico unificado */}
                          {(() => {
                            // Priorizar diagnóstico consensuado si existe, sino mostrar el de Botilito
                            const marcadores = content.consensusMarkers && content.consensusMarkers.length > 0 
                              ? content.consensusMarkers 
                              : content.aiAnalysis.detectedMarkers || [];
                            const isConsensus = content.consensusMarkers && content.consensusMarkers.length > 0;
                            const IconComponent = isConsensus ? Users : Bot;
                            
                            if (marcadores.length === 0) return null;
                            
                            return (
                              <div className="space-y-1">
                                <div className="flex items-center space-x-1 text-xs text-muted-foreground">
                                  <IconComponent className="h-3 w-3" />
                                  <span>Diagnóstico desinfodémico:</span>
                                  {!isConsensus && (
                                    <Badge variant="outline" className="text-[10px] px-1.5 py-0 ml-1 bg-blue-50 text-blue-700 border-blue-200">
                                      analizado solo por Botilito
                                    </Badge>
                                  )}
                                </div>
                                <div className="grid grid-cols-2 gap-1">
                                  {marcadores.map((marcadorId, index) => {
                                    const marcador = getMarcador(marcadorId);
                                    if (!marcador) return null;
                                    return (
                                      <Badge 
                                        key={index} 
                                        variant="outline" 
                                        className={`text-xs px-2 py-0.5 ${getMarcadorBadgeColor(marcadorId)}`}
                                      >
                                        {marcador.label}
                                      </Badge>
                                    );
                                  })}
                                </div>
                              </div>
                            );
                          })()}
                          
                          {/* URL a la noticia original si existe */}
                          {content.url && (
                            <div className="flex items-center space-x-1 text-xs text-blue-600">
                              <Link className="h-3 w-3 flex-shrink-0" />
                              <span className="truncate">{content.url}</span>
                            </div>
                          )}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              );
            });
              })()}
            </div>
            
            {/* Controles de paginación */}
            {pendingContents.length > casesPerPage && (
              <div className="pt-4 border-t">
                <div className="flex items-center justify-between">
                  <div className="text-sm text-muted-foreground">
                    Mostrando {((currentPage - 1) * casesPerPage) + 1} - {Math.min(currentPage * casesPerPage, pendingContents.length)} de {pendingContents.length} casos
                  </div>
                  <div className="flex items-center space-x-2">
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}
                      disabled={currentPage === 1}
                    >
                      Anterior
                    </Button>
                    <div className="flex items-center space-x-1">
                      {Array.from({ length: Math.ceil(pendingContents.length / casesPerPage) }, (_, i) => i + 1).map((page) => (
                        <Button
                          key={page}
                          variant={currentPage === page ? "default" : "outline"}
                          size="sm"
                          onClick={() => setCurrentPage(page)}
                          className={currentPage === page ? "bg-primary text-primary-foreground" : ""}
                        >
                          {page}
                        </Button>
                      ))}
                    </div>
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={() => setCurrentPage(prev => Math.min(Math.ceil(pendingContents.length / casesPerPage), prev + 1))}
                      disabled={currentPage === Math.ceil(pendingContents.length / casesPerPage)}
                    >
                      Siguiente
                    </Button>
                  </div>
                </div>
              </div>
            )}
          </CardContent>
        </Card>
      </div>
    );
  }

  // FLUJO NUEVO: Si hay contenido seleccionado, mostrar el laboratorio completo
  return (
    <div className="space-y-6">
      {/* Franja de Botilito para el detalle del caso */}
      <div className="bg-[#ffe97a] border-2 border-[#ffda00] rounded-lg p-4 shadow-lg">
        <div className="flex items-center space-x-4">
          <img 
            src={botilitoImage} 
            alt="Botilito" 
            className="w-24 h-24 object-contain mt-[0px] mr-[16px] mb-[-18px] ml-[0px]"
          />
          <div className="flex-1">
            <p className="text-xl">
              ¡Ey parcero! Acá tienes el detalle completo de este caso 🔬👀
            </p>
            <p className="text-sm mt-1 opacity-80">
              Ya hice mi análisis, pero ahora vos y tu experiencia pueden afinar el diagnóstico. ¿Cómo lo ves? Dale duro al análisis! 💪
            </p>
          </div>
        </div>
      </div>

      {/* Botón para volver a la lista */}
      <div className="flex justify-start">
        <Button
          variant="outline"
          onClick={() => setSelectedContent(null)}
          className="border-2 border-gray-300 hover:border-primary hover:bg-primary/10"
        >
          <ArrowLeft className="mr-2 h-4 w-4" />
          Volver a la lista de casos
        </Button>
      </div>

      {/* Laboratorio de diagnóstico completo */}
      <Card>
        <CardHeader>
          {/* Franja unificada con toda la info del caso */}
          <div className="flex items-center justify-between gap-4 bg-gradient-to-r from-primary/10 via-secondary/10 to-primary/10 px-6 py-4 rounded-lg border-2 border-primary/30 mb-4">
            {/* Código del caso */}
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-primary/20 rounded-lg">
                <Shield className="h-5 w-5 text-primary" />
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Código del Caso</p>
                <p className="font-mono font-medium">{selectedContentData.id}</p>
              </div>
            </div>

            <Separator orientation="vertical" className="h-12" />

            {/* Prioridad */}
            <div>
              <p className="text-xs text-muted-foreground mb-1">Prioridad</p>
              {getPriorityBadge(selectedContentData.priority)}
            </div>

            <Separator orientation="vertical" className="h-12" />

            {/* Reportado por */}
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-blue-100 rounded-lg">
                <User className="h-4 w-4 text-blue-600" />
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Reportado por</p>
                <p className="text-sm font-medium">{selectedContentData.submittedBy}</p>
              </div>
            </div>

            <Separator orientation="vertical" className="h-12" />

            {/* Fecha de reporte */}
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-emerald-100 rounded-lg">
                <Calendar className="h-4 w-4 text-emerald-600" />
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Fecha de reporte</p>
                <p className="text-sm font-medium">
                  {new Date(selectedContentData.submittedAt).toLocaleDateString('es-CO', {
                    day: 'numeric',
                    month: 'short',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                  })}
                </p>
              </div>
            </div>
          </div>

          {/* Título de la sección */}
          <CardTitle className="flex items-center space-x-2">
            <Microscope className="h-5 w-5 text-primary" />
            <span>Análisis Especializado del Caso</span>
          </CardTitle>
        </CardHeader>
        <CardContent className="space-y-6">
          {/* Content Details */}
          <div>
            <div className="p-4 bg-secondary/30 border-2 border-secondary/60 rounded-lg space-y-3">
              {/* Captura de la noticia con etiquetas superpuestas */}
              {selectedContentData.screenshot && (
                <div>
                  <Label>Captura de la noticia:</Label>
                  <div className="mt-2 rounded-lg overflow-hidden border-2 border-secondary/40 relative max-h-48">
                    <img 
                      src={selectedContentData.screenshot} 
                      alt="Captura de la noticia" 
                      className="w-full h-48 object-cover object-top"
                    />
                  </div>
                </div>
              )}
              
              {/* Fuente y tema */}
              {(selectedContentData.source || selectedContentData.theme) && (
                <div className="flex flex-wrap items-center gap-4 pb-2">
                  {/* Fuente de la noticia */}
                  {selectedContentData.source && (
                    <div className="flex items-center space-x-2">
                      <Newspaper className="h-4 w-4 text-primary" />
                      <Label className="text-sm">Fuente:</Label>
                      <a 
                        href={selectedContentData.source.url} 
                        target="_blank" 
                        rel="noopener noreferrer"
                        className="inline-flex items-center space-x-1.5 px-3 py-1.5 bg-secondary/60 hover:bg-secondary text-secondary-foreground rounded-md transition-colors text-xs no-hover-effect"
                      >
                        <span>{selectedContentData.source.name}</span>
                        <ExternalLink className="h-3 w-3" />
                      </a>
                    </div>
                  )}
                  
                  {/* Tema del contenido */}
                  {selectedContentData.theme && (
                    <div className="flex items-center space-x-2">
                      <Tag className="h-4 w-4 text-primary" />
                      <Label className="text-sm">Tema:</Label>
                      <Badge variant="outline" className="text-xs border-primary/40 bg-primary/10">
                        {selectedContentData.theme}
                      </Badge>
                    </div>
                  )}
                </div>
              )}
              
              {/* Titular de la noticia */}
              {selectedContentData.headline && (
                <div>
                  <Label>Titular de la noticia:</Label>
                  <div className="mt-1 p-3 bg-primary/20 border border-primary/40 rounded-lg">
                    <p className="font-medium">{selectedContentData.headline}</p>
                  </div>
                </div>
              )}
              
              {/* Contenido analizado */}
              <div>
                <Label>Contenido analizado:</Label>
                <p className="text-sm text-muted-foreground mt-1 leading-relaxed">
                  {selectedContentData.type === 'text' ? 
                    selectedContentData.content : 
                    selectedContentData.description || selectedContentData.content
                  }
                </p>
              </div>
            </div>

            {/* Evaluación epidemiológica */}
            {selectedContentData.aiAnalysis.summary && (
              <div className="mt-6">
                <Label>Evaluación epidemiológica:</Label>
                <p className="text-sm text-muted-foreground mt-1">{selectedContentData.aiAnalysis.summary}</p>
              </div>
            )}
          </div>

          <Separator />

          {/* Comparativa de Diagnósticos: Botilito vs Verificadores Humanos */}
          <div>
            <Label className="mb-4 flex items-center space-x-2">
              <Microscope className="h-5 w-5 text-primary" />
              <span>Comparativa de Diagnósticos</span>
            </Label>
            
            <div className="grid grid-cols-2 gap-6">
              {/* Columna 1: Diagnóstico de Botilito (IA) */}
              <div className="space-y-4 border border-gray-300 rounded-lg p-4">
                <div className="flex items-center space-x-2 mb-3">
                  <div className="p-2 bg-purple-100 rounded-lg">
                    <Bot className="h-5 w-5 text-purple-600" />
                  </div>
                  <div>
                    <h3 className="font-medium">Diagnóstico de Botilito</h3>
                    <p className="text-xs text-muted-foreground">Análisis inicial de IA</p>
                  </div>
                </div>
                
                {/* Etiquetas de Botilito - SIN porcentajes */}
                <div className="space-y-2">
                  <Label className="text-xs text-muted-foreground">Marcadores detectados:</Label>
                  <div className="flex flex-wrap gap-2">
                    {selectedContentData.aiAnalysis.detectedMarkers?.map((marcadorId) => {
                      const marcador = getMarcador(marcadorId);
                      if (!marcador) return null;
                      const Icon = marcador.icon;
                      
                      return (
                        <Badge 
                          key={marcadorId}
                          variant="outline"
                          className="bg-white border-gray-300"
                        >
                          <Icon className={`h-4 w-4 mr-1.5 ${marcador.color}`} />
                          {marcador.label}
                        </Badge>
                      );
                    })}
                  </div>
                </div>
                
                {/* Comentario de Botilito */}
                {selectedContentData.aiAnalysis.summary && (
                  <div className="p-3 bg-purple-50 border border-purple-200 rounded-lg">
                    <Label className="text-xs text-muted-foreground mb-1 flex items-center space-x-1">
                      <MessageSquare className="h-3 w-3" />
                      <span>Análisis:</span>
                    </Label>
                    <p className="text-sm mt-1">{selectedContentData.aiAnalysis.summary}</p>
                  </div>
                )}
              </div>

              {/* Columna 2: Diagnóstico de Verificadores Humanos */}
              <div className="space-y-4 border border-gray-300 rounded-lg p-4">
                <div className="flex items-center justify-between mb-3">
                  <div className="flex items-center space-x-2">
                    <div className="p-2 bg-emerald-100 rounded-lg">
                      <Users className="h-5 w-5 text-emerald-600" />
                    </div>
                    <div>
                      <h3 className="font-medium">Diagnóstico de Verificadores</h3>
                      <p className="text-xs text-muted-foreground">Consenso humano</p>
                    </div>
                  </div>
                  {/* Número de verificadores */}
                  <Badge variant="outline" className="bg-emerald-50 border-emerald-300">
                    <Users className="h-3 w-3 mr-1" />
                    12 verificadores
                  </Badge>
                </div>
                
                {/* Etiquetas de Verificadores - CON porcentajes */}
                <div className="space-y-2">
                  <Label className="text-xs text-muted-foreground">Marcadores por consenso:</Label>
                  <div className="space-y-2">
                    {/* Simulamos datos de consenso basados en los marcadores de IA */}
                    {selectedContentData.aiAnalysis.detectedMarkers?.map((marcadorId, index) => {
                      const marcador = getMarcador(marcadorId);
                      if (!marcador) return null;
                      const Icon = marcador.icon;
                      
                      // Porcentajes simulados de consenso (en producción vendrían de la BD)
                      const consensusPercentages = [92, 83, 75];
                      const percentage = consensusPercentages[index] || 70;
                      
                      return (
                        <div key={marcadorId} className="flex items-center justify-between py-2 border-b last:border-b-0">
                          <div className="flex items-center space-x-2">
                            <Icon className={`h-4 w-4 ${marcador.color}`} />
                            <span className="text-sm">{marcador.label}</span>
                          </div>
                          <span className="text-sm font-medium text-muted-foreground">
                            {percentage}%
                          </span>
                        </div>
                      );
                    })}
                  </div>
                </div>
              </div>
            </div>
          </div>

          <Separator />

          {/* Marcadores de Diagnóstico Desinfodémico */}
          <div>
            <Label className="mb-3 flex items-center space-x-2">
              <Target className="h-4 w-4 text-primary" />
              <span>Marcadores de Diagnóstico Desinfodémico</span>
            </Label>
            <p className="text-xs text-muted-foreground mb-4">
              Selecciona los marcadores que apliquen. Al seleccionar cada uno, puedes justificar tu elección y agregar enlaces de soporte.
            </p>
            
            <div className="grid grid-cols-3 gap-3">
              {ETIQUETAS_CATEGORIAS.map((marcador) => {
                const Icon = marcador.icon;
                const isSelected = marcadoresDiagnostico.includes(marcador.id);
                
                return (
                  <div 
                    key={marcador.id}
                    className={`border-2 rounded-lg transition-all ${
                      isSelected 
                        ? `${marcador.border} ${marcador.bg} shadow-sm col-span-3` 
                        : 'border-gray-200 hover:border-primary/30 hover:bg-accent/30'
                    }`}
                  >
                    {/* Header del marcador - siempre visible */}
                    <div 
                      className="flex items-start space-x-3 p-4 cursor-pointer"
                      onClick={() => toggleMarcadorDiagnostico(marcador.id)}
                    >
                      <Checkbox 
                        checked={isSelected}
                        onCheckedChange={() => toggleMarcadorDiagnostico(marcador.id)}
                        className="mt-1"
                      />
                      <div className="flex-1">
                        <div className="flex items-center space-x-2 mb-1">
                          <Icon className={`h-5 w-5 ${marcador.color}`} />
                          <Label className="cursor-pointer font-medium">
                            {marcador.label}
                          </Label>
                        </div>
                        <p className="text-xs text-muted-foreground">
                          {marcador.descripcion}
                        </p>
                      </div>
                    </div>
                    
                    {/* Área expandida con justificación y enlace - solo cuando está seleccionado */}
                    {isSelected && (
                      <div className="px-4 pb-4 space-y-3 border-t pt-3 mt-2">
                        {/* Campo de justificación */}
                        <div>
                          <Label className="text-xs text-muted-foreground mb-1 flex items-center space-x-1">
                            <MessageSquare className="h-3 w-3" />
                            <span>Justificación:</span>
                          </Label>
                          <Textarea
                            placeholder={`Explica por qué este contenido presenta características de "${marcador.label}"...`}
                            value={marcadoresJustificaciones[marcador.id] || ''}
                            onChange={(e) => updateMarcadorJustificacion(marcador.id, e.target.value)}
                            className="text-sm resize-none"
                            rows={3}
                          />
                        </div>
                        
                        {/* Campo de enlace de soporte */}
                        <div>
                          <Label className="text-xs text-muted-foreground mb-1 flex items-center space-x-1">
                            <Link2 className="h-3 w-3" />
                            <span>Enlace de soporte (opcional):</span>
                          </Label>
                          <Input
                            type="url"
                            placeholder="https://ejemplo.com/fuente-verificacion"
                            value={marcadoresEnlaces[marcador.id] || ''}
                            onChange={(e) => updateMarcadorEnlace(marcador.id, e.target.value)}
                            className="text-sm"
                          />
                          <p className="text-xs text-muted-foreground mt-1">
                            Agrega un enlace a fuentes, artículos o evidencia que respalde tu diagnóstico
                          </p>
                        </div>
                      </div>
                    )}
                  </div>
                );
              })}
            </div>
          </div>

          <Separator />

          {/* Verification Notes */}
          <div>
            <Label htmlFor="notes" className="mb-2 flex items-center space-x-2">
              <MessageSquare className="h-4 w-4 text-primary" />
              <span>Notas de diagnóstico</span>
            </Label>
            <Textarea
              id="notes"
              placeholder="Agrega observaciones, fuentes consultadas, o cualquier información relevante sobre tu diagnóstico..."
              value={verificationNotes}
              onChange={(e) => setVerificationNotes(e.target.value)}
              rows={4}
              className="resize-none border border-gray-300"
            />
          </div>

          <Separator />

          {/* Submit Button */}
          <div className="flex items-center justify-between pt-4">
            <div className="text-sm text-muted-foreground">
              {marcadoresDiagnostico.length > 0 && (
                <p className="flex items-center space-x-1">
                  <Target className="h-4 w-4" />
                  <span>{marcadoresDiagnostico.length} marcador(es) seleccionado(s)</span>
                </p>
              )}
            </div>
            <Button 
              onClick={handleVerificationSubmit}
              disabled={marcadoresDiagnostico.length === 0}
              size="lg"
              className="bg-primary hover:bg-primary/90 text-primary-foreground"
            >
              <Send className="mr-2 h-4 w-4" />
              Enviar diagnóstico humano
            </Button>
          </div>

          {marcadoresDiagnostico.length === 0 && (
            <Alert className="bg-[rgb(255,140,140)]">
              <AlertCircle className="h-4 w-4" />
              <AlertDescription className="text-[rgb(0,0,0)]">
                Debes seleccionar al menos un marcador de diagnóstico
              </AlertDescription>
            </Alert>
          )}

          <Separator />

          {/* Sección de Verificaciones de Otros y Debate - Grid 2 columnas */}
          <div className="grid grid-cols-2 gap-6">
            {/* Columna 1: Verificaciones de Otros Verificadores */}
            <div className="space-y-4 border border-gray-300 rounded-lg p-4">
              <div className="flex items-center space-x-2 mb-4">
                <Users className="h-5 w-5 text-primary" />
                <h3 className="font-medium">Verificaciones de Otros Colegas</h3>
              </div>

              {/* Lista de verificaciones de otros verificadores */}
              <div className="space-y-4">
                {/* Verificador 1 */}
                <div className="border border-gray-300 rounded-lg p-4 space-y-3">
                  <div className="flex items-center justify-between">
                    <div className="flex items-center space-x-2">
                      <div className="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center">
                        <User className="h-4 w-4 text-blue-600" />
                      </div>
                      <div>
                        <p className="text-sm font-medium">Carlos Ramírez</p>
                        <p className="text-xs text-muted-foreground">Hace 2 horas</p>
                      </div>
                    </div>
                    <Badge variant="outline" className="bg-emerald-50 border-emerald-300 text-xs">
                      <CheckCircle className="h-3 w-3 mr-1" />
                      Verificado
                    </Badge>
                  </div>

                  {/* Marcadores seleccionados */}
                  <div>
                    <Label className="text-xs text-muted-foreground mb-2">Marcadores:</Label>
                    <div className="flex flex-wrap gap-1.5">
                      {['enganoso', 'sensacionalista'].map((marcadorId) => {
                        const marcador = getMarcador(marcadorId);
                        if (!marcador) return null;
                        const Icon = marcador.icon;
                        return (
                          <Badge 
                            key={marcadorId}
                            variant="outline"
                            className="bg-white border-gray-300 text-xs"
                          >
                            <Icon className={`h-3 w-3 mr-1 ${marcador.color}`} />
                            {marcador.label}
                          </Badge>
                        );
                      })}
                    </div>
                  </div>

                  {/* Notas del verificador */}
                  <div>
                    <Label className="text-xs text-muted-foreground mb-1">Notas de diagnóstico:</Label>
                    <p className="text-sm p-2 bg-accent/20 rounded-md">
                      El titular usa lenguaje sensacionalista sin evidencia científica respaldada. No encontré estudios de Harvard que confirmen esto.
                    </p>
                  </div>
                </div>

                {/* Verificador 2 */}
                <div className="border border-gray-300 rounded-lg p-4 space-y-3">
                  <div className="flex items-center justify-between">
                    <div className="flex items-center space-x-2">
                      <div className="w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center">
                        <User className="h-4 w-4 text-purple-600" />
                      </div>
                      <div>
                        <p className="text-sm font-medium">Ana Martínez</p>
                        <p className="text-xs text-muted-foreground">Hace 4 horas</p>
                      </div>
                    </div>
                    <Badge variant="outline" className="bg-emerald-50 border-emerald-300 text-xs">
                      <CheckCircle className="h-3 w-3 mr-1" />
                      Verificado
                    </Badge>
                  </div>

                  {/* Marcadores seleccionados */}
                  <div>
                    <Label className="text-xs text-muted-foreground mb-2">Marcadores:</Label>
                    <div className="flex flex-wrap gap-1.5">
                      {['enganoso', 'no_verificable'].map((marcadorId) => {
                        const marcador = getMarcador(marcadorId);
                        if (!marcador) return null;
                        const Icon = marcador.icon;
                        return (
                          <Badge 
                            key={marcadorId}
                            variant="outline"
                            className="bg-white border-gray-300 text-xs"
                          >
                            <Icon className={`h-3 w-3 mr-1 ${marcador.color}`} />
                            {marcador.label}
                          </Badge>
                        );
                      })}
                    </div>
                  </div>

                  {/* Notas del verificador */}
                  <div>
                    <Label className="text-xs text-muted-foreground mb-1">Notas de diagnóstico:</Label>
                    <p className="text-sm p-2 bg-accent/20 rounded-md">
                      Coincido con Carlos. Además, la fuente "Noticias Falsas" no tiene credibilidad verificada. No hay manera de validar la información presentada.
                    </p>
                  </div>
                </div>

                {/* Verificador 3 */}
                <div className="border border-gray-300 rounded-lg p-4 space-y-3">
                  <div className="flex items-center justify-between">
                    <div className="flex items-center space-x-2">
                      <div className="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center">
                        <User className="h-4 w-4 text-green-600" />
                      </div>
                      <div>
                        <p className="text-sm font-medium">Diego Torres</p>
                        <p className="text-xs text-muted-foreground">Hace 6 horas</p>
                      </div>
                    </div>
                    <Badge variant="outline" className="bg-emerald-50 border-emerald-300 text-xs">
                      <CheckCircle className="h-3 w-3 mr-1" />
                      Verificado
                    </Badge>
                  </div>

                  {/* Marcadores seleccionados */}
                  <div>
                    <Label className="text-xs text-muted-foreground mb-2">Marcadores:</Label>
                    <div className="flex flex-wrap gap-1.5">
                      {['enganoso', 'sensacionalista', 'no_verificable'].map((marcadorId) => {
                        const marcador = getMarcador(marcadorId);
                        if (!marcador) return null;
                        const Icon = marcador.icon;
                        return (
                          <Badge 
                            key={marcadorId}
                            variant="outline"
                            className="bg-white border-gray-300 text-xs"
                          >
                            <Icon className={`h-3 w-3 mr-1 ${marcador.color}`} />
                            {marcador.label}
                          </Badge>
                        );
                      })}
                    </div>
                  </div>

                  {/* Notas del verificador */}
                  <div>
                    <Label className="text-xs text-muted-foreground mb-1">Notas de diagnóstico:</Label>
                    <p className="text-sm p-2 bg-accent/20 rounded-md">
                      Busqué en PubMed y Google Scholar. No hay estudios recientes de Harvard sobre limón y diabetes. Claramente engañoso y peligroso para personas diabéticas.
                    </p>
                  </div>
                </div>
              </div>
            </div>

            {/* Columna 2: Comentarios y Debate Libre */}
            <div className="space-y-4 border border-gray-300 rounded-lg p-4">
              <div className="flex items-center space-x-2 mb-4">
                <MessageSquare className="h-5 w-5 text-primary" />
                <h3 className="font-medium">Comentarios y Debate</h3>
              </div>

              {/* Lista de comentarios */}
              <div className="space-y-3 max-h-[500px] overflow-y-auto pr-2">
                {/* Comentario 1 */}
                <div className="border-l-2 border-primary/30 pl-3 py-2">
                  <div className="flex items-start space-x-2">
                    <div className="w-7 h-7 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0">
                      <User className="h-3.5 w-3.5 text-blue-600" />
                    </div>
                    <div className="flex-1">
                      <div className="flex items-center space-x-2 mb-1">
                        <p className="text-sm font-medium">Carlos Ramírez</p>
                        <span className="text-xs text-muted-foreground">Hace 2 horas</span>
                      </div>
                      <p className="text-sm">
                        Parceros, revisé la base de datos de Harvard Medical School y no hay nada publicado sobre esto. Es claramente fake news.
                      </p>
                    </div>
                  </div>
                </div>

                {/* Comentario 2 */}
                <div className="border-l-2 border-primary/30 pl-3 py-2">
                  <div className="flex items-start space-x-2">
                    <div className="w-7 h-7 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0">
                      <User className="h-3.5 w-3.5 text-purple-600" />
                    </div>
                    <div className="flex-1">
                      <div className="flex items-center space-x-2 mb-1">
                        <p className="text-sm font-medium">Ana Martínez</p>
                        <span className="text-xs text-muted-foreground">Hace 3 horas</span>
                      </div>
                      <p className="text-sm">
                        Totalmente de acuerdo. Además, vi que esta misma noticia circuló el año pasado con otro titular. Están reciclando desinformación.
                      </p>
                    </div>
                  </div>
                </div>

                {/* Comentario 3 */}
                <div className="border-l-2 border-primary/30 pl-3 py-2">
                  <div className="flex items-start space-x-2">
                    <div className="w-7 h-7 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0">
                      <User className="h-3.5 w-3.5 text-green-600" />
                    </div>
                    <div className="flex-1">
                      <div className="flex items-center space-x-2 mb-1">
                        <p className="text-sm font-medium">Diego Torres</p>
                        <span className="text-xs text-muted-foreground">Hace 5 horas</span>
                      </div>
                      <p className="text-sm">
                        ¿Alguien logró contactar al medio "Noticias Falsas"? Deberíamos verificar si existe realmente o es una web fantasma.
                      </p>
                    </div>
                  </div>
                </div>

                {/* Comentario 4 */}
                <div className="border-l-2 border-primary/30 pl-3 py-2">
                  <div className="flex items-start space-x-2">
                    <div className="w-7 h-7 rounded-full bg-orange-100 flex items-center justify-center flex-shrink-0">
                      <User className="h-3.5 w-3.5 text-orange-600" />
                    </div>
                    <div className="flex-1">
                      <div className="flex items-center space-x-2 mb-1">
                        <p className="text-sm font-medium">Laura Gómez</p>
                        <span className="text-xs text-muted-foreground">Hace 6 horas</span>
                      </div>
                      <p className="text-sm">
                        Chequeé el dominio y fue registrado hace solo 2 meses. Definitivamente no es una fuente confiable. Marquemos esto como alta prioridad.
                      </p>
                    </div>
                  </div>
                </div>

                {/* Comentario 5 */}
                <div className="border-l-2 border-primary/30 pl-3 py-2">
                  <div className="flex items-start space-x-2">
                    <div className="w-7 h-7 rounded-full bg-pink-100 flex items-center justify-center flex-shrink-0">
                      <User className="h-3.5 w-3.5 text-pink-600" />
                    </div>
                    <div className="flex-1">
                      <div className="flex items-center space-x-2 mb-1">
                        <p className="text-sm font-medium">Sofía Vargas</p>
                        <span className="text-xs text-muted-foreground">Hace 8 horas</span>
                      </div>
                      <p className="text-sm">
                        Este tipo de contenido es peligroso porque la gente diabética podría abandonar su tratamiento. Debemos ser contundentes con el marcador.
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              {/* Campo para agregar nuevo comentario */}
              <div className="border-t pt-4 mt-4">
                <Label className="text-xs text-muted-foreground mb-2">Agregar comentario:</Label>
                <div className="flex space-x-2">
                  <Textarea
                    placeholder="Comparte tus observaciones con los demás verificadores..."
                    rows={2}
                    className="resize-none text-sm"
                  />
                  <Button size="sm" className="bg-primary hover:bg-primary/90 self-end">
                    <Send className="h-4 w-4" />
                  </Button>
                </div>
              </div>
            </div>
          </div>
        </CardContent>
      </Card>

      {/* Diálogo de éxito gamificado */}
      {renderSuccessDialog()}
    </div>
  );
}
 - - - - - - - - - - - - 
src/components/ContentReview.tsx

import React, { useState, useRef, useEffect } from 'react';
import botilitoImage from 'figma:asset/e27a276e6ff0e187a67cf54678c265c1c38adbf7.png';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Badge } from './ui/badge';
import { Input } from './ui/input';
import { Separator } from './ui/separator';
import { Label } from './ui/label';
import { Textarea } from './ui/textarea';
import {
  Search, Filter, Bot, FileText, Image, Video, Volume2,
  CheckCircle, AlertTriangle, Clock, Eye, Hash, Layers,
  Calendar, User, Shield, XCircle, AlertCircle, ArrowLeft,
  Newspaper, Tag, ExternalLink, Syringe, Target, Activity,
  Users, TrendingUp, Share2, MessageCircle, Zap, Flame,
  Crosshair, Brain, BookOpen, CheckSquare, Plus, Edit, Trash2,
  Download, Twitter, Facebook, Linkedin
} from 'lucide-react';
import { useHistorialData } from '../utils/historial/useHistorialData';
import { fetchCaseDetails } from '../utils/historial/api';

export function ContentReview() {
  // Fetch real data from API
  const { loading: apiLoading, error: apiError, cases: apiCases } = useHistorialData();
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedFilter, setSelectedFilter] = useState('all');
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedCaseId, setSelectedCaseId] = useState<string | null>(null);
  const [caseDetails, setCaseDetails] = useState<any>(null);
  const [loadingDetails, setLoadingDetails] = useState(false);
  const casesPerPage = 10;
  const canvasRef = useRef<HTMLCanvasElement>(null);

  // Estado para las vacunas de inmunización
  const [vaccines, setVaccines] = useState<any[]>([
    {
      id: '1',
      title: 'Verificación de Datos sobre Vacunas COVID',
      description: 'Infografía explicando con datos reales y estudios verificados los efectos de las vacunas, desmintiendo el contenido falso.',
      format: 'Infografía',
      platforms: ['Instagram', 'Facebook', 'Twitter'],
      reach: 'Alto',
      engagement: '8.5%',
      status: 'active'
    },
    {
      id: '2',
      title: 'Video Educativo: Cómo Identificar Desinformación Médica',
      description: 'Tutorial corto mostrando señales de alerta en contenido médico falso y cómo verificar información de salud.',
      format: 'Video corto',
      platforms: ['TikTok', 'Instagram Reels', 'YouTube Shorts'],
      reach: 'Muy Alto',
      engagement: '12.3%',
      status: 'active'
    }
  ]);

  const [newVaccine, setNewVaccine] = useState({
    title: '',
    description: '',
    format: '',
    platforms: [] as string[],
    reach: '',
  });

  const [editingVaccineId, setEditingVaccineId] = useState<string | null>(null);

  // Fetch full case details when a case is selected
  useEffect(() => {
    if (!selectedCaseId) {
      setCaseDetails(null);
      return;
    }

    async function loadCaseDetails() {
      try {
        setLoadingDetails(true);
        const details = await fetchCaseDetails(selectedCaseId);
        console.log('📊 Case Details Loaded:', details);
        console.log('📍 Marcadores:', details?.analisis_del_caso?.marcadores);
        console.log('📍 Evaluación:', details?.evaluacion_epidemiologica);
        setCaseDetails(details);
      } catch (error) {
        console.error('❌ Error loading case details:', error);
        setCaseDetails(null);
      } finally {
        setLoadingDetails(false);
      }
    }

    loadCaseDetails();
  }, [selectedCaseId]);

  // Transform API data to match the component's expected format
  const historialCasos = apiCases.map(apiCase => {
    // Get the markers and their display data
    const markersDetected = apiCase.diagnosticLabels.map(label => ({
      type: label.label,
      confidence: label.percentage / 100
    }));

    const consensusMarkers = apiCase.diagnosticLabels.map(label => label.label.toLowerCase().replace(' ', '_'));
    const consensusPercentages = apiCase.diagnosticLabels.reduce((acc, label) => {
      acc[label.label.toLowerCase().replace(' ', '_')] = label.percentage;
      return acc;
    }, {} as Record<string, number>);

    return {
      id: apiCase.id, // UUID from database
      displayId: apiCase.displayId, // Generated display code (e.g., T-WB-20241015-156)
      type: apiCase.submissionType.toLowerCase(),
      title: apiCase.title,
      content: apiCase.title, // Use title as content
      headline: apiCase.title,
      url: apiCase.url,
      screenshot: null, // No screenshot in API data
      source: {
        name: new URL(apiCase.url).hostname.replace('www.', ''),
        url: apiCase.url
      },
      theme: 'General', // Would need to be in API
      aiAnalysis: {
        veracity: apiCase.finalVerdict,
        confidence: 0.85,
        detectedMarkers: consensusMarkers,
        issues: [],
        summary: `Caso con ${apiCase.humanVotesCount} verificadores. Estado: ${apiCase.verificationMethod}`,
        sources: [apiCase.submissionType],
        markersDetected
      },
      consensusMarkers,
      consensusPercentages,
      status: apiCase.consensusState === 'ai_only' ? 'ai_only' : 'verified',
      submittedBy: 'usuario',
      submittedAt: apiCase.createdAt,
      verifiedAt: apiCase.humanVotesCount > 0 ? apiCase.createdAt : null,
      humanVerifiers: apiCase.humanVotesCount,
      priority: apiCase.priority,
      votesCount: apiCase.humanVotesCount,
    };
  });

  // Marcadores disponibles
  const marcadoresDisponibles = [
    { id: 'verdadero', label: 'Verdadero', icon: CheckCircle },
    { id: 'falso', label: 'Falso', icon: XCircle },
    { id: 'enganoso', label: 'Engañoso', icon: AlertTriangle },
    { id: 'satirico', label: 'Satírico/Humorístico', icon: Bot },
    { id: 'manipulado', label: 'Manipulado', icon: Crosshair },
    { id: 'sin_contexto', label: 'Sin contexto', icon: AlertCircle },
    { id: 'no_verificable', label: 'No verificable', icon: Clock },
    { id: 'teoria_conspirativa', label: 'Teoría conspirativa', icon: Eye },
    { id: 'suplantacion_identidad', label: 'Suplantación de identidad', icon: Shield },
    { id: 'sensacionalista', label: 'Sensacionalista', icon: Flame },
  ];

  const getMarcador = (id: string) => {
    return marcadoresDisponibles.find(m => m.id === id);
  };

  const getTypeIcon = (type: string) => {
    switch (type) {
      case 'text': return FileText;
      case 'image': return Image;
      case 'video': return Video;
      case 'audio': return Volume2;
      default: return FileText;
    }
  };

  const getVeracityBadge = (veracity: string) => {
    const config: Record<string, { bg: string; text: string; border: string; icon: any }> = {
      'Verdadero': { bg: 'bg-green-50', text: 'text-green-700', border: 'border-green-200', icon: CheckCircle },
      'Falso': { bg: 'bg-red-50', text: 'text-red-700', border: 'border-red-200', icon: XCircle },
      'Engañoso': { bg: 'bg-orange-50', text: 'text-orange-700', border: 'border-orange-200', icon: AlertTriangle },
      'Sin contexto': { bg: 'bg-amber-50', text: 'text-amber-700', border: 'border-amber-200', icon: AlertCircle },
      'Satírico/Humorístico': { bg: 'bg-blue-50', text: 'text-blue-700', border: 'border-blue-200', icon: Bot },
      'Suplantación de identidad': { bg: 'bg-purple-50', text: 'text-purple-700', border: 'border-purple-200', icon: Shield },
      'Teoría conspirativa': { bg: 'bg-violet-50', text: 'text-violet-700', border: 'border-violet-200', icon: Eye },
      'No verificable': { bg: 'bg-gray-50', text: 'text-gray-700', border: 'border-gray-200', icon: Clock },
    };

    const { bg, text, border, icon: Icon } = config[veracity] || config['No verificable'];

    return (
      <Badge variant="outline" className={`${bg} ${text} ${border}`}>
        <Icon className="h-3 w-3 mr-1" />
        {veracity}
      </Badge>
    );
  };

  const getStatusBadge = (status: string) => {
    if (status === 'verified') {
      return (
        <Badge variant="outline" className="bg-emerald-50 text-emerald-700 border-emerald-200">
          <CheckCircle className="h-3 w-3 mr-1" />
          Verificado por humanos
        </Badge>
      );
    } else {
      return (
        <Badge variant="outline" className="bg-blue-50 text-blue-700 border-blue-200">
          <Bot className="h-3 w-3 mr-1" />
          Solo análisis IA
        </Badge>
      );
    }
  };

  const getPriorityBadge = (priority: string) => {
    const config: Record<string, { bg: string; text: string; border: string; label: string }> = {
      high: { bg: 'bg-red-50', text: 'text-red-700', border: 'border-red-200', label: 'Alta Prioridad' },
      medium: { bg: 'bg-orange-50', text: 'text-orange-700', border: 'border-orange-200', label: 'Prioridad Media' },
      low: { bg: 'bg-blue-50', text: 'text-blue-700', border: 'border-blue-200', label: 'Prioridad Baja' },
    };

    const { bg, text, border, label } = config[priority] || config['medium'];

    return (
      <Badge variant="outline" className={`${bg} ${text} ${border}`}>
        {label}
      </Badge>
    );
  };

  // Filtrado
  const filteredCasos = historialCasos.filter((caso) => {
    const matchesSearch = 
      caso.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
      caso.content.toLowerCase().includes(searchTerm.toLowerCase()) ||
      caso.id.toLowerCase().includes(searchTerm.toLowerCase());

    if (selectedFilter === 'all') return matchesSearch;
    if (selectedFilter === 'verified') return matchesSearch && caso.status === 'verified';
    if (selectedFilter === 'ai_only') return matchesSearch && caso.status === 'ai_only';
    if (selectedFilter === 'text') return matchesSearch && caso.type === 'text';
    if (selectedFilter === 'image') return matchesSearch && caso.type === 'image';
    if (selectedFilter === 'video') return matchesSearch && caso.type === 'video';
    if (selectedFilter === 'audio') return matchesSearch && caso.type === 'audio';

    return matchesSearch;
  });

  // Paginación
  const indexOfLastCase = currentPage * casesPerPage;
  const indexOfFirstCase = indexOfLastCase - casesPerPage;
  const currentCases = filteredCasos.slice(indexOfFirstCase, indexOfLastCase);
  const totalPages = Math.ceil(filteredCasos.length / casesPerPage);

  // Caso seleccionado para ver detalle
  const selectedCase = selectedCaseId ? historialCasos.find(c => c.id === selectedCaseId) : null;

  // Función para dibujar rectángulos redondeados
  const drawRoundedRect = (ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number, radius: number) => {
    ctx.beginPath();
    ctx.moveTo(x + radius, y);
    ctx.lineTo(x + width - radius, y);
    ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
    ctx.lineTo(x + width, y + height - radius);
    ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
    ctx.lineTo(x + radius, y + height);
    ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
    ctx.lineTo(x, y + radius);
    ctx.quadraticCurveTo(x, y, x + radius, y);
    ctx.closePath();
  };

  // Generar imagen del diagnóstico
  const generateDiagnosticImage = () => {
    if (!selectedCase) return;
    
    const canvas = canvasRef.current;
    if (!canvas) return;

    const ctx = canvas.getContext('2d');
    if (!ctx) return;

    // Calcular altura necesaria
    const baseHeight = 800;
    const markersHeight = (selectedCase.aiAnalysis.markersDetected.length * 85) + 100;
    const totalHeight = baseHeight + markersHeight;
    
    canvas.width = 1200;
    canvas.height = totalHeight;

    // Fondo blanco
    ctx.fillStyle = '#ffffff';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Franja superior amarilla con info de Botilito
    ctx.fillStyle = '#ffe97a';
    ctx.fillRect(20, 20, canvas.width - 40, 140);
    ctx.strokeStyle = '#ffda00';
    ctx.lineWidth = 4;
    ctx.strokeRect(20, 20, canvas.width - 40, 140);

    // Logo/Título "BOTILITO"
    ctx.fillStyle = '#000000';
    ctx.font = 'bold 42px Lexend, sans-serif';
    ctx.fillText('BOTILITO', 40, 70);
    
    // Subtítulo
    ctx.font = '22px Lexend, sans-serif';
    ctx.fillText('Diagnóstico Desinfodémico', 40, 105);

    // Número de caso
    ctx.font = 'bold 20px Lexend, sans-serif';
    ctx.fillText(`Caso: ${selectedCase.id}`, 40, 140);

    let yPosition = 200;

    // Título del contenido
    if (selectedCase.headline || selectedCase.title) {
      ctx.fillStyle = '#f8f8f8';
      ctx.fillRect(40, yPosition, canvas.width - 80, 120);
      ctx.strokeStyle = '#e5e5e5';
      ctx.lineWidth = 2;
      ctx.strokeRect(40, yPosition, canvas.width - 80, 120);
      
      ctx.fillStyle = '#000000';
      ctx.font = 'bold 26px Lexend, sans-serif';
      const maxWidth = canvas.width - 120;
      const title = selectedCase.headline || selectedCase.title;
      const words = title.split(' ');
      let line = '';
      let y = yPosition + 40;
      let lineCount = 0;
      
      for (let i = 0; i < words.length; i++) {
        const testLine = line + words[i] + ' ';
        const metrics = ctx.measureText(testLine);
        if (metrics.width > maxWidth && i > 0) {
          ctx.fillText(line, 60, y);
          line = words[i] + ' ';
          y += 35;
          lineCount++;
          if (lineCount >= 2) break;
        } else {
          line = testLine;
        }
      }
      ctx.fillText(line, 60, y);
      yPosition += 140;
    }

    // Tema
    if (selectedCase.theme) {
      yPosition += 10;
      ctx.fillStyle = '#666666';
      ctx.font = 'bold 18px Lexend, sans-serif';
      ctx.fillText('TEMA:', 40, yPosition);
      ctx.fillStyle = '#000000';
      ctx.font = '18px Lexend, sans-serif';
      ctx.fillText(selectedCase.theme, 110, yPosition);
      yPosition += 35;
    }

    // Fuente
    if (selectedCase.source) {
      ctx.fillStyle = '#666666';
      ctx.font = 'bold 18px Lexend, sans-serif';
      ctx.fillText('FUENTE:', 40, yPosition);
      ctx.fillStyle = '#000000';
      ctx.font = '18px Lexend, sans-serif';
      ctx.fillText(selectedCase.source.name, 130, yPosition);
      yPosition += 45;
    }

    // Veredicto
    yPosition += 20;
    ctx.fillStyle = '#000000';
    ctx.font = 'bold 28px Lexend, sans-serif';
    ctx.fillText('VEREDICTO:', 40, yPosition);
    yPosition += 10;

    const veracityColors: { [key: string]: string } = {
      'Verdadero': '#10b981',
      'Falso': '#ef4444',
      'Engañoso': '#f97316',
      'Sin contexto': '#f59e0b',
      'Satírico/Humorístico': '#3b82f6',
      'Suplantación de identidad': '#a855f7',
      'Teoría conspirativa': '#7c3aed',
      'No verificable': '#6b7280',
    };

    const veracityColor = veracityColors[selectedCase.aiAnalysis.veracity] || '#6b7280';
    ctx.fillStyle = veracityColor;
    drawRoundedRect(ctx, 40, yPosition, canvas.width - 80, 80, 12);
    ctx.fill();

    ctx.fillStyle = '#ffffff';
    ctx.font = 'bold 36px Lexend, sans-serif';
    ctx.fillText(selectedCase.aiAnalysis.veracity.toUpperCase(), 60, yPosition + 50);

    yPosition += 100;

    // Marcadores detectados
    yPosition += 20;
    ctx.fillStyle = '#000000';
    ctx.font = 'bold 24px Lexend, sans-serif';
    ctx.fillText('Marcadores de Diagnóstico:', 40, yPosition);
    yPosition += 20;

    const topMarkers = selectedCase.aiAnalysis.markersDetected.slice(0, 5);
    
    topMarkers.forEach((marker: any, index: number) => {
      const markerColors: { [key: string]: string } = {
        'Verdadero': '#10b981',
        'Falso': '#ef4444',
        'Engañoso': '#f97316',
        'Satírico/Humorístico': '#3b82f6',
        'Manipulado': '#a855f7',
        'Sin contexto': '#f59e0b',
        'No verificable': '#6b7280',
        'Teoría conspirativa': '#7c3aed',
        'Suplantación de identidad': '#a855f7',
        'Sensacionalista': '#fb923c',
      };

      const color = markerColors[marker.type] || '#6b7280';
      const confidence = (marker.confidence * 100).toFixed(0);

      yPosition += 15;
      ctx.shadowColor = 'rgba(0, 0, 0, 0.1)';
      ctx.shadowBlur = 8;
      ctx.shadowOffsetX = 0;
      ctx.shadowOffsetY = 2;
      
      ctx.fillStyle = color;
      const badgeWidth = canvas.width - 80;
      const badgeHeight = 70;
      drawRoundedRect(ctx, 40, yPosition, badgeWidth, badgeHeight, 12);
      ctx.fill();

      ctx.shadowColor = 'transparent';
      ctx.shadowBlur = 0;
      ctx.shadowOffsetX = 0;
      ctx.shadowOffsetY = 0;

      ctx.fillStyle = '#ffffff';
      ctx.font = `bold ${index === 0 ? '32' : '26'}px Lexend, sans-serif`;
      ctx.fillText(`${marker.type}`, 60, yPosition + 30);
      
      ctx.font = `${index === 0 ? '24' : '20'}px Lexend, sans-serif`;
      ctx.fillText(`Confianza: ${confidence}%`, 60, yPosition + 58);

      yPosition += 70;
    });

    // Footer
    yPosition += 30;
    
    // Estado de verificación
    if (selectedCase.status === 'verified') {
      ctx.fillStyle = '#10b981';
      ctx.font = 'bold 20px Lexend, sans-serif';
      ctx.fillText(`✓ Verificado por ${selectedCase.humanVerifiers} especialistas`, 40, yPosition);
      yPosition += 30;
    }
    
    ctx.fillStyle = '#666666';
    ctx.font = '16px Lexend, sans-serif';
    const reportDate = new Date(selectedCase.submittedAt).toLocaleDateString('es-CO', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
    ctx.fillText(`Reportado: ${reportDate}`, 40, yPosition);
    
    yPosition += 30;
    ctx.fillStyle = '#000000';
    ctx.font = 'bold 18px Lexend, sans-serif';
    ctx.fillText('Verificado por Botilito - Análisis desinfodémico con IA', 40, yPosition);
  };

  // Descargar imagen
  const handleDownloadImage = () => {
    if (!selectedCase) return;
    
    generateDiagnosticImage();
    
    setTimeout(() => {
      const canvas = canvasRef.current;
      if (!canvas) return;

      canvas.toBlob((blob) => {
        if (!blob) return;
        
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.download = `botilito-caso-${selectedCase.id}.png`;
        link.href = url;
        link.click();
        URL.revokeObjectURL(url);
      });
    }, 100);
  };

  // Compartir en redes sociales
  const shareOnTwitter = () => {
    if (!selectedCase) return;
    const topMarker = selectedCase.aiAnalysis.markersDetected[0];
    const markerText = topMarker ? `${topMarker.type} (${(topMarker.confidence * 100).toFixed(0)}%)` : 'contenido analizado';
    const title = selectedCase.headline || selectedCase.title;
    const text = `🔍 Botilito detectó: ${markerText}\n${title ? `\n"${title}"\n` : ''}\nCaso: ${selectedCase.id}\n#Botilito #VerificaciónDeFechos #Desinformación`;
    const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
    window.open(url, '_blank');
  };

  const shareOnFacebook = () => {
    const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`;
    window.open(url, '_blank');
  };

  const shareOnWhatsApp = () => {
    if (!selectedCase) return;
    const topMarker = selectedCase.aiAnalysis.markersDetected[0];
    const markerText = topMarker ? `${topMarker.type} (${(topMarker.confidence * 100).toFixed(0)}%)` : 'contenido analizado';
    const title = selectedCase.headline || selectedCase.title;
    const text = `🔍 *Botilito* detectó: *${markerText}*\n${title ? `\n"${title}"\n` : ''}\nCaso: ${selectedCase.id}\n\nVerificación completa de desinformación con IA`;
    const url = `https://wa.me/?text=${encodeURIComponent(text)}`;
    window.open(url, '_blank');
  };

  const shareOnLinkedIn = () => {
    const url = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(window.location.href)}`;
    window.open(url, '_blank');
  };

  // Si hay un caso seleccionado, mostrar vista de detalle
  if (selectedCase) {
    return (
      <div className="space-y-6">
        {/* Mensaje de Botilito */}
        <div className="bg-[#ffe97a] border-2 border-[#ffda00] rounded-lg p-4 shadow-lg">
          <div className="flex items-center space-x-4">
            <img 
              src={botilitoImage} 
              alt="Botilito" 
              className="w-24 h-24 object-contain mt-[0px] mr-[16px] mb-[-18px] ml-[0px]"
            />
            <div className="flex-1">
              <p className="text-xl">
                ¡Ey parcero! Acá tienes el diagnóstico completo de este caso 🔬👀
              </p>
              <p className="text-sm mt-1 opacity-80">
                {selectedCase.status === 'verified' 
                  ? 'Este caso ya fue verificado por especialistas humanos. Puedes revisar el análisis y las estrategias de inmunización.' 
                  : 'Este caso solo tiene análisis de IA. Si quieres, puedes enviarlo a verificación humana.'}
              </p>
            </div>
          </div>
        </div>

        {/* Canvas oculto para generar la imagen */}
        <canvas ref={canvasRef} style={{ display: 'none' }} />

        {/* Detalle del caso */}
        <Card>
          <CardHeader>
            {/* Botón de volver */}
            <div className="mb-4">
              <Button
                variant="outline"
                size="sm"
                onClick={() => setSelectedCaseId(null)}
              >
                <ArrowLeft className="h-4 w-4 mr-2" />
                Volver al historial
              </Button>
            </div>

            {/* Franja unificada con toda la info del caso */}
            <div className="flex items-center justify-between gap-4 bg-gradient-to-r from-primary/10 via-secondary/10 to-primary/10 px-6 py-4 rounded-lg border-2 border-primary/30">
              {/* Código del caso */}
              <div className="flex items-center space-x-2">
                <div className="p-2 bg-primary/20 rounded-lg">
                  <Shield className="h-5 w-5 text-primary" />
                </div>
                <div>
                  <p className="text-xs text-muted-foreground">Código del Caso</p>
                  <p className="font-mono font-medium text-sm">{selectedCase.id}</p>
                  {selectedCase.displayId && (
                    <p className="text-xs text-muted-foreground mt-0.5">ID: {selectedCase.displayId}</p>
                  )}
                </div>
              </div>

              <Separator orientation="vertical" className="h-12" />

              {/* Prioridad */}
              <div>
                <p className="text-xs text-muted-foreground mb-1">Prioridad</p>
                {getPriorityBadge(selectedCase.priority)}
              </div>

              <Separator orientation="vertical" className="h-12" />

              {/* Reportado por */}
              <div className="flex items-center space-x-2">
                <div className="p-2 bg-blue-100 rounded-lg">
                  <User className="h-4 w-4 text-blue-600" />
                </div>
                <div>
                  <p className="text-xs text-muted-foreground">Reportado por</p>
                  <p className="text-sm font-medium">{selectedCase.submittedBy}</p>
                </div>
              </div>

              <Separator orientation="vertical" className="h-12" />

              {/* Fecha de reporte */}
              <div className="flex items-center space-x-2">
                <div className="p-2 bg-emerald-100 rounded-lg">
                  <Calendar className="h-4 w-4 text-emerald-600" />
                </div>
                <div>
                  <p className="text-xs text-muted-foreground">Fecha de reporte</p>
                  <p className="text-sm font-medium">
                    {new Date(selectedCase.submittedAt).toLocaleDateString('es-CO', {
                      day: 'numeric',
                      month: 'short',
                      year: 'numeric',
                      hour: '2-digit',
                      minute: '2-digit'
                    })}
                  </p>
                </div>
              </div>
            </div>
          </CardHeader>
          <CardContent className="space-y-6">
            {/* Contenido del caso */}
            <div>
              <div className="p-4 bg-secondary/30 border-2 border-secondary/60 rounded-lg space-y-3">
                {/* Captura con marcadores */}
                {selectedCase.screenshot && (
                  <div>
                    <Label>Captura del contenido:</Label>
                    <div className="mt-2 rounded-lg overflow-hidden border-2 border-secondary/40 relative max-h-48">
                      <img 
                        src={selectedCase.screenshot} 
                        alt="Captura" 
                        className="w-full h-48 object-cover object-top"
                      />
                      

                    </div>
                  </div>
                )}
                
                {/* Fuente y tema */}
                {(selectedCase.source || selectedCase.theme) && (
                  <div className="flex flex-wrap items-center gap-4 pb-2">
                    {selectedCase.source && (
                      <div className="flex items-center space-x-2">
                        <Newspaper className="h-4 w-4 text-primary" />
                        <Label className="text-sm">Fuente:</Label>
                        <Badge variant="outline" className="text-xs border-primary/40 bg-primary/10">
                          {selectedCase.source.name}
                        </Badge>
                      </div>
                    )}
                    
                    {selectedCase.theme && (
                      <div className="flex items-center space-x-2">
                        <Tag className="h-4 w-4 text-primary" />
                        <Label className="text-sm">Tema:</Label>
                        <Badge variant="outline" className="text-xs border-primary/40 bg-primary/10">
                          {selectedCase.theme}
                        </Badge>
                      </div>
                    )}
                  </div>
                )}
                
                {/* Titular */}
                {selectedCase.headline && (
                  <div>
                    <Label>Titular:</Label>
                    <div className="mt-1 p-3 bg-primary/20 border border-primary/40 rounded-lg">
                      <p className="font-medium">{selectedCase.headline}</p>
                    </div>
                  </div>
                )}
                
                {/* Contenido */}
                <div>
                  <Label>Contenido analizado:</Label>
                  <p className="text-sm text-muted-foreground mt-1 leading-relaxed">
                    {selectedCase.content}
                  </p>
                </div>
              </div>

              {/* Evaluación epidemiológica */}
              {(caseDetails?.evaluacion_epidemiologica || selectedCase.aiAnalysis.summary) && (
                <div className="mt-6">
                  <h4>Evaluación epidemiológica:</h4>
                  <p className="text-sm text-muted-foreground mt-1">
                    {caseDetails?.evaluacion_epidemiologica || selectedCase.aiAnalysis.summary}
                  </p>
                </div>
              )}
            </div>

            {/* Análisis Unificado: IA + Humano */}
            <div>
              <Label className="flex items-center space-x-2 mb-3">
                <Activity className="h-4 w-4 text-primary" />
                <span>Análisis del Caso</span>
              </Label>
              
              <div className="p-4 bg-gradient-to-r from-blue-50 to-emerald-50 border-2 border-blue-200 rounded-lg space-y-4">
                {/* Fila de participantes */}
                <div className="flex items-center justify-between">
                  <div className="flex items-center space-x-6">
                    {/* Análisis IA */}
                    <div className="flex items-center space-x-2">
                      <div className="p-2 bg-blue-100 rounded-lg">
                        <Bot className="h-5 w-5 text-blue-600" />
                      </div>
                      <div>
                        <p className="text-xs text-muted-foreground">Analizado por IA</p>
                        <p className="text-sm font-medium">
                          {caseDetails?.analisis_del_caso?.participantes?.ia || 'Botilito'}
                        </p>
                      </div>
                    </div>

                    <Separator orientation="vertical" className="h-12" />

                    {/* Análisis Humano */}
                    <div className="flex items-center space-x-2">
                      <div className="p-2 bg-emerald-100 rounded-lg">
                        <Users className="h-5 w-5 text-emerald-600" />
                      </div>
                      <div>
                        <p className="text-xs text-muted-foreground">Red de Epidemiólogos</p>
                        <p className="text-sm font-medium">
                          {caseDetails?.analisis_del_caso?.participantes?.humanos_conteo
                            ? `${caseDetails.analisis_del_caso.participantes.humanos_conteo} epidemiólogos participaron`
                            : selectedCase.status === 'verified'
                              ? `${selectedCase.humanVerifiers} epidemiólogos participaron`
                              : 'Pendiente verificación humana'
                          }
                        </p>
                      </div>
                    </div>
                  </div>

                  {(caseDetails?.analisis_del_caso?.verificado_el || (selectedCase.status === 'verified' && selectedCase.verifiedAt)) && (
                    <div className="text-right">
                      <p className="text-xs text-muted-foreground">Verificado el</p>
                      <p className="text-sm font-medium">
                        {new Date(caseDetails?.analisis_del_caso?.verificado_el || selectedCase.verifiedAt).toLocaleDateString('es-CO', {
                          day: 'numeric',
                          month: 'short',
                          year: 'numeric'
                        })}
                      </p>
                    </div>
                  )}
                </div>

                <Separator />

                {/* Marcadores detectados unificados (IA + Red Humana) */}
                <div>
                  <Label className="text-sm mb-2">Marcadores de diagnóstico detectados:</Label>
                  {loadingDetails ? (
                    <div className="text-sm text-muted-foreground">Cargando marcadores...</div>
                  ) : (
                    <div className="flex flex-wrap gap-2 mt-2">
                      {(() => {
                        // Get pre-merged marcadores from case-detail endpoint
                        const marcadores = caseDetails?.analisis_del_caso?.marcadores || [];

                        if (marcadores.length === 0) {
                          // Fallback to summary data if no marcadores available
                          return selectedCase.aiAnalysis.markersDetected.map((m: any, idx: number) => {
                            const marcadorId = m.type.toLowerCase().replace(/\s+/g, '_').replace(/\//g, '_');
                            const marcador = getMarcador(marcadorId);
                            if (!marcador) return null;
                            const Icon = marcador.icon;
                            const confidence = Math.round(m.confidence * 100);

                            return (
                              <span key={idx} className="inline-flex items-center space-x-1 px-2 py-1 rounded-md border bg-white border-gray-200 text-xs">
                                <Icon className="h-3 w-3 text-muted-foreground" />
                                <span>{marcador.label}</span>
                                <span className="font-medium text-muted-foreground">
                                  {confidence}%
                                </span>
                              </span>
                            );
                          });
                        }

                        // Use pre-merged marcadores from case-detail endpoint
                        // marcadores = [{ label: "Falso", confidence: 92 }, ...]
                        return marcadores.map((marker: any, idx: number) => {
                          // Map label name to marcador ID
                          const marcadorId = marker.label.toLowerCase().replace(/\s+/g, '_').replace(/\//g, '_');
                          const marcador = getMarcador(marcadorId);

                          if (!marcador) {
                            // Render unknown marker with default styling
                            return (
                              <span key={idx} className="inline-flex items-center space-x-1 px-2 py-1 rounded-md border bg-white border-gray-200 text-xs">
                                <AlertCircle className="h-3 w-3 text-muted-foreground" />
                                <span>{marker.label}</span>
                                <span className="font-medium text-muted-foreground">
                                  {marker.confidence}%
                                </span>
                              </span>
                            );
                          }

                          const Icon = marcador.icon;

                          // Color coding based on confidence
                          const getConfidenceColor = (pct: number) => {
                            if (pct >= 80) return 'text-red-600 bg-red-50 border-red-300';
                            if (pct >= 60) return 'text-orange-600 bg-orange-50 border-orange-300';
                            if (pct >= 40) return 'text-yellow-600 bg-yellow-50 border-yellow-300';
                            return 'text-blue-600 bg-blue-50 border-blue-300';
                          };

                          return (
                            <span key={idx} className={`inline-flex items-center space-x-1 px-2 py-1 rounded-md border text-xs ${getConfidenceColor(marker.confidence)}`}>
                              <Icon className="h-3 w-3" />
                              <span className="font-medium">{marcador.label}</span>
                              <span className="font-bold">
                                {marker.confidence}%
                              </span>
                            </span>
                          );
                        });
                      })()}
                    </div>
                  )}
                </div>

                {/* Problemas identificados */}
                {(caseDetails?.analisis_del_caso?.problemas_identificados?.length > 0 || (selectedCase.aiAnalysis.issues && selectedCase.aiAnalysis.issues.length > 0)) && (
                  <div>
                    <Label className="text-sm mb-2">Problemas identificados:</Label>
                    <ul className="list-disc list-inside space-y-1 text-sm text-muted-foreground">
                      {(caseDetails?.analisis_del_caso?.problemas_identificados || selectedCase.aiAnalysis.issues || []).map((issue: string, idx: number) => (
                        <li key={idx}>{issue}</li>
                      ))}
                    </ul>
                  </div>
                )}

                {/* Nivel de confianza */}
                <div>
                  <Label className="text-sm mb-2">Nivel de confianza del análisis IA:</Label>
                  <div className="flex items-center space-x-3">
                    <div className="flex-1 bg-white rounded-full h-3 border border-blue-200">
                      <div
                        className="bg-blue-500 h-full rounded-full transition-all"
                        style={{ width: `${caseDetails?.analisis_del_caso?.nivel_de_confianza_ia || (selectedCase.aiAnalysis.confidence * 100)}%` }}
                      />
                    </div>
                    <span className="text-sm font-medium">
                      {caseDetails?.analisis_del_caso?.nivel_de_confianza_ia || (selectedCase.aiAnalysis.confidence * 100).toFixed(0)}%
                    </span>
                  </div>
                </div>
              </div>
            </div>

            {/* Estrategias de Inmunización */}
            {selectedCase.status === 'verified' && (
              <div>
                <Label className="flex items-center space-x-2 mb-3">
                  <Syringe className="h-4 w-4 text-primary" />
                  <span>Estrategias de Inmunización Desarrolladas</span>
                </Label>
                
                {/* Franja de inmunizadores */}
                <div className="p-4 bg-gradient-to-r from-purple-50 to-blue-50 border-2 border-purple-200 rounded-lg mb-4">
                  <div className="flex items-center space-x-2">
                    <div className="p-2 bg-purple-100 rounded-lg">
                      <Users className="h-5 w-5 text-purple-600" />
                    </div>
                    <div>
                      <p className="text-xs text-muted-foreground">Red de Inmunizadores</p>
                      <p className="text-sm font-medium">
                        {vaccines.length > 0 
                          ? `${vaccines.length * 2} inmunizadores participaron en el desarrollo`
                          : 'Pendiente desarrollo de estrategias'
                        }
                      </p>
                    </div>
                  </div>
                </div>

                <div className="space-y-4">
                  {vaccines.map((vaccine) => (
                    <div key={vaccine.id} className="p-4 bg-blue-50 border-2 border-blue-200 rounded-lg">
                      <div className="flex items-start justify-between mb-3">
                        <div className="flex-1">
                          <h4 className="font-medium text-blue-900">{vaccine.title}</h4>
                          <p className="text-sm text-blue-700 mt-1">{vaccine.description}</p>
                        </div>
                        <Badge 
                          variant="outline" 
                          className={`ml-2 ${
                            vaccine.status === 'active' 
                              ? 'bg-green-100 text-green-700 border-green-300' 
                              : 'bg-gray-100 text-gray-700 border-gray-300'
                          }`}
                        >
                          {vaccine.status === 'active' ? 'Activa' : 'Inactiva'}
                        </Badge>
                      </div>
                      
                      <div className="grid grid-cols-2 gap-4 text-sm">
                        <div>
                          <span className="text-blue-600">Formato:</span>
                          <span className="ml-2 font-medium">{vaccine.format}</span>
                        </div>
                        <div>
                          <span className="text-blue-600">Alcance:</span>
                          <span className="ml-2 font-medium">{vaccine.reach}</span>
                        </div>
                        <div>
                          <span className="text-blue-600">Engagement:</span>
                          <span className="ml-2 font-medium">{vaccine.engagement}</span>
                        </div>
                        <div>
                          <span className="text-blue-600">Plataformas:</span>
                          <div className="flex flex-wrap gap-1 mt-1">
                            {vaccine.platforms.map((platform: string, idx: number) => (
                              <Badge key={idx} variant="outline" className="text-xs bg-white">
                                {platform}
                              </Badge>
                            ))}
                          </div>
                        </div>
                      </div>
                    </div>
                  ))}

                  {vaccines.length === 0 && (
                    <div className="text-center p-8 border-2 border-dashed border-gray-300 rounded-lg">
                      <Syringe className="h-12 w-12 text-gray-400 mx-auto mb-3" />
                      <p className="text-sm text-muted-foreground">
                        Aún no se han desarrollado estrategias de inmunización para este caso
                      </p>
                    </div>
                  )}
                </div>
              </div>
            )}

            {/* Compartir y Descargar */}
            <div className="pt-4 border-t">
              <Label className="flex items-center space-x-2 mb-3">
                <Share2 className="h-4 w-4 text-primary" />
                <span>Compartir Diagnóstico</span>
              </Label>
              
              <div className="space-y-4">
                {/* Botón de descargar */}
                <div>
                  <Button
                    onClick={handleDownloadImage}
                    className="w-full bg-primary hover:bg-primary/90 text-primary-foreground"
                  >
                    <Download className="h-4 w-4 mr-2" />
                    Descargar imagen del diagnóstico
                  </Button>
                </div>

                {/* Botones de compartir en redes */}
                <div>
                  <p className="text-sm text-muted-foreground mb-2">Compartir en redes sociales:</p>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-2">
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={shareOnTwitter}
                      className="flex items-center justify-center space-x-2"
                    >
                      <Twitter className="h-4 w-4" />
                      <span>Twitter</span>
                    </Button>
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={shareOnFacebook}
                      className="flex items-center justify-center space-x-2"
                    >
                      <Facebook className="h-4 w-4" />
                      <span>Facebook</span>
                    </Button>
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={shareOnWhatsApp}
                      className="flex items-center justify-center space-x-2"
                    >
                      <MessageCircle className="h-4 w-4" />
                      <span>WhatsApp</span>
                    </Button>
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={shareOnLinkedIn}
                      className="flex items-center justify-center space-x-2"
                    >
                      <Linkedin className="h-4 w-4" />
                      <span>LinkedIn</span>
                    </Button>
                  </div>
                </div>
              </div>
            </div>
          </CardContent>
        </Card>
      </div>
    );
  }

  // Vista de lista de casos (por defecto)
  return (
    <div className="space-y-6">
      {/* Mensaje de Botilito */}
      <div className="bg-[#ffe97a] border-2 border-[#ffda00] rounded-lg p-4 shadow-lg">
        <div className="flex items-center space-x-4">
          <img 
            src={botilitoImage} 
            alt="Botilito" 
            className="w-24 h-24 object-contain mt-[0px] mr-[16px] mb-[-18px] ml-[0px]"
          />
          <div className="flex-1">
            <p className="text-xl">
              ¡Ey parcero! Acá está el historial de todos los casos que he analizado 📊🔍
            </p>
            <p className="text-sm mt-1 opacity-80">
              Puedes filtrar por estado, tipo de contenido y buscar lo que necesites. Los casos verificados ya pasaron por diagnóstico humano. ¡Échale un ojo! 👀
            </p>
          </div>
        </div>
      </div>

      {/* Título */}
      <div>
        <h1>Historial de Casos</h1>
        <p className="text-muted-foreground">
          Registro completo de todos los contenidos analizados por Botilito
        </p>
      </div>

      {/* Estadísticas rápidas */}
      <div className="grid gap-4 md:grid-cols-4">
        <Card>
          <CardContent className="p-4">
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-primary/10 rounded">
                <Bot className="h-4 w-4 text-primary" />
              </div>
              <div>
                <p className="text-2xl">{historialCasos.length}</p>
                <p className="text-sm text-muted-foreground">Total Casos</p>
              </div>
            </div>
          </CardContent>
        </Card>

        <Card>
          <CardContent className="p-4">
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-emerald-100 rounded">
                <CheckCircle className="h-4 w-4 text-emerald-600" />
              </div>
              <div>
                <p className="text-2xl">{historialCasos.filter(c => c.status === 'verified').length}</p>
                <p className="text-sm text-muted-foreground">Verificados</p>
              </div>
            </div>
          </CardContent>
        </Card>

        <Card>
          <CardContent className="p-4">
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-blue-100 rounded">
                <Bot className="h-4 w-4 text-blue-600" />
              </div>
              <div>
                <p className="text-2xl">{historialCasos.filter(c => c.status === 'ai_only').length}</p>
                <p className="text-sm text-muted-foreground">Solo IA</p>
              </div>
            </div>
          </CardContent>
        </Card>

        <Card>
          <CardContent className="p-4">
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-red-100 rounded">
                <XCircle className="h-4 w-4 text-red-600" />
              </div>
              <div>
                <p className="text-2xl">
                  {historialCasos.filter(c => 
                    c.aiAnalysis.veracity === 'Falso' || 
                    c.aiAnalysis.veracity === 'Engañoso'
                  ).length}
                </p>
                <p className="text-sm text-muted-foreground">Desinformación</p>
              </div>
            </div>
          </CardContent>
        </Card>
      </div>

      {/* Lista de casos */}
      <Card>
        <CardHeader>
          <div className="flex items-center justify-between">
            <div>
              <CardTitle className="flex items-center space-x-2 text-[24px]">
                <Layers className="h-5 w-5 text-primary" />
                <span>Listado de Casos Históricos</span>
              </CardTitle>
              <CardDescription>
                Todos los contenidos procesados y su estado de verificación
              </CardDescription>
            </div>
            <Badge variant="outline" className="bg-yellow-50 text-yellow-700 border-yellow-200">
              <Hash className="h-3 w-3 mr-1" />
              {filteredCasos.length} casos
            </Badge>
          </div>

          {/* Búsqueda y filtros */}
          <div className="flex space-x-2 mt-4">
            <div className="relative flex-1">
              <Search className="absolute left-3 top-2.5 h-4 w-4 text-muted-foreground" />
              <Input
                placeholder="Buscar por título, contenido o código de caso..."
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
                className="pl-10 border border-gray-300"
              />
            </div>
            <div className="flex items-center space-x-2">
              <Filter className="h-4 w-4 text-muted-foreground" />
              <select 
                value={selectedFilter} 
                onChange={(e) => {
                  setSelectedFilter(e.target.value);
                  setCurrentPage(1);
                }}
                className="px-3 py-2 border rounded-md text-sm bg-background"
              >
                <option value="all">Todos los casos</option>
                <option value="verified">Verificados por humanos</option>
                <option value="ai_only">Solo análisis IA</option>
                <option value="text">Solo texto</option>
                <option value="image">Solo imágenes</option>
                <option value="video">Solo videos</option>
                <option value="audio">Solo audios</option>
              </select>
            </div>
          </div>
        </CardHeader>
        <CardContent className="space-y-4">
          {/* Lista con scroll */}
          <div className="space-y-4 max-h-[700px] min-h-[500px] overflow-y-auto custom-scrollbar">
            {currentCases.map((caso) => {
              const TypeIcon = getTypeIcon(caso.type);
              
              return (
                <div
                  key={caso.id}
                  className="p-4 border rounded-lg cursor-pointer transition-all duration-200 bg-gray-50/50 hover:bg-accent hover:shadow-md hover:border-primary/50"
                  onClick={() => setSelectedCaseId(caso.id)}
                >
                  <div className="flex items-start justify-between space-x-3">
                    <div className="flex items-start space-x-3 flex-1">
                      <div className="p-3 bg-muted rounded-lg">
                        <TypeIcon className="h-6 w-6 text-muted-foreground" />
                      </div>
                      <div className="space-y-2 flex-1">
                        <div className="flex items-center justify-between">
                          <div className="flex items-center space-x-2">
                            <Badge variant="outline" className="text-xs bg-white border-primary/30 font-mono">
                              Caso: {caso.id}
                            </Badge>
                            <h4 className="font-medium text-sm">{caso.title}</h4>
                          </div>
                        </div>
                        
                        <div className="space-y-1">
                          {/* Fecha y usuario */}
                          <div className="flex items-center flex-wrap gap-x-3 gap-y-1 text-xs text-muted-foreground">
                            <div className="flex items-center space-x-1">
                              <Calendar className="h-3 w-3" />
                              <span>
                                {new Date(caso.submittedAt).toLocaleDateString('es-CO', { 
                                  year: 'numeric', 
                                  month: 'short', 
                                  day: 'numeric',
                                  hour: '2-digit',
                                  minute: '2-digit'
                                })}
                                <span className="ml-1">
                                  (hace {Math.floor((Date.now() - new Date(caso.submittedAt).getTime()) / (1000 * 60 * 60 * 24))} días)
                                </span>
                              </span>
                            </div>
                            
                            <Separator orientation="vertical" className="h-3" />
                            
                            <div className="flex items-center space-x-1">
                              <User className="h-3 w-3" />
                              <span>Reportado por: <span className="font-medium">{caso.submittedBy}</span></span>
                            </div>
                          </div>
                          
                          {/* Verificadores humanos */}
                          {caso.humanVerifiers > 0 && (
                            <div className="flex items-center space-x-1 text-xs text-muted-foreground">
                              <Shield className="h-3 w-3 text-emerald-600" />
                              <span>{caso.humanVerifiers} verificadores humanos</span>
                            </div>
                          )}
                          
                          {/* Marcadores detectados */}
                          <div className="flex flex-wrap gap-2 mt-2">
                            {caso.aiAnalysis.markersDetected.map((marker: any, idx: number) => (
                              <Badge 
                                key={idx} 
                                variant="outline" 
                                className="text-[10px] px-2 py-0.5"
                              >
                                {marker.type} • {(marker.confidence * 100).toFixed(0)}%
                              </Badge>
                            ))}
                          </div>
                        </div>
                      </div>
                    </div>
                    
                    <div className="flex flex-col items-end space-y-2">
                      {getVeracityBadge(caso.aiAnalysis.veracity)}
                      {getStatusBadge(caso.status)}
                      <Button variant="outline" size="sm" className="mt-2">
                        <Eye className="h-3 w-3 mr-1" />
                        Ver Detalles
                      </Button>
                    </div>
                  </div>
                </div>
              );
            })}
          </div>

          {/* Paginación */}
          {totalPages > 1 && (
            <div className="flex items-center justify-center space-x-2 pt-4 border-t">
              <Button
                variant="outline"
                size="sm"
                onClick={() => setCurrentPage(p => Math.max(1, p - 1))}
                disabled={currentPage === 1}
              >
                Anterior
              </Button>
              <span className="text-sm text-muted-foreground">
                Página {currentPage} de {totalPages}
              </span>
              <Button
                variant="outline"
                size="sm"
                onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))}
                disabled={currentPage === totalPages}
              >
                Siguiente
              </Button>
            </div>
          )}
        </CardContent>
      </Card>

      {/* Sin resultados */}
      {filteredCasos.length === 0 && (
        <Card>
          <CardContent className="p-8 text-center">
            <Bot className="mx-auto h-12 w-12 text-muted-foreground mb-4" />
            <h3>No se encontraron casos</h3>
            <p className="text-muted-foreground">
              No hay casos que coincidan con los filtros seleccionados.
            </p>
          </CardContent>
        </Card>
      )}
    </div>
  );
}
 - - - - - - - - - - - - 
src/components/GlobalNotifications.tsx

import React, { useState } from 'react';
import { Button } from './ui/button';
import { Badge } from './ui/badge';
import { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuLabel, DropdownMenuSeparator, DropdownMenuTrigger } from './ui/dropdown-menu';
import { ScrollArea } from './ui/scroll-area';
import { 
  Bell, 
  AlertTriangle, 
  CheckCircle, 
  Info, 
  Users, 
  Bot, 
  Brain,
  Shield,
  Clock,
  X,
  MoreHorizontal
} from 'lucide-react';
import { motion, AnimatePresence } from 'motion/react';

interface Notification {
  id: string;
  type: 'critical' | 'warning' | 'info' | 'success' | 'system';
  title: string;
  message: string;
  timestamp: string;
  source: 'dashboard' | 'ai-analysis' | 'verification' | 'upload' | 'system';
  read: boolean;
  actionable?: boolean;
}

export function GlobalNotifications() {
  const [notifications, setNotifications] = useState<Notification[]>([
    {
      id: '1',
      type: 'critical',
      title: 'Brote epidemiológico detectado',
      message: 'Incremento del 45% en casos de desinformación médica en Región Andina',
      timestamp: 'hace 12 min',
      source: 'dashboard',
      read: false,
      actionable: true
    },
    {
      id: '2',
      type: 'warning',
      title: 'Patrón anómalo en redes sociales',
      message: 'IA detectó campaña coordinada de desinformación en WhatsApp',
      timestamp: 'hace 25 min',
      source: 'ai-analysis',
      read: false,
      actionable: true
    },
    {
      id: '3',
      type: 'success',
      title: 'Verificación completada',
      message: 'Contenido analizado y marcado como veraz - ID: #VER-2024-1089',
      timestamp: 'hace 1h',
      source: 'verification',
      read: true,
      actionable: false
    },
    {
      id: '4',
      type: 'info',
      title: 'Nuevo contenido para analizar',
      message: 'Se ha subido un video para análisis de veracidad',
      timestamp: 'hace 2h',
      source: 'upload',
      read: true,
      actionable: true
    },
    {
      id: '5',
      type: 'system',
      title: 'Actualización del sistema',
      message: 'Nuevas funcionalidades de IA disponibles',
      timestamp: 'hace 3h',
      source: 'system',
      read: true,
      actionable: false
    },
    {
      id: '6',
      type: 'warning',
      title: 'Tasa de verificación baja',
      message: 'Solo 67% de contenidos verificados en las últimas 24h',
      timestamp: 'hace 4h',
      source: 'dashboard',
      read: true,
      actionable: true
    },
    {
      id: '7',
      type: 'info',
      title: 'Informe semanal disponible',
      message: 'Reporte de actividad epidemiológica listo para descarga',
      timestamp: 'hace 6h',
      source: 'dashboard',
      read: true,
      actionable: true
    }
  ]);

  const unreadCount = notifications.filter(n => !n.read).length;

  const getNotificationIcon = (type: string) => {
    switch (type) {
      case 'critical': return <AlertTriangle className="h-4 w-4 text-red-500" />;
      case 'warning': return <AlertTriangle className="h-4 w-4 text-orange-500" />;
      case 'success': return <CheckCircle className="h-4 w-4 text-green-500" />;
      case 'info': return <Info className="h-4 w-4 text-blue-500" />;
      case 'system': return <Bot className="h-4 w-4 text-purple-500" />;
      default: return <Bell className="h-4 w-4" />;
    }
  };

  const getSourceIcon = (source: string) => {
    switch (source) {
      case 'dashboard': return <Shield className="h-3 w-3" />;
      case 'ai-analysis': return <Brain className="h-3 w-3" />;
      case 'verification': return <Users className="h-3 w-3" />;
      case 'upload': return <Bot className="h-3 w-3" />;
      case 'system': return <Bot className="h-3 w-3" />;
      default: return <Bell className="h-3 w-3" />;
    }
  };

  const getSourceLabel = (source: string) => {
    switch (source) {
      case 'dashboard': return 'Centro de Control';
      case 'ai-analysis': return 'Análisis IA';
      case 'verification': return 'Verificación';
      case 'upload': return 'Subida de Contenido';
      case 'system': return 'Sistema';
      default: return 'Botilito';
    }
  };

  const markAsRead = (id: string) => {
    setNotifications(prev => 
      prev.map(n => n.id === id ? { ...n, read: true } : n)
    );
  };

  const markAllAsRead = () => {
    setNotifications(prev => 
      prev.map(n => ({ ...n, read: true }))
    );
  };

  const removeNotification = (id: string) => {
    setNotifications(prev => prev.filter(n => n.id !== id));
  };

  const clearAllNotifications = () => {
    setNotifications([]);
  };

  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button variant="ghost" className="relative h-10 w-10 rounded-full p-0">
          <Bell className="h-5 w-5" />
          <AnimatePresence>
            {unreadCount > 0 && (
              <motion.div
                initial={{ scale: 0 }}
                animate={{ scale: 1 }}
                exit={{ scale: 0 }}
                className="absolute -top-1 -right-1"
              >
                <Badge 
                  variant="destructive" 
                  className="h-5 w-5 rounded-full p-0 text-xs flex items-center justify-center animate-pulse"
                >
                  {unreadCount > 9 ? '9+' : unreadCount}
                </Badge>
              </motion.div>
            )}
          </AnimatePresence>
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent className="w-96" align="end" forceMount>
        <DropdownMenuLabel className="font-normal">
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-2">
              <Bell className="h-4 w-4" />
              <span>Notificaciones</span>
              {unreadCount > 0 && (
                <Badge variant="secondary" className="text-xs">
                  {unreadCount} nuevas
                </Badge>
              )}
            </div>
            <div className="flex items-center space-x-1">
              {unreadCount > 0 && (
                <Button
                  variant="ghost"
                  size="sm"
                  onClick={markAllAsRead}
                  className="h-6 px-2 text-xs"
                >
                  Marcar todas como leídas
                </Button>
              )}
              <DropdownMenu>
                <DropdownMenuTrigger asChild>
                  <Button variant="ghost" size="sm" className="h-6 w-6 p-0">
                    <MoreHorizontal className="h-3 w-3" />
                  </Button>
                </DropdownMenuTrigger>
                <DropdownMenuContent align="end">
                  <DropdownMenuItem onClick={clearAllNotifications}>
                    <X className="mr-2 h-3 w-3" />
                    Limpiar todas
                  </DropdownMenuItem>
                </DropdownMenuContent>
              </DropdownMenu>
            </div>
          </div>
        </DropdownMenuLabel>
        <DropdownMenuSeparator />
        
        <ScrollArea className="h-96">
          <div className="space-y-1 p-1">
            {notifications.length === 0 ? (
              <div className="flex flex-col items-center justify-center py-8 text-center">
                <Bell className="h-12 w-12 text-muted-foreground/50 mb-3" />
                <p className="text-sm text-muted-foreground">No tienes notificaciones</p>
                <p className="text-xs text-muted-foreground">Te notificaremos cuando haya novedades</p>
              </div>
            ) : (
              notifications.map((notification) => (
                <motion.div
                  key={notification.id}
                  initial={{ opacity: 0, y: 10 }}
                  animate={{ opacity: 1, y: 0 }}
                  exit={{ opacity: 0, y: -10 }}
                  className={`relative p-3 rounded-lg border transition-all duration-200 hover:bg-muted/50 cursor-pointer ${
                    !notification.read 
                      ? 'bg-blue-50/50 border-blue-200 hover:bg-blue-50' 
                      : 'bg-background border-border'
                  }`}
                  onClick={() => markAsRead(notification.id)}
                >
                  <div className="flex items-start space-x-3">
                    <div className="flex-shrink-0 mt-0.5">
                      {getNotificationIcon(notification.type)}
                    </div>
                    
                    <div className="flex-1 min-w-0">
                      <div className="flex items-start justify-between mb-1">
                        <p className={`text-sm ${!notification.read ? 'font-medium' : 'font-normal'}`}>
                          {notification.title}
                        </p>
                        <div className="flex items-center space-x-1 ml-2">
                          {!notification.read && (
                            <div className="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></div>
                          )}
                          <Button
                            variant="ghost"
                            size="sm"
                            onClick={(e) => {
                              e.stopPropagation();
                              removeNotification(notification.id);
                            }}
                            className="h-5 w-5 p-0 opacity-0 group-hover:opacity-100 hover:bg-red-100"
                          >
                            <X className="h-3 w-3" />
                          </Button>
                        </div>
                      </div>
                      
                      <p className="text-xs text-muted-foreground mb-2 line-clamp-2">
                        {notification.message}
                      </p>
                      
                      <div className="flex items-center justify-between">
                        <div className="flex items-center space-x-1 text-xs text-muted-foreground">
                          {getSourceIcon(notification.source)}
                          <span>{getSourceLabel(notification.source)}</span>
                          <span>•</span>
                          <Clock className="h-3 w-3" />
                          <span>{notification.timestamp}</span>
                        </div>
                        
                        {notification.actionable && (
                          <Button
                            variant="outline"
                            size="sm"
                            className="h-6 px-2 text-xs"
                            onClick={(e) => {
                              e.stopPropagation();
                              // Aquí puedes agregar lógica para acciones específicas
                            }}
                          >
                            Ver detalles
                          </Button>
                        )}
                      </div>
                    </div>
                  </div>
                </motion.div>
              ))
            )}
          </div>
        </ScrollArea>
        
        {notifications.length > 0 && (
          <>
            <DropdownMenuSeparator />
            <div className="p-2">
              <Button
                variant="ghost"
                className="w-full text-sm text-muted-foreground hover:text-foreground"
                onClick={() => {
                  // Aquí puedes navegar a una página de notificaciones completa si la implementas
                }}
              >
                Ver todas las notificaciones
              </Button>
            </div>
          </>
        )}
      </DropdownMenuContent>
    </DropdownMenu>
  );
} - - - - - - - - - - - - 
src/components/components/ui/aspect-ratio.tsx

"use client";

import * as AspectRatioPrimitive from "@radix-ui/react-aspect-ratio@1.1.2";

function AspectRatio({
  ...props
}: React.ComponentProps<typeof AspectRatioPrimitive.Root>) {
  return <AspectRatioPrimitive.Root data-slot="aspect-ratio" {...props} />;
}

export { AspectRatio };
 - - - - - - - - - - - - 
src/components/components/ui/alert-dialog.tsx

"use client";

import * as React from "react";
import * as AlertDialogPrimitive from "@radix-ui/react-alert-dialog@1.1.6";

import { cn } from "./utils";
import { buttonVariants } from "./button";

function AlertDialog({
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Root>) {
  return <AlertDialogPrimitive.Root data-slot="alert-dialog" {...props} />;
}

function AlertDialogTrigger({
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Trigger>) {
  return (
    <AlertDialogPrimitive.Trigger data-slot="alert-dialog-trigger" {...props} />
  );
}

function AlertDialogPortal({
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Portal>) {
  return (
    <AlertDialogPrimitive.Portal data-slot="alert-dialog-portal" {...props} />
  );
}

function AlertDialogOverlay({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Overlay>) {
  return (
    <AlertDialogPrimitive.Overlay
      data-slot="alert-dialog-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className,
      )}
      {...props}
    />
  );
}

function AlertDialogContent({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Content>) {
  return (
    <AlertDialogPortal>
      <AlertDialogOverlay />
      <AlertDialogPrimitive.Content
        data-slot="alert-dialog-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",
          className,
        )}
        {...props}
      />
    </AlertDialogPortal>
  );
}

function AlertDialogHeader({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="alert-dialog-header"
      className={cn("flex flex-col gap-2 text-center sm:text-left", className)}
      {...props}
    />
  );
}

function AlertDialogFooter({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="alert-dialog-footer"
      className={cn(
        "flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",
        className,
      )}
      {...props}
    />
  );
}

function AlertDialogTitle({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Title>) {
  return (
    <AlertDialogPrimitive.Title
      data-slot="alert-dialog-title"
      className={cn("text-lg font-semibold", className)}
      {...props}
    />
  );
}

function AlertDialogDescription({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Description>) {
  return (
    <AlertDialogPrimitive.Description
      data-slot="alert-dialog-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  );
}

function AlertDialogAction({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Action>) {
  return (
    <AlertDialogPrimitive.Action
      className={cn(buttonVariants(), className)}
      {...props}
    />
  );
}

function AlertDialogCancel({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Cancel>) {
  return (
    <AlertDialogPrimitive.Cancel
      className={cn(buttonVariants({ variant: "outline" }), className)}
      {...props}
    />
  );
}

export {
  AlertDialog,
  AlertDialogPortal,
  AlertDialogOverlay,
  AlertDialogTrigger,
  AlertDialogContent,
  AlertDialogHeader,
  AlertDialogFooter,
  AlertDialogTitle,
  AlertDialogDescription,
  AlertDialogAction,
  AlertDialogCancel,
};
 - - - - - - - - - - - - 
src/components/components/ui/pagination.tsx

import * as React from "react";
import {
  ChevronLeftIcon,
  ChevronRightIcon,
  MoreHorizontalIcon,
} from "lucide-react@0.487.0";

import { cn } from "./utils";
import { Button, buttonVariants } from "./button";

function Pagination({ className, ...props }: React.ComponentProps<"nav">) {
  return (
    <nav
      role="navigation"
      aria-label="pagination"
      data-slot="pagination"
      className={cn("mx-auto flex w-full justify-center", className)}
      {...props}
    />
  );
}

function PaginationContent({
  className,
  ...props
}: React.ComponentProps<"ul">) {
  return (
    <ul
      data-slot="pagination-content"
      className={cn("flex flex-row items-center gap-1", className)}
      {...props}
    />
  );
}

function PaginationItem({ ...props }: React.ComponentProps<"li">) {
  return <li data-slot="pagination-item" {...props} />;
}

type PaginationLinkProps = {
  isActive?: boolean;
} & Pick<React.ComponentProps<typeof Button>, "size"> &
  React.ComponentProps<"a">;

function PaginationLink({
  className,
  isActive,
  size = "icon",
  ...props
}: PaginationLinkProps) {
  return (
    <a
      aria-current={isActive ? "page" : undefined}
      data-slot="pagination-link"
      data-active={isActive}
      className={cn(
        buttonVariants({
          variant: isActive ? "outline" : "ghost",
          size,
        }),
        className,
      )}
      {...props}
    />
  );
}

function PaginationPrevious({
  className,
  ...props
}: React.ComponentProps<typeof PaginationLink>) {
  return (
    <PaginationLink
      aria-label="Go to previous page"
      size="default"
      className={cn("gap-1 px-2.5 sm:pl-2.5", className)}
      {...props}
    >
      <ChevronLeftIcon />
      <span className="hidden sm:block">Previous</span>
    </PaginationLink>
  );
}

function PaginationNext({
  className,
  ...props
}: React.ComponentProps<typeof PaginationLink>) {
  return (
    <PaginationLink
      aria-label="Go to next page"
      size="default"
      className={cn("gap-1 px-2.5 sm:pr-2.5", className)}
      {...props}
    >
      <span className="hidden sm:block">Next</span>
      <ChevronRightIcon />
    </PaginationLink>
  );
}

function PaginationEllipsis({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      aria-hidden
      data-slot="pagination-ellipsis"
      className={cn("flex size-9 items-center justify-center", className)}
      {...props}
    >
      <MoreHorizontalIcon className="size-4" />
      <span className="sr-only">More pages</span>
    </span>
  );
}

export {
  Pagination,
  PaginationContent,
  PaginationLink,
  PaginationItem,
  PaginationPrevious,
  PaginationNext,
  PaginationEllipsis,
};
 - - - - - - - - - - - - 
src/components/components/ui/tabs.tsx

"use client";

import * as React from "react";
import * as TabsPrimitive from "@radix-ui/react-tabs@1.1.3";

import { cn } from "./utils";

function Tabs({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Root>) {
  return (
    <TabsPrimitive.Root
      data-slot="tabs"
      className={cn("flex flex-col gap-2", className)}
      {...props}
    />
  );
}

function TabsList({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.List>) {
  return (
    <TabsPrimitive.List
      data-slot="tabs-list"
      className={cn(
        "bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",
        className,
      )}
      {...props}
    />
  );
}

function TabsTrigger({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {
  return (
    <TabsPrimitive.Trigger
      data-slot="tabs-trigger"
      className={cn(
        "data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function TabsContent({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Content>) {
  return (
    <TabsPrimitive.Content
      data-slot="tabs-content"
      className={cn("flex-1 outline-none", className)}
      {...props}
    />
  );
}

export { Tabs, TabsList, TabsTrigger, TabsContent };
 - - - - - - - - - - - - 
src/components/components/ui/card.tsx

import * as React from "react";

import { cn } from "./utils";

function Card({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card"
      className={cn(
        "bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",
        className,
      )}
      {...props}
    />
  );
}

function CardHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card-header"
      className={cn(
        "@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",
        className,
      )}
      {...props}
    />
  );
}

function CardTitle({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <h4
      data-slot="card-title"
      className={cn("leading-none", className)}
      {...props}
    />
  );
}

function CardDescription({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <p
      data-slot="card-description"
      className={cn("text-muted-foreground", className)}
      {...props}
    />
  );
}

function CardAction({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card-action"
      className={cn(
        "col-start-2 row-span-2 row-start-1 self-start justify-self-end",
        className,
      )}
      {...props}
    />
  );
}

function CardContent({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card-content"
      className={cn("px-6 [&:last-child]:pb-6", className)}
      {...props}
    />
  );
}

function CardFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card-footer"
      className={cn("flex items-center px-6 pb-6 [.border-t]:pt-6", className)}
      {...props}
    />
  );
}

export {
  Card,
  CardHeader,
  CardFooter,
  CardTitle,
  CardAction,
  CardDescription,
  CardContent,
};
 - - - - - - - - - - - - 
src/components/components/ui/slider.tsx

"use client";

import * as React from "react";
import * as SliderPrimitive from "@radix-ui/react-slider@1.2.3";

import { cn } from "./utils";

function Slider({
  className,
  defaultValue,
  value,
  min = 0,
  max = 100,
  ...props
}: React.ComponentProps<typeof SliderPrimitive.Root>) {
  const _values = React.useMemo(
    () =>
      Array.isArray(value)
        ? value
        : Array.isArray(defaultValue)
          ? defaultValue
          : [min, max],
    [value, defaultValue, min, max],
  );

  return (
    <SliderPrimitive.Root
      data-slot="slider"
      defaultValue={defaultValue}
      value={value}
      min={min}
      max={max}
      className={cn(
        "relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",
        className,
      )}
      {...props}
    >
      <SliderPrimitive.Track
        data-slot="slider-track"
        className={cn(
          "bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5",
        )}
      >
        <SliderPrimitive.Range
          data-slot="slider-range"
          className={cn(
            "bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full",
          )}
        />
      </SliderPrimitive.Track>
      {Array.from({ length: _values.length }, (_, index) => (
        <SliderPrimitive.Thumb
          data-slot="slider-thumb"
          key={index}
          className="border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"
        />
      ))}
    </SliderPrimitive.Root>
  );
}

export { Slider };
 - - - - - - - - - - - - 
src/components/components/ui/popover.tsx

"use client";

import * as React from "react";
import * as PopoverPrimitive from "@radix-ui/react-popover@1.1.6";

import { cn } from "./utils";

function Popover({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Root>) {
  return <PopoverPrimitive.Root data-slot="popover" {...props} />;
}

function PopoverTrigger({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {
  return <PopoverPrimitive.Trigger data-slot="popover-trigger" {...props} />;
}

function PopoverContent({
  className,
  align = "center",
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Content>) {
  return (
    <PopoverPrimitive.Portal>
      <PopoverPrimitive.Content
        data-slot="popover-content"
        align={align}
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",
          className,
        )}
        {...props}
      />
    </PopoverPrimitive.Portal>
  );
}

function PopoverAnchor({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) {
  return <PopoverPrimitive.Anchor data-slot="popover-anchor" {...props} />;
}

export { Popover, PopoverTrigger, PopoverContent, PopoverAnchor };
 - - - - - - - - - - - - 
src/components/components/ui/progress.tsx

"use client";

import * as React from "react";
import * as ProgressPrimitive from "@radix-ui/react-progress@1.1.2";

import { cn } from "./utils";

function Progress({
  className,
  value,
  ...props
}: React.ComponentProps<typeof ProgressPrimitive.Root>) {
  return (
    <ProgressPrimitive.Root
      data-slot="progress"
      className={cn(
        "bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",
        className,
      )}
      {...props}
    >
      <ProgressPrimitive.Indicator
        data-slot="progress-indicator"
        className="bg-primary h-full w-full flex-1 transition-all"
        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}
      />
    </ProgressPrimitive.Root>
  );
}

export { Progress };
 - - - - - - - - - - - - 
src/components/components/ui/input-otp.tsx

"use client";

import * as React from "react";
import { OTPInput, OTPInputContext } from "input-otp@1.4.2";
import { MinusIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function InputOTP({
  className,
  containerClassName,
  ...props
}: React.ComponentProps<typeof OTPInput> & {
  containerClassName?: string;
}) {
  return (
    <OTPInput
      data-slot="input-otp"
      containerClassName={cn(
        "flex items-center gap-2 has-disabled:opacity-50",
        containerClassName,
      )}
      className={cn("disabled:cursor-not-allowed", className)}
      {...props}
    />
  );
}

function InputOTPGroup({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="input-otp-group"
      className={cn("flex items-center gap-1", className)}
      {...props}
    />
  );
}

function InputOTPSlot({
  index,
  className,
  ...props
}: React.ComponentProps<"div"> & {
  index: number;
}) {
  const inputOTPContext = React.useContext(OTPInputContext);
  const { char, hasFakeCaret, isActive } = inputOTPContext?.slots[index] ?? {};

  return (
    <div
      data-slot="input-otp-slot"
      data-active={isActive}
      className={cn(
        "data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm bg-input-background transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",
        className,
      )}
      {...props}
    >
      {char}
      {hasFakeCaret && (
        <div className="pointer-events-none absolute inset-0 flex items-center justify-center">
          <div className="animate-caret-blink bg-foreground h-4 w-px duration-1000" />
        </div>
      )}
    </div>
  );
}

function InputOTPSeparator({ ...props }: React.ComponentProps<"div">) {
  return (
    <div data-slot="input-otp-separator" role="separator" {...props}>
      <MinusIcon />
    </div>
  );
}

export { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator };
 - - - - - - - - - - - - 
src/components/components/ui/chart.tsx

"use client";

import * as React from "react";
import * as RechartsPrimitive from "recharts@2.15.2";

import { cn } from "./utils";

// Format: { THEME_NAME: CSS_SELECTOR }
const THEMES = { light: "", dark: ".dark" } as const;

export type ChartConfig = {
  [k in string]: {
    label?: React.ReactNode;
    icon?: React.ComponentType;
  } & (
    | { color?: string; theme?: never }
    | { color?: never; theme: Record<keyof typeof THEMES, string> }
  );
};

type ChartContextProps = {
  config: ChartConfig;
};

const ChartContext = React.createContext<ChartContextProps | null>(null);

function useChart() {
  const context = React.useContext(ChartContext);

  if (!context) {
    throw new Error("useChart must be used within a <ChartContainer />");
  }

  return context;
}

function ChartContainer({
  id,
  className,
  children,
  config,
  ...props
}: React.ComponentProps<"div"> & {
  config: ChartConfig;
  children: React.ComponentProps<
    typeof RechartsPrimitive.ResponsiveContainer
  >["children"];
}) {
  const uniqueId = React.useId();
  const chartId = `chart-${id || uniqueId.replace(/:/g, "")}`;

  return (
    <ChartContext.Provider value={{ config }}>
      <div
        data-slot="chart"
        data-chart={chartId}
        className={cn(
          "[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",
          className,
        )}
        {...props}
      >
        <ChartStyle id={chartId} config={config} />
        <RechartsPrimitive.ResponsiveContainer>
          {children}
        </RechartsPrimitive.ResponsiveContainer>
      </div>
    </ChartContext.Provider>
  );
}

const ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {
  const colorConfig = Object.entries(config).filter(
    ([, config]) => config.theme || config.color,
  );

  if (!colorConfig.length) {
    return null;
  }

  return (
    <style
      dangerouslySetInnerHTML={{
        __html: Object.entries(THEMES)
          .map(
            ([theme, prefix]) => `
${prefix} [data-chart=${id}] {
${colorConfig
  .map(([key, itemConfig]) => {
    const color =
      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||
      itemConfig.color;
    return color ? `  --color-${key}: ${color};` : null;
  })
  .join("\n")}
}
`,
          )
          .join("\n"),
      }}
    />
  );
};

const ChartTooltip = RechartsPrimitive.Tooltip;

function ChartTooltipContent({
  active,
  payload,
  className,
  indicator = "dot",
  hideLabel = false,
  hideIndicator = false,
  label,
  labelFormatter,
  labelClassName,
  formatter,
  color,
  nameKey,
  labelKey,
}: React.ComponentProps<typeof RechartsPrimitive.Tooltip> &
  React.ComponentProps<"div"> & {
    hideLabel?: boolean;
    hideIndicator?: boolean;
    indicator?: "line" | "dot" | "dashed";
    nameKey?: string;
    labelKey?: string;
  }) {
  const { config } = useChart();

  const tooltipLabel = React.useMemo(() => {
    if (hideLabel || !payload?.length) {
      return null;
    }

    const [item] = payload;
    const key = `${labelKey || item?.dataKey || item?.name || "value"}`;
    const itemConfig = getPayloadConfigFromPayload(config, item, key);
    const value =
      !labelKey && typeof label === "string"
        ? config[label as keyof typeof config]?.label || label
        : itemConfig?.label;

    if (labelFormatter) {
      return (
        <div className={cn("font-medium", labelClassName)}>
          {labelFormatter(value, payload)}
        </div>
      );
    }

    if (!value) {
      return null;
    }

    return <div className={cn("font-medium", labelClassName)}>{value}</div>;
  }, [
    label,
    labelFormatter,
    payload,
    hideLabel,
    labelClassName,
    config,
    labelKey,
  ]);

  if (!active || !payload?.length) {
    return null;
  }

  const nestLabel = payload.length === 1 && indicator !== "dot";

  return (
    <div
      className={cn(
        "border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl",
        className,
      )}
    >
      {!nestLabel ? tooltipLabel : null}
      <div className="grid gap-1.5">
        {payload.map((item, index) => {
          const key = `${nameKey || item.name || item.dataKey || "value"}`;
          const itemConfig = getPayloadConfigFromPayload(config, item, key);
          const indicatorColor = color || item.payload.fill || item.color;

          return (
            <div
              key={item.dataKey}
              className={cn(
                "[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5",
                indicator === "dot" && "items-center",
              )}
            >
              {formatter && item?.value !== undefined && item.name ? (
                formatter(item.value, item.name, item, index, item.payload)
              ) : (
                <>
                  {itemConfig?.icon ? (
                    <itemConfig.icon />
                  ) : (
                    !hideIndicator && (
                      <div
                        className={cn(
                          "shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)",
                          {
                            "h-2.5 w-2.5": indicator === "dot",
                            "w-1": indicator === "line",
                            "w-0 border-[1.5px] border-dashed bg-transparent":
                              indicator === "dashed",
                            "my-0.5": nestLabel && indicator === "dashed",
                          },
                        )}
                        style={
                          {
                            "--color-bg": indicatorColor,
                            "--color-border": indicatorColor,
                          } as React.CSSProperties
                        }
                      />
                    )
                  )}
                  <div
                    className={cn(
                      "flex flex-1 justify-between leading-none",
                      nestLabel ? "items-end" : "items-center",
                    )}
                  >
                    <div className="grid gap-1.5">
                      {nestLabel ? tooltipLabel : null}
                      <span className="text-muted-foreground">
                        {itemConfig?.label || item.name}
                      </span>
                    </div>
                    {item.value && (
                      <span className="text-foreground font-mono font-medium tabular-nums">
                        {item.value.toLocaleString()}
                      </span>
                    )}
                  </div>
                </>
              )}
            </div>
          );
        })}
      </div>
    </div>
  );
}

const ChartLegend = RechartsPrimitive.Legend;

function ChartLegendContent({
  className,
  hideIcon = false,
  payload,
  verticalAlign = "bottom",
  nameKey,
}: React.ComponentProps<"div"> &
  Pick<RechartsPrimitive.LegendProps, "payload" | "verticalAlign"> & {
    hideIcon?: boolean;
    nameKey?: string;
  }) {
  const { config } = useChart();

  if (!payload?.length) {
    return null;
  }

  return (
    <div
      className={cn(
        "flex items-center justify-center gap-4",
        verticalAlign === "top" ? "pb-3" : "pt-3",
        className,
      )}
    >
      {payload.map((item) => {
        const key = `${nameKey || item.dataKey || "value"}`;
        const itemConfig = getPayloadConfigFromPayload(config, item, key);

        return (
          <div
            key={item.value}
            className={cn(
              "[&>svg]:text-muted-foreground flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3",
            )}
          >
            {itemConfig?.icon && !hideIcon ? (
              <itemConfig.icon />
            ) : (
              <div
                className="h-2 w-2 shrink-0 rounded-[2px]"
                style={{
                  backgroundColor: item.color,
                }}
              />
            )}
            {itemConfig?.label}
          </div>
        );
      })}
    </div>
  );
}

// Helper to extract item config from a payload.
function getPayloadConfigFromPayload(
  config: ChartConfig,
  payload: unknown,
  key: string,
) {
  if (typeof payload !== "object" || payload === null) {
    return undefined;
  }

  const payloadPayload =
    "payload" in payload &&
    typeof payload.payload === "object" &&
    payload.payload !== null
      ? payload.payload
      : undefined;

  let configLabelKey: string = key;

  if (
    key in payload &&
    typeof payload[key as keyof typeof payload] === "string"
  ) {
    configLabelKey = payload[key as keyof typeof payload] as string;
  } else if (
    payloadPayload &&
    key in payloadPayload &&
    typeof payloadPayload[key as keyof typeof payloadPayload] === "string"
  ) {
    configLabelKey = payloadPayload[
      key as keyof typeof payloadPayload
    ] as string;
  }

  return configLabelKey in config
    ? config[configLabelKey]
    : config[key as keyof typeof config];
}

export {
  ChartContainer,
  ChartTooltip,
  ChartTooltipContent,
  ChartLegend,
  ChartLegendContent,
  ChartStyle,
};
 - - - - - - - - - - - - 
src/components/components/ui/hover-card.tsx

"use client";

import * as React from "react";
import * as HoverCardPrimitive from "@radix-ui/react-hover-card@1.1.6";

import { cn } from "./utils";

function HoverCard({
  ...props
}: React.ComponentProps<typeof HoverCardPrimitive.Root>) {
  return <HoverCardPrimitive.Root data-slot="hover-card" {...props} />;
}

function HoverCardTrigger({
  ...props
}: React.ComponentProps<typeof HoverCardPrimitive.Trigger>) {
  return (
    <HoverCardPrimitive.Trigger data-slot="hover-card-trigger" {...props} />
  );
}

function HoverCardContent({
  className,
  align = "center",
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof HoverCardPrimitive.Content>) {
  return (
    <HoverCardPrimitive.Portal data-slot="hover-card-portal">
      <HoverCardPrimitive.Content
        data-slot="hover-card-content"
        align={align}
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-64 origin-(--radix-hover-card-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",
          className,
        )}
        {...props}
      />
    </HoverCardPrimitive.Portal>
  );
}

export { HoverCard, HoverCardTrigger, HoverCardContent };
 - - - - - - - - - - - - 
src/components/components/ui/sheet.tsx

"use client";

import * as React from "react";
import * as SheetPrimitive from "@radix-ui/react-dialog@1.1.6";
import { XIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function Sheet({ ...props }: React.ComponentProps<typeof SheetPrimitive.Root>) {
  return <SheetPrimitive.Root data-slot="sheet" {...props} />;
}

function SheetTrigger({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Trigger>) {
  return <SheetPrimitive.Trigger data-slot="sheet-trigger" {...props} />;
}

function SheetClose({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Close>) {
  return <SheetPrimitive.Close data-slot="sheet-close" {...props} />;
}

function SheetPortal({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Portal>) {
  return <SheetPrimitive.Portal data-slot="sheet-portal" {...props} />;
}

function SheetOverlay({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Overlay>) {
  return (
    <SheetPrimitive.Overlay
      data-slot="sheet-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className,
      )}
      {...props}
    />
  );
}

function SheetContent({
  className,
  children,
  side = "right",
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Content> & {
  side?: "top" | "right" | "bottom" | "left";
}) {
  return (
    <SheetPortal>
      <SheetOverlay />
      <SheetPrimitive.Content
        data-slot="sheet-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",
          side === "right" &&
            "data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",
          side === "left" &&
            "data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",
          side === "top" &&
            "data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",
          side === "bottom" &&
            "data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",
          className,
        )}
        {...props}
      >
        {children}
        <SheetPrimitive.Close className="ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none">
          <XIcon className="size-4" />
          <span className="sr-only">Close</span>
        </SheetPrimitive.Close>
      </SheetPrimitive.Content>
    </SheetPortal>
  );
}

function SheetHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sheet-header"
      className={cn("flex flex-col gap-1.5 p-4", className)}
      {...props}
    />
  );
}

function SheetFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sheet-footer"
      className={cn("mt-auto flex flex-col gap-2 p-4", className)}
      {...props}
    />
  );
}

function SheetTitle({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Title>) {
  return (
    <SheetPrimitive.Title
      data-slot="sheet-title"
      className={cn("text-foreground font-semibold", className)}
      {...props}
    />
  );
}

function SheetDescription({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Description>) {
  return (
    <SheetPrimitive.Description
      data-slot="sheet-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  );
}

export {
  Sheet,
  SheetTrigger,
  SheetClose,
  SheetContent,
  SheetHeader,
  SheetFooter,
  SheetTitle,
  SheetDescription,
};
 - - - - - - - - - - - - 
src/components/components/ui/scroll-area.tsx

"use client";

import * as React from "react";
import * as ScrollAreaPrimitive from "@radix-ui/react-scroll-area@1.2.3";

import { cn } from "./utils";

function ScrollArea({
  className,
  children,
  ...props
}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {
  return (
    <ScrollAreaPrimitive.Root
      data-slot="scroll-area"
      className={cn("relative", className)}
      {...props}
    >
      <ScrollAreaPrimitive.Viewport
        data-slot="scroll-area-viewport"
        className="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1"
      >
        {children}
      </ScrollAreaPrimitive.Viewport>
      <ScrollBar />
      <ScrollAreaPrimitive.Corner />
    </ScrollAreaPrimitive.Root>
  );
}

function ScrollBar({
  className,
  orientation = "vertical",
  ...props
}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {
  return (
    <ScrollAreaPrimitive.ScrollAreaScrollbar
      data-slot="scroll-area-scrollbar"
      orientation={orientation}
      className={cn(
        "flex touch-none p-px transition-colors select-none",
        orientation === "vertical" &&
          "h-full w-2.5 border-l border-l-transparent",
        orientation === "horizontal" &&
          "h-2.5 flex-col border-t border-t-transparent",
        className,
      )}
      {...props}
    >
      <ScrollAreaPrimitive.ScrollAreaThumb
        data-slot="scroll-area-thumb"
        className="bg-border relative flex-1 rounded-full"
      />
    </ScrollAreaPrimitive.ScrollAreaScrollbar>
  );
}

export { ScrollArea, ScrollBar };
 - - - - - - - - - - - - 
src/components/components/ui/resizable.tsx

"use client";

import * as React from "react";
import { GripVerticalIcon } from "lucide-react@0.487.0";
import * as ResizablePrimitive from "react-resizable-panels@2.1.7";

import { cn } from "./utils";

function ResizablePanelGroup({
  className,
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) {
  return (
    <ResizablePrimitive.PanelGroup
      data-slot="resizable-panel-group"
      className={cn(
        "flex h-full w-full data-[panel-group-direction=vertical]:flex-col",
        className,
      )}
      {...props}
    />
  );
}

function ResizablePanel({
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.Panel>) {
  return <ResizablePrimitive.Panel data-slot="resizable-panel" {...props} />;
}

function ResizableHandle({
  withHandle,
  className,
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {
  withHandle?: boolean;
}) {
  return (
    <ResizablePrimitive.PanelResizeHandle
      data-slot="resizable-handle"
      className={cn(
        "bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",
        className,
      )}
      {...props}
    >
      {withHandle && (
        <div className="bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border">
          <GripVerticalIcon className="size-2.5" />
        </div>
      )}
    </ResizablePrimitive.PanelResizeHandle>
  );
}

export { ResizablePanelGroup, ResizablePanel, ResizableHandle };
 - - - - - - - - - - - - 
src/components/components/ui/label.tsx

"use client";

import * as React from "react";
import * as LabelPrimitive from "@radix-ui/react-label@2.1.2";

import { cn } from "./utils";

function Label({
  className,
  ...props
}: React.ComponentProps<typeof LabelPrimitive.Root>) {
  return (
    <LabelPrimitive.Root
      data-slot="label"
      className={cn(
        "flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",
        className,
      )}
      {...props}
    />
  );
}

export { Label };
 - - - - - - - - - - - - 
src/components/components/ui/sonner.tsx

"use client";

import { useTheme } from "next-themes@0.4.6";
import { Toaster as Sonner, ToasterProps } from "sonner@2.0.3";

const Toaster = ({ ...props }: ToasterProps) => {
  const { theme = "system" } = useTheme();

  return (
    <Sonner
      theme={theme as ToasterProps["theme"]}
      className="toaster group"
      style={
        {
          "--normal-bg": "var(--popover)",
          "--normal-text": "var(--popover-foreground)",
          "--normal-border": "var(--border)",
        } as React.CSSProperties
      }
      {...props}
    />
  );
};

export { Toaster };
 - - - - - - - - - - - - 
src/components/components/ui/navigation-menu.tsx

import * as React from "react";
import * as NavigationMenuPrimitive from "@radix-ui/react-navigation-menu@1.2.5";
import { cva } from "class-variance-authority@0.7.1";
import { ChevronDownIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function NavigationMenu({
  className,
  children,
  viewport = true,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Root> & {
  viewport?: boolean;
}) {
  return (
    <NavigationMenuPrimitive.Root
      data-slot="navigation-menu"
      data-viewport={viewport}
      className={cn(
        "group/navigation-menu relative flex max-w-max flex-1 items-center justify-center",
        className,
      )}
      {...props}
    >
      {children}
      {viewport && <NavigationMenuViewport />}
    </NavigationMenuPrimitive.Root>
  );
}

function NavigationMenuList({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.List>) {
  return (
    <NavigationMenuPrimitive.List
      data-slot="navigation-menu-list"
      className={cn(
        "group flex flex-1 list-none items-center justify-center gap-1",
        className,
      )}
      {...props}
    />
  );
}

function NavigationMenuItem({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Item>) {
  return (
    <NavigationMenuPrimitive.Item
      data-slot="navigation-menu-item"
      className={cn("relative", className)}
      {...props}
    />
  );
}

const navigationMenuTriggerStyle = cva(
  "group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=open]:hover:bg-accent data-[state=open]:text-accent-foreground data-[state=open]:focus:bg-accent data-[state=open]:bg-accent/50 focus-visible:ring-ring/50 outline-none transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1",
);

function NavigationMenuTrigger({
  className,
  children,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Trigger>) {
  return (
    <NavigationMenuPrimitive.Trigger
      data-slot="navigation-menu-trigger"
      className={cn(navigationMenuTriggerStyle(), "group", className)}
      {...props}
    >
      {children}{" "}
      <ChevronDownIcon
        className="relative top-[1px] ml-1 size-3 transition duration-300 group-data-[state=open]:rotate-180"
        aria-hidden="true"
      />
    </NavigationMenuPrimitive.Trigger>
  );
}

function NavigationMenuContent({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Content>) {
  return (
    <NavigationMenuPrimitive.Content
      data-slot="navigation-menu-content"
      className={cn(
        "data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 top-0 left-0 w-full p-2 pr-2.5 md:absolute md:w-auto",
        "group-data-[viewport=false]/navigation-menu:bg-popover group-data-[viewport=false]/navigation-menu:text-popover-foreground group-data-[viewport=false]/navigation-menu:data-[state=open]:animate-in group-data-[viewport=false]/navigation-menu:data-[state=closed]:animate-out group-data-[viewport=false]/navigation-menu:data-[state=closed]:zoom-out-95 group-data-[viewport=false]/navigation-menu:data-[state=open]:zoom-in-95 group-data-[viewport=false]/navigation-menu:data-[state=open]:fade-in-0 group-data-[viewport=false]/navigation-menu:data-[state=closed]:fade-out-0 group-data-[viewport=false]/navigation-menu:top-full group-data-[viewport=false]/navigation-menu:mt-1.5 group-data-[viewport=false]/navigation-menu:overflow-hidden group-data-[viewport=false]/navigation-menu:rounded-md group-data-[viewport=false]/navigation-menu:border group-data-[viewport=false]/navigation-menu:shadow group-data-[viewport=false]/navigation-menu:duration-200 **:data-[slot=navigation-menu-link]:focus:ring-0 **:data-[slot=navigation-menu-link]:focus:outline-none",
        className,
      )}
      {...props}
    />
  );
}

function NavigationMenuViewport({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Viewport>) {
  return (
    <div
      className={cn(
        "absolute top-full left-0 isolate z-50 flex justify-center",
      )}
    >
      <NavigationMenuPrimitive.Viewport
        data-slot="navigation-menu-viewport"
        className={cn(
          "origin-top-center bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border shadow md:w-[var(--radix-navigation-menu-viewport-width)]",
          className,
        )}
        {...props}
      />
    </div>
  );
}

function NavigationMenuLink({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Link>) {
  return (
    <NavigationMenuPrimitive.Link
      data-slot="navigation-menu-link"
      className={cn(
        "data-[active=true]:focus:bg-accent data-[active=true]:hover:bg-accent data-[active=true]:bg-accent/50 data-[active=true]:text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus-visible:ring-ring/50 [&_svg:not([class*='text-'])]:text-muted-foreground flex flex-col gap-1 rounded-sm p-2 text-sm transition-all outline-none focus-visible:ring-[3px] focus-visible:outline-1 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function NavigationMenuIndicator({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Indicator>) {
  return (
    <NavigationMenuPrimitive.Indicator
      data-slot="navigation-menu-indicator"
      className={cn(
        "data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden",
        className,
      )}
      {...props}
    >
      <div className="bg-border relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm shadow-md" />
    </NavigationMenuPrimitive.Indicator>
  );
}

export {
  NavigationMenu,
  NavigationMenuList,
  NavigationMenuItem,
  NavigationMenuContent,
  NavigationMenuTrigger,
  NavigationMenuLink,
  NavigationMenuIndicator,
  NavigationMenuViewport,
  navigationMenuTriggerStyle,
};
 - - - - - - - - - - - - 
src/components/components/ui/accordion.tsx

"use client";

import * as React from "react";
import * as AccordionPrimitive from "@radix-ui/react-accordion@1.2.3";
import { ChevronDownIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function Accordion({
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Root>) {
  return <AccordionPrimitive.Root data-slot="accordion" {...props} />;
}

function AccordionItem({
  className,
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Item>) {
  return (
    <AccordionPrimitive.Item
      data-slot="accordion-item"
      className={cn("border-b last:border-b-0", className)}
      {...props}
    />
  );
}

function AccordionTrigger({
  className,
  children,
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Trigger>) {
  return (
    <AccordionPrimitive.Header className="flex">
      <AccordionPrimitive.Trigger
        data-slot="accordion-trigger"
        className={cn(
          "focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",
          className,
        )}
        {...props}
      >
        {children}
        <ChevronDownIcon className="text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200" />
      </AccordionPrimitive.Trigger>
    </AccordionPrimitive.Header>
  );
}

function AccordionContent({
  className,
  children,
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Content>) {
  return (
    <AccordionPrimitive.Content
      data-slot="accordion-content"
      className="data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm"
      {...props}
    >
      <div className={cn("pt-0 pb-4", className)}>{children}</div>
    </AccordionPrimitive.Content>
  );
}

export { Accordion, AccordionItem, AccordionTrigger, AccordionContent };
 - - - - - - - - - - - - 
src/components/components/ui/drawer.tsx

"use client";

import * as React from "react";
import { Drawer as DrawerPrimitive } from "vaul@1.1.2";

import { cn } from "./utils";

function Drawer({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Root>) {
  return <DrawerPrimitive.Root data-slot="drawer" {...props} />;
}

function DrawerTrigger({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Trigger>) {
  return <DrawerPrimitive.Trigger data-slot="drawer-trigger" {...props} />;
}

function DrawerPortal({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Portal>) {
  return <DrawerPrimitive.Portal data-slot="drawer-portal" {...props} />;
}

function DrawerClose({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Close>) {
  return <DrawerPrimitive.Close data-slot="drawer-close" {...props} />;
}

function DrawerOverlay({
  className,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Overlay>) {
  return (
    <DrawerPrimitive.Overlay
      data-slot="drawer-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className,
      )}
      {...props}
    />
  );
}

function DrawerContent({
  className,
  children,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Content>) {
  return (
    <DrawerPortal data-slot="drawer-portal">
      <DrawerOverlay />
      <DrawerPrimitive.Content
        data-slot="drawer-content"
        className={cn(
          "group/drawer-content bg-background fixed z-50 flex h-auto flex-col",
          "data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b",
          "data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t",
          "data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm",
          "data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm",
          className,
        )}
        {...props}
      >
        <div className="bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block" />
        {children}
      </DrawerPrimitive.Content>
    </DrawerPortal>
  );
}

function DrawerHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="drawer-header"
      className={cn("flex flex-col gap-1.5 p-4", className)}
      {...props}
    />
  );
}

function DrawerFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="drawer-footer"
      className={cn("mt-auto flex flex-col gap-2 p-4", className)}
      {...props}
    />
  );
}

function DrawerTitle({
  className,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Title>) {
  return (
    <DrawerPrimitive.Title
      data-slot="drawer-title"
      className={cn("text-foreground font-semibold", className)}
      {...props}
    />
  );
}

function DrawerDescription({
  className,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Description>) {
  return (
    <DrawerPrimitive.Description
      data-slot="drawer-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  );
}

export {
  Drawer,
  DrawerPortal,
  DrawerOverlay,
  DrawerTrigger,
  DrawerClose,
  DrawerContent,
  DrawerHeader,
  DrawerFooter,
  DrawerTitle,
  DrawerDescription,
};
 - - - - - - - - - - - - 
src/components/components/ui/tooltip.tsx

"use client";

import * as React from "react";
import * as TooltipPrimitive from "@radix-ui/react-tooltip@1.1.8";

import { cn } from "./utils";

function TooltipProvider({
  delayDuration = 0,
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Provider>) {
  return (
    <TooltipPrimitive.Provider
      data-slot="tooltip-provider"
      delayDuration={delayDuration}
      {...props}
    />
  );
}

function Tooltip({
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Root>) {
  return (
    <TooltipProvider>
      <TooltipPrimitive.Root data-slot="tooltip" {...props} />
    </TooltipProvider>
  );
}

function TooltipTrigger({
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {
  return <TooltipPrimitive.Trigger data-slot="tooltip-trigger" {...props} />;
}

function TooltipContent({
  className,
  sideOffset = 0,
  children,
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Content>) {
  return (
    <TooltipPrimitive.Portal>
      <TooltipPrimitive.Content
        data-slot="tooltip-content"
        sideOffset={sideOffset}
        className={cn(
          "bg-white text-black border-2 border-[#ffda00] animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance shadow-lg",
          className,
        )}
        {...props}
      >
        {children}
        <TooltipPrimitive.Arrow className="bg-white fill-white z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px] border-[#ffda00]" />
      </TooltipPrimitive.Content>
    </TooltipPrimitive.Portal>
  );
}

export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider };
 - - - - - - - - - - - - 
src/components/components/ui/alert.tsx

import * as React from "react";
import { cva, type VariantProps } from "class-variance-authority@0.7.1";

import { cn } from "./utils";

const alertVariants = cva(
  "relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",
  {
    variants: {
      variant: {
        default: "bg-card text-card-foreground",
        destructive:
          "text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  },
);

function Alert({
  className,
  variant,
  ...props
}: React.ComponentProps<"div"> & VariantProps<typeof alertVariants>) {
  return (
    <div
      data-slot="alert"
      role="alert"
      className={cn(alertVariants({ variant }), className)}
      {...props}
    />
  );
}

function AlertTitle({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="alert-title"
      className={cn(
        "col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",
        className,
      )}
      {...props}
    />
  );
}

function AlertDescription({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="alert-description"
      className={cn(
        "text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",
        className,
      )}
      {...props}
    />
  );
}

export { Alert, AlertTitle, AlertDescription };
 - - - - - - - - - - - - 
src/components/components/ui/switch.tsx

"use client";

import * as React from "react";
import * as SwitchPrimitive from "@radix-ui/react-switch@1.1.3";

import { cn } from "./utils";

function Switch({
  className,
  ...props
}: React.ComponentProps<typeof SwitchPrimitive.Root>) {
  return (
    <SwitchPrimitive.Root
      data-slot="switch"
      className={cn(
        "peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
        className,
      )}
      {...props}
    >
      <SwitchPrimitive.Thumb
        data-slot="switch-thumb"
        className={cn(
          "bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0",
        )}
      />
    </SwitchPrimitive.Root>
  );
}

export { Switch };
 - - - - - - - - - - - - 
src/components/components/ui/calendar.tsx

"use client";

import * as React from "react";
import { ChevronLeft, ChevronRight } from "lucide-react@0.487.0";
import { DayPicker } from "react-day-picker@8.10.1";

import { cn } from "./utils";
import { buttonVariants } from "./button";

function Calendar({
  className,
  classNames,
  showOutsideDays = true,
  ...props
}: React.ComponentProps<typeof DayPicker>) {
  return (
    <DayPicker
      showOutsideDays={showOutsideDays}
      className={cn("p-3", className)}
      classNames={{
        months: "flex flex-col sm:flex-row gap-2",
        month: "flex flex-col gap-4",
        caption: "flex justify-center pt-1 relative items-center w-full",
        caption_label: "text-sm font-medium",
        nav: "flex items-center gap-1",
        nav_button: cn(
          buttonVariants({ variant: "outline" }),
          "size-7 bg-transparent p-0 opacity-50 hover:opacity-100",
        ),
        nav_button_previous: "absolute left-1",
        nav_button_next: "absolute right-1",
        table: "w-full border-collapse space-x-1",
        head_row: "flex",
        head_cell:
          "text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",
        row: "flex w-full mt-2",
        cell: cn(
          "relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-range-end)]:rounded-r-md",
          props.mode === "range"
            ? "[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md"
            : "[&:has([aria-selected])]:rounded-md",
        ),
        day: cn(
          buttonVariants({ variant: "ghost" }),
          "size-8 p-0 font-normal aria-selected:opacity-100",
        ),
        day_range_start:
          "day-range-start aria-selected:bg-primary aria-selected:text-primary-foreground",
        day_range_end:
          "day-range-end aria-selected:bg-primary aria-selected:text-primary-foreground",
        day_selected:
          "bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",
        day_today: "bg-accent text-accent-foreground",
        day_outside:
          "day-outside text-muted-foreground aria-selected:text-muted-foreground",
        day_disabled: "text-muted-foreground opacity-50",
        day_range_middle:
          "aria-selected:bg-accent aria-selected:text-accent-foreground",
        day_hidden: "invisible",
        ...classNames,
      }}
      components={{
        IconLeft: ({ className, ...props }) => (
          <ChevronLeft className={cn("size-4", className)} {...props} />
        ),
        IconRight: ({ className, ...props }) => (
          <ChevronRight className={cn("size-4", className)} {...props} />
        ),
      }}
      {...props}
    />
  );
}

export { Calendar };
 - - - - - - - - - - - - 
src/components/components/ui/breadcrumb.tsx

import * as React from "react";
import { Slot } from "@radix-ui/react-slot@1.1.2";
import { ChevronRight, MoreHorizontal } from "lucide-react@0.487.0";

import { cn } from "./utils";

function Breadcrumb({ ...props }: React.ComponentProps<"nav">) {
  return <nav aria-label="breadcrumb" data-slot="breadcrumb" {...props} />;
}

function BreadcrumbList({ className, ...props }: React.ComponentProps<"ol">) {
  return (
    <ol
      data-slot="breadcrumb-list"
      className={cn(
        "text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",
        className,
      )}
      {...props}
    />
  );
}

function BreadcrumbItem({ className, ...props }: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="breadcrumb-item"
      className={cn("inline-flex items-center gap-1.5", className)}
      {...props}
    />
  );
}

function BreadcrumbLink({
  asChild,
  className,
  ...props
}: React.ComponentProps<"a"> & {
  asChild?: boolean;
}) {
  const Comp = asChild ? Slot : "a";

  return (
    <Comp
      data-slot="breadcrumb-link"
      className={cn("hover:text-foreground transition-colors", className)}
      {...props}
    />
  );
}

function BreadcrumbPage({ className, ...props }: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="breadcrumb-page"
      role="link"
      aria-disabled="true"
      aria-current="page"
      className={cn("text-foreground font-normal", className)}
      {...props}
    />
  );
}

function BreadcrumbSeparator({
  children,
  className,
  ...props
}: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="breadcrumb-separator"
      role="presentation"
      aria-hidden="true"
      className={cn("[&>svg]:size-3.5", className)}
      {...props}
    >
      {children ?? <ChevronRight />}
    </li>
  );
}

function BreadcrumbEllipsis({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="breadcrumb-ellipsis"
      role="presentation"
      aria-hidden="true"
      className={cn("flex size-9 items-center justify-center", className)}
      {...props}
    >
      <MoreHorizontal className="size-4" />
      <span className="sr-only">More</span>
    </span>
  );
}

export {
  Breadcrumb,
  BreadcrumbList,
  BreadcrumbItem,
  BreadcrumbLink,
  BreadcrumbPage,
  BreadcrumbSeparator,
  BreadcrumbEllipsis,
};
 - - - - - - - - - - - - 
src/components/components/ui/radio-group.tsx

"use client";

import * as React from "react";
import * as RadioGroupPrimitive from "@radix-ui/react-radio-group@1.2.3";
import { CircleIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function RadioGroup({
  className,
  ...props
}: React.ComponentProps<typeof RadioGroupPrimitive.Root>) {
  return (
    <RadioGroupPrimitive.Root
      data-slot="radio-group"
      className={cn("grid gap-3", className)}
      {...props}
    />
  );
}

function RadioGroupItem({
  className,
  ...props
}: React.ComponentProps<typeof RadioGroupPrimitive.Item>) {
  return (
    <RadioGroupPrimitive.Item
      data-slot="radio-group-item"
      className={cn(
        "border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
        className,
      )}
      {...props}
    >
      <RadioGroupPrimitive.Indicator
        data-slot="radio-group-indicator"
        className="relative flex items-center justify-center"
      >
        <CircleIcon className="fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2" />
      </RadioGroupPrimitive.Indicator>
    </RadioGroupPrimitive.Item>
  );
}

export { RadioGroup, RadioGroupItem };
 - - - - - - - - - - - - 
src/components/components/ui/command.tsx

"use client";

import * as React from "react";
import { Command as CommandPrimitive } from "cmdk@1.1.1";
import { SearchIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
} from "./dialog";

function Command({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive>) {
  return (
    <CommandPrimitive
      data-slot="command"
      className={cn(
        "bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",
        className,
      )}
      {...props}
    />
  );
}

function CommandDialog({
  title = "Command Palette",
  description = "Search for a command to run...",
  children,
  ...props
}: React.ComponentProps<typeof Dialog> & {
  title?: string;
  description?: string;
}) {
  return (
    <Dialog {...props}>
      <DialogHeader className="sr-only">
        <DialogTitle>{title}</DialogTitle>
        <DialogDescription>{description}</DialogDescription>
      </DialogHeader>
      <DialogContent className="overflow-hidden p-0">
        <Command className="[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5">
          {children}
        </Command>
      </DialogContent>
    </Dialog>
  );
}

function CommandInput({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Input>) {
  return (
    <div
      data-slot="command-input-wrapper"
      className="flex h-9 items-center gap-2 border-b px-3"
    >
      <SearchIcon className="size-4 shrink-0 opacity-50" />
      <CommandPrimitive.Input
        data-slot="command-input"
        className={cn(
          "placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",
          className,
        )}
        {...props}
      />
    </div>
  );
}

function CommandList({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.List>) {
  return (
    <CommandPrimitive.List
      data-slot="command-list"
      className={cn(
        "max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",
        className,
      )}
      {...props}
    />
  );
}

function CommandEmpty({
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Empty>) {
  return (
    <CommandPrimitive.Empty
      data-slot="command-empty"
      className="py-6 text-center text-sm"
      {...props}
    />
  );
}

function CommandGroup({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Group>) {
  return (
    <CommandPrimitive.Group
      data-slot="command-group"
      className={cn(
        "text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",
        className,
      )}
      {...props}
    />
  );
}

function CommandSeparator({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Separator>) {
  return (
    <CommandPrimitive.Separator
      data-slot="command-separator"
      className={cn("bg-border -mx-1 h-px", className)}
      {...props}
    />
  );
}

function CommandItem({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Item>) {
  return (
    <CommandPrimitive.Item
      data-slot="command-item"
      className={cn(
        "data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function CommandShortcut({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="command-shortcut"
      className={cn(
        "text-muted-foreground ml-auto text-xs tracking-widest",
        className,
      )}
      {...props}
    />
  );
}

export {
  Command,
  CommandDialog,
  CommandInput,
  CommandList,
  CommandEmpty,
  CommandGroup,
  CommandItem,
  CommandShortcut,
  CommandSeparator,
};
 - - - - - - - - - - - - 
src/components/components/ui/toggle-group.tsx

"use client";

import * as React from "react";
import * as ToggleGroupPrimitive from "@radix-ui/react-toggle-group@1.1.2";
import { type VariantProps } from "class-variance-authority@0.7.1";

import { cn } from "./utils";
import { toggleVariants } from "./toggle";

const ToggleGroupContext = React.createContext<
  VariantProps<typeof toggleVariants>
>({
  size: "default",
  variant: "default",
});

function ToggleGroup({
  className,
  variant,
  size,
  children,
  ...props
}: React.ComponentProps<typeof ToggleGroupPrimitive.Root> &
  VariantProps<typeof toggleVariants>) {
  return (
    <ToggleGroupPrimitive.Root
      data-slot="toggle-group"
      data-variant={variant}
      data-size={size}
      className={cn(
        "group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs",
        className,
      )}
      {...props}
    >
      <ToggleGroupContext.Provider value={{ variant, size }}>
        {children}
      </ToggleGroupContext.Provider>
    </ToggleGroupPrimitive.Root>
  );
}

function ToggleGroupItem({
  className,
  children,
  variant,
  size,
  ...props
}: React.ComponentProps<typeof ToggleGroupPrimitive.Item> &
  VariantProps<typeof toggleVariants>) {
  const context = React.useContext(ToggleGroupContext);

  return (
    <ToggleGroupPrimitive.Item
      data-slot="toggle-group-item"
      data-variant={context.variant || variant}
      data-size={context.size || size}
      className={cn(
        toggleVariants({
          variant: context.variant || variant,
          size: context.size || size,
        }),
        "min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",
        className,
      )}
      {...props}
    >
      {children}
    </ToggleGroupPrimitive.Item>
  );
}

export { ToggleGroup, ToggleGroupItem };
 - - - - - - - - - - - - 
src/components/components/ui/avatar.tsx

"use client";

import * as React from "react";
import * as AvatarPrimitive from "@radix-ui/react-avatar@1.1.3";

import { cn } from "./utils";

function Avatar({
  className,
  ...props
}: React.ComponentProps<typeof AvatarPrimitive.Root>) {
  return (
    <AvatarPrimitive.Root
      data-slot="avatar"
      className={cn(
        "relative flex size-10 shrink-0 overflow-hidden rounded-full",
        className,
      )}
      {...props}
    />
  );
}

function AvatarImage({
  className,
  ...props
}: React.ComponentProps<typeof AvatarPrimitive.Image>) {
  return (
    <AvatarPrimitive.Image
      data-slot="avatar-image"
      className={cn("aspect-square size-full", className)}
      {...props}
    />
  );
}

function AvatarFallback({
  className,
  ...props
}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {
  return (
    <AvatarPrimitive.Fallback
      data-slot="avatar-fallback"
      className={cn(
        "bg-muted flex size-full items-center justify-center rounded-full",
        className,
      )}
      {...props}
    />
  );
}

export { Avatar, AvatarImage, AvatarFallback };
 - - - - - - - - - - - - 
src/components/components/ui/menubar.tsx

"use client";

import * as React from "react";
import * as MenubarPrimitive from "@radix-ui/react-menubar@1.1.6";
import { CheckIcon, ChevronRightIcon, CircleIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function Menubar({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Root>) {
  return (
    <MenubarPrimitive.Root
      data-slot="menubar"
      className={cn(
        "bg-background flex h-9 items-center gap-1 rounded-md border p-1 shadow-xs",
        className,
      )}
      {...props}
    />
  );
}

function MenubarMenu({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {
  return <MenubarPrimitive.Menu data-slot="menubar-menu" {...props} />;
}

function MenubarGroup({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Group>) {
  return <MenubarPrimitive.Group data-slot="menubar-group" {...props} />;
}

function MenubarPortal({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {
  return <MenubarPrimitive.Portal data-slot="menubar-portal" {...props} />;
}

function MenubarRadioGroup({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {
  return (
    <MenubarPrimitive.RadioGroup data-slot="menubar-radio-group" {...props} />
  );
}

function MenubarTrigger({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Trigger>) {
  return (
    <MenubarPrimitive.Trigger
      data-slot="menubar-trigger"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex items-center rounded-sm px-2 py-1 text-sm font-medium outline-hidden select-none",
        className,
      )}
      {...props}
    />
  );
}

function MenubarContent({
  className,
  align = "start",
  alignOffset = -4,
  sideOffset = 8,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Content>) {
  return (
    <MenubarPortal>
      <MenubarPrimitive.Content
        data-slot="menubar-content"
        align={align}
        alignOffset={alignOffset}
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[12rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-md",
          className,
        )}
        {...props}
      />
    </MenubarPortal>
  );
}

function MenubarItem({
  className,
  inset,
  variant = "default",
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Item> & {
  inset?: boolean;
  variant?: "default" | "destructive";
}) {
  return (
    <MenubarPrimitive.Item
      data-slot="menubar-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function MenubarCheckboxItem({
  className,
  children,
  checked,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.CheckboxItem>) {
  return (
    <MenubarPrimitive.CheckboxItem
      data-slot="menubar-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-xs py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      checked={checked}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <MenubarPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </MenubarPrimitive.ItemIndicator>
      </span>
      {children}
    </MenubarPrimitive.CheckboxItem>
  );
}

function MenubarRadioItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.RadioItem>) {
  return (
    <MenubarPrimitive.RadioItem
      data-slot="menubar-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-xs py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <MenubarPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </MenubarPrimitive.ItemIndicator>
      </span>
      {children}
    </MenubarPrimitive.RadioItem>
  );
}

function MenubarLabel({
  className,
  inset,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Label> & {
  inset?: boolean;
}) {
  return (
    <MenubarPrimitive.Label
      data-slot="menubar-label"
      data-inset={inset}
      className={cn(
        "px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",
        className,
      )}
      {...props}
    />
  );
}

function MenubarSeparator({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Separator>) {
  return (
    <MenubarPrimitive.Separator
      data-slot="menubar-separator"
      className={cn("bg-border -mx-1 my-1 h-px", className)}
      {...props}
    />
  );
}

function MenubarShortcut({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="menubar-shortcut"
      className={cn(
        "text-muted-foreground ml-auto text-xs tracking-widest",
        className,
      )}
      {...props}
    />
  );
}

function MenubarSub({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {
  return <MenubarPrimitive.Sub data-slot="menubar-sub" {...props} />;
}

function MenubarSubTrigger({
  className,
  inset,
  children,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.SubTrigger> & {
  inset?: boolean;
}) {
  return (
    <MenubarPrimitive.SubTrigger
      data-slot="menubar-sub-trigger"
      data-inset={inset}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-none select-none data-[inset]:pl-8",
        className,
      )}
      {...props}
    >
      {children}
      <ChevronRightIcon className="ml-auto h-4 w-4" />
    </MenubarPrimitive.SubTrigger>
  );
}

function MenubarSubContent({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.SubContent>) {
  return (
    <MenubarPrimitive.SubContent
      data-slot="menubar-sub-content"
      className={cn(
        "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",
        className,
      )}
      {...props}
    />
  );
}

export {
  Menubar,
  MenubarPortal,
  MenubarMenu,
  MenubarTrigger,
  MenubarContent,
  MenubarGroup,
  MenubarSeparator,
  MenubarLabel,
  MenubarItem,
  MenubarShortcut,
  MenubarCheckboxItem,
  MenubarRadioGroup,
  MenubarRadioItem,
  MenubarSub,
  MenubarSubTrigger,
  MenubarSubContent,
};
 - - - - - - - - - - - - 
src/components/components/ui/dialog.tsx

"use client";

import * as React from "react";
import * as DialogPrimitive from "@radix-ui/react-dialog@1.1.6";
import { XIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function Dialog({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Root>) {
  return <DialogPrimitive.Root data-slot="dialog" {...props} />;
}

function DialogTrigger({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {
  return <DialogPrimitive.Trigger data-slot="dialog-trigger" {...props} />;
}

function DialogPortal({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Portal>) {
  return <DialogPrimitive.Portal data-slot="dialog-portal" {...props} />;
}

function DialogClose({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Close>) {
  return <DialogPrimitive.Close data-slot="dialog-close" {...props} />;
}

const DialogOverlay = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>
>(({ className, ...props }, ref) => {
  return (
    <DialogPrimitive.Overlay
      ref={ref}
      data-slot="dialog-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className,
      )}
      {...props}
    />
  );
});
DialogOverlay.displayName = DialogPrimitive.Overlay.displayName;

function DialogContent({
  className,
  children,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Content>) {
  return (
    <DialogPortal data-slot="dialog-portal">
      <DialogOverlay />
      <DialogPrimitive.Content
        data-slot="dialog-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",
          className,
        )}
        {...props}
      >
        {children}
        <DialogPrimitive.Close className="ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4">
          <XIcon />
          <span className="sr-only">Close</span>
        </DialogPrimitive.Close>
      </DialogPrimitive.Content>
    </DialogPortal>
  );
}

function DialogHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="dialog-header"
      className={cn("flex flex-col gap-2 text-center sm:text-left", className)}
      {...props}
    />
  );
}

function DialogFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="dialog-footer"
      className={cn(
        "flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",
        className,
      )}
      {...props}
    />
  );
}

function DialogTitle({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Title>) {
  return (
    <DialogPrimitive.Title
      data-slot="dialog-title"
      className={cn("text-lg leading-none font-semibold", className)}
      {...props}
    />
  );
}

function DialogDescription({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Description>) {
  return (
    <DialogPrimitive.Description
      data-slot="dialog-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  );
}

export {
  Dialog,
  DialogClose,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogOverlay,
  DialogPortal,
  DialogTitle,
  DialogTrigger,
};
 - - - - - - - - - - - - 
src/components/components/ui/badge.tsx

import * as React from "react";
import { Slot } from "@radix-ui/react-slot@1.1.2";
import { cva, type VariantProps } from "class-variance-authority@0.7.1";

import { cn } from "./utils";

const badgeVariants = cva(
  "inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",
  {
    variants: {
      variant: {
        default:
          "border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",
        secondary:
          "border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",
        destructive:
          "border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  },
);

function Badge({
  className,
  variant,
  asChild = false,
  ...props
}: React.ComponentProps<"span"> &
  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {
  const Comp = asChild ? Slot : "span";

  return (
    <Comp
      data-slot="badge"
      className={cn(badgeVariants({ variant }), className)}
      {...props}
    />
  );
}

export { Badge, badgeVariants };
 - - - - - - - - - - - - 
src/components/components/ui/sidebar.tsx

"use client";

import * as React from "react";
import { Slot } from "@radix-ui/react-slot@1.1.2";
import { VariantProps, cva } from "class-variance-authority@0.7.1";
import { PanelLeftIcon } from "lucide-react@0.487.0";

import { useIsMobile } from "./use-mobile";
import { cn } from "./utils";
import { Button } from "./button";
import { Input } from "./input";
import { Separator } from "./separator";
import {
  Sheet,
  SheetContent,
  SheetDescription,
  SheetHeader,
  SheetTitle,
} from "./sheet";
import { Skeleton } from "./skeleton";
import {
  Tooltip,
  TooltipContent,
  TooltipProvider,
  TooltipTrigger,
} from "./tooltip";

const SIDEBAR_COOKIE_NAME = "sidebar_state";
const SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7;
const SIDEBAR_WIDTH = "16rem";
const SIDEBAR_WIDTH_MOBILE = "18rem";
const SIDEBAR_WIDTH_ICON = "3rem";
const SIDEBAR_KEYBOARD_SHORTCUT = "b";

type SidebarContextProps = {
  state: "expanded" | "collapsed";
  open: boolean;
  setOpen: (open: boolean) => void;
  openMobile: boolean;
  setOpenMobile: (open: boolean) => void;
  isMobile: boolean;
  toggleSidebar: () => void;
};

const SidebarContext = React.createContext<SidebarContextProps | null>(null);

function useSidebar() {
  const context = React.useContext(SidebarContext);
  if (!context) {
    throw new Error("useSidebar must be used within a SidebarProvider.");
  }

  return context;
}

function SidebarProvider({
  defaultOpen = true,
  open: openProp,
  onOpenChange: setOpenProp,
  className,
  style,
  children,
  ...props
}: React.ComponentProps<"div"> & {
  defaultOpen?: boolean;
  open?: boolean;
  onOpenChange?: (open: boolean) => void;
}) {
  const isMobile = useIsMobile();
  const [openMobile, setOpenMobile] = React.useState(false);

  // This is the internal state of the sidebar.
  // We use openProp and setOpenProp for control from outside the component.
  const [_open, _setOpen] = React.useState(defaultOpen);
  const open = openProp ?? _open;
  const setOpen = React.useCallback(
    (value: boolean | ((value: boolean) => boolean)) => {
      const openState = typeof value === "function" ? value(open) : value;
      if (setOpenProp) {
        setOpenProp(openState);
      } else {
        _setOpen(openState);
      }

      // This sets the cookie to keep the sidebar state.
      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`;
    },
    [setOpenProp, open],
  );

  // Helper to toggle the sidebar.
  const toggleSidebar = React.useCallback(() => {
    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open);
  }, [isMobile, setOpen, setOpenMobile]);

  // Adds a keyboard shortcut to toggle the sidebar.
  React.useEffect(() => {
    const handleKeyDown = (event: KeyboardEvent) => {
      if (
        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&
        (event.metaKey || event.ctrlKey)
      ) {
        event.preventDefault();
        toggleSidebar();
      }
    };

    window.addEventListener("keydown", handleKeyDown);
    return () => window.removeEventListener("keydown", handleKeyDown);
  }, [toggleSidebar]);

  // We add a state so that we can do data-state="expanded" or "collapsed".
  // This makes it easier to style the sidebar with Tailwind classes.
  const state = open ? "expanded" : "collapsed";

  const contextValue = React.useMemo<SidebarContextProps>(
    () => ({
      state,
      open,
      setOpen,
      isMobile,
      openMobile,
      setOpenMobile,
      toggleSidebar,
    }),
    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar],
  );

  return (
    <SidebarContext.Provider value={contextValue}>
      <TooltipProvider delayDuration={0}>
        <div
          data-slot="sidebar-wrapper"
          style={
            {
              "--sidebar-width": SIDEBAR_WIDTH,
              "--sidebar-width-icon": SIDEBAR_WIDTH_ICON,
              ...style,
            } as React.CSSProperties
          }
          className={cn(
            "group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",
            className,
          )}
          {...props}
        >
          {children}
        </div>
      </TooltipProvider>
    </SidebarContext.Provider>
  );
}

function Sidebar({
  side = "left",
  variant = "sidebar",
  collapsible = "offcanvas",
  className,
  children,
  ...props
}: React.ComponentProps<"div"> & {
  side?: "left" | "right";
  variant?: "sidebar" | "floating" | "inset";
  collapsible?: "offcanvas" | "icon" | "none";
}) {
  const { isMobile, state, openMobile, setOpenMobile } = useSidebar();

  if (collapsible === "none") {
    return (
      <div
        data-slot="sidebar"
        className={cn(
          "bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",
          className,
        )}
        {...props}
      >
        {children}
      </div>
    );
  }

  if (isMobile) {
    return (
      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>
        <SheetContent
          data-sidebar="sidebar"
          data-slot="sidebar"
          data-mobile="true"
          className="bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden"
          style={
            {
              "--sidebar-width": SIDEBAR_WIDTH_MOBILE,
            } as React.CSSProperties
          }
          side={side}
        >
          <SheetHeader className="sr-only">
            <SheetTitle>Sidebar</SheetTitle>
            <SheetDescription>Displays the mobile sidebar.</SheetDescription>
          </SheetHeader>
          <div className="flex h-full w-full flex-col">{children}</div>
        </SheetContent>
      </Sheet>
    );
  }

  return (
    <div
      className="group peer text-sidebar-foreground hidden md:block"
      data-state={state}
      data-collapsible={state === "collapsed" ? collapsible : ""}
      data-variant={variant}
      data-side={side}
      data-slot="sidebar"
    >
      {/* This is what handles the sidebar gap on desktop */}
      <div
        data-slot="sidebar-gap"
        className={cn(
          "relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear",
          "group-data-[collapsible=offcanvas]:w-0",
          "group-data-[side=right]:rotate-180",
          variant === "floating" || variant === "inset"
            ? "group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]"
            : "group-data-[collapsible=icon]:w-(--sidebar-width-icon)",
        )}
      />
      <div
        data-slot="sidebar-container"
        className={cn(
          "fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",
          side === "left"
            ? "left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]"
            : "right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",
          // Adjust the padding for floating and inset variants.
          variant === "floating" || variant === "inset"
            ? "p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]"
            : "group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",
          className,
        )}
        {...props}
      >
        <div
          data-sidebar="sidebar"
          data-slot="sidebar-inner"
          className="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"
        >
          {children}
        </div>
      </div>
    </div>
  );
}

function SidebarTrigger({
  className,
  onClick,
  ...props
}: React.ComponentProps<typeof Button>) {
  const { toggleSidebar } = useSidebar();

  return (
    <Button
      data-sidebar="trigger"
      data-slot="sidebar-trigger"
      variant="ghost"
      size="icon"
      className={cn("size-7", className)}
      onClick={(event) => {
        onClick?.(event);
        toggleSidebar();
      }}
      {...props}
    >
      <PanelLeftIcon />
      <span className="sr-only">Toggle Sidebar</span>
    </Button>
  );
}

function SidebarRail({ className, ...props }: React.ComponentProps<"button">) {
  const { toggleSidebar } = useSidebar();

  return (
    <button
      data-sidebar="rail"
      data-slot="sidebar-rail"
      aria-label="Toggle Sidebar"
      tabIndex={-1}
      onClick={toggleSidebar}
      title="Toggle Sidebar"
      className={cn(
        "hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex",
        "in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize",
        "[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize",
        "hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full",
        "[[data-side=left][data-collapsible=offcanvas]_&]:-right-2",
        "[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",
        className,
      )}
      {...props}
    />
  );
}

function SidebarInset({ className, ...props }: React.ComponentProps<"main">) {
  return (
    <main
      data-slot="sidebar-inset"
      className={cn(
        "bg-background relative flex w-full flex-1 flex-col",
        "md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",
        className,
      )}
      {...props}
    />
  );
}

function SidebarInput({
  className,
  ...props
}: React.ComponentProps<typeof Input>) {
  return (
    <Input
      data-slot="sidebar-input"
      data-sidebar="input"
      className={cn("bg-background h-8 w-full shadow-none", className)}
      {...props}
    />
  );
}

function SidebarHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-header"
      data-sidebar="header"
      className={cn("flex flex-col gap-2 p-2", className)}
      {...props}
    />
  );
}

function SidebarFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-footer"
      data-sidebar="footer"
      className={cn("flex flex-col gap-2 p-2", className)}
      {...props}
    />
  );
}

function SidebarSeparator({
  className,
  ...props
}: React.ComponentProps<typeof Separator>) {
  return (
    <Separator
      data-slot="sidebar-separator"
      data-sidebar="separator"
      className={cn("bg-sidebar-border mx-2 w-auto", className)}
      {...props}
    />
  );
}

function SidebarContent({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-content"
      data-sidebar="content"
      className={cn(
        "flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",
        className,
      )}
      {...props}
    />
  );
}

function SidebarGroup({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-group"
      data-sidebar="group"
      className={cn("relative flex w-full min-w-0 flex-col p-2", className)}
      {...props}
    />
  );
}

function SidebarGroupLabel({
  className,
  asChild = false,
  ...props
}: React.ComponentProps<"div"> & { asChild?: boolean }) {
  const Comp = asChild ? Slot : "div";

  return (
    <Comp
      data-slot="sidebar-group-label"
      data-sidebar="group-label"
      className={cn(
        "text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        "group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",
        className,
      )}
      {...props}
    />
  );
}

function SidebarGroupAction({
  className,
  asChild = false,
  ...props
}: React.ComponentProps<"button"> & { asChild?: boolean }) {
  const Comp = asChild ? Slot : "button";

  return (
    <Comp
      data-slot="sidebar-group-action"
      data-sidebar="group-action"
      className={cn(
        "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        // Increases the hit area of the button on mobile.
        "after:absolute after:-inset-2 md:after:hidden",
        "group-data-[collapsible=icon]:hidden",
        className,
      )}
      {...props}
    />
  );
}

function SidebarGroupContent({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-group-content"
      data-sidebar="group-content"
      className={cn("w-full text-sm", className)}
      {...props}
    />
  );
}

function SidebarMenu({ className, ...props }: React.ComponentProps<"ul">) {
  return (
    <ul
      data-slot="sidebar-menu"
      data-sidebar="menu"
      className={cn("flex w-full min-w-0 flex-col gap-1", className)}
      {...props}
    />
  );
}

function SidebarMenuItem({ className, ...props }: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="sidebar-menu-item"
      data-sidebar="menu-item"
      className={cn("group/menu-item relative", className)}
      {...props}
    />
  );
}

const sidebarMenuButtonVariants = cva(
  "peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",
  {
    variants: {
      variant: {
        default: "hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",
        outline:
          "bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]",
      },
      size: {
        default: "h-8 text-sm",
        sm: "h-7 text-xs",
        lg: "h-12 text-sm group-data-[collapsible=icon]:p-0!",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  },
);

function SidebarMenuButton({
  asChild = false,
  isActive = false,
  variant = "default",
  size = "default",
  tooltip,
  className,
  ...props
}: React.ComponentProps<"button"> & {
  asChild?: boolean;
  isActive?: boolean;
  tooltip?: string | React.ComponentProps<typeof TooltipContent>;
} & VariantProps<typeof sidebarMenuButtonVariants>) {
  const Comp = asChild ? Slot : "button";
  const { isMobile, state } = useSidebar();

  const button = (
    <Comp
      data-slot="sidebar-menu-button"
      data-sidebar="menu-button"
      data-size={size}
      data-active={isActive}
      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}
      {...props}
    />
  );

  if (!tooltip) {
    return button;
  }

  if (typeof tooltip === "string") {
    tooltip = {
      children: tooltip,
    };
  }

  return (
    <Tooltip>
      <TooltipTrigger asChild>{button}</TooltipTrigger>
      <TooltipContent
        side="right"
        align="center"
        hidden={state !== "collapsed" || isMobile}
        {...tooltip}
      />
    </Tooltip>
  );
}

function SidebarMenuAction({
  className,
  asChild = false,
  showOnHover = false,
  ...props
}: React.ComponentProps<"button"> & {
  asChild?: boolean;
  showOnHover?: boolean;
}) {
  const Comp = asChild ? Slot : "button";

  return (
    <Comp
      data-slot="sidebar-menu-action"
      data-sidebar="menu-action"
      className={cn(
        "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        // Increases the hit area of the button on mobile.
        "after:absolute after:-inset-2 md:after:hidden",
        "peer-data-[size=sm]/menu-button:top-1",
        "peer-data-[size=default]/menu-button:top-1.5",
        "peer-data-[size=lg]/menu-button:top-2.5",
        "group-data-[collapsible=icon]:hidden",
        showOnHover &&
          "peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0",
        className,
      )}
      {...props}
    />
  );
}

function SidebarMenuBadge({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-menu-badge"
      data-sidebar="menu-badge"
      className={cn(
        "text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none",
        "peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground",
        "peer-data-[size=sm]/menu-button:top-1",
        "peer-data-[size=default]/menu-button:top-1.5",
        "peer-data-[size=lg]/menu-button:top-2.5",
        "group-data-[collapsible=icon]:hidden",
        className,
      )}
      {...props}
    />
  );
}

function SidebarMenuSkeleton({
  className,
  showIcon = false,
  ...props
}: React.ComponentProps<"div"> & {
  showIcon?: boolean;
}) {
  // Random width between 50 to 90%.
  const width = React.useMemo(() => {
    return `${Math.floor(Math.random() * 40) + 50}%`;
  }, []);

  return (
    <div
      data-slot="sidebar-menu-skeleton"
      data-sidebar="menu-skeleton"
      className={cn("flex h-8 items-center gap-2 rounded-md px-2", className)}
      {...props}
    >
      {showIcon && (
        <Skeleton
          className="size-4 rounded-md"
          data-sidebar="menu-skeleton-icon"
        />
      )}
      <Skeleton
        className="h-4 max-w-(--skeleton-width) flex-1"
        data-sidebar="menu-skeleton-text"
        style={
          {
            "--skeleton-width": width,
          } as React.CSSProperties
        }
      />
    </div>
  );
}

function SidebarMenuSub({ className, ...props }: React.ComponentProps<"ul">) {
  return (
    <ul
      data-slot="sidebar-menu-sub"
      data-sidebar="menu-sub"
      className={cn(
        "border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5",
        "group-data-[collapsible=icon]:hidden",
        className,
      )}
      {...props}
    />
  );
}

function SidebarMenuSubItem({
  className,
  ...props
}: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="sidebar-menu-sub-item"
      data-sidebar="menu-sub-item"
      className={cn("group/menu-sub-item relative", className)}
      {...props}
    />
  );
}

function SidebarMenuSubButton({
  asChild = false,
  size = "md",
  isActive = false,
  className,
  ...props
}: React.ComponentProps<"a"> & {
  asChild?: boolean;
  size?: "sm" | "md";
  isActive?: boolean;
}) {
  const Comp = asChild ? Slot : "a";

  return (
    <Comp
      data-slot="sidebar-menu-sub-button"
      data-sidebar="menu-sub-button"
      data-size={size}
      data-active={isActive}
      className={cn(
        "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",
        "data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",
        size === "sm" && "text-xs",
        size === "md" && "text-sm",
        "group-data-[collapsible=icon]:hidden",
        className,
      )}
      {...props}
    />
  );
}

export {
  Sidebar,
  SidebarContent,
  SidebarFooter,
  SidebarGroup,
  SidebarGroupAction,
  SidebarGroupContent,
  SidebarGroupLabel,
  SidebarHeader,
  SidebarInput,
  SidebarInset,
  SidebarMenu,
  SidebarMenuAction,
  SidebarMenuBadge,
  SidebarMenuButton,
  SidebarMenuItem,
  SidebarMenuSkeleton,
  SidebarMenuSub,
  SidebarMenuSubButton,
  SidebarMenuSubItem,
  SidebarProvider,
  SidebarRail,
  SidebarSeparator,
  SidebarTrigger,
  useSidebar,
};
 - - - - - - - - - - - - 
src/components/components/ui/table.tsx

"use client";

import * as React from "react";

import { cn } from "./utils";

function Table({ className, ...props }: React.ComponentProps<"table">) {
  return (
    <div
      data-slot="table-container"
      className="relative w-full overflow-x-auto"
    >
      <table
        data-slot="table"
        className={cn("w-full caption-bottom text-sm", className)}
        {...props}
      />
    </div>
  );
}

function TableHeader({ className, ...props }: React.ComponentProps<"thead">) {
  return (
    <thead
      data-slot="table-header"
      className={cn("[&_tr]:border-b", className)}
      {...props}
    />
  );
}

function TableBody({ className, ...props }: React.ComponentProps<"tbody">) {
  return (
    <tbody
      data-slot="table-body"
      className={cn("[&_tr:last-child]:border-0", className)}
      {...props}
    />
  );
}

function TableFooter({ className, ...props }: React.ComponentProps<"tfoot">) {
  return (
    <tfoot
      data-slot="table-footer"
      className={cn(
        "bg-muted/50 border-t font-medium [&>tr]:last:border-b-0",
        className,
      )}
      {...props}
    />
  );
}

function TableRow({ className, ...props }: React.ComponentProps<"tr">) {
  return (
    <tr
      data-slot="table-row"
      className={cn(
        "hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",
        className,
      )}
      {...props}
    />
  );
}

function TableHead({ className, ...props }: React.ComponentProps<"th">) {
  return (
    <th
      data-slot="table-head"
      className={cn(
        "text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
        className,
      )}
      {...props}
    />
  );
}

function TableCell({ className, ...props }: React.ComponentProps<"td">) {
  return (
    <td
      data-slot="table-cell"
      className={cn(
        "p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
        className,
      )}
      {...props}
    />
  );
}

function TableCaption({
  className,
  ...props
}: React.ComponentProps<"caption">) {
  return (
    <caption
      data-slot="table-caption"
      className={cn("text-muted-foreground mt-4 text-sm", className)}
      {...props}
    />
  );
}

export {
  Table,
  TableHeader,
  TableBody,
  TableFooter,
  TableHead,
  TableRow,
  TableCell,
  TableCaption,
};
 - - - - - - - - - - - - 
src/components/components/ui/separator.tsx

"use client";

import * as React from "react";
import * as SeparatorPrimitive from "@radix-ui/react-separator@1.1.2";

import { cn } from "./utils";

function Separator({
  className,
  orientation = "horizontal",
  decorative = true,
  ...props
}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {
  return (
    <SeparatorPrimitive.Root
      data-slot="separator-root"
      decorative={decorative}
      orientation={orientation}
      className={cn(
        "bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",
        className,
      )}
      {...props}
    />
  );
}

export { Separator };
 - - - - - - - - - - - - 
src/components/components/ui/button.tsx

import * as React from "react";
import { Slot } from "@radix-ui/react-slot@1.1.2";
import { cva, type VariantProps } from "class-variance-authority@0.7.1";

import { cn } from "./utils";

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive:
          "bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",
        secondary:
          "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost:
          "hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-9 px-4 py-2 has-[>svg]:px-3",
        sm: "h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",
        lg: "h-10 rounded-md px-6 has-[>svg]:px-4",
        icon: "size-9 rounded-md",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  },
);

const Button = React.forwardRef<
  HTMLButtonElement,
  React.ComponentProps<"button"> &
    VariantProps<typeof buttonVariants> & {
      asChild?: boolean;
    }
>(({ className, variant, size, asChild = false, ...props }, ref) => {
  const Comp = asChild ? Slot : "button";

  return (
    <Comp
      data-slot="button"
      className={cn(buttonVariants({ variant, size, className }))}
      ref={ref}
      {...props}
    />
  );
});

Button.displayName = "Button";

export { Button, buttonVariants };
 - - - - - - - - - - - - 
src/components/components/ui/toggle.tsx

"use client";

import * as React from "react";
import * as TogglePrimitive from "@radix-ui/react-toggle@1.1.2";
import { cva, type VariantProps } from "class-variance-authority@0.7.1";

import { cn } from "./utils";

const toggleVariants = cva(
  "inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",
  {
    variants: {
      variant: {
        default: "bg-transparent",
        outline:
          "border border-input bg-transparent hover:bg-accent hover:text-accent-foreground",
      },
      size: {
        default: "h-9 px-2 min-w-9",
        sm: "h-8 px-1.5 min-w-8",
        lg: "h-10 px-2.5 min-w-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  },
);

function Toggle({
  className,
  variant,
  size,
  ...props
}: React.ComponentProps<typeof TogglePrimitive.Root> &
  VariantProps<typeof toggleVariants>) {
  return (
    <TogglePrimitive.Root
      data-slot="toggle"
      className={cn(toggleVariants({ variant, size, className }))}
      {...props}
    />
  );
}

export { Toggle, toggleVariants };
 - - - - - - - - - - - - 
src/components/components/ui/checkbox.tsx

"use client";

import * as React from "react";
import * as CheckboxPrimitive from "@radix-ui/react-checkbox@1.1.4";
import { CheckIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function Checkbox({
  className,
  ...props
}: React.ComponentProps<typeof CheckboxPrimitive.Root>) {
  return (
    <CheckboxPrimitive.Root
      data-slot="checkbox"
      className={cn(
        "peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
        className,
      )}
      {...props}
    >
      <CheckboxPrimitive.Indicator
        data-slot="checkbox-indicator"
        className="flex items-center justify-center text-current transition-none"
      >
        <CheckIcon className="size-3.5" />
      </CheckboxPrimitive.Indicator>
    </CheckboxPrimitive.Root>
  );
}

export { Checkbox };
 - - - - - - - - - - - - 
src/components/components/ui/collapsible.tsx

"use client";

import * as CollapsiblePrimitive from "@radix-ui/react-collapsible@1.1.3";

function Collapsible({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.Root>) {
  return <CollapsiblePrimitive.Root data-slot="collapsible" {...props} />;
}

function CollapsibleTrigger({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleTrigger>) {
  return (
    <CollapsiblePrimitive.CollapsibleTrigger
      data-slot="collapsible-trigger"
      {...props}
    />
  );
}

function CollapsibleContent({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleContent>) {
  return (
    <CollapsiblePrimitive.CollapsibleContent
      data-slot="collapsible-content"
      {...props}
    />
  );
}

export { Collapsible, CollapsibleTrigger, CollapsibleContent };
 - - - - - - - - - - - - 
src/components/components/ui/dropdown-menu.tsx

"use client";

import * as React from "react";
import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu@2.1.6";
import { CheckIcon, ChevronRightIcon, CircleIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function DropdownMenu({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {
  return <DropdownMenuPrimitive.Root data-slot="dropdown-menu" {...props} />;
}

function DropdownMenuPortal({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {
  return (
    <DropdownMenuPrimitive.Portal data-slot="dropdown-menu-portal" {...props} />
  );
}

function DropdownMenuTrigger({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {
  return (
    <DropdownMenuPrimitive.Trigger
      data-slot="dropdown-menu-trigger"
      {...props}
    />
  );
}

function DropdownMenuContent({
  className,
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {
  return (
    <DropdownMenuPrimitive.Portal>
      <DropdownMenuPrimitive.Content
        data-slot="dropdown-menu-content"
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",
          className,
        )}
        {...props}
      />
    </DropdownMenuPrimitive.Portal>
  );
}

function DropdownMenuGroup({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {
  return (
    <DropdownMenuPrimitive.Group data-slot="dropdown-menu-group" {...props} />
  );
}

function DropdownMenuItem({
  className,
  inset,
  variant = "default",
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {
  inset?: boolean;
  variant?: "default" | "destructive";
}) {
  return (
    <DropdownMenuPrimitive.Item
      data-slot="dropdown-menu-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function DropdownMenuCheckboxItem({
  className,
  children,
  checked,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {
  return (
    <DropdownMenuPrimitive.CheckboxItem
      data-slot="dropdown-menu-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      checked={checked}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.CheckboxItem>
  );
}

function DropdownMenuRadioGroup({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {
  return (
    <DropdownMenuPrimitive.RadioGroup
      data-slot="dropdown-menu-radio-group"
      {...props}
    />
  );
}

function DropdownMenuRadioItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {
  return (
    <DropdownMenuPrimitive.RadioItem
      data-slot="dropdown-menu-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.RadioItem>
  );
}

function DropdownMenuLabel({
  className,
  inset,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {
  inset?: boolean;
}) {
  return (
    <DropdownMenuPrimitive.Label
      data-slot="dropdown-menu-label"
      data-inset={inset}
      className={cn(
        "px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",
        className,
      )}
      {...props}
    />
  );
}

function DropdownMenuSeparator({
  className,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {
  return (
    <DropdownMenuPrimitive.Separator
      data-slot="dropdown-menu-separator"
      className={cn("bg-border -mx-1 my-1 h-px", className)}
      {...props}
    />
  );
}

function DropdownMenuShortcut({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="dropdown-menu-shortcut"
      className={cn(
        "text-muted-foreground ml-auto text-xs tracking-widest",
        className,
      )}
      {...props}
    />
  );
}

function DropdownMenuSub({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {
  return <DropdownMenuPrimitive.Sub data-slot="dropdown-menu-sub" {...props} />;
}

function DropdownMenuSubTrigger({
  className,
  inset,
  children,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {
  inset?: boolean;
}) {
  return (
    <DropdownMenuPrimitive.SubTrigger
      data-slot="dropdown-menu-sub-trigger"
      data-inset={inset}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8",
        className,
      )}
      {...props}
    >
      {children}
      <ChevronRightIcon className="ml-auto size-4" />
    </DropdownMenuPrimitive.SubTrigger>
  );
}

function DropdownMenuSubContent({
  className,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {
  return (
    <DropdownMenuPrimitive.SubContent
      data-slot="dropdown-menu-sub-content"
      className={cn(
        "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",
        className,
      )}
      {...props}
    />
  );
}

export {
  DropdownMenu,
  DropdownMenuPortal,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuGroup,
  DropdownMenuLabel,
  DropdownMenuItem,
  DropdownMenuCheckboxItem,
  DropdownMenuRadioGroup,
  DropdownMenuRadioItem,
  DropdownMenuSeparator,
  DropdownMenuShortcut,
  DropdownMenuSub,
  DropdownMenuSubTrigger,
  DropdownMenuSubContent,
};
 - - - - - - - - - - - - 
src/components/components/ui/select.tsx

"use client";

import * as React from "react";
import * as SelectPrimitive from "@radix-ui/react-select@2.1.6";
import {
  CheckIcon,
  ChevronDownIcon,
  ChevronUpIcon,
} from "lucide-react@0.487.0";

import { cn } from "./utils";

function Select({
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Root>) {
  return <SelectPrimitive.Root data-slot="select" {...props} />;
}

function SelectGroup({
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Group>) {
  return <SelectPrimitive.Group data-slot="select-group" {...props} />;
}

function SelectValue({
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Value>) {
  return <SelectPrimitive.Value data-slot="select-value" {...props} />;
}

function SelectTrigger({
  className,
  size = "default",
  children,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {
  size?: "sm" | "default";
}) {
  return (
    <SelectPrimitive.Trigger
      data-slot="select-trigger"
      data-size={size}
      className={cn(
        "border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      {children}
      <SelectPrimitive.Icon asChild>
        <ChevronDownIcon className="size-4 opacity-50" />
      </SelectPrimitive.Icon>
    </SelectPrimitive.Trigger>
  );
}

function SelectContent({
  className,
  children,
  position = "popper",
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Content>) {
  return (
    <SelectPrimitive.Portal>
      <SelectPrimitive.Content
        data-slot="select-content"
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",
          position === "popper" &&
            "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
          className,
        )}
        position={position}
        {...props}
      >
        <SelectScrollUpButton />
        <SelectPrimitive.Viewport
          className={cn(
            "p-1",
            position === "popper" &&
              "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1",
          )}
        >
          {children}
        </SelectPrimitive.Viewport>
        <SelectScrollDownButton />
      </SelectPrimitive.Content>
    </SelectPrimitive.Portal>
  );
}

function SelectLabel({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Label>) {
  return (
    <SelectPrimitive.Label
      data-slot="select-label"
      className={cn("text-muted-foreground px-2 py-1.5 text-xs", className)}
      {...props}
    />
  );
}

function SelectItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Item>) {
  return (
    <SelectPrimitive.Item
      data-slot="select-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",
        className,
      )}
      {...props}
    >
      <span className="absolute right-2 flex size-3.5 items-center justify-center">
        <SelectPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </SelectPrimitive.ItemIndicator>
      </span>
      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
    </SelectPrimitive.Item>
  );
}

function SelectSeparator({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Separator>) {
  return (
    <SelectPrimitive.Separator
      data-slot="select-separator"
      className={cn("bg-border pointer-events-none -mx-1 my-1 h-px", className)}
      {...props}
    />
  );
}

function SelectScrollUpButton({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {
  return (
    <SelectPrimitive.ScrollUpButton
      data-slot="select-scroll-up-button"
      className={cn(
        "flex cursor-default items-center justify-center py-1",
        className,
      )}
      {...props}
    >
      <ChevronUpIcon className="size-4" />
    </SelectPrimitive.ScrollUpButton>
  );
}

function SelectScrollDownButton({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {
  return (
    <SelectPrimitive.ScrollDownButton
      data-slot="select-scroll-down-button"
      className={cn(
        "flex cursor-default items-center justify-center py-1",
        className,
      )}
      {...props}
    >
      <ChevronDownIcon className="size-4" />
    </SelectPrimitive.ScrollDownButton>
  );
}

export {
  Select,
  SelectContent,
  SelectGroup,
  SelectItem,
  SelectLabel,
  SelectScrollDownButton,
  SelectScrollUpButton,
  SelectSeparator,
  SelectTrigger,
  SelectValue,
};
 - - - - - - - - - - - - 
src/components/components/ui/textarea.tsx

import * as React from "react";

import { cn } from "./utils";

function Textarea({ className, ...props }: React.ComponentProps<"textarea">) {
  return (
    <textarea
      data-slot="textarea"
      className={cn(
        "resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        className,
      )}
      {...props}
    />
  );
}

export { Textarea };
 - - - - - - - - - - - - 
src/components/components/ui/input.tsx

import * as React from "react";

import { cn } from "./utils";

function Input({ className, type, ...props }: React.ComponentProps<"input">) {
  return (
    <input
      type={type}
      data-slot="input"
      className={cn(
        "file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        "focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",
        "aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
        className,
      )}
      {...props}
    />
  );
}

export { Input };
 - - - - - - - - - - - - 
src/components/components/ui/skeleton.tsx

import { cn } from "./utils";

function Skeleton({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="skeleton"
      className={cn("bg-accent animate-pulse rounded-md", className)}
      {...props}
    />
  );
}

export { Skeleton };
 - - - - - - - - - - - - 
src/components/components/ui/context-menu.tsx

"use client";

import * as React from "react";
import * as ContextMenuPrimitive from "@radix-ui/react-context-menu@2.2.6";
import { CheckIcon, ChevronRightIcon, CircleIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function ContextMenu({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Root>) {
  return <ContextMenuPrimitive.Root data-slot="context-menu" {...props} />;
}

function ContextMenuTrigger({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Trigger>) {
  return (
    <ContextMenuPrimitive.Trigger data-slot="context-menu-trigger" {...props} />
  );
}

function ContextMenuGroup({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Group>) {
  return (
    <ContextMenuPrimitive.Group data-slot="context-menu-group" {...props} />
  );
}

function ContextMenuPortal({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Portal>) {
  return (
    <ContextMenuPrimitive.Portal data-slot="context-menu-portal" {...props} />
  );
}

function ContextMenuSub({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Sub>) {
  return <ContextMenuPrimitive.Sub data-slot="context-menu-sub" {...props} />;
}

function ContextMenuRadioGroup({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.RadioGroup>) {
  return (
    <ContextMenuPrimitive.RadioGroup
      data-slot="context-menu-radio-group"
      {...props}
    />
  );
}

function ContextMenuSubTrigger({
  className,
  inset,
  children,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.SubTrigger> & {
  inset?: boolean;
}) {
  return (
    <ContextMenuPrimitive.SubTrigger
      data-slot="context-menu-sub-trigger"
      data-inset={inset}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      {children}
      <ChevronRightIcon className="ml-auto" />
    </ContextMenuPrimitive.SubTrigger>
  );
}

function ContextMenuSubContent({
  className,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.SubContent>) {
  return (
    <ContextMenuPrimitive.SubContent
      data-slot="context-menu-sub-content"
      className={cn(
        "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",
        className,
      )}
      {...props}
    />
  );
}

function ContextMenuContent({
  className,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Content>) {
  return (
    <ContextMenuPrimitive.Portal>
      <ContextMenuPrimitive.Content
        data-slot="context-menu-content"
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",
          className,
        )}
        {...props}
      />
    </ContextMenuPrimitive.Portal>
  );
}

function ContextMenuItem({
  className,
  inset,
  variant = "default",
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Item> & {
  inset?: boolean;
  variant?: "default" | "destructive";
}) {
  return (
    <ContextMenuPrimitive.Item
      data-slot="context-menu-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function ContextMenuCheckboxItem({
  className,
  children,
  checked,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.CheckboxItem>) {
  return (
    <ContextMenuPrimitive.CheckboxItem
      data-slot="context-menu-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      checked={checked}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <ContextMenuPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </ContextMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </ContextMenuPrimitive.CheckboxItem>
  );
}

function ContextMenuRadioItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.RadioItem>) {
  return (
    <ContextMenuPrimitive.RadioItem
      data-slot="context-menu-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <ContextMenuPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </ContextMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </ContextMenuPrimitive.RadioItem>
  );
}

function ContextMenuLabel({
  className,
  inset,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Label> & {
  inset?: boolean;
}) {
  return (
    <ContextMenuPrimitive.Label
      data-slot="context-menu-label"
      data-inset={inset}
      className={cn(
        "text-foreground px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",
        className,
      )}
      {...props}
    />
  );
}

function ContextMenuSeparator({
  className,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Separator>) {
  return (
    <ContextMenuPrimitive.Separator
      data-slot="context-menu-separator"
      className={cn("bg-border -mx-1 my-1 h-px", className)}
      {...props}
    />
  );
}

function ContextMenuShortcut({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="context-menu-shortcut"
      className={cn(
        "text-muted-foreground ml-auto text-xs tracking-widest",
        className,
      )}
      {...props}
    />
  );
}

export {
  ContextMenu,
  ContextMenuTrigger,
  ContextMenuContent,
  ContextMenuItem,
  ContextMenuCheckboxItem,
  ContextMenuRadioItem,
  ContextMenuLabel,
  ContextMenuSeparator,
  ContextMenuShortcut,
  ContextMenuGroup,
  ContextMenuPortal,
  ContextMenuSub,
  ContextMenuSubContent,
  ContextMenuSubTrigger,
  ContextMenuRadioGroup,
};
 - - - - - - - - - - - - 
src/components/components/ui/form.tsx

"use client";

import * as React from "react";
import * as LabelPrimitive from "@radix-ui/react-label@2.1.2";
import { Slot } from "@radix-ui/react-slot@1.1.2";
import {
  Controller,
  FormProvider,
  useFormContext,
  useFormState,
  type ControllerProps,
  type FieldPath,
  type FieldValues,
} from "react-hook-form@7.55.0";

import { cn } from "./utils";
import { Label } from "./label";

const Form = FormProvider;

type FormFieldContextValue<
  TFieldValues extends FieldValues = FieldValues,
  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,
> = {
  name: TName;
};

const FormFieldContext = React.createContext<FormFieldContextValue>(
  {} as FormFieldContextValue,
);

const FormField = <
  TFieldValues extends FieldValues = FieldValues,
  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,
>({
  ...props
}: ControllerProps<TFieldValues, TName>) => {
  return (
    <FormFieldContext.Provider value={{ name: props.name }}>
      <Controller {...props} />
    </FormFieldContext.Provider>
  );
};

const useFormField = () => {
  const fieldContext = React.useContext(FormFieldContext);
  const itemContext = React.useContext(FormItemContext);
  const { getFieldState } = useFormContext();
  const formState = useFormState({ name: fieldContext.name });
  const fieldState = getFieldState(fieldContext.name, formState);

  if (!fieldContext) {
    throw new Error("useFormField should be used within <FormField>");
  }

  const { id } = itemContext;

  return {
    id,
    name: fieldContext.name,
    formItemId: `${id}-form-item`,
    formDescriptionId: `${id}-form-item-description`,
    formMessageId: `${id}-form-item-message`,
    ...fieldState,
  };
};

type FormItemContextValue = {
  id: string;
};

const FormItemContext = React.createContext<FormItemContextValue>(
  {} as FormItemContextValue,
);

function FormItem({ className, ...props }: React.ComponentProps<"div">) {
  const id = React.useId();

  return (
    <FormItemContext.Provider value={{ id }}>
      <div
        data-slot="form-item"
        className={cn("grid gap-2", className)}
        {...props}
      />
    </FormItemContext.Provider>
  );
}

function FormLabel({
  className,
  ...props
}: React.ComponentProps<typeof LabelPrimitive.Root>) {
  const { error, formItemId } = useFormField();

  return (
    <Label
      data-slot="form-label"
      data-error={!!error}
      className={cn("data-[error=true]:text-destructive", className)}
      htmlFor={formItemId}
      {...props}
    />
  );
}

function FormControl({ ...props }: React.ComponentProps<typeof Slot>) {
  const { error, formItemId, formDescriptionId, formMessageId } =
    useFormField();

  return (
    <Slot
      data-slot="form-control"
      id={formItemId}
      aria-describedby={
        !error
          ? `${formDescriptionId}`
          : `${formDescriptionId} ${formMessageId}`
      }
      aria-invalid={!!error}
      {...props}
    />
  );
}

function FormDescription({ className, ...props }: React.ComponentProps<"p">) {
  const { formDescriptionId } = useFormField();

  return (
    <p
      data-slot="form-description"
      id={formDescriptionId}
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  );
}

function FormMessage({ className, ...props }: React.ComponentProps<"p">) {
  const { error, formMessageId } = useFormField();
  const body = error ? String(error?.message ?? "") : props.children;

  if (!body) {
    return null;
  }

  return (
    <p
      data-slot="form-message"
      id={formMessageId}
      className={cn("text-destructive text-sm", className)}
      {...props}
    >
      {body}
    </p>
  );
}

export {
  useFormField,
  Form,
  FormItem,
  FormLabel,
  FormControl,
  FormDescription,
  FormMessage,
  FormField,
};
 - - - - - - - - - - - - 
src/components/components/ui/carousel.tsx

"use client";

import * as React from "react";
import useEmblaCarousel, {
  type UseEmblaCarouselType,
} from "embla-carousel-react@8.6.0";
import { ArrowLeft, ArrowRight } from "lucide-react@0.487.0";

import { cn } from "./utils";
import { Button } from "./button";

type CarouselApi = UseEmblaCarouselType[1];
type UseCarouselParameters = Parameters<typeof useEmblaCarousel>;
type CarouselOptions = UseCarouselParameters[0];
type CarouselPlugin = UseCarouselParameters[1];

type CarouselProps = {
  opts?: CarouselOptions;
  plugins?: CarouselPlugin;
  orientation?: "horizontal" | "vertical";
  setApi?: (api: CarouselApi) => void;
};

type CarouselContextProps = {
  carouselRef: ReturnType<typeof useEmblaCarousel>[0];
  api: ReturnType<typeof useEmblaCarousel>[1];
  scrollPrev: () => void;
  scrollNext: () => void;
  canScrollPrev: boolean;
  canScrollNext: boolean;
} & CarouselProps;

const CarouselContext = React.createContext<CarouselContextProps | null>(null);

function useCarousel() {
  const context = React.useContext(CarouselContext);

  if (!context) {
    throw new Error("useCarousel must be used within a <Carousel />");
  }

  return context;
}

function Carousel({
  orientation = "horizontal",
  opts,
  setApi,
  plugins,
  className,
  children,
  ...props
}: React.ComponentProps<"div"> & CarouselProps) {
  const [carouselRef, api] = useEmblaCarousel(
    {
      ...opts,
      axis: orientation === "horizontal" ? "x" : "y",
    },
    plugins,
  );
  const [canScrollPrev, setCanScrollPrev] = React.useState(false);
  const [canScrollNext, setCanScrollNext] = React.useState(false);

  const onSelect = React.useCallback((api: CarouselApi) => {
    if (!api) return;
    setCanScrollPrev(api.canScrollPrev());
    setCanScrollNext(api.canScrollNext());
  }, []);

  const scrollPrev = React.useCallback(() => {
    api?.scrollPrev();
  }, [api]);

  const scrollNext = React.useCallback(() => {
    api?.scrollNext();
  }, [api]);

  const handleKeyDown = React.useCallback(
    (event: React.KeyboardEvent<HTMLDivElement>) => {
      if (event.key === "ArrowLeft") {
        event.preventDefault();
        scrollPrev();
      } else if (event.key === "ArrowRight") {
        event.preventDefault();
        scrollNext();
      }
    },
    [scrollPrev, scrollNext],
  );

  React.useEffect(() => {
    if (!api || !setApi) return;
    setApi(api);
  }, [api, setApi]);

  React.useEffect(() => {
    if (!api) return;
    onSelect(api);
    api.on("reInit", onSelect);
    api.on("select", onSelect);

    return () => {
      api?.off("select", onSelect);
    };
  }, [api, onSelect]);

  return (
    <CarouselContext.Provider
      value={{
        carouselRef,
        api: api,
        opts,
        orientation:
          orientation || (opts?.axis === "y" ? "vertical" : "horizontal"),
        scrollPrev,
        scrollNext,
        canScrollPrev,
        canScrollNext,
      }}
    >
      <div
        onKeyDownCapture={handleKeyDown}
        className={cn("relative", className)}
        role="region"
        aria-roledescription="carousel"
        data-slot="carousel"
        {...props}
      >
        {children}
      </div>
    </CarouselContext.Provider>
  );
}

function CarouselContent({ className, ...props }: React.ComponentProps<"div">) {
  const { carouselRef, orientation } = useCarousel();

  return (
    <div
      ref={carouselRef}
      className="overflow-hidden"
      data-slot="carousel-content"
    >
      <div
        className={cn(
          "flex",
          orientation === "horizontal" ? "-ml-4" : "-mt-4 flex-col",
          className,
        )}
        {...props}
      />
    </div>
  );
}

function CarouselItem({ className, ...props }: React.ComponentProps<"div">) {
  const { orientation } = useCarousel();

  return (
    <div
      role="group"
      aria-roledescription="slide"
      data-slot="carousel-item"
      className={cn(
        "min-w-0 shrink-0 grow-0 basis-full",
        orientation === "horizontal" ? "pl-4" : "pt-4",
        className,
      )}
      {...props}
    />
  );
}

function CarouselPrevious({
  className,
  variant = "outline",
  size = "icon",
  ...props
}: React.ComponentProps<typeof Button>) {
  const { orientation, scrollPrev, canScrollPrev } = useCarousel();

  return (
    <Button
      data-slot="carousel-previous"
      variant={variant}
      size={size}
      className={cn(
        "absolute size-8 rounded-full",
        orientation === "horizontal"
          ? "top-1/2 -left-12 -translate-y-1/2"
          : "-top-12 left-1/2 -translate-x-1/2 rotate-90",
        className,
      )}
      disabled={!canScrollPrev}
      onClick={scrollPrev}
      {...props}
    >
      <ArrowLeft />
      <span className="sr-only">Previous slide</span>
    </Button>
  );
}

function CarouselNext({
  className,
  variant = "outline",
  size = "icon",
  ...props
}: React.ComponentProps<typeof Button>) {
  const { orientation, scrollNext, canScrollNext } = useCarousel();

  return (
    <Button
      data-slot="carousel-next"
      variant={variant}
      size={size}
      className={cn(
        "absolute size-8 rounded-full",
        orientation === "horizontal"
          ? "top-1/2 -right-12 -translate-y-1/2"
          : "-bottom-12 left-1/2 -translate-x-1/2 rotate-90",
        className,
      )}
      disabled={!canScrollNext}
      onClick={scrollNext}
      {...props}
    >
      <ArrowRight />
      <span className="sr-only">Next slide</span>
    </Button>
  );
}

export {
  type CarouselApi,
  Carousel,
  CarouselContent,
  CarouselItem,
  CarouselPrevious,
  CarouselNext,
};
 - - - - - - - - - - - - 
src/components/components/MapaDesinfodemico.tsx

import React, { useState } from 'react';
import botilitoImage from 'figma:asset/e27a276e6ff0e187a67cf54678c265c1c38adbf7.png';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Badge } from './ui/badge';
import { Tabs, TabsContent, TabsList, TabsTrigger } from './ui/tabs';
import { Progress } from './ui/progress';
import { Separator } from './ui/separator';
import { Alert, AlertDescription } from './ui/alert';
import { 
  Activity, TrendingUp, TrendingDown, AlertTriangle, Shield,
  MapPin, Users, Bot, Gauge, Zap, Clock, Target, Flame,
  Radio, Share2, Eye, BarChart3, PieChart, LineChart,
  AlertCircle, CheckCircle, XCircle, Wind, Thermometer, 
  ArrowUp, ArrowDown, Minus, Calendar, Filter, Download, 
  RefreshCw, Map, Layers, Hash, Percent, Timer, Globe, 
  Mountain, Waves, Trees, Sun, Cloud, Sparkles, FileText,
  TrendingDownIcon, Crosshair, Network, Database, FileCheck,
  UserCheck, BarChart4, CircleDot, Trophy, Syringe, Tag
} from 'lucide-react';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';
import { 
  BarChart, Bar, LineChart as RechartsLineChart, Line, PieChart as RechartsPieChart, Pie, Cell,
  XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, 
  AreaChart, Area, RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, Radar,
  ComposedChart, Treemap
} from 'recharts';

// Datos de ejemplo para el mapa desinfodémico
const regionesColombia = [
  { 
    id: 'caribe', 
    nombre: 'Caribe', 
    icon: Waves,
    color: '#00B4D8',
    departamentos: ['Atlántico', 'Bolívar', 'Cesar', 'Córdoba', 'La Guajira', 'Magdalena', 'Sucre'],
    poblacion: 10654876
  },
  { 
    id: 'pacifica', 
    nombre: 'Pacífica', 
    icon: Waves,
    color: '#0077B6',
    departamentos: ['Chocó', 'Valle del Cauca', 'Cauca', 'Nariño'],
    poblacion: 9773228
  },
  { 
    id: 'andina', 
    nombre: 'Andina', 
    icon: Mountain,
    color: '#7209B7',
    departamentos: ['Antioquia', 'Boyacá', 'Caldas', 'Cundinamarca', 'Huila', 'Norte de Santander', 'Quindío', 'Risaralda', 'Santander', 'Tolima'],
    poblacion: 34140778
  },
  { 
    id: 'orinoquia', 
    nombre: 'Orinoquía', 
    icon: Sun,
    color: '#F72585',
    departamentos: ['Arauca', 'Casanare', 'Meta', 'Vichada'],
    poblacion: 1664489
  },
  { 
    id: 'amazonia', 
    nombre: 'Amazonía', 
    icon: Trees,
    color: '#06FFA5',
    departamentos: ['Amazonas', 'Caquetá', 'Guainía', 'Guaviare', 'Putumayo', 'Vaupés'],
    poblacion: 1206080
  },
  { 
    id: 'insular', 
    nombre: 'Insular', 
    icon: Cloud,
    color: '#FFD60A',
    departamentos: ['San Andrés y Providencia'],
    poblacion: 77701
  }
];

// Colores para gráficos
const COLORS = ['#00B4D8', '#0077B6', '#7209B7', '#F72585', '#06FFA5', '#FFD60A'];

export function MapaDesinfodemico() {
  const [regionSeleccionada, setRegionSeleccionada] = useState('andina');
  const [periodoTiempo, setPeriodoTiempo] = useState('semanal');
  const [dimensionActiva, setDimensionActiva] = useState('magnitud');
  const [filtroMarcador, setFiltroMarcador] = useState('todos');
  const [filtroPrioridad, setFiltroPrioridad] = useState('todas');
  const [filtroVector, setFiltroVector] = useState('todos');
  const [filtroEstado, setFiltroEstado] = useState('todos');
  const [filtroTema, setFiltroTema] = useState('todos');

  const region = regionesColombia.find(r => r.id === regionSeleccionada);

  // DATOS DE INDICADORES POR DIMENSIÓN

  // 1. DIMENSIÓN: MAGNITUD
  const datosMagnitud = {
    noticiasReportadas: 1567,
    noticiasReportadasSemana: 234,
    noticiasReportadasMes: 892,
    deteccionesPorIA: 1234,
    deteccionesPorHumanos: 1189,
    tiempoDeteccionIA: 2.3,
    tiempoDeteccionHumanos: 4.8,
    fuentesGeneradoras: [
      { fuente: '@noticiasfalsas_col', casos: 456, tipo: 'Cuenta Twitter' },
      { fuente: 'GrupoWhatsApp "Noticias Urgentes"', casos: 389, tipo: 'WhatsApp' },
      { fuente: 'Portal "InfoVeraz.co"', casos: 312, tipo: 'Sitio Web' },
      { fuente: '@viral_colombia', casos: 267, tipo: 'Instagram' },
      { fuente: 'Canal Telegram "La Verdad Oculta"', casos: 189, tipo: 'Telegram' }
    ]
  };

  // 2. DIMENSIÓN: TEMPORALIDAD
  const datosTemporalidad = {
    velocidadDeteccion: 3.8,
    tiempoViralizacionPromedio: 6.2,
    evolucionSemanal: [
      { semana: 'Sem 1', detectadas: 234, viralizadas: 189, tiempo: 5.8 },
      { semana: 'Sem 2', detectadas: 267, viralizadas: 212, tiempo: 6.1 },
      { semana: 'Sem 3', detectadas: 289, viralizadas: 245, tiempo: 6.4 },
      { semana: 'Sem 4', detectadas: 312, viralizadas: 278, tiempo: 6.2 }
    ],
    comparativaVerdaderasVsFalsas: [
      { tipo: 'Verdaderas', interacciones: 3250, tiempo: 12.4 },
      { tipo: 'Falsas', interacciones: 8975, tiempo: 4.8 }
    ]
  };

  // 3. DIMENSIÓN: ALCANCE O VIRULENCIA
  const datosAlcance = {
    indiceViralidad: 2.7,
    rangoViralizacion: { min: 100, max: 125000, promedio: 8450 },
    nivelEngagement: 78,
    efectividadAlcance: {
      verdaderas: 3250,
      falsas: 8975,
      ratio: 0.36
    },
    distribucionViralidad: [
      { rango: '0-1K', casos: 456, porcentaje: 29 },
      { rango: '1K-10K', casos: 589, porcentaje: 38 },
      { rango: '10K-50K', casos: 378, porcentaje: 24 },
      { rango: '50K+', casos: 144, porcentaje: 9 }
    ]
  };

  // 4. DIMENSIÓN: GEOGRÁFICOS
  const datosGeograficos = {
    casosPorRegion: regionesColombia.map(r => ({
      region: r.nombre,
      casos: Math.floor(Math.random() * 1000) + 100,
      densidad: (Math.random() * 50 + 10).toFixed(1),
      color: r.color
    })),
    fuentesInternacionalesVsNacionales: {
      internacionales: 423,
      nacionales: 1144,
      porcentajeInternacional: 27
    },
    mapaCalor: [
      { departamento: 'Antioquia', casos: 456, lat: 6.2, lon: -75.5 },
      { departamento: 'Bogotá D.C.', casos: 892, lat: 4.6, lon: -74.0 },
      { departamento: 'Valle del Cauca', casos: 378, lat: 3.4, lon: -76.5 },
      { departamento: 'Atlántico', casos: 312, lat: 10.9, lon: -74.8 },
      { departamento: 'Santander', casos: 234, lat: 7.1, lon: -73.1 }
    ]
  };

  // 5. DIMENSIÓN: DESCRIPTIVOS
  const datosDescriptivos = {
    porSector: [
      { sector: 'Política', casos: 567, porcentaje: 36 },
      { sector: 'Salud', casos: 423, porcentaje: 27 },
      { sector: 'Economía', casos: 312, porcentaje: 20 },
      { sector: 'Seguridad', casos: 178, porcentaje: 11 },
      { sector: 'Otros', casos: 87, porcentaje: 6 }
    ],
    plataformasPropagacion: [
      { plataforma: 'WhatsApp', casos: 2345, porcentaje: 38 },
      { plataforma: 'Facebook', casos: 1987, porcentaje: 32 },
      { plataforma: 'Twitter/X', casos: 1234, porcentaje: 20 },
      { plataforma: 'Instagram', casos: 456, porcentaje: 7 },
      { plataforma: 'TikTok', casos: 189, porcentaje: 3 }
    ],
    personalidadesAtacadas: [
      { nombre: 'Presidente de la República', ataques: 234 },
      { nombre: 'Alcalde de Bogotá', ataques: 189 },
      { nombre: 'Ministro de Salud', ataques: 156 },
      { nombre: 'Candidato Opositor', ataques: 134 },
      { nombre: 'Líder Social Regional', ataques: 98 }
    ],
    sectorMasEficiente: {
      sector: 'Salud',
      alcancePromedio: 12500,
      viralidad: 85
    }
  };

  // 6. DIMENSIÓN: MITIGACIÓN
  const datosMitigacion = {
    consensoValidacionHumana: 84,
    consensoHumanoVsIA: {
      acuerdo: 81,
      desacuerdo: 19
    },
    distribucionDesacuerdo: [
      { categoria: 'IA dice Falso, Humanos Verdadero', casos: 67, porcentaje: 35 },
      { categoria: 'IA dice Verdadero, Humanos Falso', casos: 45, porcentaje: 24 },
      { categoria: 'Desacuerdo en clasificación', casos: 78, porcentaje: 41 }
    ],
    noticiasMasReportadas: [
      { titulo: 'Vacuna causa efectos secundarios graves', reportes: 456 },
      { titulo: 'Alcalde involucrado en corrupción', reportes: 389 },
      { titulo: 'Nueva cepa de virus detectada en Colombia', reportes: 312 },
      { titulo: 'Subsidio del gobierno es un fraude', reportes: 267 },
      { titulo: 'Celebridad apoya candidato político', reportes: 234 }
    ],
    // Nuevos indicadores basados en otras interfaces
    casosPorPrioridad: [
      { prioridad: 'Alta', casos: 234, porcentaje: 15 },
      { prioridad: 'Media', casos: 589, porcentaje: 38 },
      { prioridad: 'Baja', casos: 744, porcentaje: 47 }
    ],
    redEpidemiologos: {
      totalActivos: 47,
      casosProcesados: 1189,
      tiempoPromedioVerificacion: 4.8,
      consensoPromedio: 84
    },
    redInmunizadores: {
      totalActivos: 32,
      estrategiasDesarrolladas: 156,
      estrategiasActivas: 134,
      alcanceTotal: 1250000
    },
    marcadoresDiagnostico: [
      { tipo: 'Falso', casos: 567, porcentaje: 36, color: '#ef4444' },
      { tipo: 'Engañoso', casos: 423, porcentaje: 27, color: '#f97316' },
      { tipo: 'Sensacionalista', casos: 312, porcentaje: 20, color: '#fb923c' },
      { tipo: 'Sin contexto', casos: 178, porcentaje: 11, color: '#f59e0b' },
      { tipo: 'Otros', casos: 87, porcentaje: 6, color: '#6b7280' }
    ],
    vectoresContagio: [
      { tipo: 'Texto (T)', casos: 734, porcentaje: 47, codigo: 'T' },
      { tipo: 'Imagen (I)', casos: 423, porcentaje: 27, codigo: 'I' },
      { tipo: 'Video (V)', casos: 267, porcentaje: 17, codigo: 'V' },
      { tipo: 'Audio (A)', casos: 143, porcentaje: 9, codigo: 'A' }
    ],
    casosPorEstado: [
      { estado: 'Verificados', casos: 1189, porcentaje: 76, color: '#10b981' },
      { estado: 'Solo IA', casos: 378, porcentaje: 24, color: '#3b82f6' }
    ],
    sistemaCodificacion: {
      totalCasos: 1567,
      casosHoy: 34,
      casosSemana: 234,
      formatoEjemplo: 'T-WB-20241015-156'
    }
  };

  // Función para obtener ícono de tendencia
  const getTendenciaIcon = (tendencia: string) => {
    if (tendencia === 'up') return <TrendingUp className="h-4 w-4 text-red-600" />;
    if (tendencia === 'down') return <TrendingDown className="h-4 w-4 text-green-600" />;
    return <Minus className="h-4 w-4 text-gray-600" />;
  };

  // Función para obtener color de riesgo
  const getRiesgoColor = (valor: number, max: number = 100) => {
    const porcentaje = (valor / max) * 100;
    if (porcentaje >= 70) return 'text-red-600 bg-red-50 border-red-200';
    if (porcentaje >= 40) return 'text-orange-600 bg-orange-50 border-orange-200';
    return 'text-green-600 bg-green-50 border-green-200';
  };

  return (
    <div className="space-y-6">
      {/* Mensaje de Botilito */}
      <div className="bg-[#ffe97a] border-2 border-[#ffda00] rounded-lg p-4 shadow-lg">
        <div className="flex items-center space-x-4">
          <img 
            src={botilitoImage} 
            alt="Botilito" 
            className="w-24 h-24 object-contain mt-[0px] mr-[16px] mb-[-18px] ml-[0px]"
          />
          <div className="flex-1">
            <p className="text-xl">
              ¡Bienvenido al epicentro del análisis desinfodémico! 🗺️🔬
            </p>
            <p className="text-sm mt-1 opacity-80">
              Explora las 6 dimensiones de virulencia y descubre cómo se comporta la desinformación. ¡Pura epidemiología digital! 📊💉
            </p>
          </div>
        </div>
      </div>

      {/* Header */}
      <div className="flex items-start justify-between">
        <div className="space-y-2">
          <div className="flex items-center space-x-3">
            <div className="p-3 bg-primary rounded-lg">
              <Activity className="h-8 w-8 text-primary-foreground" />
            </div>
            <div>
              <h1 className="text-3xl">Mapa Desinfodémico de Colombia</h1>
              <p className="text-muted-foreground">
                Análisis epidemiológico en tiempo real por dimensiones de virulencia
              </p>
            </div>
          </div>
        </div>
        
        <div className="flex items-center space-x-2">
          <Button variant="outline" size="sm">
            <RefreshCw className="h-4 w-4 mr-2" />
            Actualizar
          </Button>
          <Button variant="outline" size="sm">
            <Download className="h-4 w-4 mr-2" />
            Exportar
          </Button>
        </div>
      </div>

      {/* Filtros Globales */}
      <div className="flex flex-wrap items-center gap-3">
        <div className="flex items-center space-x-2 text-muted-foreground">
          <Filter className="h-4 w-4" />
          <span className="text-sm">Filtrar:</span>
        </div>
        
        <Select value={periodoTiempo} onValueChange={setPeriodoTiempo}>
          <SelectTrigger className="w-[140px] border-gray-300">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="diario">Últimas 24h</SelectItem>
            <SelectItem value="semanal">Última semana</SelectItem>
            <SelectItem value="mensual">Último mes</SelectItem>
            <SelectItem value="trimestral">Trimestre</SelectItem>
          </SelectContent>
        </Select>

        <Select value={filtroMarcador} onValueChange={setFiltroMarcador}>
          <SelectTrigger className="w-[145px] border-gray-300">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="todos">Todos los tipos</SelectItem>
            <SelectItem value="falso">Falso</SelectItem>
            <SelectItem value="enganoso">Engañoso</SelectItem>
            <SelectItem value="sensacionalista">Sensacionalista</SelectItem>
            <SelectItem value="sin-contexto">Sin contexto</SelectItem>
          </SelectContent>
        </Select>

        <Select value={filtroPrioridad} onValueChange={setFiltroPrioridad}>
          <SelectTrigger className="w-[130px] border-gray-300">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="todas">Todas</SelectItem>
            <SelectItem value="alta">Alta</SelectItem>
            <SelectItem value="media">Media</SelectItem>
            <SelectItem value="baja">Baja</SelectItem>
          </SelectContent>
        </Select>

        <Select value={filtroVector} onValueChange={setFiltroVector}>
          <SelectTrigger className="w-[125px] border-gray-300">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="todos">Todos</SelectItem>
            <SelectItem value="texto">Texto (T)</SelectItem>
            <SelectItem value="imagen">Imagen (I)</SelectItem>
            <SelectItem value="video">Video (V)</SelectItem>
            <SelectItem value="audio">Audio (A)</SelectItem>
          </SelectContent>
        </Select>

        <Select value={filtroEstado} onValueChange={setFiltroEstado}>
          <SelectTrigger className="w-[135px] border-gray-300">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="todos">Todos</SelectItem>
            <SelectItem value="verificado">Verificados</SelectItem>
            <SelectItem value="solo-ia">Solo IA</SelectItem>
            <SelectItem value="revision">En revisión</SelectItem>
          </SelectContent>
        </Select>

        <Select value={filtroTema} onValueChange={setFiltroTema}>
          <SelectTrigger className="w-[135px] border-gray-300">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="todos">Todos</SelectItem>
            <SelectItem value="politica">Política</SelectItem>
            <SelectItem value="salud">Salud</SelectItem>
            <SelectItem value="economia">Economía</SelectItem>
            <SelectItem value="seguridad">Seguridad</SelectItem>
          </SelectContent>
        </Select>

        <Select value={regionSeleccionada} onValueChange={setRegionSeleccionada}>
          <SelectTrigger className="w-[145px] border-gray-300">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            {regionesColombia.map(region => {
              const IconComponent = region.icon;
              return (
                <SelectItem key={region.id} value={region.id}>
                  <div className="flex items-center space-x-2">
                    <IconComponent className="h-4 w-4" style={{ color: region.color }} />
                    <span>{region.nombre}</span>
                  </div>
                </SelectItem>
              );
            })}
          </SelectContent>
        </Select>
      </div>

      {/* Tabs de Dimensiones de Virulencia */}
      <Tabs value={dimensionActiva} onValueChange={setDimensionActiva} className="space-y-6">
        <TabsList className="grid w-full grid-cols-2 lg:grid-cols-6 h-auto">
          <TabsTrigger value="magnitud" className="flex flex-col items-center py-3 px-2">
            <Database className="h-5 w-5 mb-1" />
            <span className="text-xs">Magnitud</span>
          </TabsTrigger>
          <TabsTrigger value="temporalidad" className="flex flex-col items-center py-3 px-2">
            <Clock className="h-5 w-5 mb-1" />
            <span className="text-xs">Temporalidad</span>
          </TabsTrigger>
          <TabsTrigger value="alcance" className="flex flex-col items-center py-3 px-2">
            <Flame className="h-5 w-5 mb-1" />
            <span className="text-xs">Virulencia</span>
          </TabsTrigger>
          <TabsTrigger value="geograficos" className="flex flex-col items-center py-3 px-2">
            <MapPin className="h-5 w-5 mb-1" />
            <span className="text-xs">Geográficos</span>
          </TabsTrigger>
          <TabsTrigger value="descriptivos" className="flex flex-col items-center py-3 px-2">
            <FileText className="h-5 w-5 mb-1" />
            <span className="text-xs">Descriptivos</span>
          </TabsTrigger>
          <TabsTrigger value="mitigacion" className="flex flex-col items-center py-3 px-2">
            <Shield className="h-5 w-5 mb-1" />
            <span className="text-xs">Mitigación</span>
          </TabsTrigger>
        </TabsList>

        {/* DIMENSIÓN 1: MAGNITUD */}
        <TabsContent value="magnitud" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Database className="h-6 w-6 text-primary" />
                <span>Dimensión de Magnitud</span>
              </CardTitle>
              <CardDescription>
                Cuantifica el volumen total de contenidos reportados, detectados como falsos por IA y validados por humanos
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              {/* Indicadores Principales */}
              <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                <Card className="bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-blue-700">Noticias Reportadas</CardDescription>
                    <CardTitle className="text-3xl text-blue-900">{datosMagnitud.noticiasReportadas.toLocaleString()}</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center justify-between text-xs text-blue-700">
                      <span>Esta semana: +{datosMagnitud.noticiasReportadasSemana}</span>
                      <TrendingUp className="h-3 w-3" />
                    </div>
                  </CardContent>
                </Card>

                <Card className="bg-gradient-to-br from-red-50 to-red-100 border-red-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-red-700">Detectadas por IA</CardDescription>
                    <CardTitle className="text-3xl text-red-900">{datosMagnitud.deteccionesPorIA.toLocaleString()}</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center justify-between text-xs text-red-700">
                      <span>Tiempo promedio: {datosMagnitud.tiempoDeteccionIA}h</span>
                      <Bot className="h-3 w-3" />
                    </div>
                  </CardContent>
                </Card>

                <Card className="bg-gradient-to-br from-green-50 to-green-100 border-green-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-green-700">Validadas por Humanos</CardDescription>
                    <CardTitle className="text-3xl text-green-900">{datosMagnitud.deteccionesPorHumanos.toLocaleString()}</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center justify-between text-xs text-green-700">
                      <span>Tiempo promedio: {datosMagnitud.tiempoDeteccionHumanos}h</span>
                      <Users className="h-3 w-3" />
                    </div>
                  </CardContent>
                </Card>
              </div>

              {/* Gráfico de evolución de reportes */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Evolución de Noticias Reportadas</CardTitle>
                  <CardDescription>Tendencia de reportes por unidad de tiempo y mecanismo</CardDescription>
                </CardHeader>
                <CardContent>
                  <ResponsiveContainer width="100%" height={300}>
                    <AreaChart data={[
                      { mes: 'Ene', reportadas: 890, iaDetectadas: 745, humanasValidadas: 712 },
                      { mes: 'Feb', reportadas: 1120, iaDetectadas: 934, humanasValidadas: 889 },
                      { mes: 'Mar', reportadas: 1456, iaDetectadas: 1189, humanasValidadas: 1134 },
                      { mes: 'Abr', reportadas: 1567, iaDetectadas: 1234, humanasValidadas: 1189 }
                    ]}>
                      <CartesianGrid strokeDasharray="3 3" />
                      <XAxis dataKey="mes" />
                      <YAxis />
                      <Tooltip />
                      <Legend />
                      <Area type="monotone" dataKey="reportadas" stackId="1" stroke="#3b82f6" fill="#3b82f6" name="Reportadas" />
                      <Area type="monotone" dataKey="iaDetectadas" stackId="2" stroke="#ef4444" fill="#ef4444" name="IA Detectadas" />
                      <Area type="monotone" dataKey="humanasValidadas" stackId="3" stroke="#10b981" fill="#10b981" name="Validadas Humanos" />
                    </AreaChart>
                  </ResponsiveContainer>
                </CardContent>
              </Card>

              {/* Ranking de Fuentes Generadoras */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Ranking de Fuentes Generadoras de Desinformación</CardTitle>
                  <CardDescription>Identifica los actores clave que generan contenido falso</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="space-y-3">
                    {datosMagnitud.fuentesGeneradoras.map((fuente, idx) => (
                      <div key={idx} className="p-4 border rounded-lg bg-gradient-to-r from-red-50 to-orange-50">
                        <div className="flex items-center justify-between mb-2">
                          <div className="flex items-center space-x-3">
                            <Badge className="bg-red-600 text-white">#{idx + 1}</Badge>
                            <div>
                              <p className="font-medium">{fuente.fuente}</p>
                              <p className="text-xs text-muted-foreground">{fuente.tipo}</p>
                            </div>
                          </div>
                          <div className="text-right">
                            <p className="text-2xl text-red-700">{fuente.casos}</p>
                            <p className="text-xs text-muted-foreground">casos detectados</p>
                          </div>
                        </div>
                        <Progress value={(fuente.casos / datosMagnitud.fuentesGeneradoras[0].casos) * 100} className="h-2" />
                      </div>
                    ))}
                  </div>
                </CardContent>
              </Card>
            </CardContent>
          </Card>
        </TabsContent>

        {/* DIMENSIÓN 2: TEMPORALIDAD */}
        <TabsContent value="temporalidad" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Clock className="h-6 w-6 text-primary" />
                <span>Dimensión de Temporalidad</span>
              </CardTitle>
              <CardDescription>
                Tiempo de ocurrencia y velocidad de detección y viralización de noticias falsas versus verdaderas
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              {/* Indicadores Temporales */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <Card className="bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-purple-700">Velocidad de Detección</CardDescription>
                    <CardTitle className="text-3xl text-purple-900">{datosTemporalidad.velocidadDeteccion}h</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center space-x-1 text-xs text-purple-700">
                      <Zap className="h-3 w-3" />
                      <span>Tiempo promedio de detección</span>
                    </div>
                  </CardContent>
                </Card>

                <Card className="bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-orange-700">Tiempo de Viralización</CardDescription>
                    <CardTitle className="text-3xl text-orange-900">{datosTemporalidad.tiempoViralizacionPromedio}h</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center space-x-1 text-xs text-orange-700">
                      <Radio className="h-3 w-3" />
                      <span>Ventana crítica de intervención</span>
                    </div>
                  </CardContent>
                </Card>
              </div>

              {/* Evolución Temporal */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Evolución Temporal de Detección vs Viralización</CardTitle>
                  <CardDescription>Comparativa de casos detectados versus viralizados por semana</CardDescription>
                </CardHeader>
                <CardContent>
                  <ResponsiveContainer width="100%" height={300}>
                    <AreaChart data={datosTemporalidad.evolucionSemanal}>
                      <CartesianGrid strokeDasharray="3 3" />
                      <XAxis dataKey="semana" />
                      <YAxis />
                      <Tooltip />
                      <Legend />
                      <Area type="monotone" dataKey="detectadas" stroke="#8b5cf6" fill="#8b5cf6" fillOpacity={0.6} name="Detectadas" />
                      <Area type="monotone" dataKey="viralizadas" stroke="#f97316" fill="#f97316" fillOpacity={0.6} name="Viralizadas" />
                    </AreaChart>
                  </ResponsiveContainer>
                </CardContent>
              </Card>

              {/* Comparativa Verdaderas vs Falsas */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Tiempo de Viralización: Noticias Verdaderas vs Falsas</CardTitle>
                  <CardDescription>Comparación de peligrosidad por velocidad de propagación</CardDescription>
                </CardHeader>
                <CardContent>
                  <ResponsiveContainer width="100%" height={250}>
                    <BarChart data={datosTemporalidad.comparativaVerdaderasVsFalsas} layout="vertical">
                      <CartesianGrid strokeDasharray="3 3" />
                      <XAxis type="number" />
                      <YAxis dataKey="tipo" type="category" />
                      <Tooltip />
                      <Legend />
                      <Bar dataKey="interacciones" fill="#3b82f6" name="Interacciones" />
                      <Bar dataKey="tiempo" fill="#f59e0b" name="Tiempo (horas)" />
                    </BarChart>
                  </ResponsiveContainer>
                  <Alert className="mt-4 border-orange-200 bg-orange-50">
                    <AlertTriangle className="h-4 w-4 text-orange-600" />
                    <AlertDescription className="text-orange-800">
                      Las noticias falsas se viralizan <strong>2.6x más rápido</strong> que las verdaderas, con un tiempo promedio de {datosTemporalidad.comparativaVerdaderasVsFalsas[1].tiempo}h vs {datosTemporalidad.comparativaVerdaderasVsFalsas[0].tiempo}h
                    </AlertDescription>
                  </Alert>
                </CardContent>
              </Card>
            </CardContent>
          </Card>
        </TabsContent>

        {/* DIMENSIÓN 3: ALCANCE O VIRULENCIA */}
        <TabsContent value="alcance" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Flame className="h-6 w-6 text-primary" />
                <span>Dimensión de Alcance o Virulencia</span>
              </CardTitle>
              <CardDescription>
                Evalúa el índice de viralidad, porcentaje de mayor viralización y nivel de engagement
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              {/* Métricas de Virulencia */}
              <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                <Card className="bg-gradient-to-br from-red-50 to-red-100 border-red-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-red-700">Índice de Viralidad</CardDescription>
                    <CardTitle className="text-3xl text-red-900">{datosAlcance.indiceViralidad}</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center space-x-1 text-xs text-red-700">
                      <Flame className="h-3 w-3" />
                      <span>Potencial de contagio</span>
                    </div>
                  </CardContent>
                </Card>

                <Card className="bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-yellow-700">Nivel de Engagement</CardDescription>
                    <CardTitle className="text-3xl text-yellow-900">{datosAlcance.nivelEngagement}%</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center space-x-1 text-xs text-yellow-700">
                      <Target className="h-3 w-3" />
                      <span>Impacto emocional promedio</span>
                    </div>
                  </CardContent>
                </Card>

                <Card className="bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-purple-700">Alcance Promedio</CardDescription>
                    <CardTitle className="text-2xl text-purple-900">{datosAlcance.rangoViralizacion.promedio.toLocaleString()}</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center justify-between text-xs text-purple-700">
                      <span>Min: {datosAlcance.rangoViralizacion.min}</span>
                      <span>Max: {(datosAlcance.rangoViralizacion.max / 1000).toFixed(0)}K</span>
                    </div>
                  </CardContent>
                </Card>
              </div>

              {/* Distribución de Viralidad */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Distribución de Viralización por Rango</CardTitle>
                  <CardDescription>Porcentaje y rango de mayor viralización de noticias falsas</CardDescription>
                </CardHeader>
                <CardContent>
                  <ResponsiveContainer width="100%" height={300}>
                    <BarChart data={datosAlcance.distribucionViralidad} layout="vertical">
                      <CartesianGrid strokeDasharray="3 3" />
                      <XAxis type="number" />
                      <YAxis dataKey="rango" type="category" width={100} />
                      <Tooltip />
                      <Legend />
                      <Bar dataKey="casos" fill="#f59e0b" name="Casos" />
                      <Bar dataKey="porcentaje" fill="#ef4444" name="Porcentaje %" />
                    </BarChart>
                  </ResponsiveContainer>
                </CardContent>
              </Card>

              {/* Efectividad de Alcance */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Efectividad de Alcance: Verdaderas vs Falsas</CardTitle>
                  <CardDescription>Evalúa competencia comunicacional entre información verificada y desinformación</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="grid grid-cols-2 gap-4 mb-4">
                    <div className="p-4 bg-green-50 border-2 border-green-200 rounded-lg text-center">
                      <p className="text-sm text-green-700 mb-1">Noticias Verdaderas</p>
                      <p className="text-3xl text-green-900">{datosAlcance.efectividadAlcance.verdaderas.toLocaleString()}</p>
                      <p className="text-xs text-green-600 mt-1">interacciones promedio</p>
                    </div>
                    <div className="p-4 bg-red-50 border-2 border-red-200 rounded-lg text-center">
                      <p className="text-sm text-red-700 mb-1">Noticias Falsas</p>
                      <p className="text-3xl text-red-900">{datosAlcance.efectividadAlcance.falsas.toLocaleString()}</p>
                      <p className="text-xs text-red-600 mt-1">interacciones promedio</p>
                    </div>
                  </div>
                  <Alert className="border-red-200 bg-red-50">
                    <AlertCircle className="h-4 w-4 text-red-600" />
                    <AlertDescription className="text-red-800">
                      <strong>Brecha de efectividad:</strong> Las noticias falsas tienen {(datosAlcance.efectividadAlcance.falsas / datosAlcance.efectividadAlcance.verdaderas).toFixed(1)}x más alcance que las verdaderas. Ratio de competencia: {(datosAlcance.efectividadAlcance.ratio * 100).toFixed(0)}%
                    </AlertDescription>
                  </Alert>
                </CardContent>
              </Card>
            </CardContent>
          </Card>
        </TabsContent>

        {/* DIMENSIÓN 4: GEOGRÁFICOS */}
        <TabsContent value="geograficos" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <MapPin className="h-6 w-6 text-primary" />
                <span>Dimensión Geográfica</span>
              </CardTitle>
              <CardDescription>
                Alcance espacial de noticias falsas, agrupación en clústeres y patrones espaciales
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              {/* Casos por Región */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Cantidad de Noticias Falsas por Región</CardTitle>
                  <CardDescription>Detecta patrones territoriales de desinformación</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="space-y-3">
                    {datosGeograficos.casosPorRegion.map((region, idx) => (
                      <div key={idx} className="space-y-2">
                        <div className="flex items-center justify-between">
                          <div className="flex items-center space-x-3">
                            <div className="w-4 h-4 rounded" style={{ backgroundColor: region.color }}></div>
                            <span className="font-medium">{region.region}</span>
                          </div>
                          <div className="flex items-center space-x-3">
                            <Badge variant="outline">{region.casos} casos</Badge>
                            <Badge variant="outline" className="text-xs">
                              {region.densidad} por 100k hab
                            </Badge>
                          </div>
                        </div>
                        <Progress value={(region.casos / 1000) * 100} className="h-2" style={{ backgroundColor: `${region.color}30` }} />
                      </div>
                    ))}
                  </div>
                </CardContent>
              </Card>

              {/* Mapa de Calor */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Mapa de Calor Geográfico de Desinformación</CardTitle>
                  <CardDescription>Visualiza densidades por ubicación geográfica (Top 5 departamentos)</CardDescription>
                </CardHeader>
                <CardContent>
                  <ResponsiveContainer width="100%" height={300}>
                    <BarChart data={datosGeograficos.mapaCalor}>
                      <CartesianGrid strokeDasharray="3 3" />
                      <XAxis dataKey="departamento" angle={-15} textAnchor="end" height={80} />
                      <YAxis />
                      <Tooltip />
                      <Legend />
                      <Bar dataKey="casos" fill="#ef4444" name="Casos detectados" />
                    </BarChart>
                  </ResponsiveContainer>
                  <div className="mt-4 p-4 bg-red-50 border border-red-200 rounded-lg">
                    <h4 className="text-sm text-red-900 mb-2">🔥 Zona de Mayor Concentración</h4>
                    <p className="text-xs text-red-700">
                      <strong>Bogotá D.C.</strong> presenta la mayor densidad con {datosGeograficos.mapaCalor[1].casos} casos detectados, 
                      representando una zona crítica que requiere atención prioritaria.
                    </p>
                  </div>
                </CardContent>
              </Card>

              {/* Fuentes Internacionales vs Nacionales */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Fuentes Internacionales vs Nacionales</CardTitle>
                  <CardDescription>Analiza el origen de los emisores de desinformación</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="grid grid-cols-2 gap-4 mb-4">
                    <div className="p-6 bg-blue-50 border-2 border-blue-200 rounded-lg text-center">
                      <Globe className="h-8 w-8 text-blue-600 mx-auto mb-2" />
                      <p className="text-3xl text-blue-900 mb-1">{datosGeograficos.fuentesInternacionalesVsNacionales.internacionales}</p>
                      <p className="text-sm text-blue-700">Fuentes Internacionales</p>
                      <Badge className="bg-blue-600 text-white mt-2">
                        {datosGeograficos.fuentesInternacionalesVsNacionales.porcentajeInternacional}%
                      </Badge>
                    </div>
                    <div className="p-6 bg-green-50 border-2 border-green-200 rounded-lg text-center">
                      <MapPin className="h-8 w-8 text-green-600 mx-auto mb-2" />
                      <p className="text-3xl text-green-900 mb-1">{datosGeograficos.fuentesInternacionalesVsNacionales.nacionales}</p>
                      <p className="text-sm text-green-700">Fuentes Nacionales</p>
                      <Badge className="bg-green-600 text-white mt-2">
                        {100 - datosGeograficos.fuentesInternacionalesVsNacionales.porcentajeInternacional}%
                      </Badge>
                    </div>
                  </div>
                  <ResponsiveContainer width="100%" height={200}>
                    <RechartsPieChart>
                      <Pie
                        data={[
                          { name: 'Internacionales', value: datosGeograficos.fuentesInternacionalesVsNacionales.internacionales },
                          { name: 'Nacionales', value: datosGeograficos.fuentesInternacionalesVsNacionales.nacionales }
                        ]}
                        cx="50%"
                        cy="50%"
                        labelLine={false}
                        label={({ name, percent }) => `${name}: ${(percent * 100).toFixed(0)}%`}
                        outerRadius={80}
                        fill="#8884d8"
                        dataKey="value"
                      >
                        <Cell fill="#3b82f6" />
                        <Cell fill="#10b981" />
                      </Pie>
                      <Tooltip />
                    </RechartsPieChart>
                  </ResponsiveContainer>
                </CardContent>
              </Card>
            </CardContent>
          </Card>
        </TabsContent>

        {/* DIMENSIÓN 5: DESCRIPTIVOS */}
        <TabsContent value="descriptivos" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <FileText className="h-6 w-6 text-primary" />
                <span>Dimensión Descriptiva</span>
              </CardTitle>
              <CardDescription>
                Caracteriza los principales componentes de una posible situación de virulencia
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              {/* Noticias Falsas por Sector */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Porcentaje de Noticias Falsas por Sector</CardTitle>
                  <CardDescription>Clasifica por temática (salud, política, economía, etc.)</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="grid md:grid-cols-2 gap-6">
                    <ResponsiveContainer width="100%" height={300}>
                      <RechartsPieChart>
                        <Pie
                          data={datosDescriptivos.porSector}
                          cx="50%"
                          cy="50%"
                          labelLine={false}
                          label={({ sector, porcentaje }) => `${sector}: ${porcentaje}%`}
                          outerRadius={100}
                          fill="#8884d8"
                          dataKey="casos"
                        >
                          {datosDescriptivos.porSector.map((entry, index) => (
                            <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
                          ))}
                        </Pie>
                        <Tooltip />
                      </RechartsPieChart>
                    </ResponsiveContainer>
                    <div className="space-y-2">
                      {datosDescriptivos.porSector.map((sector, idx) => (
                        <div key={idx} className="p-3 border rounded-lg hover:bg-gray-50 transition-colors">
                          <div className="flex items-center justify-between mb-2">
                            <div className="flex items-center space-x-2">
                              <div className="w-3 h-3 rounded" style={{ backgroundColor: COLORS[idx % COLORS.length] }}></div>
                              <span className="font-medium">{sector.sector}</span>
                            </div>
                            <Badge>{sector.porcentaje}%</Badge>
                          </div>
                          <div className="flex items-center justify-between text-xs text-muted-foreground">
                            <span>{sector.casos} casos</span>
                            <Progress value={sector.porcentaje} className="w-20 h-1" />
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                </CardContent>
              </Card>

              {/* Plataformas con Mayor Propagación */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Plataformas con Mayor Propagación</CardTitle>
                  <CardDescription>Identifica las redes sociales más activas en la difusión</CardDescription>
                </CardHeader>
                <CardContent>
                  <ResponsiveContainer width="100%" height={300}>
                    <BarChart data={datosDescriptivos.plataformasPropagacion} layout="vertical">
                      <CartesianGrid strokeDasharray="3 3" />
                      <XAxis type="number" />
                      <YAxis dataKey="plataforma" type="category" width={100} />
                      <Tooltip />
                      <Legend />
                      <Bar dataKey="casos" fill="#7209B7" name="Casos detectados" />
                    </BarChart>
                  </ResponsiveContainer>
                  <Alert className="mt-4 border-purple-200 bg-purple-50">
                    <Share2 className="h-4 w-4 text-purple-600" />
                    <AlertDescription className="text-purple-800">
                      <strong>Plataforma líder:</strong> WhatsApp concentra el {datosDescriptivos.plataformasPropagacion[0].porcentaje}% 
                      de la propagación con {datosDescriptivos.plataformasPropagacion[0].casos.toLocaleString()} casos detectados
                    </AlertDescription>
                  </Alert>
                </CardContent>
              </Card>

              {/* Ranking de Personalidades Atacadas */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Ranking de Personalidades Más Atacadas</CardTitle>
                  <CardDescription>Lista de figuras públicas difamadas o mencionadas en desinformación</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="space-y-3">
                    {datosDescriptivos.personalidadesAtacadas.map((persona, idx) => (
                      <div key={idx} className="flex items-center justify-between p-4 border rounded-lg bg-gradient-to-r from-orange-50 to-red-50">
                        <div className="flex items-center space-x-3">
                          <Badge className="bg-orange-600 text-white text-lg w-10 h-10 flex items-center justify-center">
                            #{idx + 1}
                          </Badge>
                          <span className="font-medium">{persona.nombre}</span>
                        </div>
                        <div className="text-right">
                          <p className="text-2xl text-orange-700">{persona.ataques}</p>
                          <p className="text-xs text-muted-foreground">ataques detectados</p>
                        </div>
                      </div>
                    ))}
                  </div>
                </CardContent>
              </Card>

              {/* Sector Más Eficiente */}
              <Card className="bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200">
                <CardHeader>
                  <CardTitle className="text-lg">Sector Más Eficiente en Alcance</CardTitle>
                  <CardDescription>Compara viralización por área temática</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="text-center p-6">
                    <Trophy className="h-12 w-12 text-yellow-500 mx-auto mb-4" />
                    <h3 className="text-2xl mb-2">{datosDescriptivos.sectorMasEficiente.sector}</h3>
                    <div className="grid grid-cols-2 gap-4 mt-4">
                      <div className="p-3 bg-white rounded-lg">
                        <p className="text-xs text-muted-foreground mb-1">Alcance Promedio</p>
                        <p className="text-xl text-blue-700">{datosDescriptivos.sectorMasEficiente.alcancePromedio.toLocaleString()}</p>
                      </div>
                      <div className="p-3 bg-white rounded-lg">
                        <p className="text-xs text-muted-foreground mb-1">Nivel de Viralidad</p>
                        <p className="text-xl text-purple-700">{datosDescriptivos.sectorMasEficiente.viralidad}%</p>
                      </div>
                    </div>
                  </div>
                </CardContent>
              </Card>
            </CardContent>
          </Card>
        </TabsContent>

        {/* DIMENSIÓN 6: MITIGACIÓN */}
        <TabsContent value="mitigacion" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Shield className="h-6 w-6 text-primary" />
                <span>Dimensión de Mitigación</span>
              </CardTitle>
              <CardDescription>
                Sistema de aprendizaje activo donde la fricción entre IA y humanos mejora la confiabilidad
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              {/* Consenso de Validación */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <Card className="bg-gradient-to-br from-green-50 to-green-100 border-green-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-green-700">Consenso Validación Humana</CardDescription>
                    <CardTitle className="text-3xl text-green-900">{datosMitigacion.consensoValidacionHumana}%</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center space-x-1 text-xs text-green-700">
                      <UserCheck className="h-3 w-3" />
                      <span>Acuerdo entre validadores</span>
                    </div>
                    <Progress value={datosMitigacion.consensoValidacionHumana} className="mt-2 h-2" />
                  </CardContent>
                </Card>

                <Card className="bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200">
                  <CardHeader className="pb-2">
                    <CardDescription className="text-blue-700">Consenso Humano + IA</CardDescription>
                    <CardTitle className="text-3xl text-blue-900">{datosMitigacion.consensoHumanoVsIA.acuerdo}%</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="flex items-center space-x-1 text-xs text-blue-700">
                      <Bot className="h-3 w-3" />
                      <span>Concordancia IA-Humanos</span>
                    </div>
                    <Progress value={datosMitigacion.consensoHumanoVsIA.acuerdo} className="mt-2 h-2" />
                  </CardContent>
                </Card>
              </div>

              {/* Consenso vs Desacuerdo */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Consenso Humano vs IA</CardTitle>
                  <CardDescription>Evalúa concordancia y señala límites de automatización</CardDescription>
                </CardHeader>
                <CardContent>
                  <ResponsiveContainer width="100%" height={250}>
                    <RechartsPieChart>
                      <Pie
                        data={[
                          { name: 'Consenso', value: datosMitigacion.consensoHumanoVsIA.acuerdo, fill: '#10b981' },
                          { name: 'Desacuerdo', value: datosMitigacion.consensoHumanoVsIA.desacuerdo, fill: '#f59e0b' }
                        ]}
                        cx="50%"
                        cy="50%"
                        labelLine={false}
                        label={({ name, percent }) => `${name}: ${(percent * 100).toFixed(0)}%`}
                        outerRadius={80}
                        fill="#8884d8"
                        dataKey="value"
                        innerRadius={40}
                      >
                      </Pie>
                      <Tooltip />
                    </RechartsPieChart>
                  </ResponsiveContainer>
                </CardContent>
              </Card>

              {/* Distribución de Desacuerdos */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Porcentaje de Desacuerdo Humano vs IA</CardTitle>
                  <CardDescription>Señala límites de automatización y áreas de mejora para la IA</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="space-y-3">
                    {datosMitigacion.distribucionDesacuerdo.map((item, idx) => (
                      <div key={idx} className="space-y-2">
                        <div className="flex items-center justify-between">
                          <span className="text-sm font-medium">{item.categoria}</span>
                          <Badge variant="outline">{item.porcentaje}%</Badge>
                        </div>
                        <div className="flex items-center space-x-2">
                          <Progress value={item.porcentaje} className="flex-1 h-2" />
                          <span className="text-xs text-muted-foreground">{item.casos} casos</span>
                        </div>
                      </div>
                    ))}
                  </div>
                  <Alert className="mt-4 border-yellow-200 bg-yellow-50">
                    <AlertCircle className="h-4 w-4 text-yellow-600" />
                    <AlertDescription className="text-yellow-800">
                      El {datosMitigacion.consensoHumanoVsIA.desacuerdo}% de desacuerdo representa oportunidades de aprendizaje 
                      para mejorar los algoritmos de IA y refinar los criterios de validación humana
                    </AlertDescription>
                  </Alert>
                </CardContent>
              </Card>

              {/* Ranking de Noticias Más Reportadas */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Ranking de Noticias Más Reportadas</CardTitle>
                  <CardDescription>Detecta alertas ciudadanas y temas de mayor preocupación</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="space-y-3">
                    {datosMitigacion.noticiasMasReportadas.map((noticia, idx) => (
                      <div key={idx} className="flex items-center justify-between p-4 border rounded-lg bg-gradient-to-r from-blue-50 to-purple-50 hover:shadow-md transition-shadow">
                        <div className="flex items-center space-x-3 flex-1">
                          <Badge className="bg-blue-600 text-white text-lg w-10 h-10 flex items-center justify-center flex-shrink-0">
                            #{idx + 1}
                          </Badge>
                          <p className="font-medium text-sm">{noticia.titulo}</p>
                        </div>
                        <div className="text-right ml-4">
                          <p className="text-2xl text-blue-700">{noticia.reportes}</p>
                          <p className="text-xs text-muted-foreground">reportes</p>
                        </div>
                      </div>
                    ))}
                  </div>
                  <Alert className="mt-4 border-blue-200 bg-blue-50">
                    <Eye className="h-4 w-4 text-blue-600" />
                    <AlertDescription className="text-blue-800">
                      <strong>Detección ciudadana:</strong> Los temas relacionados con salud y política concentran 
                      el {((datosMitigacion.noticiasMasReportadas[0].reportes + datosMitigacion.noticiasMasReportadas[1].reportes) / 
                      datosMitigacion.noticiasMasReportadas.reduce((sum, n) => sum + n.reportes, 0) * 100).toFixed(0)}% 
                      de los reportes ciudadanos
                    </AlertDescription>
                  </Alert>
                </CardContent>
              </Card>

              {/* Nuevos Indicadores: Red de Epidemiólogos e Inmunizadores */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <Card className="bg-gradient-to-br from-emerald-50 to-teal-100 border-emerald-200">
                  <CardHeader>
                    <CardTitle className="flex items-center space-x-2">
                      <Users className="h-5 w-5 text-emerald-700" />
                      <span>Red de Epidemiólogos</span>
                    </CardTitle>
                    <CardDescription>Especialistas en diagnóstico desinfodémico</CardDescription>
                  </CardHeader>
                  <CardContent className="space-y-3">
                    <div className="flex items-center justify-between">
                      <span className="text-sm text-muted-foreground">Epidemiólogos activos</span>
                      <Badge className="bg-emerald-600 text-white text-lg px-3 py-1">
                        {datosMitigacion.redEpidemiologos.totalActivos}
                      </Badge>
                    </div>
                    <Separator />
                    <div className="space-y-2">
                      <div className="flex items-center justify-between text-sm">
                        <span className="text-muted-foreground">Casos procesados</span>
                        <span className="font-medium">{datosMitigacion.redEpidemiologos.casosProcesados.toLocaleString()}</span>
                      </div>
                      <div className="flex items-center justify-between text-sm">
                        <span className="text-muted-foreground">Tiempo promedio</span>
                        <span className="font-medium">{datosMitigacion.redEpidemiologos.tiempoPromedioVerificacion}h</span>
                      </div>
                      <div className="flex items-center justify-between text-sm">
                        <span className="text-muted-foreground">Consenso promedio</span>
                        <span className="font-medium">{datosMitigacion.redEpidemiologos.consensoPromedio}%</span>
                      </div>
                    </div>
                  </CardContent>
                </Card>

                <Card className="bg-gradient-to-br from-purple-50 to-indigo-100 border-purple-200">
                  <CardHeader>
                    <CardTitle className="flex items-center space-x-2">
                      <Syringe className="h-5 w-5 text-purple-700" />
                      <span>Red de Inmunizadores</span>
                    </CardTitle>
                    <CardDescription>Especialistas en estrategias de inmunización</CardDescription>
                  </CardHeader>
                  <CardContent className="space-y-3">
                    <div className="flex items-center justify-between">
                      <span className="text-sm text-muted-foreground">Inmunizadores activos</span>
                      <Badge className="bg-purple-600 text-white text-lg px-3 py-1">
                        {datosMitigacion.redInmunizadores.totalActivos}
                      </Badge>
                    </div>
                    <Separator />
                    <div className="space-y-2">
                      <div className="flex items-center justify-between text-sm">
                        <span className="text-muted-foreground">Estrategias desarrolladas</span>
                        <span className="font-medium">{datosMitigacion.redInmunizadores.estrategiasDesarrolladas}</span>
                      </div>
                      <div className="flex items-center justify-between text-sm">
                        <span className="text-muted-foreground">Estrategias activas</span>
                        <span className="font-medium">{datosMitigacion.redInmunizadores.estrategiasActivas}</span>
                      </div>
                      <div className="flex items-center justify-between text-sm">
                        <span className="text-muted-foreground">Alcance total</span>
                        <span className="font-medium">{(datosMitigacion.redInmunizadores.alcanceTotal / 1000000).toFixed(1)}M</span>
                      </div>
                    </div>
                  </CardContent>
                </Card>
              </div>

              {/* Marcadores de Diagnóstico */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Distribución de Marcadores de Diagnóstico</CardTitle>
                  <CardDescription>Tipos de desinformación más detectados por el sistema</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="grid md:grid-cols-2 gap-6">
                    <ResponsiveContainer width="100%" height={300}>
                      <RechartsPieChart>
                        <Pie
                          data={datosMitigacion.marcadoresDiagnostico}
                          cx="50%"
                          cy="50%"
                          labelLine={false}
                          label={({ tipo, porcentaje }) => `${tipo}: ${porcentaje}%`}
                          outerRadius={100}
                          fill="#8884d8"
                          dataKey="casos"
                        >
                          {datosMitigacion.marcadoresDiagnostico.map((entry, index) => (
                            <Cell key={`cell-${index}`} fill={entry.color} />
                          ))}
                        </Pie>
                        <Tooltip />
                      </RechartsPieChart>
                    </ResponsiveContainer>
                    <div className="space-y-2">
                      {datosMitigacion.marcadoresDiagnostico.map((marcador, idx) => (
                        <div key={idx} className="p-3 border rounded-lg hover:bg-gray-50 transition-colors">
                          <div className="flex items-center justify-between mb-2">
                            <div className="flex items-center space-x-2">
                              <div className="w-3 h-3 rounded" style={{ backgroundColor: marcador.color }}></div>
                              <span className="font-medium">{marcador.tipo}</span>
                            </div>
                            <Badge>{marcador.porcentaje}%</Badge>
                          </div>
                          <div className="flex items-center justify-between text-xs text-muted-foreground">
                            <span>{marcador.casos} casos</span>
                            <Progress value={marcador.porcentaje} className="w-20 h-1" />
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                </CardContent>
              </Card>

              {/* Vectores de Contagio */}
              <Card>
                <CardHeader>
                  <CardTitle className="text-lg">Vectores de Contagio (Tipo de Contenido)</CardTitle>
                  <CardDescription>Distribución por formato del contenido desinfodémico</CardDescription>
                </CardHeader>
                <CardContent>
                  <ResponsiveContainer width="100%" height={300}>
                    <BarChart data={datosMitigacion.vectoresContagio}>
                      <CartesianGrid strokeDasharray="3 3" />
                      <XAxis dataKey="tipo" />
                      <YAxis />
                      <Tooltip />
                      <Legend />
                      <Bar dataKey="casos" fill="#7209B7" name="Casos" />
                    </BarChart>
                  </ResponsiveContainer>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-3 mt-4">
                    {datosMitigacion.vectoresContagio.map((vector, idx) => (
                      <div key={idx} className="p-4 border rounded-lg text-center bg-gradient-to-br from-purple-50 to-blue-50">
                        <Badge className="bg-purple-600 text-white mb-2">{vector.codigo}</Badge>
                        <p className="text-2xl font-bold text-purple-900">{vector.casos}</p>
                        <p className="text-xs text-muted-foreground mt-1">{vector.porcentaje}%</p>
                      </div>
                    ))}
                  </div>
                </CardContent>
              </Card>

              {/* Casos por Prioridad y Estado */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <Card>
                  <CardHeader>
                    <CardTitle className="text-lg">Casos por Nivel de Prioridad</CardTitle>
                    <CardDescription>Clasificación según urgencia de intervención</CardDescription>
                  </CardHeader>
                  <CardContent>
                    <div className="space-y-3">
                      {datosMitigacion.casosPorPrioridad.map((prioridad, idx) => {
                        const colors = {
                          'Alta': { bg: 'bg-red-50', text: 'text-red-700', border: 'border-red-200', badge: 'bg-red-600' },
                          'Media': { bg: 'bg-orange-50', text: 'text-orange-700', border: 'border-orange-200', badge: 'bg-orange-600' },
                          'Baja': { bg: 'bg-blue-50', text: 'text-blue-700', border: 'border-blue-200', badge: 'bg-blue-600' }
                        };
                        const color = colors[prioridad.prioridad as keyof typeof colors];
                        return (
                          <div key={idx} className={`p-4 border-2 rounded-lg ${color.bg} ${color.border}`}>
                            <div className="flex items-center justify-between mb-2">
                              <span className={`font-medium ${color.text}`}>{prioridad.prioridad}</span>
                              <Badge className={`${color.badge} text-white`}>{prioridad.porcentaje}%</Badge>
                            </div>
                            <div className="flex items-center justify-between">
                              <span className="text-2xl font-bold">{prioridad.casos}</span>
                              <Progress value={prioridad.porcentaje} className="w-24 h-2" />
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  </CardContent>
                </Card>

                <Card>
                  <CardHeader>
                    <CardTitle className="text-lg">Estado de Verificación</CardTitle>
                    <CardDescription>Casos verificados vs solo análisis IA</CardDescription>
                  </CardHeader>
                  <CardContent>
                    <ResponsiveContainer width="100%" height={200}>
                      <RechartsPieChart>
                        <Pie
                          data={datosMitigacion.casosPorEstado}
                          cx="50%"
                          cy="50%"
                          labelLine={false}
                          label={({ estado, porcentaje }) => `${estado}: ${porcentaje}%`}
                          outerRadius={80}
                          fill="#8884d8"
                          dataKey="casos"
                        >
                          {datosMitigacion.casosPorEstado.map((entry, index) => (
                            <Cell key={`cell-${index}`} fill={entry.color} />
                          ))}
                        </Pie>
                        <Tooltip />
                      </RechartsPieChart>
                    </ResponsiveContainer>
                    <div className="space-y-2 mt-4">
                      {datosMitigacion.casosPorEstado.map((estado, idx) => (
                        <div key={idx} className="flex items-center justify-between p-3 border rounded-lg">
                          <div className="flex items-center space-x-2">
                            <div className="w-3 h-3 rounded" style={{ backgroundColor: estado.color }}></div>
                            <span className="font-medium">{estado.estado}</span>
                          </div>
                          <div className="text-right">
                            <p className="font-bold">{estado.casos}</p>
                            <p className="text-xs text-muted-foreground">{estado.porcentaje}%</p>
                          </div>
                        </div>
                      ))}
                    </div>
                  </CardContent>
                </Card>
              </div>

              {/* Sistema de Codificación */}
              <Card className="bg-gradient-to-br from-yellow-50 to-amber-100 border-yellow-200">
                <CardHeader>
                  <CardTitle className="flex items-center space-x-2">
                    <Hash className="h-5 w-5 text-yellow-700" />
                    <span>Sistema de Codificación de Casos</span>
                  </CardTitle>
                  <CardDescription>Formato estándar: TIPO-VECTOR-FECHA-SECUENCIA</CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div className="p-4 bg-white border-2 border-yellow-300 rounded-lg text-center">
                      <p className="text-sm text-muted-foreground mb-1">Total de casos</p>
                      <p className="text-3xl font-bold text-yellow-900">{datosMitigacion.sistemaCodificacion.totalCasos}</p>
                    </div>
                    <div className="p-4 bg-white border-2 border-yellow-300 rounded-lg text-center">
                      <p className="text-sm text-muted-foreground mb-1">Casos hoy</p>
                      <p className="text-3xl font-bold text-yellow-900">{datosMitigacion.sistemaCodificacion.casosHoy}</p>
                    </div>
                    <div className="p-4 bg-white border-2 border-yellow-300 rounded-lg text-center">
                      <p className="text-sm text-muted-foreground mb-1">Esta semana</p>
                      <p className="text-3xl font-bold text-yellow-900">{datosMitigacion.sistemaCodificacion.casosSemana}</p>
                    </div>
                    <div className="p-4 bg-white border-2 border-yellow-300 rounded-lg text-center flex flex-col items-center justify-center">
                      <p className="text-sm text-muted-foreground mb-1">Formato</p>
                      <Badge className="bg-yellow-600 text-white font-mono text-xs px-2 py-1">
                        {datosMitigacion.sistemaCodificacion.formatoEjemplo}
                      </Badge>
                    </div>
                  </div>
                  <Alert className="mt-4 border-yellow-300 bg-yellow-50">
                    <Hash className="h-4 w-4 text-yellow-700" />
                    <AlertDescription className="text-yellow-900">
                      <strong>Sistema unificado:</strong> Cada caso tiene un código único que identifica tipo de contenido, 
                      vector de propagación, fecha y número secuencial. Esto permite trazabilidad epidemiológica completa.
                    </AlertDescription>
                  </Alert>
                </CardContent>
              </Card>
            </CardContent>
          </Card>
        </TabsContent>
      </Tabs>

      {/* Alertas y Recomendaciones Globales */}
      <Card className="border-orange-200 bg-orange-50/50">
        <CardHeader>
          <CardTitle className="flex items-center space-x-2 text-orange-900">
            <AlertTriangle className="h-6 w-6" />
            <span>Recomendaciones de Intervención Epidemiológica</span>
          </CardTitle>
          <CardDescription>Alertas y acciones sugeridas según las dimensiones de virulencia analizadas</CardDescription>
        </CardHeader>
        <CardContent className="space-y-3">
          <div className="flex items-start space-x-3 p-3 bg-red-50 border border-red-200 rounded-lg">
            <AlertCircle className="h-5 w-5 text-red-600 mt-0.5 flex-shrink-0" />
            <div>
              <h4 className="text-sm text-red-900">Alta Magnitud de Casos Detectada</h4>
              <p className="text-xs text-red-700 mt-1">
                Se han reportado {datosMagnitud.noticiasReportadas.toLocaleString()} casos totales. 
                Se requiere aumentar la capacidad de verificación humana para mantener tiempos de respuesta óptimos.
              </p>
            </div>
          </div>

          <div className="flex items-start space-x-3 p-3 bg-orange-50 border border-orange-200 rounded-lg">
            <Clock className="h-5 w-5 text-orange-600 mt-0.5 flex-shrink-0" />
            <div>
              <h4 className="text-sm text-orange-900">Ventana Crítica de {datosTemporalidad.tiempoViralizacionPromedio}h</h4>
              <p className="text-xs text-orange-700 mt-1">
                Las noticias falsas se viralizan en promedio en {datosTemporalidad.tiempoViralizacionPromedio} horas. 
                Priorizar detección temprana y respuesta rápida dentro de esta ventana crítica.
              </p>
            </div>
          </div>

          <div className="flex items-start space-x-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
            <Flame className="h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0" />
            <div>
              <h4 className="text-sm text-yellow-900">Índice de Viralidad en {datosAlcance.indiceViralidad}</h4>
              <p className="text-xs text-yellow-700 mt-1">
                El potencial de contagio es significativo con engagement del {datosAlcance.nivelEngagement}%. 
                Implementar estrategias de inmunización en sectores de mayor riesgo.
              </p>
            </div>
          </div>

          <div className="flex items-start space-x-3 p-3 bg-green-50 border border-green-200 rounded-lg">
            <CheckCircle className="h-5 w-5 text-green-600 mt-0.5 flex-shrink-0" />
            <div>
              <h4 className="text-sm text-green-900">Consenso Humano-IA: {datosMitigacion.consensoHumanoVsIA.acuerdo}%</h4>
              <p className="text-xs text-green-700 mt-1">
                La confiabilidad del sistema es alta con {datosMitigacion.consensoHumanoVsIA.acuerdo}% de consenso. 
                Continuar el proceso de aprendizaje activo con los {datosMitigacion.consensoHumanoVsIA.desacuerdo}% de casos en desacuerdo.
              </p>
            </div>
          </div>
        </CardContent>
      </Card>
    </div>
  );
}
 - - - - - - - - - - - - 
src/components/components/DocumentacionIndicadores.tsx

import React, { useState } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Badge } from './ui/badge';
import { Tabs, TabsContent, TabsList, TabsTrigger } from './ui/tabs';
import { Separator } from './ui/separator';
import { ScrollArea } from './ui/scroll-area';
import { 
  BookOpen, Activity, TrendingUp, Share2, Flame, Hash,
  Clock, Eye, Gauge, Shield, Target, Radio, Zap, Users,
  AlertCircle, Info, Code, Calculator, Database, ArrowRight,
  CheckCircle, Download, Search, Globe, BarChart3
} from 'lucide-react';

export function DocumentacionIndicadores() {
  const [selectedIndicador, setSelectedIndicador] = useState<string | null>(null);

  const indicadores = [
    {
      id: 'r0',
      nombre: 'R₀ - Tasa de Reproducción',
      icon: Radio,
      categoria: 'epidemiologica',
      color: 'purple',
      descripcion: 'Número promedio de nuevos casos que genera cada caso de desinformación',
      formula: 'R₀ = Nuevos casos (T) / Casos activos (T-1)',
      ejemplo: 'Si había 100 casos y aparecen 230 nuevos: R₀ = 230/100 = 2.3',
      interpretacion: [
        { rango: 'R₀ < 1.0', significado: 'Controlado - cada caso genera menos de 1 nuevo', color: 'green' },
        { rango: 'R₀ = 1.0', significado: 'Estable - cada caso genera 1 nuevo', color: 'yellow' },
        { rango: 'R₀ > 1.0', significado: 'Crecimiento - cada caso genera más de 1 nuevo', color: 'orange' },
        { rango: 'R₀ ≥ 2.5', significado: 'CRÍTICO - Propagación exponencial', color: 'red' }
      ],
      datosNecesarios: ['nuevosCasos (últimos 7 días)', 'casosActivos (período anterior)'],
      codigoEjemplo: `const R0 = nuevosCasos / casosActivosAntes;
// Ejemplo: 89 / 67 = 1.33
// Interpretación: Cada caso genera 1.33 nuevos casos`
    },
    {
      id: 'velocidad',
      nombre: 'Velocidad de Transmisión',
      icon: Zap,
      categoria: 'epidemiologica',
      color: 'orange',
      descripcion: 'Qué tan rápido se propaga la desinformación una vez que comienza a circular',
      formula: 'Velocidad = ((Casos 24h × 3) / Casos 72h) × 100',
      ejemplo: 'Casos últimas 24h: 15, últimas 72h: 38 → (15×3)/38 × 100 = 118% → 85% normalizado',
      interpretacion: [
        { rango: '0-30%', significado: 'Propagación lenta', color: 'green' },
        { rango: '31-60%', significado: 'Propagación moderada', color: 'yellow' },
        { rango: '61-85%', significado: 'Propagación rápida', color: 'orange' },
        { rango: '86-100%', significado: 'Propagación viral', color: 'red' }
      ],
      datosNecesarios: ['Casos últimas 24 horas', 'Casos últimas 72 horas', 'Plataforma de origen'],
      codigoEjemplo: `const velocidad = ((casosUltimas24h * 3) / casosUltimas72h) * 100;
// Factor plataforma: WhatsApp 1.5x, Twitter 1.3x, Facebook 1.2x`
    },
    {
      id: 'infectividad',
      nombre: 'Infectividad',
      icon: Share2,
      categoria: 'epidemiologica',
      color: 'red',
      descripcion: 'Probabilidad de que un usuario que ve la desinformación la comparta o crea',
      formula: 'Infectividad = (Virulencia × 0.6) + (Velocidad × 0.4)',
      ejemplo: 'Virulencia 75% + Velocidad 85% → (75×0.6)+(85×0.4) = 79%',
      interpretacion: [
        { rango: '0-30%', significado: 'Baja - poca gente lo comparte', color: 'green' },
        { rango: '31-60%', significado: 'Moderada', color: 'yellow' },
        { rango: '61-80%', significado: 'Alta infectividad', color: 'orange' },
        { rango: '81-100%', significado: 'Extremadamente contagioso', color: 'red' }
      ],
      datosNecesarios: ['Marcadores detectados', 'Virulencia de marcadores', 'Velocidad de transmisión'],
      codigoEjemplo: `const infectividad = (virulenciaPromedio * 0.6) + (velocidad * 0.4);
// Con datos reales: (75 * 0.6) + (85 * 0.4) = 79%`
    },
    {
      id: 'virulencia',
      nombre: 'Virulencia Promedio',
      icon: Flame,
      categoria: 'epidemiologica',
      color: 'yellow',
      descripcion: 'Nivel de peligrosidad o daño potencial de la desinformación',
      formula: 'Virulencia = Σ(virulencia_marcador × casos) / total_casos',
      ejemplo: 'Falso (90×456) + Engañoso (75×389) = 87,375 / 1,157 casos = 75.5%',
      interpretacion: [
        { rango: '0-30%', significado: 'Leve (mayormente satírico)', color: 'green' },
        { rango: '31-60%', significado: 'Moderada', color: 'yellow' },
        { rango: '61-80%', significado: 'Alta - contenido peligroso', color: 'orange' },
        { rango: '81-100%', significado: 'Extremadamente peligroso', color: 'red' }
      ],
      datosNecesarios: ['Marcadores detectados por caso', 'Virulencia de cada marcador', 'Cantidad casos'],
      codigoEjemplo: `const virulencias = { falso: 90, enganoso: 75, satirico: 20 };
const promedio = casos.reduce((sum, c) => 
  sum + virulencias[c.marcador], 0) / casos.length;`
    },
    {
      id: 'casosActivos',
      nombre: 'Casos Activos',
      icon: Activity,
      categoria: 'prevalencia',
      color: 'blue',
      descripcion: 'Casos de desinformación actualmente en circulación',
      formula: 'Casos con status activo o reportados en últimos 30 días',
      ejemplo: '456 casos en la región Andina actualmente en seguimiento',
      interpretacion: [
        { rango: 'Número alto', significado: 'Mucha desinformación activa', color: 'red' },
        { rango: 'Incremento rápido', significado: 'Brote desinfodémico', color: 'orange' }
      ],
      datosNecesarios: ['Lista de casos', 'Estado de cada caso', 'Fecha de reporte'],
      codigoEjemplo: `const activos = casos.filter(c => 
  c.status === 'en_verificacion' || 
  (Date.now() - new Date(c.submittedAt)) < 30_DIAS
).length;`
    },
    {
      id: 'densidad',
      nombre: 'Densidad (por 100k hab)',
      icon: Users,
      categoria: 'prevalencia',
      color: 'teal',
      descripcion: 'Casos normalizados por población, permite comparar regiones',
      formula: 'Densidad = (Casos activos / Población) × 100,000',
      ejemplo: 'Andina: 456 casos / 34,140,778 hab × 100k = 1.34 casos/100k',
      interpretacion: [
        { rango: 'Densidad alta', significado: 'Mayor exposición per cápita', color: 'orange' },
        { rango: 'Permite comparar', significado: 'Regiones de diferentes tamaños', color: 'blue' }
      ],
      datosNecesarios: ['Casos activos región', 'Población total región'],
      codigoEjemplo: `const densidad = (casosActivos / poblacionRegion) * 100000;
// Región Andina: (456 / 34140778) * 100000 = 1.34`
    },
    {
      id: 'tiempoDeteccion',
      nombre: 'Tiempo de Detección',
      icon: Clock,
      categoria: 'prevalencia',
      color: 'cyan',
      descripcion: 'Tiempo promedio desde circulación hasta reporte',
      formula: 'Promedio(fecha_reporte - fecha_publicación)',
      ejemplo: 'Región Andina: 3.8 horas promedio de detección',
      interpretacion: [
        { rango: '< 4 horas', significado: 'Detección muy rápida', color: 'green' },
        { rango: '4-8 horas', significado: 'Detección rápida', color: 'yellow' },
        { rango: '8-24 horas', significado: 'Detección moderada', color: 'orange' },
        { rango: '> 24 horas', significado: 'Detección lenta', color: 'red' }
      ],
      datosNecesarios: ['Fecha publicación original', 'Fecha reporte en Botilito'],
      codigoEjemplo: `const tiempos = casos.map(c => 
  (c.submittedAt - c.originalPublishDate) / 3600000
);
const promedio = tiempos.reduce((a,b) => a+b) / tiempos.length;`
    },
    {
      id: 'tasaReporte',
      nombre: 'Tasa de Reporte',
      icon: Eye,
      categoria: 'prevalencia',
      color: 'violet',
      descripcion: 'Porcentaje de participación ciudadana en reportar',
      formula: 'Tasa = (Usuarios que reportaron / Total usuarios) × 100',
      ejemplo: 'Región Andina: 74% de participación ciudadana',
      interpretacion: [
        { rango: '< 40%', significado: 'Baja participación', color: 'red' },
        { rango: '40-70%', significado: 'Participación moderada', color: 'yellow' },
        { rango: '> 70%', significado: 'Alta participación', color: 'green' }
      ],
      datosNecesarios: ['Usuarios únicos reportantes', 'Total usuarios registrados'],
      codigoEjemplo: `const tasaReporte = (usuariosReportaron / totalUsuarios) * 100;
// O por población: (reportes / poblacion) * 100k normalizado`
    },
    {
      id: 'consenso',
      nombre: 'Consenso Humano + IA',
      icon: Gauge,
      categoria: 'prevalencia',
      color: 'pink',
      descripcion: 'Coincidencia entre diagnósticos de IA y verificadores humanos',
      formula: 'Consenso = (Marcadores comunes / Marcadores únicos) × 100',
      ejemplo: 'Región Andina: 83% de consenso - alta confiabilidad',
      interpretacion: [
        { rango: '< 40%', significado: 'Bajo - discrepancia significativa', color: 'red' },
        { rango: '40-69%', significado: 'Moderado - necesita más verificación', color: 'yellow' },
        { rango: '70-89%', significado: 'Alto consenso - confiable', color: 'green' },
        { rango: '≥ 90%', significado: 'Excelente - muy confiable', color: 'green' }
      ],
      datosNecesarios: ['consensusMarkers (humanos)', 'aiAnalysis.detectedMarkers'],
      codigoEjemplo: `const common = humanMarkers.filter(m => aiMarkers.includes(m));
const total = new Set([...humanMarkers, ...aiMarkers]).size;
const consenso = (common.length / total) * 100;`
    },
    {
      id: 'igc',
      nombre: 'Índice de Gravedad Combinada',
      icon: Target,
      categoria: 'derivado',
      color: 'indigo',
      descripcion: 'Indicador compuesto: Virulencia × Velocidad × R₀',
      formula: 'IGC = (Virulencia × 0.4) + (Velocidad × 0.35) + (R₀ norm × 0.25)',
      ejemplo: 'Virulencia 75, Velocidad 85, R₀ 2.7 → IGC = 73.25 (Alto riesgo)',
      interpretacion: [
        { rango: '0-40', significado: 'Bajo riesgo', color: 'green' },
        { rango: '41-65', significado: 'Riesgo moderado', color: 'yellow' },
        { rango: '66-85', significado: 'Alto riesgo', color: 'orange' },
        { rango: '86-100', significado: 'Crítico - intervención inmediata', color: 'red' }
      ],
      datosNecesarios: ['Virulencia', 'Velocidad', 'R₀'],
      codigoEjemplo: `const r0Norm = Math.min((r0 / 5) * 100, 100);
const igc = (virulencia * 0.4) + (velocidad * 0.35) + (r0Norm * 0.25);
// Ejemplo: (75*0.4) + (85*0.35) + (54*0.25) = 73.25`
    },
    {
      id: 'vectorTransmision',
      nombre: 'Vector de Transmisión',
      icon: Globe,
      categoria: 'transmision',
      color: 'blue',
      descripcion: 'Plataforma principal desde donde se propaga la desinformación',
      formula: 'Contar casos por plataforma, ordenar descendente',
      ejemplo: 'WhatsApp: 38% de todos los casos (Vector principal)',
      interpretacion: [
        { rango: 'Vector principal', significado: 'Dónde concentrar monitoreo', color: 'blue' },
        { rango: 'Por plataforma', significado: 'Estrategias específicas', color: 'purple' }
      ],
      datosNecesarios: ['sources en aiAnalysis por cada caso'],
      codigoEjemplo: `const porPlataforma = {};
casos.forEach(c => c.sources.forEach(s => 
  porPlataforma[s] = (porPlataforma[s] || 0) + 1
));
const principal = Object.entries(porPlataforma).sort((a,b) => b[1]-a[1])[0];`
    }
  ];

  const categorias = [
    { id: 'epidemiologica', nombre: 'Métricas Epidemiológicas', color: 'purple', descripcion: 'Indicadores del comportamiento viral' },
    { id: 'prevalencia', nombre: 'Prevalencia y Detección', color: 'blue', descripcion: 'Métricas de casos y respuesta' },
    { id: 'derivado', nombre: 'Indicadores Derivados', color: 'orange', descripcion: 'Combinaciones y análisis avanzados' },
    { id: 'transmision', nombre: 'Fuentes y Transmisión', color: 'green', descripcion: 'Vectores y plataformas' }
  ];

  const virulenciasMarcadores = [
    { marcador: 'Incitación a la violencia', virulencia: 98, color: 'red' },
    { marcador: 'Discurso de odio/racismo', virulencia: 95, color: 'red' },
    { marcador: 'Falso', virulencia: 90, color: 'red' },
    { marcador: 'Manipulado', virulencia: 85, color: 'orange' },
    { marcador: 'Teoría conspirativa', virulencia: 80, color: 'purple' },
    { marcador: 'Engañoso', virulencia: 75, color: 'orange' },
    { marcador: 'Sin contexto', virulencia: 60, color: 'yellow' },
    { marcador: 'Sensacionalista', virulencia: 55, color: 'yellow' },
    { marcador: 'No verificable', virulencia: 35, color: 'gray' },
    { marcador: 'Satírico', virulencia: 20, color: 'blue' },
    { marcador: 'Verdadero', virulencia: 0, color: 'green' }
  ];

  const getColorClass = (color: string) => {
    const colors: Record<string, string> = {
      purple: 'bg-purple-50 text-purple-700 border-purple-200',
      orange: 'bg-orange-50 text-orange-700 border-orange-200',
      red: 'bg-red-50 text-red-700 border-red-200',
      yellow: 'bg-yellow-50 text-yellow-700 border-yellow-200',
      blue: 'bg-blue-50 text-blue-700 border-blue-200',
      teal: 'bg-teal-50 text-teal-700 border-teal-200',
      cyan: 'bg-cyan-50 text-cyan-700 border-cyan-200',
      violet: 'bg-violet-50 text-violet-700 border-violet-200',
      pink: 'bg-pink-50 text-pink-700 border-pink-200',
      indigo: 'bg-indigo-50 text-indigo-700 border-indigo-200',
      green: 'bg-green-50 text-green-700 border-green-200',
      gray: 'bg-gray-50 text-gray-700 border-gray-200'
    };
    return colors[color] || colors.blue;
  };

  const indicadorSeleccionado = indicadores.find(i => i.id === selectedIndicador);

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-start justify-between">
        <div className="space-y-2">
          <div className="flex items-center space-x-3">
            <div className="p-3 bg-primary rounded-lg">
              <BookOpen className="h-8 w-8 text-primary-foreground" />
            </div>
            <div>
              <h1 className="text-3xl">Documentación de Indicadores Epidemiológicos</h1>
              <p className="text-muted-foreground">
                Guía completa para entender y calcular cada métrica del Mapa Desinfodémico
              </p>
            </div>
          </div>
        </div>
        
        <Button variant="outline" size="sm">
          <Download className="h-4 w-4 mr-2" />
          Exportar PDF
        </Button>
      </div>

      {/* Tabs principales */}
      <Tabs defaultValue="indicadores" className="w-full">
        <TabsList className="grid w-full grid-cols-4">
          <TabsTrigger value="indicadores">
            <BarChart3 className="h-4 w-4 mr-2" />
            Indicadores
          </TabsTrigger>
          <TabsTrigger value="categorias">
            <Activity className="h-4 w-4 mr-2" />
            Por Categoría
          </TabsTrigger>
          <TabsTrigger value="marcadores">
            <Flame className="h-4 w-4 mr-2" />
            Virulencia
          </TabsTrigger>
          <TabsTrigger value="implementacion">
            <Code className="h-4 w-4 mr-2" />
            Implementación
          </TabsTrigger>
        </TabsList>

        {/* Tab 1: Lista de Indicadores */}
        <TabsContent value="indicadores" className="space-y-4 mt-6">
          <Card>
            <CardHeader>
              <CardTitle>Todos los Indicadores ({indicadores.length})</CardTitle>
              <CardDescription>Haz clic en cualquier indicador para ver detalles completos</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                {indicadores.map(indicador => {
                  const IconComponent = indicador.icon;
                  return (
                    <Card 
                      key={indicador.id}
                      className={`cursor-pointer transition-all hover:shadow-md ${
                        selectedIndicador === indicador.id ? 'ring-2 ring-primary' : ''
                      }`}
                      onClick={() => setSelectedIndicador(indicador.id)}
                    >
                      <CardHeader className="pb-3">
                        <div className="flex items-start justify-between">
                          <div className={`p-2 rounded-lg ${getColorClass(indicador.color)}`}>
                            <IconComponent className="h-5 w-5" />
                          </div>
                          <Badge variant="outline" className="text-xs">
                            {indicador.categoria}
                          </Badge>
                        </div>
                        <CardTitle className="text-base mt-2">{indicador.nombre}</CardTitle>
                      </CardHeader>
                      <CardContent>
                        <p className="text-sm text-muted-foreground line-clamp-2">
                          {indicador.descripcion}
                        </p>
                      </CardContent>
                    </Card>
                  );
                })}
              </div>
            </CardContent>
          </Card>

          {/* Detalle del indicador seleccionado */}
          {indicadorSeleccionado && (
            <Card className="border-2 border-primary">
              <CardHeader>
                <div className="flex items-start justify-between">
                  <div className="flex items-center space-x-3">
                    {React.createElement(indicadorSeleccionado.icon, { 
                      className: "h-8 w-8 text-primary" 
                    })}
                    <div>
                      <CardTitle className="text-2xl">{indicadorSeleccionado.nombre}</CardTitle>
                      <CardDescription className="mt-1 text-base">
                        {indicadorSeleccionado.descripcion}
                      </CardDescription>
                    </div>
                  </div>
                  <Button 
                    variant="ghost" 
                    size="sm"
                    onClick={() => setSelectedIndicador(null)}
                  >
                    Cerrar
                  </Button>
                </div>
              </CardHeader>
              <CardContent className="space-y-6">
                {/* Fórmula */}
                <div>
                  <div className="flex items-center space-x-2 mb-2">
                    <Calculator className="h-5 w-5 text-primary" />
                    <h3>Fórmula de Cálculo</h3>
                  </div>
                  <div className="p-4 bg-muted rounded-lg font-mono text-sm">
                    {indicadorSeleccionado.formula}
                  </div>
                </div>

                {/* Ejemplo */}
                <div>
                  <div className="flex items-center space-x-2 mb-2">
                    <Info className="h-5 w-5 text-primary" />
                    <h3>Ejemplo Práctico</h3>
                  </div>
                  <div className="p-4 bg-blue-50 border border-blue-200 rounded-lg">
                    <p className="text-sm">{indicadorSeleccionado.ejemplo}</p>
                  </div>
                </div>

                {/* Interpretación */}
                <div>
                  <div className="flex items-center space-x-2 mb-3">
                    <CheckCircle className="h-5 w-5 text-primary" />
                    <h3>Interpretación de Valores</h3>
                  </div>
                  <div className="space-y-2">
                    {indicadorSeleccionado.interpretacion.map((interp, idx) => (
                      <div 
                        key={idx}
                        className={`p-3 rounded-lg border ${getColorClass(interp.color)}`}
                      >
                        <div className="flex items-center justify-between">
                          <Badge variant="outline" className="font-mono text-xs">
                            {interp.rango}
                          </Badge>
                          <ArrowRight className="h-4 w-4 mx-2" />
                          <span className="text-sm flex-1">{interp.significado}</span>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>

                {/* Datos necesarios */}
                <div>
                  <div className="flex items-center space-x-2 mb-2">
                    <Database className="h-5 w-5 text-primary" />
                    <h3>Datos Necesarios</h3>
                  </div>
                  <div className="flex flex-wrap gap-2">
                    {indicadorSeleccionado.datosNecesarios.map((dato, idx) => (
                      <Badge key={idx} variant="secondary">
                        {dato}
                      </Badge>
                    ))}
                  </div>
                </div>

                {/* Código ejemplo */}
                <div>
                  <div className="flex items-center space-x-2 mb-2">
                    <Code className="h-5 w-5 text-primary" />
                    <h3>Código de Ejemplo</h3>
                  </div>
                  <div className="p-4 bg-gray-900 text-green-400 rounded-lg font-mono text-sm overflow-x-auto">
                    <pre>{indicadorSeleccionado.codigoEjemplo}</pre>
                  </div>
                </div>
              </CardContent>
            </Card>
          )}
        </TabsContent>

        {/* Tab 2: Por Categoría */}
        <TabsContent value="categorias" className="space-y-4 mt-6">
          {categorias.map(categoria => {
            const indicadoresCategoria = indicadores.filter(i => i.categoria === categoria.id);
            return (
              <Card key={categoria.id}>
                <CardHeader className={`${getColorClass(categoria.color)}`}>
                  <CardTitle>{categoria.nombre}</CardTitle>
                  <CardDescription className="text-current opacity-80">
                    {categoria.descripcion} • {indicadoresCategoria.length} indicadores
                  </CardDescription>
                </CardHeader>
                <CardContent className="pt-6">
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                    {indicadoresCategoria.map(indicador => {
                      const IconComponent = indicador.icon;
                      return (
                        <div 
                          key={indicador.id}
                          className="p-4 border rounded-lg hover:shadow-md cursor-pointer transition-all"
                          onClick={() => setSelectedIndicador(indicador.id)}
                        >
                          <div className="flex items-start space-x-3">
                            <div className={`p-2 rounded-lg ${getColorClass(indicador.color)}`}>
                              <IconComponent className="h-5 w-5" />
                            </div>
                            <div className="flex-1">
                              <h4 className="font-medium">{indicador.nombre}</h4>
                              <p className="text-sm text-muted-foreground mt-1">
                                {indicador.descripcion}
                              </p>
                              <div className="mt-2 p-2 bg-muted rounded text-xs font-mono">
                                {indicador.formula}
                              </div>
                            </div>
                          </div>
                        </div>
                      );
                    })}
                  </div>
                </CardContent>
              </Card>
            );
          })}
        </TabsContent>

        {/* Tab 3: Tabla de Virulencia */}
        <TabsContent value="marcadores" className="mt-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Flame className="h-6 w-6 text-primary" />
                <span>Tabla de Virulencia por Marcador</span>
              </CardTitle>
              <CardDescription>
                Nivel de peligrosidad de cada tipo de desinformación (escala 0-100)
              </CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-3">
                {virulenciasMarcadores.map((item, idx) => (
                  <div key={idx} className="flex items-center space-x-4">
                    <div className="flex-1">
                      <div className="flex items-center justify-between mb-2">
                        <span className="font-medium">{item.marcador}</span>
                        <Badge className={`${getColorClass(item.color)}`}>
                          {item.virulencia}%
                        </Badge>
                      </div>
                      <div className="h-2 bg-muted rounded-full overflow-hidden">
                        <div 
                          className={`h-full ${
                            item.virulencia >= 80 ? 'bg-red-600' :
                            item.virulencia >= 60 ? 'bg-orange-600' :
                            item.virulencia >= 40 ? 'bg-yellow-600' :
                            item.virulencia >= 20 ? 'bg-blue-600' :
                            'bg-green-600'
                          }`}
                          style={{ width: `${item.virulencia}%` }}
                        />
                      </div>
                    </div>
                  </div>
                ))}
              </div>

              <Separator className="my-6" />

              <div className="space-y-3">
                <h4 className="flex items-center space-x-2">
                  <Calculator className="h-5 w-5 text-primary" />
                  <span>Cálculo de Virulencia Promedio Regional</span>
                </h4>
                <div className="p-4 bg-muted rounded-lg font-mono text-sm space-y-2">
                  <div>VirulenciaPromedio = Σ(virulencia_marcador × casos) / total_casos</div>
                  <Separator />
                  <div className="text-green-600">// Ejemplo Región Andina:</div>
                  <div>Falso: 892 casos × 90 = 80,280</div>
                  <div>Engañoso: 756 casos × 75 = 56,700</div>
                  <div>Sensacionalista: 645 casos × 55 = 35,475</div>
                  <div>...</div>
                  <div className="text-blue-600">Total: 259,380 / 3,456 casos = 75% virulencia</div>
                </div>
              </div>
            </CardContent>
          </Card>
        </TabsContent>

        {/* Tab 4: Guía de Implementación */}
        <TabsContent value="implementacion" className="space-y-4 mt-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Code className="h-6 w-6 text-primary" />
                <span>Guía de Implementación Técnica</span>
              </CardTitle>
            </CardHeader>
            <CardContent className="space-y-6">
              {/* Estructura de datos */}
              <div>
                <h3 className="mb-3 flex items-center space-x-2">
                  <Database className="h-5 w-5 text-primary" />
                  <span>Estructura de Datos Necesaria</span>
                </h3>
                <div className="p-4 bg-gray-900 text-green-400 rounded-lg font-mono text-sm overflow-x-auto">
                  <pre>{`interface Caso {
  id: string;
  type: 'text' | 'image' | 'video' | 'audio';
  submittedBy: string;
  submittedAt: string; // ISO timestamp
  region: string;
  aiAnalysis: {
    veracity: string;
    confidence: number;
    detectedMarkers: string[];
    sources: string[]; // Plataformas
  };
  consensusMarkers: string[];
  votesCount: number;
  status: 'pendiente' | 'en_verificacion' | 'verificado';
}`}</pre>
                </div>
              </div>

              {/* Constantes */}
              <div>
                <h3 className="mb-3 flex items-center space-x-2">
                  <Hash className="h-5 w-5 text-primary" />
                  <span>Constantes Necesarias</span>
                </h3>
                <div className="p-4 bg-gray-900 text-green-400 rounded-lg font-mono text-sm overflow-x-auto">
                  <pre>{`const VIRULENCIA_MARCADORES = {
  'incitacion_violencia': 98,
  'discurso_odio_racismo': 95,
  'falso': 90,
  'manipulado': 85,
  'teoria_conspirativa': 80,
  'enganoso': 75,
  'sin_contexto': 60,
  'sensacionalista': 55,
  'no_verificable': 35,
  'satirico': 20,
  'verdadero': 0
};

const POBLACION_REGIONES = {
  'caribe': 10654876,
  'andina': 34140778,
  // ...
};`}</pre>
                </div>
              </div>

              {/* Frecuencias de actualización */}
              <div>
                <h3 className="mb-3 flex items-center space-x-2">
                  <Clock className="h-5 w-5 text-primary" />
                  <span>Frecuencias de Actualización Recomendadas</span>
                </h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                  <div className="p-3 border rounded-lg">
                    <div className="font-medium text-sm mb-1">Tiempo Real</div>
                    <div className="text-xs text-muted-foreground">
                      Casos activos, nuevos casos
                    </div>
                  </div>
                  <div className="p-3 border rounded-lg">
                    <div className="font-medium text-sm mb-1">Cada 6 horas</div>
                    <div className="text-xs text-muted-foreground">
                      Virulencia promedio
                    </div>
                  </div>
                  <div className="p-3 border rounded-lg">
                    <div className="font-medium text-sm mb-1">Diario</div>
                    <div className="text-xs text-muted-foreground">
                      R₀, velocidad, infectividad, densidad
                    </div>
                  </div>
                  <div className="p-3 border rounded-lg">
                    <div className="font-medium text-sm mb-1">Semanal</div>
                    <div className="text-xs text-muted-foreground">
                      Tiempo detección, tasa reporte
                    </div>
                  </div>
                </div>
              </div>

              {/* Recomendaciones */}
              <div>
                <h3 className="mb-3 flex items-center space-x-2">
                  <AlertCircle className="h-5 w-5 text-primary" />
                  <span>Recomendaciones de Implementación</span>
                </h3>
                <div className="space-y-2">
                  {[
                    'Cachear cálculos pesados como R₀ y virulencia promedio',
                    'Usar agregaciones en base de datos para conteos',
                    'Crear índices en timestamps para filtros por fecha',
                    'Precalcular métricas en jobs programados',
                    'Usar ventanas temporales (rolling windows) para tendencias',
                    'Normalizar todos los indicadores a escala 0-100 para comparabilidad'
                  ].map((rec, idx) => (
                    <div key={idx} className="flex items-start space-x-2 p-2 bg-green-50 border border-green-200 rounded">
                      <CheckCircle className="h-4 w-4 text-green-600 mt-0.5 flex-shrink-0" />
                      <span className="text-sm text-green-900">{rec}</span>
                    </div>
                  ))}
                </div>
              </div>
            </CardContent>
          </Card>
        </TabsContent>
      </Tabs>

      {/* Footer con glosario */}
      <Card className="bg-gradient-to-r from-primary/10 to-secondary/10">
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <BookOpen className="h-5 w-5 text-primary" />
            <span>Glosario Epidemiológico</span>
          </CardTitle>
        </CardHeader>
        <CardContent>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {[
              { termino: 'Caso', definicion: 'Instancia de desinformación reportada' },
              { termino: 'Marcador de diagnóstico', definicion: 'Tipo/categoría de desinformación' },
              { termino: 'Vector', definicion: 'Plataforma/medio de transmisión' },
              { termino: 'Incidencia', definicion: 'Nuevos casos en un período' },
              { termino: 'Prevalencia', definicion: 'Casos totales existentes' },
              { termino: 'Virulencia', definicion: 'Nivel de peligrosidad/daño' },
              { termino: 'R₀', definicion: 'Tasa de reproducción básica' },
              { termino: 'Consenso', definicion: 'Acuerdo entre diagnósticos' },
              { termino: 'Desinfodémico', definicion: 'Epidemia de desinformación' }
            ].map((item, idx) => (
              <div key={idx} className="p-3 bg-white rounded-lg border">
                <div className="font-medium text-sm text-primary">{item.termino}</div>
                <div className="text-xs text-muted-foreground mt-1">{item.definicion}</div>
              </div>
            ))}
          </div>
        </CardContent>
      </Card>
    </div>
  );
}
 - - - - - - - - - - - - 
src/components/components/UserProfile.tsx

import React, { useState, useEffect } from 'react';
import botilitoImage from 'figma:asset/e27a276e6ff0e187a67cf54678c265c1c38adbf7.png';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Badge } from './ui/badge';
import { Progress } from './ui/progress';
import { Button } from './ui/button';
import { Avatar, AvatarFallback, AvatarImage } from './ui/avatar';
import { Separator } from './ui/separator';
import { Input } from './ui/input';
import { 
  User, 
  Mail, 
  Calendar, 
  Shield, 
  Trophy, 
  Target, 
  Activity, 
  TrendingUp, 
  Eye, 
  CheckCircle, 
  XCircle, 
  AlertTriangle, 
  Clock, 
  Microscope, 
  Skull, 
  Ban, 
  Flame,
  Award,
  Star,
  Lock,
  Camera,
  Edit3,
  Settings,
  Zap,
  Brain,
  Crown,
  Medal,
  Sparkles,
  Gift,
  Coffee,
  Bot,
  Globe,
  Users,
  FileText,
  BarChart3,
  TrendingDown,
  Siren,
  Crosshair,
  Stethoscope,
  HeartPulse,
  Syringe,
  Copy,
  Share2,
  UserPlus,
  Send,
  Upload
} from 'lucide-react';
import { motion, AnimatePresence } from 'motion/react';

interface Mission {
  id: string;
  title: string;
  description: string;
  xpReward: number;
  progress: number;
  target: number;
  type: 'weekly' | 'special' | 'daily';
  deadline: string;
  icon: React.ReactNode;
  color: string;
  completed: boolean;
}

interface Badge {
  id: string;
  name: string;
  description: string;
  icon: React.ReactNode;
  color: string;
  unlocked: boolean;
  unlockedAt?: string;
  levelRequired: number;
}

interface Level {
  level: number;
  title: string;
  subtitle: string;
  minXP: number;
  maxXP: number;
  color: string;
  badge: string;
  perks: string[];
  responsibilities: string[];
}

interface Referral {
  id: string;
  name: string;
  joinedAt: string;
  status: 'active' | 'pending' | 'completed';
  xpEarned: number;
}

export function UserProfile() {
  const [isAnimating, setIsAnimating] = useState(false);
  const [showLevelUp, setShowLevelUp] = useState(false);
  const [showShareModal, setShowShareModal] = useState(false);
  const [showAvatarModal, setShowAvatarModal] = useState(false);
  const [dailyStreak, setDailyStreak] = useState(12);
  const [referralCode, setReferralCode] = useState('BOTILITO-MG2024');

  // Sistema de niveles epidemiológicos
  const levels: Level[] = [
    { 
      level: 1, 
      title: 'VIGILANTE CENTINELA', 
      subtitle: 'Primera Línea de Defensa',
      minXP: 0, 
      maxXP: 500, 
      color: 'bg-blue-500', 
      badge: '👁️',
      perks: [
        'Reportar contenido sospechoso (+10 XP)',
        'Acceso al dashboard básico',
        'Alertas de brotes detectados',
        'Sistema de referidos activo'
      ],
      responsibilities: [
        'Detectar contenido potencialmente peligroso',
        'Alertar sobre posibles brotes de desinformación',
        'Ser los ojos y oídos de la comunidad digital'
      ]
    },
    { 
      level: 2, 
      title: 'EPIDEMIÓLOGO DIGITAL VOLUNTARIO', 
      subtitle: 'Analista de Contagio',
      minXP: 500, 
      maxXP: 2000, 
      color: 'bg-purple-500', 
      badge: '🔬',
      perks: [
        'Realizar diagnósticos completos (+20 XP)',
        'Aplicar etiquetas y marcadores',
        'Evaluar virulencia del contenido',
        'Calificar análisis de otros usuarios',
        'Participar en desafíos semanales',
        'Invitar a nuevos validadores (+5 XP c/u)'
      ],
      responsibilities: [
        'Analizar muestras de desinformación',
        'Aplicar criterios epidemiológicos',
        'Documentar patrones de transmisión',
        'Contribuir al aprendizaje colectivo'
      ]
    },
    { 
      level: 3, 
      title: 'ESPECIALISTA EN INMUNOLOGÍA INFORMATIVA', 
      subtitle: 'Educomunicador Estratégico',
      minXP: 2000, 
      maxXP: 999999, 
      color: 'bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500', 
      badge: '💉',
      perks: [
        'Crear contenido de inmunización (+100 XP)',
        'Diseñar contra-narrativas efectivas',
        'Liderar misiones complejas',
        'Análisis macro de campañas coordinadas',
        'Identificar patrones de contagio global',
        'Palabra respetada en la comunidad',
        'Herramientas de prevención avanzadas'
      ],
      responsibilities: [
        'Vacunar contra la desinformación',
        'Prevenir próximos brotes epidémicos',
        'Liderar estrategias de inmunización',
        'Mantener protegido el ecosistema digital',
        'Formar a nuevos epidemiólogos'
      ]
    }
  ];

  // Datos del usuario actual
  const userData = {
    id: 'BOT-COL-2024-001',
    name: 'María Rodríguez',
    email: 'maria.rodriguez@botilito.co',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=MariaRodriguez&backgroundColor=ffda00',
    joinedAt: '2024-09-15',
    currentXP: 850,
    totalReports: 45,
    totalDiagnosis: 28,
    totalImmunizations: 3,
    accuracyRate: 92.5,
    currentStreak: dailyStreak,
    rank: 87,
    totalUsers: 1250,
    region: 'Región Andina',
    verificationSpeed: 3.8,
    referralsCompleted: 4
  };

  // Calcular nivel actual
  const getCurrentLevel = (xp: number): Level => {
    return levels.find(level => xp >= level.minXP && xp < level.maxXP) || levels[levels.length - 1];
  };

  const currentLevel = getCurrentLevel(userData.currentXP);
  const nextLevel = levels.find(level => level.level === currentLevel.level + 1);
  const progressToNext = nextLevel ? 
    ((userData.currentXP - currentLevel.minXP) / (nextLevel.minXP - currentLevel.minXP)) * 100 
    : 100;

  // Insignias desbloqueables por nivel
  const badges: Badge[] = [
    {
      id: 'alerta-temprana',
      name: 'Alerta Temprana',
      description: 'Insignia de Nivel 1: Vigilante Centinela',
      icon: <Siren className="h-5 w-5" />,
      color: 'bg-blue-500',
      unlocked: userData.currentXP >= 0,
      unlockedAt: userData.joinedAt,
      levelRequired: 1
    },
    {
      id: 'analista-contagio',
      name: 'Analista de Contagio',
      description: 'Insignia de Nivel 2: Epidemiólogo Digital Voluntario',
      icon: <Microscope className="h-5 w-5" />,
      color: 'bg-purple-500',
      unlocked: userData.currentXP >= 500,
      unlockedAt: userData.currentXP >= 500 ? '2024-10-02' : undefined,
      levelRequired: 2
    },
    {
      id: 'estratega-antiviral',
      name: 'Estratega Antiviral',
      description: 'Insignia de Nivel 3: Especialista en Inmunología Informativa',
      icon: <Syringe className="h-5 w-5" />,
      color: 'bg-gradient-to-r from-yellow-400 to-orange-500',
      unlocked: userData.currentXP >= 2000,
      unlockedAt: undefined,
      levelRequired: 3
    },
    {
      id: 'detector-100',
      name: 'Detector Prolífico',
      description: 'Reportaste 100 casos sospechosos',
      icon: <Eye className="h-5 w-5" />,
      color: 'bg-green-500',
      unlocked: false,
      levelRequired: 1
    },
    {
      id: 'racha-fuego',
      name: 'Llama Inextinguible',
      description: 'Mantén una racha de 30 días consecutivos',
      icon: <Flame className="h-5 w-5" />,
      color: 'bg-orange-500',
      unlocked: false,
      levelRequired: 1
    },
    {
      id: 'precision-quirurgica',
      name: 'Precisión Quirúrgica',
      description: '95%+ de precisión en 50 diagnósticos',
      icon: <Crosshair className="h-5 w-5" />,
      color: 'bg-red-500',
      unlocked: false,
      levelRequired: 2
    }
  ];

  // Misiones activas
  const missions: Mission[] = [
    {
      id: 'escuadron-anti-panico',
      title: 'Misión: Escuadrón Anti-Pánico',
      description: 'Desmentir los 3 fakes más virales sobre la economía esta semana',
      xpReward: 150,
      progress: 1,
      target: 3,
      type: 'weekly',
      deadline: '2025-10-19',
      icon: <Shield className="h-5 w-5" />,
      color: 'bg-red-500',
      completed: false
    },
    {
      id: 'diagnostico-rapido',
      title: 'Desafío: Diagnóstico Rápido',
      description: 'Realiza 10 análisis esta semana',
      xpReward: 100,
      progress: 7,
      target: 10,
      type: 'weekly',
      deadline: '2025-10-19',
      icon: <Zap className="h-5 w-5" />,
      color: 'bg-yellow-500',
      completed: false
    },
    {
      id: 'centinela-diario',
      title: 'Reto Diario: Vigilancia Activa',
      description: 'Reporta al menos 3 contenidos sospechosos hoy',
      xpReward: 50,
      progress: 2,
      target: 3,
      type: 'daily',
      deadline: '2025-10-12',
      icon: <Eye className="h-5 w-5" />,
      color: 'bg-blue-500',
      completed: false
    },
    {
      id: 'inmunizador-regional',
      title: 'Misión Especial: Inmunizador Regional',
      description: 'Crea contenido educativo sobre un tema desinfodémico de tu región',
      xpReward: 200,
      progress: 0,
      target: 1,
      type: 'special',
      deadline: '2025-10-26',
      icon: <Syringe className="h-5 w-5" />,
      color: 'bg-purple-500',
      completed: false
    }
  ];

  // Referidos del usuario
  const referrals: Referral[] = [
    {
      id: 'REF-001',
      name: 'Carlos Pérez',
      joinedAt: '2024-10-05',
      status: 'completed',
      xpEarned: 5
    },
    {
      id: 'REF-002',
      name: 'Ana Martínez',
      joinedAt: '2024-10-08',
      status: 'completed',
      xpEarned: 5
    },
    {
      id: 'REF-003',
      name: 'Luis Gómez',
      joinedAt: '2024-10-10',
      status: 'active',
      xpEarned: 5
    },
    {
      id: 'REF-004',
      name: 'Diana López',
      joinedAt: '2024-10-11',
      status: 'completed',
      xpEarned: 5
    }
  ];

  const totalReferralXP = referrals.reduce((sum, ref) => sum + ref.xpEarned, 0);

  const unlockedBadges = badges.filter(b => b.unlocked);
  const lockedBadges = badges.filter(b => !b.unlocked);

  // Copiar código de referido
  const copyReferralCode = () => {
    navigator.clipboard.writeText(referralCode);
    // Aquí podrías mostrar un toast de confirmación
  };

  // Simular animación de level up
  useEffect(() => {
    const timer = setTimeout(() => {
      if (Math.random() > 0.9) {
        setShowLevelUp(true);
        setTimeout(() => setShowLevelUp(false), 4000);
      }
    }, 2000);
    return () => clearTimeout(timer);
  }, []);

  return (
    <motion.div 
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      className="space-y-8 relative"
    >
      {/* Mensaje de Botilito */}
      <div className="bg-[#ffe97a] border-2 border-[#ffda00] rounded-lg p-4 shadow-lg">
        <div className="flex items-center space-x-4">
          <img 
            src={botilitoImage} 
            alt="Botilito" 
            className="w-24 h-24 object-contain mt-[0px] mr-[16px] mb-[-18px] ml-[0px]"
          />
          <div className="flex-1">
            <p className="text-xl">
              ¡Qué más parce! Este es tu espacio personal 👤✨
            </p>
            <p className="text-sm mt-1 opacity-80">
              Acá está tu nivel, XP, insignias y misiones. Mientras más analices, más subes de nivel. ¡A darle con toda! 💪🏆
            </p>
          </div>
        </div>
      </div>

      {/* Notificación de Level Up - Estilo colombiano */}
      <AnimatePresence>
        {showLevelUp && (
          <motion.div
            initial={{ scale: 0, rotate: -180 }}
            animate={{ scale: 1, rotate: 0 }}
            exit={{ scale: 0, rotate: 180 }}
            className="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50"
          >
            <Card className="border-4 border-primary bg-gradient-to-br from-yellow-50 via-orange-50 to-yellow-50 shadow-2xl">
              <CardContent className="p-8 text-center">
                <div className="text-6xl mb-4">🎉🔬</div>
                <h2 className="mb-2">¡OMBE, SUBISTE DE NIVEL PARCE!</h2>
                <p className="text-lg mb-2">Ahora sos un/a:</p>
                <Badge className="bg-purple-500 text-white text-lg px-4 py-2 mb-3">
                  🔬 EPIDEMIÓLOGO DIGITAL VOLUNTARIO
                </Badge>
                <p className="text-sm text-muted-foreground mb-4">Ya puedes hacer diagnósticos completos y participar en misiones especiales</p>
                <Badge className="bg-primary text-primary-foreground">+20 XP por análisis</Badge>
              </CardContent>
            </Card>
          </motion.div>
        )}
      </AnimatePresence>

      {/* Header del Perfil Epidemiológico */}
      <Card className="relative overflow-hidden border-2 border-primary/20">
        <div className="absolute inset-0 bg-gradient-to-br from-primary/10 via-secondary/10 to-transparent" />
        <CardContent className="pt-8 relative">
          <div className="flex flex-col lg:flex-row lg:items-start space-y-6 lg:space-y-0 lg:space-x-8">
            {/* Avatar y Nivel */}
            <div className="flex items-start space-x-6">
              <div className="relative">
                <motion.div
                  whileHover={{ scale: 1.05 }}
                  className="relative"
                >
                  <Avatar className="h-32 w-32 border-4 border-primary/20 shadow-lg">
                    <AvatarImage src={userData.avatar} alt={userData.name} />
                    <AvatarFallback className="text-2xl bg-primary text-primary-foreground">
                      {userData.name.split(' ').map(n => n[0]).join('')}
                    </AvatarFallback>
                  </Avatar>
                  <div className="absolute -bottom-2 -right-2 bg-white rounded-full p-1 shadow-md">
                    <Button 
                      size="icon" 
                      variant="outline" 
                      className="h-8 w-8 hover:bg-primary hover:text-primary-foreground transition-all"
                      onClick={() => setShowAvatarModal(true)}
                      title="Cambiar foto de perfil"
                    >
                      <Camera className="h-4 w-4" />
                    </Button>
                  </div>
                </motion.div>
                
                {/* Badge del Nivel Actual */}
                <motion.div 
                  className="absolute -top-2 -left-2"
                  whileHover={{ scale: 1.1 }}
                >
                  <div className={`${currentLevel.color} text-white rounded-full w-16 h-16 flex flex-col items-center justify-center shadow-lg border-2 border-white`}>
                    <div className="text-2xl">{currentLevel.badge}</div>
                    <div className="text-xs">Nv.{currentLevel.level}</div>
                  </div>
                </motion.div>
              </div>
              
              {/* Información Básica */}
              <div className="space-y-3">
                <div>
                  <h1 className="text-3xl">{userData.name}</h1>
                  <p className="text-sm text-muted-foreground">{userData.email}</p>
                  <div className="flex items-center space-x-2 mt-3">
                    <Badge className={`${currentLevel.color} text-white`}>
                      {currentLevel.title}
                    </Badge>
                    <Badge variant="outline" className="text-xs">
                      {userData.region}
                    </Badge>
                  </div>
                  <p className="text-xs text-muted-foreground mt-2 italic">"{currentLevel.subtitle}"</p>
                </div>
                
                {/* Barra de Experiencia */}
                <div className="w-80">
                  <div className="flex justify-between text-sm mb-2">
                    <span>Experiencia (XP)</span>
                    <span>{userData.currentXP.toLocaleString()} / {nextLevel?.minXP.toLocaleString() || 'MAX'} XP</span>
                  </div>
                  <div className="relative">
                    <Progress value={progressToNext} className="h-3" />
                    <motion.div
                      className="absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent"
                      animate={{ x: [-100, 300] }}
                      transition={{ duration: 2, repeat: Infinity, repeatDelay: 3 }}
                    />
                  </div>
                  {nextLevel && (
                    <p className="text-xs text-muted-foreground mt-1">
                      ¡Te faltan {(nextLevel.minXP - userData.currentXP).toLocaleString()} XP para ser {nextLevel.title}!
                    </p>
                  )}
                  {!nextLevel && (
                    <p className="text-xs text-green-600 mt-1">
                      🌟 ¡Nivel máximo alcanzado! Sos un verdadero Especialista en Inmunología Informativa
                    </p>
                  )}
                </div>
              </div>
            </div>

            {/* Estadísticas de Contribución */}
            <div className="flex-1 grid grid-cols-2 md:grid-cols-4 gap-4">
              <motion.div 
                whileHover={{ scale: 1.05 }}
                className="text-center p-4 bg-blue-50 border-2 border-blue-200 rounded-lg backdrop-blur-sm"
              >
                <div className="flex items-center justify-center mb-1">
                  <Eye className="h-4 w-4 text-blue-600 mr-1" />
                  <div className="text-2xl text-blue-700">{userData.totalReports}</div>
                </div>
                <div className="text-xs text-blue-600 mb-1">Reportes</div>
                <Badge className="bg-blue-500 text-white text-xs">+10 XP c/u</Badge>
              </motion.div>
              
              <motion.div 
                whileHover={{ scale: 1.05 }}
                className="text-center p-4 bg-purple-50 border-2 border-purple-200 rounded-lg backdrop-blur-sm"
              >
                <div className="flex items-center justify-center mb-1">
                  <Microscope className="h-4 w-4 text-purple-600 mr-1" />
                  <div className="text-2xl text-purple-700">{userData.totalDiagnosis}</div>
                </div>
                <div className="text-xs text-purple-600 mb-1">Diagnósticos</div>
                <Badge className="bg-purple-500 text-white text-xs">+20 XP c/u</Badge>
              </motion.div>
              
              <motion.div 
                whileHover={{ scale: 1.05 }}
                className="text-center p-4 bg-orange-50 border-2 border-orange-200 rounded-lg backdrop-blur-sm"
              >
                <div className="flex items-center justify-center mb-1">
                  <Syringe className="h-4 w-4 text-orange-600 mr-1" />
                  <div className="text-2xl text-orange-700">{userData.totalImmunizations}</div>
                </div>
                <div className="text-xs text-orange-600 mb-1">Inmunizaciones</div>
                <Badge className="bg-orange-500 text-white text-xs">+100 XP c/u</Badge>
              </motion.div>
              
              <motion.div 
                whileHover={{ scale: 1.05 }}
                className="text-center p-4 bg-green-50 border-2 border-green-200 rounded-lg backdrop-blur-sm"
              >
                <div className="flex items-center justify-center mb-1">
                  <Target className="h-4 w-4 text-green-600 mr-1" />
                  <div className="text-2xl text-green-700">{userData.accuracyRate}%</div>
                </div>
                <div className="text-xs text-green-600 mb-1">Precisión</div>
                <Badge className="bg-green-500 text-white text-xs">Excelente</Badge>
              </motion.div>
            </div>
          </div>

          {/* Racha Diaria */}
          <div className="mt-6 pt-6 border-t border-primary/20">
            <div className="flex items-center justify-between">
              <div className="flex items-center space-x-3">
                <div className="p-3 bg-orange-100 rounded-full">
                  <Flame className="h-6 w-6 text-orange-600" />
                </div>
                <div>
                  <p className="font-medium">Racha de Vigilancia</p>
                  <p className="text-sm text-muted-foreground">
                    ¡Llevás {dailyStreak} días consecutivos protegiendo la verdad!
                  </p>
                </div>
              </div>
              <div className="text-center">
                <div className="text-3xl text-orange-600">{dailyStreak}</div>
                <div className="text-xs text-orange-600">días 🔥</div>
              </div>
            </div>
          </div>
        </CardContent>
      </Card>

      {/* Misiones y Desafíos Activos */}
      <Card>
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <Target className="h-5 w-5 text-primary" />
            <span>Misiones y Desafíos Activos</span>
            <Badge variant="secondary">{missions.filter(m => !m.completed).length}</Badge>
          </CardTitle>
          <CardDescription>¡Completá misiones y ganá XP adicional, parce! 🎯</CardDescription>
        </CardHeader>
        <CardContent>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            {missions.map((mission) => (
              <motion.div
                key={mission.id}
                whileHover={{ scale: 1.02 }}
                className={`p-4 rounded-lg border-2 transition-all ${
                  mission.completed 
                    ? 'border-green-200 bg-green-50' 
                    : 'border-primary/20 bg-gradient-to-br from-white to-secondary/10 shadow-sm'
                }`}
              >
                <div className="flex items-start space-x-3 mb-3">
                  <div className={`p-2 rounded-full ${mission.color} text-white flex-shrink-0`}>
                    {mission.icon}
                  </div>
                  <div className="flex-1">
                    <div className="flex items-center justify-between mb-1">
                      <h4 className="font-medium text-sm">{mission.title}</h4>
                      <Badge className={`text-xs ${mission.type === 'daily' ? 'bg-blue-500' : mission.type === 'weekly' ? 'bg-purple-500' : 'bg-orange-500'} text-white`}>
                        {mission.type === 'daily' ? 'Diario' : mission.type === 'weekly' ? 'Semanal' : 'Especial'}
                      </Badge>
                    </div>
                    <p className="text-xs text-muted-foreground mb-2">{mission.description}</p>
                  </div>
                </div>
                
                <div className="space-y-2">
                  <div className="flex justify-between text-xs">
                    <span>Progreso</span>
                    <span className="font-medium">{mission.progress} / {mission.target}</span>
                  </div>
                  <Progress value={(mission.progress / mission.target) * 100} className="h-2" />
                  
                  <div className="flex items-center justify-between pt-2">
                    <Badge className="bg-primary text-primary-foreground text-xs">
                      +{mission.xpReward} XP
                    </Badge>
                    <div className="text-xs text-muted-foreground">
                      <Clock className="h-3 w-3 inline mr-1" />
                      {new Date(mission.deadline).toLocaleDateString('es-CO', { month: 'short', day: 'numeric' })}
                    </div>
                  </div>
                </div>
              </motion.div>
            ))}
          </div>
        </CardContent>
      </Card>

      {/* Sistema de Referidos */}
      <Card className="border-2 border-primary/30">
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <UserPlus className="h-5 w-5 text-primary" />
            <span>¡Invitá a tu Parce!</span>
            <Badge className="bg-primary text-primary-foreground">{referrals.length} referidos</Badge>
          </CardTitle>
          <CardDescription>
            Ganás 5 XP por cada persona que invites y complete su primer diagnóstico. ¡Hagamos crecer el equipo! 💪
          </CardDescription>
        </CardHeader>
        <CardContent>
          <div className="space-y-4">
            {/* Código de Referido */}
            <div className="p-4 bg-gradient-to-r from-primary/10 to-secondary/10 rounded-lg border-2 border-primary/30">
              <p className="text-sm mb-2">Tu código de referido:</p>
              <div className="flex items-center space-x-2">
                <Input 
                  value={referralCode} 
                  readOnly 
                  className="bg-white text-lg text-center tracking-wider"
                />
                <Button 
                  onClick={copyReferralCode}
                  className="flex-shrink-0"
                >
                  <Copy className="h-4 w-4 mr-2" />
                  Copiar
                </Button>
                <Button 
                  variant="outline"
                  onClick={() => setShowShareModal(true)}
                >
                  <Share2 className="h-4 w-4 mr-2" />
                  Compartir
                </Button>
              </div>
            </div>

            {/* Estadísticas de Referidos */}
            <div className="grid grid-cols-3 gap-4 text-center">
              <div className="p-3 bg-blue-50 rounded-lg border border-blue-200">
                <div className="text-2xl text-blue-600">{referrals.length}</div>
                <div className="text-xs text-blue-600">Total Invitados</div>
              </div>
              <div className="p-3 bg-green-50 rounded-lg border border-green-200">
                <div className="text-2xl text-green-600">{referrals.filter(r => r.status === 'completed').length}</div>
                <div className="text-xs text-green-600">Activos</div>
              </div>
              <div className="p-3 bg-yellow-50 rounded-lg border border-yellow-200">
                <div className="text-2xl text-yellow-600">{totalReferralXP}</div>
                <div className="text-xs text-yellow-600">XP Ganados</div>
              </div>
            </div>

            {/* Lista de Referidos */}
            {referrals.length > 0 && (
              <div className="space-y-2">
                <h4 className="text-sm font-medium mb-2">Tus referidos:</h4>
                <div className="space-y-2 max-h-48 overflow-y-auto custom-scrollbar">
                  {referrals.map((referral, index) => (
                    <div 
                      key={referral.id}
                      className="flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200 hover:border-primary transition-all"
                    >
                      <div className="flex items-center space-x-3">
                        <Avatar className="h-10 w-10 border-2 border-secondary">
                          <AvatarImage 
                            src={`https://api.dicebear.com/7.x/avataaars/svg?seed=${referral.name.replace(' ', '')}&backgroundColor=${
                              index === 0 ? 'ffda00' : 
                              index === 1 ? 'ffe97a' : 
                              index === 2 ? '00b4d8' : 
                              'f72585'
                            }`} 
                            alt={referral.name}
                          />
                          <AvatarFallback className="text-xs bg-secondary">
                            {referral.name.split(' ').map(n => n[0]).join('')}
                          </AvatarFallback>
                        </Avatar>
                        <div>
                          <p className="text-sm font-medium">{referral.name}</p>
                          <p className="text-xs text-muted-foreground">
                            Unido: {new Date(referral.joinedAt).toLocaleDateString('es-CO')}
                          </p>
                        </div>
                      </div>
                      <div className="flex items-center space-x-2">
                        <Badge className={`text-xs ${
                          referral.status === 'completed' ? 'bg-green-500' : 
                          referral.status === 'active' ? 'bg-blue-500' : 'bg-gray-400'
                        } text-white`}>
                          {referral.status === 'completed' ? '✓ Completado' : 
                           referral.status === 'active' ? 'Activo' : 'Pendiente'}
                        </Badge>
                        {referral.status === 'completed' && (
                          <Badge className="bg-primary text-primary-foreground text-xs">
                            +{referral.xpEarned} XP
                          </Badge>
                        )}
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            )}
          </div>
        </CardContent>
      </Card>

      {/* Insignias Desbloqueadas */}
      <div className="grid gap-6 lg:grid-cols-2">
        {/* Insignias Activas */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Trophy className="h-5 w-5 text-primary" />
              <span>Insignias Desbloqueadas</span>
              <Badge variant="secondary">{unlockedBadges.length}</Badge>
            </CardTitle>
            <CardDescription>Tus medallas en la lucha por la verdad 🏆</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-3 max-h-96 overflow-y-auto custom-scrollbar">
              {unlockedBadges.map((badge) => (
                <motion.div
                  key={badge.id}
                  initial={{ opacity: 0, x: -20 }}
                  animate={{ opacity: 1, x: 0 }}
                  whileHover={{ scale: 1.02 }}
                  className={`p-4 rounded-lg border-2 border-primary/30 bg-gradient-to-br from-white to-secondary/10 shadow-sm transition-all hover:shadow-md`}
                >
                  <div className="flex items-start space-x-3">
                    <div className={`p-3 rounded-full ${badge.color} text-white flex-shrink-0`}>
                      {badge.icon}
                    </div>
                    <div className="flex-1">
                      <div className="flex items-center justify-between mb-1">
                        <h4 className="font-medium">{badge.name}</h4>
                        <Badge className="bg-green-500 text-white text-xs">
                          Nivel {badge.levelRequired}
                        </Badge>
                      </div>
                      <p className="text-sm text-muted-foreground mb-2">{badge.description}</p>
                      {badge.unlockedAt && (
                        <div className="text-xs text-green-600">
                          <CheckCircle className="h-3 w-3 inline mr-1" />
                          Desbloqueada: {new Date(badge.unlockedAt).toLocaleDateString('es-CO')}
                        </div>
                      )}
                    </div>
                  </div>
                </motion.div>
              ))}
            </div>
          </CardContent>
        </Card>

        {/* Insignias Bloqueadas */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Lock className="h-5 w-5 text-muted-foreground" />
              <span>Próximas Insignias</span>
              <Badge variant="outline">{lockedBadges.length}</Badge>
            </CardTitle>
            <CardDescription>¡Seguí trabajando para desbloquearlas!</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-3 max-h-96 overflow-y-auto custom-scrollbar">
              {lockedBadges.map((badge) => (
                <motion.div
                  key={badge.id}
                  whileHover={{ scale: 1.02 }}
                  className="p-4 rounded-lg border-2 border-dashed border-muted-foreground/30 bg-muted/20 transition-all hover:bg-muted/30"
                >
                  <div className="flex items-start space-x-3">
                    <div className="p-3 rounded-full bg-muted text-muted-foreground flex-shrink-0">
                      <Lock className="h-5 w-5" />
                    </div>
                    <div className="flex-1">
                      <div className="flex items-center justify-between mb-1">
                        <h4 className="font-medium text-muted-foreground">{badge.name}</h4>
                        <Badge variant="outline" className="text-xs">
                          Nivel {badge.levelRequired}
                        </Badge>
                      </div>
                      <p className="text-sm text-muted-foreground">{badge.description}</p>
                    </div>
                  </div>
                </motion.div>
              ))}
            </div>
          </CardContent>
        </Card>
      </div>

      {/* Progresión de Niveles Epidemiológicos */}
      <Card>
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <Stethoscope className="h-5 w-5 text-primary" />
            <span>Tu Carrera como Epidemiólogo Digital</span>
          </CardTitle>
          <CardDescription>
            Tu evolución en la lucha contra el virus de la desinformación 🦠
          </CardDescription>
        </CardHeader>
        <CardContent>
          <div className="space-y-6">
            {levels.map((level, index) => (
              <motion.div
                key={level.level}
                initial={{ opacity: 0, x: -20 }}
                animate={{ opacity: 1, x: 0 }}
                transition={{ delay: index * 0.1 }}
                className={`p-6 rounded-lg border-2 transition-all ${
                  level.level === currentLevel.level
                    ? 'border-primary bg-primary/5 shadow-md'
                    : level.level < currentLevel.level
                    ? 'border-green-200 bg-green-50/30'
                    : 'border-gray-200 bg-gray-50/30 opacity-70'
                }`}
              >
                <div className="flex items-start space-x-4">
                  {/* Badge del Nivel */}
                  <div className={`w-16 h-16 rounded-full flex items-center justify-center text-white text-2xl ${
                    level.level <= currentLevel.level ? level.color : 'bg-gray-400'
                  } shadow-lg flex-shrink-0`}>
                    {level.badge}
                  </div>
                  
                  {/* Información del Nivel */}
                  <div className="flex-1">
                    <div className="flex items-center justify-between mb-2">
                      <div>
                        <div className="flex items-center space-x-2">
                          <h3 className="font-bold">Nivel {level.level}: {level.title}</h3>
                          {level.level === currentLevel.level && (
                            <Badge className="bg-primary text-primary-foreground text-xs animate-pulse">
                              ⭐ NIVEL ACTUAL
                            </Badge>
                          )}
                          {level.level < currentLevel.level && (
                            <CheckCircle className="h-5 w-5 text-green-500" />
                          )}
                        </div>
                        <p className="text-sm text-muted-foreground italic">{level.subtitle}</p>
                      </div>
                      <div className="text-right text-sm">
                        <div className="font-medium">{level.minXP.toLocaleString()} - {level.maxXP === 999999 ? '∞' : level.maxXP.toLocaleString()} XP</div>
                        {level.level === currentLevel.level && (
                          <div className="text-xs text-primary">{progressToNext.toFixed(0)}% completado</div>
                        )}
                      </div>
                    </div>
                    
                    {/* Beneficios y Responsabilidades */}
                    <div className="grid md:grid-cols-2 gap-4 mt-4">
                      <div>
                        <h4 className="text-sm font-medium mb-2 text-green-600">✓ Beneficios:</h4>
                        <ul className="space-y-1">
                          {level.perks.map((perk, idx) => (
                            <li key={idx} className="text-xs flex items-start space-x-2">
                              <CheckCircle className="h-3 w-3 text-green-500 flex-shrink-0 mt-0.5" />
                              <span>{perk}</span>
                            </li>
                          ))}
                        </ul>
                      </div>
                      <div>
                        <h4 className="text-sm font-medium mb-2 text-blue-600">🎯 Responsabilidades:</h4>
                        <ul className="space-y-1">
                          {level.responsibilities.map((resp, idx) => (
                            <li key={idx} className="text-xs flex items-start space-x-2">
                              <Target className="h-3 w-3 text-blue-500 flex-shrink-0 mt-0.5" />
                              <span>{resp}</span>
                            </li>
                          ))}
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </motion.div>
            ))}
          </div>
        </CardContent>
      </Card>

      {/* Ranking y Comunidad */}
      <div className="grid gap-6 lg:grid-cols-3">
        {/* Ranking Global */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Trophy className="h-5 w-5 text-primary" />
              <span>Ranking</span>
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-center space-y-4">
              <div>
                <div className="text-4xl">#{userData.rank}</div>
                <div className="text-sm text-muted-foreground">de {userData.totalUsers.toLocaleString()} vigilantes</div>
                <div className="text-xs text-muted-foreground mt-1">
                  Top {((userData.rank / userData.totalUsers) * 100).toFixed(1)}%
                </div>
              </div>
              <Separator />
              <div className="space-y-2 text-left">
                <div className="flex justify-between text-sm">
                  <span>Región:</span>
                  <span className="font-medium">{userData.region}</span>
                </div>
                <div className="flex justify-between text-sm">
                  <span>Miembro desde:</span>
                  <span className="font-medium">
                    {new Date(userData.joinedAt).toLocaleDateString('es-CO', { month: 'short', year: 'numeric' })}
                  </span>
                </div>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Velocidad de Análisis */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Zap className="h-5 w-5 text-primary" />
              <span>Velocidad</span>
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-center space-y-4">
              <div>
                <div className="flex items-center justify-center">
                  <Zap className="h-6 w-6 text-yellow-500 mr-2" />
                  <div className="text-4xl text-yellow-600">{userData.verificationSpeed}m</div>
                </div>
                <div className="text-sm text-muted-foreground">Tiempo promedio de análisis</div>
                <Badge className="bg-yellow-500 text-white text-xs mt-2">
                  ⚡ Verificación Rápida
                </Badge>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Impacto Total */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <HeartPulse className="h-5 w-5 text-primary" />
              <span>Impacto</span>
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="space-y-3">
              <div className="text-center">
                <div className="text-3xl text-red-600">
                  {userData.totalReports + userData.totalDiagnosis + userData.totalImmunizations}
                </div>
                <div className="text-sm text-muted-foreground">Casos totales</div>
              </div>
              <Separator />
              <div className="space-y-2">
                <div className="flex justify-between text-xs">
                  <span className="flex items-center">
                    <Eye className="h-3 w-3 mr-1 text-blue-500" />
                    Reportes
                  </span>
                  <span className="font-medium">{userData.totalReports}</span>
                </div>
                <div className="flex justify-between text-xs">
                  <span className="flex items-center">
                    <Microscope className="h-3 w-3 mr-1 text-purple-500" />
                    Diagnósticos
                  </span>
                  <span className="font-medium">{userData.totalDiagnosis}</span>
                </div>
                <div className="flex justify-between text-xs">
                  <span className="flex items-center">
                    <Syringe className="h-3 w-3 mr-1 text-orange-500" />
                    Inmunizaciones
                  </span>
                  <span className="font-medium">{userData.totalImmunizations}</span>
                </div>
              </div>
            </div>
          </CardContent>
        </Card>
      </div>

      {/* Modal de Cambio de Avatar */}
      <AnimatePresence>
        {showAvatarModal && (
          <motion.div
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4"
            onClick={() => setShowAvatarModal(false)}
          >
            <motion.div
              initial={{ scale: 0.9, y: 20 }}
              animate={{ scale: 1, y: 0 }}
              exit={{ scale: 0.9, y: 20 }}
              onClick={(e) => e.stopPropagation()}
              className="max-w-md w-full"
            >
              <Card>
                <CardHeader>
                  <CardTitle className="flex items-center space-x-2">
                    <Camera className="h-5 w-5 text-primary" />
                    <span>Cambiar Foto de Perfil</span>
                  </CardTitle>
                  <CardDescription>
                    Personaliza tu avatar epidemiológico
                  </CardDescription>
                </CardHeader>
                <CardContent className="space-y-4">
                  {/* Avatar Actual */}
                  <div className="flex flex-col items-center space-y-3">
                    <Avatar className="h-32 w-32 border-4 border-primary/20 shadow-lg">
                      <AvatarImage src={userData.avatar} alt={userData.name} />
                      <AvatarFallback className="text-2xl bg-primary text-primary-foreground">
                        {userData.name.split(' ').map(n => n[0]).join('')}
                      </AvatarFallback>
                    </Avatar>
                    <p className="text-sm text-muted-foreground text-center">
                      {userData.name}
                    </p>
                  </div>

                  <Separator />

                  {/* Opciones de Cambio */}
                  <div className="space-y-3">
                    <Button 
                      className="w-full" 
                      variant="outline"
                      onClick={() => {
                        // Simular clic en input file
                        alert('¡Próximamente! Podrás subir tu propia foto 📸');
                      }}
                    >
                      <Upload className="h-4 w-4 mr-2" />
                      Subir nueva foto
                    </Button>
                    
                    <div className="grid grid-cols-4 gap-3">
                      {/* Avatares digitales de ejemplo */}
                      {[
                        { style: 'avataaars', seed: 'Felix', bg: 'ffda00' },
                        { style: 'bottts', seed: 'Robot1', bg: 'ffe97a' },
                        { style: 'avataaars', seed: 'Aneka', bg: 'ff6b35' },
                        { style: 'personas', seed: 'Digital1', bg: '00b4d8' },
                        { style: 'avataaars', seed: 'Sofia', bg: 'f72585' },
                        { style: 'bottts', seed: 'Bot2024', bg: '7209b7' },
                        { style: 'personas', seed: 'Alex', bg: '06ffa5' },
                        { style: 'avataaars', seed: 'Carlos', bg: 'ffd60a' },
                      ].map((avatar, idx) => (
                        <button
                          key={idx}
                          onClick={() => {
                            alert(`Avatar ${idx + 1} seleccionado. En la versión final, esto cambiará tu foto de perfil.`);
                            setShowAvatarModal(false);
                          }}
                          className="relative group"
                        >
                          <Avatar className="h-16 w-16 border-2 border-gray-200 hover:border-primary transition-all cursor-pointer hover:scale-110 shadow-sm">
                            <AvatarImage src={`https://api.dicebear.com/7.x/${avatar.style}/svg?seed=${avatar.seed}&backgroundColor=${avatar.bg}`} />
                            <AvatarFallback>#{idx + 1}</AvatarFallback>
                          </Avatar>
                          <div className="absolute inset-0 bg-primary/0 group-hover:bg-primary/20 rounded-full transition-all" />
                        </button>
                      ))}
                    </div>
                  </div>

                  <Separator />

                  {/* Botones de Acción */}
                  <div className="flex space-x-2">
                    <Button 
                      variant="outline" 
                      className="flex-1"
                      onClick={() => setShowAvatarModal(false)}
                    >
                      Cancelar
                    </Button>
                    <Button 
                      className="flex-1 bg-primary hover:bg-primary/90"
                      onClick={() => {
                        setShowAvatarModal(false);
                        alert('¡Avatar actualizado con éxito! 🎉');
                      }}
                    >
                      <CheckCircle className="h-4 w-4 mr-2" />
                      Guardar
                    </Button>
                  </div>
                </CardContent>
              </Card>
            </motion.div>
          </motion.div>
        )}
      </AnimatePresence>
    </motion.div>
  );
}
 - - - - - - - - - - - - 
src/components/components/extension/QuickAnalysisBadge.tsx

import React, { useState } from 'react';
import { Button } from '../ui/button';
import { Badge } from '../ui/badge';
import { Shield, CheckCircle, AlertTriangle, XCircle, ExternalLink } from 'lucide-react';

interface QuickAnalysisBadgeProps {
  status: 'safe' | 'warning' | 'alert';
  position?: { x: number; y: number };
  compact?: boolean;
}

export function QuickAnalysisBadge({ 
  status, 
  position = { x: 0, y: 0 },
  compact = false 
}: QuickAnalysisBadgeProps) {
  const [showDetails, setShowDetails] = useState(false);

  const statusConfig = {
    safe: {
      color: 'bg-green-500',
      text: 'Verificado',
      icon: <CheckCircle className="h-4 w-4" />,
      message: 'Este contenido ha sido verificado'
    },
    warning: {
      color: 'bg-orange-500',
      text: '⚠️ Precaución',
      icon: <AlertTriangle className="h-4 w-4" />,
      message: 'Este contenido presenta señales sospechosas'
    },
    alert: {
      color: 'bg-red-500',
      text: '⛔ No Verificado',
      icon: <XCircle className="h-4 w-4" />,
      message: 'Alto riesgo de desinformación detectado'
    }
  };

  const config = statusConfig[status];

  if (compact) {
    return (
      <div 
        className="fixed z-[9999]"
        style={{ 
          left: `${position.x}px`, 
          top: `${position.y}px` 
        }}
      >
        <Badge 
          className={`${config.color} text-white cursor-pointer shadow-lg hover:scale-105 transition-transform`}
          onClick={() => setShowDetails(!showDetails)}
        >
          <Shield className="h-3 w-3 mr-1" />
          {config.text}
        </Badge>

        {showDetails && (
          <div className="absolute top-full left-0 mt-2 w-64 bg-white border-2 border-black rounded-lg shadow-xl p-3 space-y-2">
            <div className="flex items-start space-x-2">
              <div className={`${config.color} p-1.5 rounded text-white`}>
                {config.icon}
              </div>
              <div className="flex-1">
                <p className="text-sm mb-2">{config.message}</p>
                <Button 
                  variant="outline" 
                  size="sm" 
                  className="w-full text-xs"
                  onClick={() => window.open('https://botilito.app/analysis', '_blank')}
                >
                  <ExternalLink className="h-3 w-3 mr-1" />
                  Ver análisis completo
                </Button>
              </div>
            </div>
          </div>
        )}
      </div>
    );
  }

  return (
    <div 
      className="fixed z-[9999] bg-white border-4 border-primary rounded-lg shadow-2xl p-4"
      style={{ 
        left: `${position.x}px`, 
        top: `${position.y}px`,
        maxWidth: '320px'
      }}
    >
      <div className="flex items-start space-x-3">
        <div className={`${config.color} p-2 rounded-lg text-white`}>
          <Shield className="h-6 w-6" />
        </div>
        <div className="flex-1">
          <div className="flex items-center justify-between mb-2">
            <Badge className={`${config.color} text-white`}>
              {config.text}
            </Badge>
          </div>
          <p className="text-sm mb-3">{config.message}</p>
          <Button 
            size="sm"
            className="w-full text-xs"
            onClick={() => window.open('https://botilito.app/analysis', '_blank')}
          >
            <ExternalLink className="h-3 w-3 mr-1" />
            Ver más detalles
          </Button>
        </div>
      </div>
      <div className="mt-3 pt-3 border-t text-center">
        <p className="text-xs text-muted-foreground">
          Verificado por <span className="text-primary font-medium">Botilito</span>
        </p>
      </div>
    </div>
  );
}
 - - - - - - - - - - - - 
src/components/components/extension/ExtensionApp.tsx

import React, { useState } from 'react';
import { ExtensionPopup } from './ExtensionPopup';
import { InPageOverlay } from './InPageOverlay';
import { QuickAnalysisBadge } from './QuickAnalysisBadge';
import { ExtensionSettings } from './ExtensionSettings';

type ViewType = 'popup' | 'overlay' | 'badge' | 'settings';

export function ExtensionApp() {
  const [currentView, setCurrentView] = useState<ViewType>('popup');

  return (
    <div className="min-h-screen bg-gray-50 p-8">
      {/* Demo Controls */}
      <div className="max-w-4xl mx-auto mb-8">
        <div className="bg-white p-4 rounded-lg shadow-md border-2 border-primary">
          <h2 className="text-lg mb-3">
            🎨 Vista Previa de Extensión de Navegador
          </h2>
          <div className="flex flex-wrap gap-2">
            <button
              onClick={() => setCurrentView('popup')}
              className={`px-4 py-2 rounded-lg transition-colors ${
                currentView === 'popup'
                  ? 'bg-primary text-black'
                  : 'bg-secondary/40 hover:bg-secondary'
              }`}
            >
              Popup Principal
            </button>
            <button
              onClick={() => setCurrentView('overlay')}
              className={`px-4 py-2 rounded-lg transition-colors ${
                currentView === 'overlay'
                  ? 'bg-primary text-black'
                  : 'bg-secondary/40 hover:bg-secondary'
              }`}
            >
              Overlay In-Page
            </button>
            <button
              onClick={() => setCurrentView('badge')}
              className={`px-4 py-2 rounded-lg transition-colors ${
                currentView === 'badge'
                  ? 'bg-primary text-black'
                  : 'bg-secondary/40 hover:bg-secondary'
              }`}
            >
              Badge Rápido
            </button>
            <button
              onClick={() => setCurrentView('settings')}
              className={`px-4 py-2 rounded-lg transition-colors ${
                currentView === 'settings'
                  ? 'bg-primary text-black'
                  : 'bg-secondary/40 hover:bg-secondary'
              }`}
            >
              Configuración
            </button>
          </div>
          <p className="text-sm text-muted-foreground mt-2">
            Estas son las interfaces que verán los usuarios en la extensión del navegador
          </p>
        </div>
      </div>

      {/* Current View */}
      <div className="flex justify-center items-start min-h-[600px]">
        {currentView === 'popup' && (
          <div className="shadow-2xl rounded-lg overflow-hidden border-4 border-black">
            <ExtensionPopup />
          </div>
        )}

        {currentView === 'overlay' && (
          <div className="relative w-full max-w-4xl h-[600px] bg-white rounded-lg shadow-inner p-8">
            <div className="text-center mb-4">
              <p className="text-muted-foreground">
                Simulación de página web con overlay de análisis
              </p>
            </div>
            <div className="prose max-w-none">
              <h1>Artículo de Ejemplo</h1>
              <p>
                Este es un ejemplo de cómo se vería el overlay de Botilito sobre 
                una página web real. El overlay aparece cuando se detecta contenido 
                sospechoso y puede ser posicionado estratégicamente.
              </p>
            </div>
            <InPageOverlay position={{ x: 50, y: 150 }} />
          </div>
        )}

        {currentView === 'badge' && (
          <div className="relative w-full max-w-4xl h-[600px] bg-white rounded-lg shadow-inner p-8">
            <div className="text-center mb-4">
              <p className="text-muted-foreground">
                Ejemplos de badges de verificación rápida
              </p>
            </div>
            <div className="space-y-8">
              <QuickAnalysisBadge 
                status="safe" 
                position={{ x: 100, y: 100 }}
              />
              <QuickAnalysisBadge 
                status="warning" 
                position={{ x: 100, y: 250 }}
              />
              <QuickAnalysisBadge 
                status="alert" 
                position={{ x: 100, y: 400 }}
              />
            </div>
          </div>
        )}

        {currentView === 'settings' && (
          <div className="w-full max-w-4xl">
            <ExtensionSettings />
          </div>
        )}
      </div>
    </div>
  );
}
 - - - - - - - - - - - - 
src/components/components/extension/ExtensionSettings.tsx

import React, { useState } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../ui/card';
import { Button } from '../ui/button';
import { Switch } from '../ui/switch';
import { Label } from '../ui/label';
import { Badge } from '../ui/badge';
import { 
  Settings, Bell, Shield, Zap, Eye, Globe, 
  Database, ExternalLink, Save, RefreshCw
} from 'lucide-react';

export function ExtensionSettings() {
  const [settings, setSettings] = useState({
    autoAnalysis: true,
    showBadges: true,
    notifications: true,
    analyzeOnHover: false,
    highlightSuspicious: true,
    shareAnonymously: true,
    language: 'es'
  });

  const toggleSetting = (key: keyof typeof settings) => {
    setSettings(prev => ({
      ...prev,
      [key]: !prev[key]
    }));
  };

  return (
    <div className="w-full max-w-2xl mx-auto p-6 bg-background min-h-screen">
      {/* Header */}
      <div className="mb-6">
        <div className="flex items-center space-x-3 mb-2">
          <Settings className="h-8 w-8 text-primary" />
          <h1 className="text-2xl">Configuración de Botilito</h1>
        </div>
        <p className="text-muted-foreground">
          Personaliza cómo la extensión detecta y te notifica sobre desinformación
        </p>
      </div>

      <div className="space-y-4">
        {/* Análisis Automático */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Zap className="h-5 w-5 text-primary" />
              <span>Análisis Automático</span>
            </CardTitle>
            <CardDescription>
              Configura cómo y cuándo Botilito analiza el contenido
            </CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="flex items-center justify-between">
              <div className="space-y-0.5">
                <Label>Analizar páginas automáticamente</Label>
                <p className="text-sm text-muted-foreground">
                  Botilito analizará las páginas que visites
                </p>
              </div>
              <Switch
                checked={settings.autoAnalysis}
                onCheckedChange={() => toggleSetting('autoAnalysis')}
              />
            </div>

            <div className="flex items-center justify-between">
              <div className="space-y-0.5">
                <Label>Mostrar badges en páginas</Label>
                <p className="text-sm text-muted-foreground">
                  Muestra indicadores visuales en contenido analizado
                </p>
              </div>
              <Switch
                checked={settings.showBadges}
                onCheckedChange={() => toggleSetting('showBadges')}
              />
            </div>

            <div className="flex items-center justify-between">
              <div className="space-y-0.5">
                <Label>Analizar al pasar el cursor</Label>
                <p className="text-sm text-muted-foreground">
                  Análisis rápido al mantener el cursor sobre texto
                </p>
              </div>
              <Switch
                checked={settings.analyzeOnHover}
                onCheckedChange={() => toggleSetting('analyzeOnHover')}
              />
            </div>
          </CardContent>
        </Card>

        {/* Notificaciones */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Bell className="h-5 w-5 text-primary" />
              <span>Notificaciones</span>
            </CardTitle>
            <CardDescription>
              Controla cómo te notificamos sobre contenido sospechoso
            </CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="flex items-center justify-between">
              <div className="space-y-0.5">
                <Label>Activar notificaciones</Label>
                <p className="text-sm text-muted-foreground">
                  Recibe alertas sobre contenido no verificado
                </p>
              </div>
              <Switch
                checked={settings.notifications}
                onCheckedChange={() => toggleSetting('notifications')}
              />
            </div>

            <div className="flex items-center justify-between">
              <div className="space-y-0.5">
                <Label>Resaltar contenido sospechoso</Label>
                <p className="text-sm text-muted-foreground">
                  Destaca visualmente contenido con señales de alerta
                </p>
              </div>
              <Switch
                checked={settings.highlightSuspicious}
                onCheckedChange={() => toggleSetting('highlightSuspicious')}
              />
            </div>
          </CardContent>
        </Card>

        {/* Privacidad */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Shield className="h-5 w-5 text-primary" />
              <span>Privacidad y Datos</span>
            </CardTitle>
            <CardDescription>
              Gestiona cómo compartimos tus datos para mejorar el servicio
            </CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="flex items-center justify-between">
              <div className="space-y-0.5">
                <Label>Compartir análisis anónimamente</Label>
                <p className="text-sm text-muted-foreground">
                  Ayuda a mejorar Botilito compartiendo datos anónimos
                </p>
              </div>
              <Switch
                checked={settings.shareAnonymously}
                onCheckedChange={() => toggleSetting('shareAnonymously')}
              />
            </div>

            <div className="p-3 bg-secondary/20 rounded-lg border border-secondary/40">
              <div className="flex items-start space-x-2">
                <Eye className="h-4 w-4 text-primary mt-0.5" />
                <div>
                  <p className="text-sm">
                    Nunca compartimos información personal. Solo enviamos patrones 
                    de desinformación para mejorar la detección global.
                  </p>
                </div>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Estadísticas */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Database className="h-5 w-5 text-primary" />
              <span>Estadísticas de Uso</span>
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="grid grid-cols-3 gap-4 text-center">
              <div>
                <p className="text-2xl">2,847</p>
                <p className="text-xs text-muted-foreground">Páginas analizadas</p>
              </div>
              <div>
                <p className="text-2xl">142</p>
                <p className="text-xs text-muted-foreground">Alertas emitidas</p>
              </div>
              <div>
                <p className="text-2xl">95%</p>
                <p className="text-xs text-muted-foreground">Precisión</p>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Acciones */}
        <div className="flex space-x-3">
          <Button className="flex-1">
            <Save className="h-4 w-4 mr-2" />
            Guardar Cambios
          </Button>
          <Button variant="outline">
            <RefreshCw className="h-4 w-4 mr-2" />
            Restablecer
          </Button>
        </div>

        {/* Footer */}
        <div className="pt-4 border-t text-center space-y-2">
          <Button 
            variant="ghost" 
            className="text-sm"
            onClick={() => window.open('https://botilito.app', '_blank')}
          >
            <ExternalLink className="h-4 w-4 mr-2" />
            Abrir aplicación web completa
          </Button>
          <div className="flex items-center justify-center space-x-2">
            <Badge variant="secondary">Versión 1.0.0</Badge>
            <span className="text-xs text-muted-foreground">•</span>
            <p className="text-xs text-muted-foreground">Digital-IA © 2024</p>
          </div>
        </div>
      </div>
    </div>
  );
}
 - - - - - - - - - - - - 
src/components/components/extension/InPageOverlay.tsx

import React, { useState } from 'react';
import { Button } from '../ui/button';
import { Badge } from '../ui/badge';
import { Card, CardContent, CardHeader, CardTitle } from '../ui/card';
import { 
  X, Shield, AlertTriangle, CheckCircle, XCircle, 
  ExternalLink, ChevronDown, ChevronUp
} from 'lucide-react';

interface InPageOverlayProps {
  onClose?: () => void;
  position?: { x: number; y: number };
}

export function InPageOverlay({ onClose, position = { x: 20, y: 20 } }: InPageOverlayProps) {
  const [isExpanded, setIsExpanded] = useState(true);
  const [analysisResult] = useState({
    status: 'warning',
    title: 'Contenido sospechoso detectado',
    markers: [
      { type: 'Sensacionalista', confidence: 0.82 },
      { type: 'Manipulado', confidence: 0.75 },
      { type: 'Sin Verificar', confidence: 0.68 }
    ],
    summary: 'Este artículo presenta características típicas de contenido sensacionalista. Recomendamos verificar las fuentes antes de compartir.',
    caseNumber: 'T-WA-20241014-789'
  });

  const getStatusConfig = (status: string) => {
    const configs: { [key: string]: any } = {
      'safe': {
        color: 'bg-green-500',
        icon: <CheckCircle className="h-5 w-5" />,
        borderColor: 'border-green-500'
      },
      'warning': {
        color: 'bg-orange-500',
        icon: <AlertTriangle className="h-5 w-5" />,
        borderColor: 'border-orange-500'
      },
      'alert': {
        color: 'bg-red-500',
        icon: <XCircle className="h-5 w-5" />,
        borderColor: 'border-red-500'
      }
    };
    return configs[status] || configs['warning'];
  };

  const config = getStatusConfig(analysisResult.status);

  return (
    <div 
      className="fixed z-[9999] shadow-2xl"
      style={{ 
        left: `${position.x}px`, 
        top: `${position.y}px`,
        maxWidth: '420px'
      }}
    >
      <Card className={`border-4 ${config.borderColor} bg-white`}>
        <CardHeader className="pb-3 bg-primary/10">
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-2">
              <Shield className="h-5 w-5 text-primary" />
              <CardTitle className="text-base">Análisis de Botilito</CardTitle>
            </div>
            <div className="flex items-center space-x-1">
              <Button
                variant="ghost"
                size="sm"
                className="h-6 w-6 p-0"
                onClick={() => setIsExpanded(!isExpanded)}
              >
                {isExpanded ? (
                  <ChevronUp className="h-4 w-4" />
                ) : (
                  <ChevronDown className="h-4 w-4" />
                )}
              </Button>
              <Button
                variant="ghost"
                size="sm"
                className="h-6 w-6 p-0"
                onClick={onClose}
              >
                <X className="h-4 w-4" />
              </Button>
            </div>
          </div>
        </CardHeader>

        {isExpanded && (
          <CardContent className="space-y-3 pt-3">
            {/* Status Badge */}
            <div className={`flex items-center space-x-2 p-3 rounded-lg ${analysisResult.status === 'alert' ? 'bg-red-700' : config.color} ${analysisResult.status === 'alert' ? '' : 'bg-opacity-20'} border-2 ${config.borderColor}`}>
              <div className={`${analysisResult.status === 'alert' ? 'bg-red-900' : config.color} p-1.5 rounded text-white`}>
                {config.icon}
              </div>
              <div>
                <p className={`font-medium text-sm ${analysisResult.status === 'alert' ? 'text-white' : ''}`}>{analysisResult.title}</p>
                <Badge variant="outline" className={`text-xs mt-1 ${analysisResult.status === 'alert' ? 'text-white border-white' : ''}`}>
                  Caso: {analysisResult.caseNumber}
                </Badge>
              </div>
            </div>

            {/* Marcadores Detectados */}
            <div>
              <p className="text-xs text-muted-foreground mb-2">
                Marcadores detectados:
              </p>
              <div className="grid grid-cols-2 gap-2">
                {analysisResult.markers.map((marker, idx) => (
                  <Badge 
                    key={idx} 
                    variant="secondary"
                    className="text-xs"
                  >
                    {marker.type}
                    <span className="ml-1 opacity-70">
                      {(marker.confidence * 100).toFixed(0)}%
                    </span>
                  </Badge>
                ))}
              </div>
            </div>

            {/* Resumen */}
            <div className="p-3 bg-secondary/20 rounded-lg border border-secondary/40">
              <p className="text-sm leading-relaxed">
                {analysisResult.summary}
              </p>
            </div>

            {/* Acciones */}
            <div className="flex space-x-2">
              <Button 
                variant="outline" 
                size="sm"
                className="flex-1 text-xs"
                onClick={() => window.open('https://botilito.app/analysis', '_blank')}
              >
                <ExternalLink className="h-3 w-3 mr-1" />
                Ver detalles
              </Button>
              <Button 
                size="sm"
                className="flex-1 text-xs"
              >
                <Shield className="h-3 w-3 mr-1" />
                Reportar
              </Button>
            </div>

            {/* Footer */}
            <div className="pt-2 border-t text-center">
              <p className="text-xs text-muted-foreground">
                Análisis por <span className="text-primary font-medium">Botilito</span> • Digital-IA
              </p>
            </div>
          </CardContent>
        )}
      </Card>
    </div>
  );
} - - - - - - - - - - - - 
src/components/components/extension/ExtensionPopup.tsx

import React, { useState } from 'react';
import botilitoLogo from 'figma:asset/8604399dafdf4284ef499af970e8af43ff13e21b.png';
import { Button } from '../ui/button';
import { Badge } from '../ui/badge';
import { Card, CardContent, CardHeader, CardTitle } from '../ui/card';
import { Textarea } from '../ui/textarea';
import { 
  Shield, Send, ExternalLink, Clock, CheckCircle, 
  XCircle, AlertTriangle, Bot, Zap
} from 'lucide-react';

export function ExtensionPopup() {
  const [contentToAnalyze, setContentToAnalyze] = useState('');
  const [isAnalyzing, setIsAnalyzing] = useState(false);
  const [quickResult, setQuickResult] = useState<any>(null);

  const analyzeCurrentPage = () => {
    setIsAnalyzing(true);
    // Simular análisis rápido
    setTimeout(() => {
      setQuickResult({
        status: 'warning',
        markers: ['Sensacionalista', 'Manipulado'],
        confidence: 0.75,
        message: 'Este contenido presenta señales de desinformación'
      });
      setIsAnalyzing(false);
    }, 1500);
  };

  const analyzeSelection = () => {
    if (!contentToAnalyze.trim()) return;
    setIsAnalyzing(true);
    setTimeout(() => {
      setQuickResult({
        status: 'alert',
        markers: ['Falso', 'Conspiración'],
        confidence: 0.89,
        message: 'Alto riesgo de desinformación detectado'
      });
      setIsAnalyzing(false);
    }, 1500);
  };

  const getStatusColor = (status: string) => {
    const colors: { [key: string]: string } = {
      'safe': 'bg-green-500',
      'warning': 'bg-orange-500',
      'alert': 'bg-red-500'
    };
    return colors[status] || 'bg-gray-500';
  };

  const getStatusIcon = (status: string) => {
    const icons: { [key: string]: React.ReactNode } = {
      'safe': <CheckCircle className="h-5 w-5" />,
      'warning': <AlertTriangle className="h-5 w-5" />,
      'alert': <XCircle className="h-5 w-5" />
    };
    return icons[status] || <Shield className="h-5 w-5" />;
  };

  return (
    <div className="w-[380px] h-[600px] bg-background overflow-y-auto custom-scrollbar">
      {/* Header */}
      <div className="bg-[rgb(255,255,255)] p-4 border border-gray-400">
        <div className="flex items-center justify-between">
          <div className="flex items-center space-x-2">
            <img src={botilitoLogo} alt="Botilito" className="h-10 object-contain" />
          </div>
          <Badge variant="secondary" className="text-xs">v1.0</Badge>
        </div>
        <p className="text-xs text-black mt-1">
          Detector de Desinformación
        </p>
      </div>

      <div className="p-4 space-y-4">
        {/* Análisis Rápido de Página */}
        <Card className="border-2 border-primary/40">
          <CardHeader className="pb-[0px] pt-[17px] px-4 pr-[16px] pl-[16px]">
            <CardTitle className="text-sm flex items-center space-x-2">
              <Zap className="h-4 w-4 text-primary" />
              <span>Análisis Rápido</span>
            </CardTitle>
          </CardHeader>
          <CardContent className="space-y-2 pt-[0px] pr-[24px] pb-[20px] pl-[24px] mt-[-14px] mr-[0px] mb-[1px] ml-[0px]">
            <Button 
              onClick={analyzeCurrentPage}
              disabled={isAnalyzing}
              className="w-full px-[10px] py-[0px]"
              size="sm"
            >
              {isAnalyzing ? (
                <Clock className="h-4 w-4 mr-2 animate-spin" />
              ) : (
                <Shield className="h-4 w-4 mr-2" />
              )}
              {isAnalyzing ? 'Analizando...' : 'Analizar esta página'}
            </Button>

            {quickResult && (
              <div className={`p-2 rounded-lg border-2 ${getStatusColor(quickResult.status)} bg-opacity-10`}>
                <div className="flex items-start space-x-2 mb-1.5">
                  <div className={`${getStatusColor(quickResult.status)} p-1 rounded text-white`}>
                    {getStatusIcon(quickResult.status)}
                  </div>
                  <div className="flex-1">
                    <p className="text-sm mb-1">{quickResult.message}</p>
                    <div className="grid grid-cols-2 gap-1">
                      {quickResult.markers.map((marker: string, idx: number) => (
                        <Badge key={idx} variant="secondary" className="text-xs">
                          {marker}
                        </Badge>
                      ))}
                    </div>
                  </div>
                </div>
                <Button 
                  variant="outline" 
                  size="sm" 
                  className="w-full mt-1.5 text-xs"
                  onClick={() => window.open('https://botilito.app/analysis', '_blank')}
                >
                  <ExternalLink className="h-3 w-3 mr-1" />
                  Ver análisis completo
                </Button>
              </div>
            )}
          </CardContent>
        </Card>

        {/* Analizar Texto Seleccionado */}
        <Card className="border-2 border-secondary/40">
          <CardHeader className="pb-[0px] pt-[20px] px-4 pr-[0px] pl-[16px]">
            <CardTitle className="text-sm flex items-center space-x-2">
              <Bot className="h-4 w-4 text-primary" />
              <span>Analizar Contenido</span>
            </CardTitle>
          </CardHeader>
          <CardContent className="space-y-1.5 pt-[0px] pr-[24px] pb-[20px] pl-[24px]">
            <Textarea
              placeholder="Pega aquí el texto que quieres verificar..."
              value={contentToAnalyze}
              onChange={(e) => setContentToAnalyze(e.target.value)}
              rows={2}
              className="resize-none text-sm border border-gray-300 mt-[-15px] mr-[0px] mb-[9px] ml-[0px]"
            />
            <Button 
              onClick={analyzeSelection}
              disabled={!contentToAnalyze.trim() || isAnalyzing}
              className="w-full"
              size="sm"
            >
              <Send className="h-4 w-4 mr-2" />
              Enviar a Botilito
            </Button>
          </CardContent>
        </Card>

        {/* Estadísticas Rápidas */}
        <Card className="border border-secondary/40">
          <CardContent className="pt-4">
            <div className="grid grid-cols-2 gap-3">
              {/* Casos analizados hoy */}
              <div className="bg-blue-50 border-2 border-blue-200 rounded-lg p-3 text-center transition-all hover:shadow-md">
                <div className="flex items-center justify-center mb-1">
                  <Zap className="h-4 w-4 text-blue-600 mr-1" />
                  <p className="text-2xl text-blue-700">47</p>
                </div>
                <p className="text-xs text-blue-600">Casos analizados hoy</p>
              </div>
              
              {/* Precisión */}
              <div className="bg-green-50 border-2 border-green-200 rounded-lg p-3 text-center transition-all hover:shadow-md">
                <div className="flex items-center justify-center mb-1">
                  <CheckCircle className="h-4 w-4 text-green-600 mr-1" />
                  <p className="text-2xl text-green-700">92%</p>
                </div>
                <p className="text-xs text-green-600">Precisión</p>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Footer */}
        <div className="text-center pt-2 border-t">
          <Button 
            variant="ghost" 
            size="sm" 
            className="text-xs"
            onClick={() => window.open('https://botilito.app', '_blank')}
          >
            Abrir aplicación completa
            <ExternalLink className="h-3 w-3 ml-1" />
          </Button>
        </div>
      </div>
    </div>
  );
} - - - - - - - - - - - - 
src/components/components/Login.tsx

import React, { useState } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Input } from './ui/input';
import { Label } from './ui/label';
import { Eye, EyeOff, Loader2 } from 'lucide-react';
import exampleImage from 'figma:asset/444e8e22665a8cbdab132760610010dba89f3e67.png';
import botilitoImage from 'figma:asset/ce81bb4aba8c9f36807cd145a086a12ce7f876dc.png';
import digitalIALogo from 'figma:asset/1c413bccac94a45a38e7dde790a3aa8c525d334b.png';
import { signIn } from '../utils/supabase/auth';

interface LoginProps {
  onLogin: () => void;
  onGoToRegister: () => void;
}

export function Login({ onLogin, onGoToRegister }: LoginProps) {
  const [showPassword, setShowPassword] = useState(false);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [credentials, setCredentials] = useState({
    email: '',
    password: ''
  });

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsLoading(true);
    setError(null);

    try {
      await signIn({
        email: credentials.email,
        password: credentials.password
      });
      onLogin();
    } catch (err: any) {
      console.error('Login error:', err);
      setError(err.message || 'Error al iniciar sesión. Por favor, verifica tus credenciales.');
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="min-h-screen bg-primary">
      <div className="w-full h-screen">
        {/* Contenedor principal con la imagen de referencia como fondo */}
        <div className="relative bg-white h-full overflow-hidden">
          {/* Imagen de fondo de referencia */}
          <div className="absolute inset-0 opacity-10">
            <img 
              src={exampleImage} 
              alt="Botilito Login Reference" 
              className="w-full h-full object-cover"
            />
          </div>
          
          <div className="relative z-10 grid lg:grid-cols-2 gap-0 h-full">
            {/* Lado izquierdo - Presentación de Botilito */}
            <div className="bg-gradient-to-br from-primary to-secondary lg:p-12 flex flex-col justify-center items-center text-center p-[48px]">
              {/* Burbuja de diálogo */}
              <div className="bg-white rounded-2xl p-6 mb-8 relative shadow-lg max-w-md">
                <h1 className="text-3xl font-bold text-black mb-4">
                  ¡Kiubo! Soy Botilito
                </h1>
                <p className="text-gray-700 leading-relaxed">
                  Un ex-agente digital de una granja de bots! Me escapé para venirme al bando de los que luchan contra la desinformación desde digitalia.gov.co.
                </p>
                {/* Flecha de la burbuja */}
                <div className="absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full">
                  <div className="w-0 h-0 border-l-[15px] border-r-[15px] border-t-[20px] border-l-transparent border-r-transparent border-t-white"></div>
                </div>
              </div>

              {/* Botilito Character - Imagen oficial */}
              <div className="relative">
                <img 
                  src={botilitoImage} 
                  alt="Botilito - El ex-agente digital convertido en luchador contra la desinformación" 
                  className="w-72 h-auto drop-shadow-2xl"
                />
              </div>
            </div>

            {/* Lado derecho - Formulario de login */}
            <div className="bg-white lg:p-12 flex flex-col justify-center px-[130px] py-[48px]">
              <div className="max-w-xl mx-auto w-full">
                {/* Header del formulario */}
                <div className="text-center mb-6">
                  <div className="inline-block bg-primary text-black px-8 py-4 rounded-2xl text-2xl font-bold mb-4">
                    ¿Me acompañas?
                  </div>
                </div>

                {/* Formulario */}
                <form onSubmit={handleSubmit} className="space-y-5">
                  {/* Error message */}
                  {error && (
                    <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg">
                      {error}
                    </div>
                  )}

                  {/* Campo de usuario/email */}
                  <div className="space-y-2">
                    <Label htmlFor="email" className="text-gray-700 text-lg">
                      Usuario o correo electrónico
                    </Label>
                    <Input
                      id="email"
                      type="text"
                      value={credentials.email}
                      onChange={(e) => setCredentials(prev => ({ ...prev, email: e.target.value }))}
                      className="w-full px-6 py-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                      placeholder="usuario@ejemplo.com"
                      required
                    />
                  </div>

                  {/* Campo de contraseña */}
                  <div className="space-y-2">
                    <Label htmlFor="password" className="text-gray-700 text-lg">
                      Contraseña
                    </Label>
                    <div className="relative">
                      <Input
                        id="password"
                        type={showPassword ? 'text' : 'password'}
                        value={credentials.password}
                        onChange={(e) => setCredentials(prev => ({ ...prev, password: e.target.value }))}
                        className="w-full px-6 py-4 pr-14 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                        placeholder="••••••••"
                        required
                      />
                      <button
                        type="button"
                        onClick={() => setShowPassword(!showPassword)}
                        className="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors"
                      >
                        {showPassword ? (
                          <EyeOff className="h-6 w-6" />
                        ) : (
                          <Eye className="h-6 w-6" />
                        )}
                      </button>
                    </div>
                  </div>

                  {/* Enlace "Olvidé mi contraseña" */}
                  <div className="text-right">
                    <button
                      type="button"
                      className="text-base text-gray-600 hover:text-gray-800 transition-colors"
                    >
                      Olvidé mi contraseña
                    </button>
                  </div>

                  {/* Botón de ingresar */}
                  <Button
                    type="submit"
                    disabled={isLoading}
                    className="w-full bg-black hover:bg-gray-800 text-white py-4 text-lg rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                  >
                    {isLoading ? (
                      <>
                        <Loader2 className="mr-2 h-5 w-5 animate-spin inline" />
                        Ingresando...
                      </>
                    ) : (
                      '¡Pa\' dentro!'
                    )}
                  </Button>

                  {/* Enlace de registro */}
                  <div className="text-center">
                    <span className="text-gray-600 text-base">¿No eres miembro? </span>
                    <button
                      type="button"
                      onClick={onGoToRegister}
                      className="text-primary hover:text-secondary font-medium text-base transition-colors no-hover-effect"
                    >
                      Regístrate ahora
                    </button>
                  </div>
                </form>
                
                {/* Logo de Digital-IA en la parte inferior */}
                <div className="mt-8 pt-6 border-t border-gray-200 flex justify-center">
                  <a 
                    href="https://digitalia.gov.co" 
                    target="_blank" 
                    rel="noopener noreferrer"
                    className="no-hover-effect"
                  >
                    <img 
                      src={digitalIALogo} 
                      alt="Digital-IA - Educomunicación para la paz" 
                      className="h-28 w-auto object-contain hover:opacity-80 transition-opacity cursor-pointer"
                    />
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
} - - - - - - - - - - - - 
src/components/components/FloatingNotifications.tsx

import React, { useState, useEffect } from 'react';
import { motion, AnimatePresence } from 'motion/react';
import { Badge } from './ui/badge';
import { Button } from './ui/button';
import { X, Bell, AlertTriangle, CheckCircle, Info } from 'lucide-react';

interface Notification {
  id: string;
  type: 'alert' | 'success' | 'info' | 'warning';
  title: string;
  message: string;
  timestamp: Date;
  region?: string;
}

export function FloatingNotifications() {
  const [notifications, setNotifications] = useState<Notification[]>([]);
  const [isVisible, setIsVisible] = useState(true);

  // Simular notificaciones en tiempo real
  useEffect(() => {
    const mockNotifications = [
      {
        id: '1',
        type: 'alert' as const,
        title: 'Brote detectado',
        message: 'Incremento súbito de casos en Región Andina (+45% en 1h)',
        timestamp: new Date(),
        region: 'Andina'
      },
      {
        id: '2',
        type: 'warning' as const,
        title: 'Patrón anómalo',
        message: 'Campaña coordinada detectada en WhatsApp',
        timestamp: new Date(Date.now() - 5 * 60 * 1000),
        region: 'Caribe'
      },
      {
        id: '3',
        type: 'success' as const,
        title: 'Neutralización exitosa',
        message: '156 casos verificados como falsos en última hora',
        timestamp: new Date(Date.now() - 10 * 60 * 1000),
        region: 'Nacional'
      }
    ];

    setNotifications(mockNotifications);

    // Simular nuevas notificaciones cada 30 segundos
    const interval = setInterval(() => {
      const newNotification: Notification = {
        id: Date.now().toString(),
        type: Math.random() > 0.5 ? 'info' : 'warning',
        title: 'Nueva actividad detectada',
        message: `${Math.floor(Math.random() * 50 + 10)} casos nuevos registrados`,
        timestamp: new Date(),
        region: ['Andina', 'Caribe', 'Pacífico'][Math.floor(Math.random() * 3)]
      };

      setNotifications(prev => [newNotification, ...prev.slice(0, 4)]);
    }, 30000);

    return () => clearInterval(interval);
  }, []);

  const removeNotification = (id: string) => {
    setNotifications(prev => prev.filter(n => n.id !== id));
  };

  const getNotificationIcon = (type: string) => {
    switch (type) {
      case 'alert': return <AlertTriangle className="h-4 w-4 text-red-500" />;
      case 'warning': return <AlertTriangle className="h-4 w-4 text-orange-500" />;
      case 'success': return <CheckCircle className="h-4 w-4 text-green-500" />;
      case 'info': return <Info className="h-4 w-4 text-blue-500" />;
      default: return <Bell className="h-4 w-4" />;
    }
  };

  const getBgColor = (type: string) => {
    switch (type) {
      case 'alert': return 'bg-red-50 border-red-200';
      case 'warning': return 'bg-orange-50 border-orange-200';
      case 'success': return 'bg-green-50 border-green-200';
      case 'info': return 'bg-blue-50 border-blue-200';
      default: return 'bg-gray-50 border-gray-200';
    }
  };

  const formatTimestamp = (timestamp: Date) => {
    const now = new Date();
    const diff = Math.floor((now.getTime() - timestamp.getTime()) / 1000);
    
    if (diff < 60) return 'ahora';
    if (diff < 3600) return `hace ${Math.floor(diff / 60)}m`;
    if (diff < 86400) return `hace ${Math.floor(diff / 3600)}h`;
    return `hace ${Math.floor(diff / 86400)}d`;
  };

  if (!isVisible || notifications.length === 0) {
    return (
      <motion.div
        initial={{ opacity: 0, x: 20 }}
        animate={{ opacity: 1, x: 0 }}
        className="fixed top-24 right-6 z-40"
      >
        <Button
          onClick={() => setIsVisible(true)}
          className="bg-primary hover:bg-primary/90 shadow-lg rounded-full p-3"
        >
          <Bell className="h-5 w-5" />
          {notifications.length > 0 && (
            <Badge className="absolute -top-2 -right-2 bg-red-500 text-white text-xs min-w-[20px] h-5 rounded-full flex items-center justify-center">
              {notifications.length}
            </Badge>
          )}
        </Button>
      </motion.div>
    );
  }

  return (
    <div className="fixed top-24 right-6 w-80 z-40">
      <motion.div
        initial={{ opacity: 0, x: 20 }}
        animate={{ opacity: 1, x: 0 }}
        className="space-y-3"
      >
        {/* Header */}
        <div className="bg-white/95 backdrop-blur-sm rounded-lg border shadow-lg p-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-2">
              <Bell className="h-5 w-5 text-primary" />
              <span className="font-medium">Alertas en Tiempo Real</span>
              <Badge variant="destructive" className="animate-pulse">
                {notifications.length}
              </Badge>
            </div>
            <Button
              variant="ghost"
              size="sm"
              onClick={() => setIsVisible(false)}
              className="h-6 w-6 p-0"
            >
              <X className="h-4 w-4" />
            </Button>
          </div>
        </div>

        {/* Notifications */}
        <AnimatePresence>
          {notifications.map((notification, index) => (
            <motion.div
              key={notification.id}
              initial={{ opacity: 0, x: 20, scale: 0.9 }}
              animate={{ opacity: 1, x: 0, scale: 1 }}
              exit={{ opacity: 0, x: 20, scale: 0.9 }}
              transition={{ delay: index * 0.1 }}
              className={`${getBgColor(notification.type)} border rounded-lg p-4 shadow-lg backdrop-blur-sm`}
            >
              <div className="flex items-start space-x-3">
                <div className="mt-0.5">
                  {getNotificationIcon(notification.type)}
                </div>
                <div className="flex-1 min-w-0">
                  <div className="flex items-center justify-between">
                    <h4 className="text-sm font-medium truncate">{notification.title}</h4>
                    <Button
                      variant="ghost"
                      size="sm"
                      onClick={() => removeNotification(notification.id)}
                      className="h-5 w-5 p-0 opacity-50 hover:opacity-100"
                    >
                      <X className="h-3 w-3" />
                    </Button>
                  </div>
                  <p className="text-sm text-muted-foreground mt-1 leading-relaxed">
                    {notification.message}
                  </p>
                  <div className="flex items-center justify-between mt-2">
                    {notification.region && (
                      <Badge variant="outline" className="text-xs">
                        {notification.region}
                      </Badge>
                    )}
                    <span className="text-xs text-muted-foreground">
                      {formatTimestamp(notification.timestamp)}
                    </span>
                  </div>
                </div>
              </div>
            </motion.div>
          ))}
        </AnimatePresence>

        {/* Actions */}
        {notifications.length > 0 && (
          <motion.div
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            className="bg-white/95 backdrop-blur-sm rounded-lg border shadow-lg p-3"
          >
            <div className="flex space-x-2">
              <Button
                size="sm"
                variant="outline"
                onClick={() => setNotifications([])}
                className="flex-1 text-xs"
              >
                Marcar como leídas
              </Button>
              <Button
                size="sm"
                className="flex-1 text-xs"
              >
                Ver todas
              </Button>
            </div>
          </motion.div>
        )}
      </motion.div>
    </div>
  );
} - - - - - - - - - - - - 
src/components/components/UnifiedDashboard.tsx

import React, { useState } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Badge } from './ui/badge';
import { Button } from './ui/button';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';
import { Progress } from './ui/progress';
import { Tabs, TabsContent, TabsList, TabsTrigger } from './ui/tabs';
import { 
  AreaChart, Area, BarChart, Bar, LineChart, Line, PieChart, Pie, Cell,
  XAxis, YAxis, CartesianGrid, ResponsiveContainer, Tooltip, Legend
} from 'recharts';
import { 
  Activity, TrendingUp, TrendingDown, AlertTriangle, Shield, 
  Zap, Clock, MapPin, Users, Globe, Bug, Stethoscope, 
  Target, Thermometer, ShieldCheck, AlertOctagon, Eye, Microscope,
  FileText, Image, Video, Volume2, CheckCircle, BarChart3
} from 'lucide-react';
import { Alert, AlertDescription } from './ui/alert';
import { WhatsAppIcon, FacebookIcon, TwitterIcon, TelegramIcon, TikTokIcon, WebIcon } from './PlatformIcons';

export function UnifiedDashboard() {
  const [timeRange, setTimeRange] = useState('24h');
  const [region, setRegion] = useState('colombia');

  // Datos del Dashboard original
  const dashboardStats = [
    { title: 'Total Contenidos', value: '1,247', icon: FileText, change: '+12%' },
    { title: 'Analizados por IA', value: '1,089', icon: CheckCircle, change: '+8%' },
    { title: 'Verificados Humanos', value: '456', icon: Users, change: '+15%' },
    { title: 'En Proceso', value: '158', icon: Clock, change: '-3%' },
  ];

  // Datos epidemiológicos del Mapa Desinfodémico
  const epidemicStats = [
    { title: 'Casos Activos', value: '2,847', icon: Bug, change: '+15%', color: 'text-red-600', bgColor: 'bg-red-50' },
    { title: 'Tasa de Infección', value: '3.2/h', icon: Activity, change: '+8%', color: 'text-orange-600', bgColor: 'bg-orange-50' },
    { title: 'Inmunidad Digital', value: '67%', icon: Shield, change: '+2%', color: 'text-green-600', bgColor: 'bg-green-50' },
    { title: 'Tiempo Promedio Detección', value: '4.2h', icon: Clock, change: '-12%', color: 'text-blue-600', bgColor: 'bg-blue-50' },
  ];

  const verificationData = [
    { month: 'Ene', contenidos: 85, verificados: 72 },
    { month: 'Feb', contenidos: 120, verificados: 98 },
    { month: 'Mar', contenidos: 150, verificados: 145 },
    { month: 'Abr', contenidos: 180, verificados: 165 },
    { month: 'May', contenidos: 210, verificados: 189 },
    { month: 'Jun', contenidos: 185, verificados: 176 },
  ];

  const infectivityData = [
    { time: '00:00', casos: 120, nuevos: 23, resueltos: 15 },
    { time: '04:00', casos: 145, nuevos: 31, resueltos: 18 },
    { time: '08:00', casos: 189, nuevos: 67, resueltos: 24 },
    { time: '12:00', casos: 234, nuevos: 89, resueltos: 35 },
    { time: '16:00', casos: 298, nuevos: 112, resueltos: 48 },
    { time: '20:00', casos: 267, nuevos: 78, resueltos: 109 },
    { time: '24:00', casos: 189, nuevos: 45, resueltos: 123 },
  ];

  const pieData = [
    { name: 'Veraz', value: 65, color: '#00E676' },
    { name: 'Desinformación', value: 20, color: '#F72585' },
    { name: 'Satírico', value: 10, color: '#FF6B35' },
    { name: 'Fuera de Contexto', value: 5, color: '#7209B7' },
  ];

  const contentTypes = [
    { name: 'Texto', value: 45, icon: FileText },
    { name: 'Imagen', value: 30, icon: Image },
    { name: 'Video', value: 20, icon: Video },
    { name: 'Audio', value: 5, icon: Volume2 },
  ];

  const transmissionVectors = [
    { platform: 'WhatsApp', cases: 856, percentage: 28, color: '#25D366' },
    { platform: 'Facebook', cases: 723, percentage: 24, color: '#1877F2' },
    { platform: 'Twitter/X', cases: 534, percentage: 18, color: '#000000' },
    { platform: 'Telegram', cases: 298, percentage: 10, color: '#0088CC' },
    { platform: 'TikTok', cases: 267, percentage: 9, color: '#FF0050' },
    { platform: 'Web', cases: 334, percentage: 11, color: '#4285F4' },
  ];

  const geographicSpread = [
    { region: 'Región Andina', casos: 1456, tasa: 5.2, estado: 'Brote Activo' },
    { region: 'Región Caribe', casos: 934, tasa: 4.1, estado: 'En Aumento' },
    { region: 'Región Pacífico', casos: 687, tasa: 3.8, estado: 'Controlado' },
    { region: 'Región Orinoquía', casos: 234, tasa: 2.3, estado: 'Estable' },
    { region: 'Región Amazonia', casos: 156, tasa: 1.9, estado: 'Bajo Control' },
    { region: 'Región Insular', casos: 43, tasa: 0.8, estado: 'Bajo Control' },
  ];

  const getRegionStatus = (estado: string) => {
    switch (estado) {
      case 'Brote Crítico':
        return <Badge className="bg-red-100 text-red-800 border-red-300">🔴 {estado}</Badge>;
      case 'Brote Activo':
        return <Badge className="bg-orange-100 text-orange-800 border-orange-300">🟡 {estado}</Badge>;
      case 'En Aumento':
        return <Badge className="bg-yellow-100 text-yellow-800 border-yellow-300">📈 {estado}</Badge>;
      case 'Controlado':
        return <Badge className="bg-blue-100 text-blue-800 border-blue-300">🔵 {estado}</Badge>;
      case 'Estable':
        return <Badge className="bg-green-100 text-green-800 border-green-300">🟢 {estado}</Badge>;
      case 'Bajo Control':
        return <Badge className="bg-green-100 text-green-800 border-green-300">✅ {estado}</Badge>;
      default:
        return <Badge variant="outline">{estado}</Badge>;
    }
  };

  const getPlatformIcon = (platform: string) => {
    switch (platform) {
      case 'WhatsApp': return WhatsAppIcon;
      case 'Facebook': return FacebookIcon;
      case 'Twitter/X': return TwitterIcon;
      case 'Telegram': return TelegramIcon;
      case 'TikTok': return TikTokIcon;
      case 'Web': return WebIcon;
      default: return Globe;
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex items-center justify-between">
        <div>
          <h1 className="flex items-center space-x-3">
            <BarChart3 className="h-8 w-8 text-primary" />
            <span>Dashboard & Mapa Desinfodémico</span>
          </h1>
          <p className="text-muted-foreground">
            Análisis integral de verificación y monitoreo epidemiológico de desinformación
          </p>
        </div>
        
        <div className="flex space-x-3">
          <Select value={timeRange} onValueChange={setTimeRange}>
            <SelectTrigger className="w-32">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="1h">Última hora</SelectItem>
              <SelectItem value="24h">24 horas</SelectItem>
              <SelectItem value="7d">7 días</SelectItem>
              <SelectItem value="30d">30 días</SelectItem>
            </SelectContent>
          </Select>
          
          <Select value={region} onValueChange={setRegion}>
            <SelectTrigger className="w-40">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="colombia">Colombia</SelectItem>
              <SelectItem value="andina">Región Andina</SelectItem>
              <SelectItem value="caribe">Región Caribe</SelectItem>
              <SelectItem value="pacifico">Región Pacífico</SelectItem>
              <SelectItem value="orinoquia">Región Orinoquía</SelectItem>
              <SelectItem value="amazonia">Región Amazonia</SelectItem>
              <SelectItem value="insular">Región Insular</SelectItem>
            </SelectContent>
          </Select>
        </div>
      </div>

      {/* Alert de Brote */}
      <Alert className="border-red-200 bg-red-50">
        <AlertOctagon className="h-4 w-4 text-red-600" />
        <AlertDescription className="text-red-800">
          <strong>⚠️ Alerta Epidemiológica:</strong> Se detectó un brote de desinformación sobre tratamientos médicos. 
          Tasa de contagio: +45% en las últimas 6 horas. <Button variant="outline" size="sm" className="ml-2">Ver Detalles</Button>
        </AlertDescription>
      </Alert>

      <Tabs defaultValue="dashboard" className="w-full">
        <TabsList className="grid w-full grid-cols-2 bg-muted/20 p-1 rounded-lg">
          <TabsTrigger 
            value="dashboard" 
            className="border border-gray-300 data-[state=active]:bg-secondary data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md font-medium"
          >
            Dashboard de Verificación
          </TabsTrigger>
          <TabsTrigger 
            value="epidemic" 
            className="border border-gray-300 data-[state=active]:bg-secondary data-[state=active]:text-black data-[state=active]:shadow-sm transition-all duration-200 rounded-md font-medium"
          >
            Análisis Epidemiológico
          </TabsTrigger>
        </TabsList>

        <TabsContent value="dashboard" className="space-y-6">
          {/* Statistics Cards - Dashboard */}
          <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
            {dashboardStats.map((stat) => (
              <Card key={stat.title}>
                <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                  <CardTitle className="text-sm">{stat.title}</CardTitle>
                  <stat.icon className="h-4 w-4 text-muted-foreground" />
                </CardHeader>
                <CardContent>
                  <div className="text-2xl">{stat.value}</div>
                  <p className="text-xs text-muted-foreground">
                    <span className={`${stat.change.includes('+') ? 'text-green-600' : 'text-red-600'}`}>
                      {stat.change}
                    </span>
                    {' '}desde el mes pasado
                  </p>
                </CardContent>
              </Card>
            ))}
          </div>

          <div className="grid gap-6 md:grid-cols-2">
            {/* Content Analysis Chart */}
            <Card>
              <CardHeader>
                <CardTitle>Análisis por Mes</CardTitle>
                <CardDescription>
                  Contenidos analizados vs verificados por humanos
                </CardDescription>
              </CardHeader>
              <CardContent>
                <ResponsiveContainer width="100%" height={300}>
                  <BarChart data={verificationData}>
                    <CartesianGrid strokeDasharray="3 3" />
                    <XAxis dataKey="month" />
                    <YAxis />
                    <Bar dataKey="contenidos" fill="var(--color-primary)" name="Analizados" />
                    <Bar dataKey="verificados" fill="var(--color-chart-2)" name="Verificados" />
                  </BarChart>
                </ResponsiveContainer>
              </CardContent>
            </Card>

            {/* Verification Results */}
            <Card>
              <CardHeader>
                <CardTitle>Resultados de Verificación</CardTitle>
                <CardDescription>
                  Distribución de etiquetas asignadas por la IA
                </CardDescription>
              </CardHeader>
              <CardContent>
                <ResponsiveContainer width="100%" height={300}>
                  <PieChart>
                    <Pie
                      data={pieData}
                      cx="50%"
                      cy="50%"
                      innerRadius={60}
                      outerRadius={100}
                      dataKey="value"
                    >
                      {pieData.map((entry, index) => (
                        <Cell key={index} fill={entry.color} />
                      ))}
                    </Pie>
                  </PieChart>
                </ResponsiveContainer>
                <div className="mt-4 grid grid-cols-2 gap-2">
                  {pieData.map((item) => (
                    <div key={item.name} className="flex items-center space-x-2">
                      <div 
                        className="w-3 h-3 rounded-full" 
                        style={{ backgroundColor: item.color }}
                      />
                      <span className="text-sm">{item.name}: {item.value}%</span>
                    </div>
                  ))}
                </div>
              </CardContent>
            </Card>
          </div>

          {/* Content Types Distribution */}
          <Card>
            <CardHeader>
              <CardTitle>Tipos de Contenido</CardTitle>
              <CardDescription>Distribución por tipo de media analizada</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-4">
                {contentTypes.map((type) => (
                  <div key={type.name} className="flex items-center justify-between">
                    <div className="flex items-center space-x-3">
                      <type.icon className="h-5 w-5 text-muted-foreground" />
                      <span>{type.name}</span>
                    </div>
                    <div className="flex items-center space-x-3 min-w-0 flex-1 ml-[35px]">
                      <Progress value={type.value} className="flex-1" />
                      <span className="text-sm text-muted-foreground">{type.value}%</span>
                    </div>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>

          {/* Recent Activity */}
          <Card>
            <CardHeader>
              <CardTitle>Actividad Reciente</CardTitle>
              <CardDescription>Últimas verificaciones y análisis</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-4">
                {[
                  { type: 'Imagen', status: 'Veraz', user: 'Ana García', time: 'Hace 5 min' },
                  { type: 'Video', status: 'Desinformación', user: 'Carlos López', time: 'Hace 12 min' },
                  { type: 'Texto', status: 'Satírico', user: 'María Torres', time: 'Hace 23 min' },
                  { type: 'Audio', status: 'Fuera de Contexto', user: 'Luis Martín', time: 'Hace 1h' },
                ].map((activity, index) => (
                  <div key={index} className="flex items-center justify-between py-2">
                    <div className="flex items-center space-x-3">
                      <Badge variant="outline">{activity.type}</Badge>
                      <Badge 
                        variant={
                          activity.status === 'Veraz' ? 'default' :
                          activity.status === 'Desinformación' ? 'destructive' :
                          'secondary'
                        }
                      >
                        {activity.status}
                      </Badge>
                    </div>
                    <div className="text-sm text-muted-foreground">
                      Verificado por {activity.user} • {activity.time}
                    </div>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>
        </TabsContent>

        <TabsContent value="epidemic" className="space-y-6">
          {/* Métricas Epidemiológicas Principales */}
          <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
            {epidemicStats.map((stat) => (
              <Card key={stat.title}>
                <CardContent className="p-4">
                  <div className="flex items-center space-x-3">
                    <div className={`p-3 rounded-lg ${stat.bgColor}`}>
                      <stat.icon className={`h-6 w-6 ${stat.color}`} />
                    </div>
                    <div>
                      <p className="text-2xl font-bold text-primary">{stat.value}</p>
                      <p className="text-sm text-muted-foreground">{stat.title}</p>
                      <p className={`text-xs ${stat.change.includes('+') ? 'text-red-600' : 'text-green-600'}`}>
                        {stat.change} vs período anterior
                      </p>
                    </div>
                  </div>
                </CardContent>
              </Card>
            ))}
          </div>

          <div className="grid gap-6 lg:grid-cols-2">
            {/* Curva de Infectividad */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <Activity className="h-5 w-5 text-primary" />
                  <span>Curva de Infectividad</span>
                </CardTitle>
                <CardDescription>
                  Propagación de desinformación en tiempo real
                </CardDescription>
              </CardHeader>
              <CardContent>
                <ResponsiveContainer width="100%" height={300}>
                  <AreaChart data={infectivityData}>
                    <CartesianGrid strokeDasharray="3 3" />
                    <XAxis dataKey="time" />
                    <YAxis />
                    <Tooltip />
                    <Legend />
                    <Area 
                      type="monotone" 
                      dataKey="casos" 
                      stackId="1" 
                      stroke="#F72585" 
                      fill="#F7258540" 
                      name="Casos Activos"
                    />
                    <Area 
                      type="monotone" 
                      dataKey="nuevos" 
                      stackId="2" 
                      stroke="#FF6B35" 
                      fill="#FF6B3540" 
                      name="Nuevos Casos"
                    />
                    <Area 
                      type="monotone" 
                      dataKey="resueltos" 
                      stackId="3" 
                      stroke="#00E676" 
                      fill="#00E67640" 
                      name="Casos Resueltos"
                    />
                  </AreaChart>
                </ResponsiveContainer>
              </CardContent>
            </Card>

            {/* Vectores de Transmisión */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <Globe className="h-5 w-5 text-primary" />
                  <span>Vectores de Transmisión</span>
                </CardTitle>
                <CardDescription>
                  Plataformas de mayor propagación
                </CardDescription>
              </CardHeader>
              <CardContent>
                <div className="space-y-4">
                  {transmissionVectors.map((platform) => {
                    const PlatformIcon = getPlatformIcon(platform.platform);
                    return (
                      <div key={platform.platform} className="space-y-2">
                        <div className="flex items-center justify-between">
                          <div className="flex items-center space-x-3">
                            <div 
                              className="w-8 h-8 rounded-lg flex items-center justify-center"
                              style={{ backgroundColor: `${platform.color}15` }}
                            >
                              <PlatformIcon 
                                className="w-5 h-5" 
                                style={{ color: platform.color }}
                              />
                            </div>
                            <span className="font-medium">{platform.platform}</span>
                          </div>
                          <div className="text-right">
                            <div className="font-bold">{platform.cases} casos</div>
                            <div className="text-sm text-muted-foreground">{platform.percentage}%</div>
                          </div>
                        </div>
                        <Progress value={platform.percentage} className="h-2" />
                      </div>
                    );
                  })}
                </div>
              </CardContent>
            </Card>
          </div>

          {/* Propagación Geográfica */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <MapPin className="h-5 w-5 text-primary" />
                <span>Propagación Geográfica</span>
              </CardTitle>
              <CardDescription>
                Estado epidemiológico por región
              </CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-3">
                {geographicSpread.map((item, index) => (
                  <div key={index} className="flex items-center justify-between p-3 bg-muted/30 rounded">
                    <div>
                      <div className="font-medium">{item.region}</div>
                      <div className="text-sm text-muted-foreground">
                        {item.casos.toLocaleString()} casos • Tasa: {item.tasa}/hora
                      </div>
                    </div>
                    <div className="text-right">
                      {getRegionStatus(item.estado)}
                    </div>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>

          {/* Panel de Control Epidemiológico */}
          <div className="grid gap-4 md:grid-cols-3">
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <Thermometer className="h-5 w-5 text-primary" />
                  <span>Temperatura Desinfodémica</span>
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="text-center">
                  <div className="text-4xl font-bold text-red-600 mb-2">🌡️ 7.8°C</div>
                  <div className="text-sm text-muted-foreground">Estado: Fiebre Alta</div>
                  <Progress value={78} className="mt-3" />
                </div>
              </CardContent>
            </Card>

            <Card>
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <ShieldCheck className="h-5 w-5 text-primary" />
                  <span>Efectividad de Vacunas</span>
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="space-y-3">
                  <div className="flex justify-between">
                    <span className="text-sm">Verificación de Fuentes:</span>
                    <span className="font-bold text-green-600">89%</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-sm">Educación Digital:</span>
                    <span className="font-bold text-green-600">76%</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-sm">Fact-Checking:</span>
                    <span className="font-bold text-green-600">84%</span>
                  </div>
                </div>
              </CardContent>
            </Card>

            <Card>
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <Eye className="h-5 w-5 text-primary" />
                  <span>Vigilancia Epidemiológica</span>
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="space-y-3">
                  <div className="flex items-center justify-between">
                    <span className="text-sm">Sensores Activos:</span>
                    <span className="font-bold text-primary">1,247</span>
                  </div>
                  <div className="flex items-center justify-between">
                    <span className="text-sm">Cobertura:</span>
                    <span className="font-bold text-primary">94.2%</span>
                  </div>
                  <div className="flex items-center justify-between">
                    <span className="text-sm">Tiempo de Detección:</span>
                    <span className="font-bold text-primary">4.2 min</span>
                  </div>
                </div>
              </CardContent>
            </Card>
          </div>
        </TabsContent>
      </Tabs>
    </div>
  );
} - - - - - - - - - - - - 
src/components/components/ContentUpload.tsx

import React, { useState, useRef } from 'react';
import botilitoImage from 'figma:asset/e27a276e6ff0e187a67cf54678c265c1c38adbf7.png';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Textarea } from './ui/textarea';
import { Label } from './ui/label';
import { Badge } from './ui/badge';
import { Progress } from './ui/progress';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';
import { 
  Upload, FileText, Send, X, CheckCircle, Clock, Bot, Share2,
  XCircle, Flame, Ban, Skull, Target, Crosshair, Link2, Image, Video, Volume2,
  Download, Twitter, Facebook, MessageCircle, Linkedin, User, Newspaper, ExternalLink, Tag,
  Plus, Paperclip, Mail, Instagram, Music, Hash, Youtube, Smartphone, MessageSquare
} from 'lucide-react';
import { Alert, AlertDescription } from './ui/alert';
import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from './ui/tooltip';
import { generateCaseCode, ContentType, TransmissionVector } from '../utils/caseCodeGenerator';
import { analyzeContent, TransmissionVector as APITransmissionVector, FullAnalysisResponse, Consensus } from '../utils/aiAnalysis';

export function ContentUpload() {
  const [content, setContent] = useState('');
  const [uploadedFiles, setUploadedFiles] = useState<File[]>([]);
  const [contentType, setContentType] = useState<ContentType>('texto');
  const [transmissionMedium, setTransmissionMedium] = useState<TransmissionVector>('Otro');
  const [isAnalyzing, setIsAnalyzing] = useState(false);
  const [analysisProgress, setAnalysisProgress] = useState(0);
  const [analysisComplete, setAnalysisComplete] = useState(false);
  const [aiAnalysis, setAiAnalysis] = useState<any>(null);
  const [isDragging, setIsDragging] = useState(false);
  const [caseNumber, setCaseNumber] = useState('');
  const [newsTitle, setNewsTitle] = useState('');
  const [newsContent, setNewsContent] = useState('');
  const [contentTheme, setContentTheme] = useState('');
  const [newsScreenshot, setNewsScreenshot] = useState('');
  const [reportDateTime, setReportDateTime] = useState('');
  const [newsSource, setNewsSource] = useState<{name: string, url: string} | null>(null);
  const [reportedBy, setReportedBy] = useState('');
  const fileInputRef = useRef<HTMLInputElement>(null);
  const dropZoneRef = useRef<HTMLDivElement>(null);
  const canvasRef = useRef<HTMLCanvasElement>(null);

  const transmissionMediums = [
    { value: 'WhatsApp' as TransmissionVector, label: 'WhatsApp', icon: MessageCircle },
    { value: 'Facebook' as TransmissionVector, label: 'Facebook', icon: Facebook },
    { value: 'Instagram' as TransmissionVector, label: 'Instagram', icon: Instagram },
    { value: 'Twitter/X' as TransmissionVector, label: 'Twitter/X', icon: Twitter },
    { value: 'TikTok' as TransmissionVector, label: 'TikTok', icon: Music },
    { value: 'Telegram' as TransmissionVector, label: 'Telegram', icon: Send },
    { value: 'YouTube' as TransmissionVector, label: 'YouTube', icon: Youtube },
    { value: 'Email' as TransmissionVector, label: 'Email', icon: Mail },
    { value: 'SMS' as TransmissionVector, label: 'SMS', icon: Smartphone },
    { value: 'Web' as TransmissionVector, label: 'Web/Sitio', icon: Link2 },
    { value: 'Otro' as TransmissionVector, label: 'Otra plataforma digital', icon: Share2 },
  ];

  const handleFileUpload = (files: FileList | null) => {
    if (!files) return;
    const newFiles = Array.from(files);
    setUploadedFiles(prev => [...prev, ...newFiles]);
    
    // Detectar tipo de contenido basado en el archivo
    if (files.length > 0) {
      const file = files[0];
      if (file.type.startsWith('image/')) {
        setContentType('imagen');
      } else if (file.type.startsWith('video/')) {
        setContentType('video');
      } else if (file.type.startsWith('audio/')) {
        setContentType('audio');
      } else {
        setContentType('texto');
      }
    }
  };

  const handleDragEnter = (e: React.DragEvent) => {
    e.preventDefault();
    e.stopPropagation();
    setIsDragging(true);
  };

  const handleDragLeave = (e: React.DragEvent) => {
    e.preventDefault();
    e.stopPropagation();
    setIsDragging(false);
  };

  const handleDragOver = (e: React.DragEvent) => {
    e.preventDefault();
    e.stopPropagation();
  };

  const handleDrop = (e: React.DragEvent) => {
    e.preventDefault();
    e.stopPropagation();
    setIsDragging(false);
    handleFileUpload(e.dataTransfer.files);
  };

  const removeFile = (index: number) => {
    setUploadedFiles(prev => prev.filter((_, i) => i !== index));
  };

  // Map UI transmission vector to API transmission vector
  const mapTransmissionVector = (uiVector: TransmissionVector): APITransmissionVector => {
    const mapping: Record<string, APITransmissionVector> = {
      'WhatsApp': 'WhatsApp',
      'Facebook': 'Facebook',
      'Instagram': 'Otro', // Not directly supported by API
      'Twitter/X': 'Twitter',
      'TikTok': 'Otro', // Not directly supported by API
      'Telegram': 'Telegram',
      'YouTube': 'Otro', // Not directly supported by API
      'Email': 'Email',
      'SMS': 'Otro', // Not directly supported by API
      'Web': 'Otro',
      'Otro': 'Otro'
    };
    return mapping[uiVector] || 'Otro';
  };

  // Transform API response to UI format
  const transformAPIResponse = (apiResponse: FullAnalysisResponse) => {
    // Get labels from consensus if available, otherwise from classification_labels
    let labels: Record<string, string> = {};
    let consensusState: Consensus['state'] | null = null;

    if (apiResponse.consensus) {
      // Use consensus final_labels
      consensusState = apiResponse.consensus.state;
      const aiLabels = apiResponse.metadata?.classification_labels ||
                       apiResponse.case_study?.metadata?.ai_labels || {};

      // Build labels object from consensus final_labels
      apiResponse.consensus.final_labels.forEach(label => {
        labels[label] = aiLabels[label] || 'Verificado por consenso';
      });
    } else {
      // Use classification_labels directly
      labels = apiResponse.metadata?.classification_labels ||
               apiResponse.case_study?.metadata?.ai_labels || {};
    }

    // Transform labels object to array format for UI
    const markersDetected = Object.entries(labels).map(([type, explanation]) => ({
      type,
      explanation,
      // No confidence scores from API - removed fake values
    }));

    return {
      title: apiResponse.title,
      summary: apiResponse.summary,
      theme: apiResponse.metadata?.theme,
      region: apiResponse.metadata?.region,
      caseNumber: apiResponse.case_study?.case_number,
      consensusState,
      consensus: apiResponse.consensus,
      markersDetected,
      vectores: apiResponse.metadata?.vectores_de_transmision || [],
      relatedDocuments: apiResponse.case_study?.metadata?.related_documents || [],
      webSearchResults: apiResponse.case_study?.metadata?.web_search_results || [],
      fullResult: apiResponse
    };
  };

  const performRealAIAnalysis = async () => {
    setIsAnalyzing(true);
    setAnalysisProgress(0);
    setAnalysisComplete(false);

    try {
      // Determine if it's URL or text
      const urlRegex = /(https?:\/\/[^\s]+)/g;
      const urls = content.match(urlRegex);
      const isUrl = urls && urls.length > 0;

      // Prepare content for analysis
      const analysisContent = isUrl
        ? { url: urls[0] } // Send first URL found
        : { text: content };

      // Map transmission vector to API format
      const apiVector = mapTransmissionVector(transmissionMedium);

      // Call real AI analysis with progress updates
      const result = await analyzeContent(
        analysisContent,
        apiVector,
        (progress, status) => {
          setAnalysisProgress(progress);
        }
      );

      // Analysis complete - set results
      setIsAnalyzing(false);
      setAnalysisComplete(true);
      setAnalysisProgress(100);

      // Transform API response to UI format
      const transformedData = transformAPIResponse(result);

      // Update all UI state with transformed data
      setNewsTitle(transformedData.title);
      setNewsContent(transformedData.summary);

      // Set theme if available
      if (transformedData.theme) {
        setContentTheme(transformedData.theme);
      }

      // Set case number from API (not generated)
      if (transformedData.caseNumber) {
        setCaseNumber(`CASO-${transformedData.caseNumber}`);
      }

      // Determine veracity message based on consensus
      let veracityMessage = 'Análisis Completado';
      if (transformedData.consensusState === 'human_consensus') {
        veracityMessage = 'Verificado por Humanos';
      } else if (transformedData.consensusState === 'conflicted') {
        veracityMessage = 'Opiniones Divididas';
      } else if (transformedData.consensusState === 'ai_only') {
        veracityMessage = 'Análisis AI';
      }

      // Store full analysis result with proper markers
      setAiAnalysis({
        veracity: veracityMessage,
        consensusState: transformedData.consensusState,
        consensus: transformedData.consensus,
        markersDetected: transformedData.markersDetected,
        summary: transformedData.summary,
        theme: transformedData.theme,
        region: transformedData.region,
        sources: transformedData.vectores.length > 0 ? transformedData.vectores : [transmissionMedium],
        recommendation: transformedData.consensusState === 'human_consensus'
          ? 'Análisis verificado por la comunidad'
          : 'Revisa los resultados del análisis',
        fullResult: transformedData.fullResult
      });

    } catch (error: any) {
      console.error('Error en análisis AI:', error);
      setIsAnalyzing(false);
      setAnalysisProgress(0);

      // Show error to user
      setAiAnalysis({
        veracity: 'Error en Análisis',
        confidence: 0,
        markersDetected: [],
        summary: error.message || 'Ocurrió un error durante el análisis. Por favor, intenta de nuevo.',
        sources: [],
        recommendation: 'Verifica tu conexión e intenta nuevamente'
      });
      setAnalysisComplete(true);
    }
  };

  const handleSubmit = () => {
    if (!content && uploadedFiles.length === 0) {
      return;
    }
    if (!transmissionMedium || transmissionMedium === 'Otro') {
      // Si no se seleccionó medio o es "Otro", usar Web como default
      setTransmissionMedium('Web');
    }
    
    // Detectar tipo de contenido si no está definido
    let finalContentType = contentType;
    if (content && content.match(/(https?:\/\/[^\s]+)/g)) {
      finalContentType = 'url';
    }
    
    // Generar número de caso único basado en tipo de contenido y vector de transmisión
    const generatedCaseNumber = generateCaseCode(finalContentType, transmissionMedium);
    setCaseNumber(generatedCaseNumber);
    
    // Generar fecha y hora del reporte
    const now = new Date();
    const dateTimeString = now.toLocaleDateString('es-CO', { 
      year: 'numeric', 
      month: 'long', 
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
    setReportDateTime(dateTimeString);
    
    // Simular usuario que reportó
    const userNames = ['María González', 'Carlos Rodríguez', 'Ana Martínez', 'Juan Pérez', 'Laura Sánchez', 'Diego López'];
    const randomUser = userNames[Math.floor(Math.random() * userNames.length)];
    setReportedBy(randomUser);
    
    // Detectar si es una URL y simular extracción de contenido
    const urlRegex = /(https?:\/\/[^\s]+)/g;
    const urls = content.match(urlRegex);
    
    if (urls && urls.length > 0) {
      // Simular extracción de título y contenido de noticia
      setNewsTitle('Descubren nueva vacuna experimental que promete curar todas las enfermedades en 24 horas');
      setNewsContent('Científicos de una universidad desconocida afirman haber desarrollado una vacuna revolucionaria que puede curar cualquier enfermedad en menos de un día. El tratamiento, que aún no ha sido revisado por pares ni aprobado por ninguna agencia reguladora, está generando controversia en redes sociales. Expertos independientes señalan que no existen evidencias científicas que respalden estas afirmaciones extraordinarias.');
      setContentTheme('Salud y Medicina');
      setNewsScreenshot('https://images.unsplash.com/photo-1504711434969-e33886168f5c?w=800');
      // Simular fuente de la noticia con nombre y URL
      const newsSources = [
        { name: 'El Tiempo', url: 'https://www.eltiempo.com' },
        { name: 'Semana', url: 'https://www.semana.com' },
        { name: 'La República', url: 'https://www.larepublica.co' },
        { name: 'El Espectador', url: 'https://www.elespectador.com' },
        { name: 'Portafolio', url: 'https://www.portafolio.co' },
        { name: 'RCN Noticias', url: 'https://www.canalrcn.com' },
        { name: 'Caracol Noticias', url: 'https://noticias.caracoltv.com' },
        { name: 'BluRadio', url: 'https://www.bluradio.com' },
        { name: 'W Radio', url: 'https://www.wradio.com.co' },
        { name: 'Pulzo', url: 'https://www.pulzo.com' }
      ];
      const randomSource = newsSources[Math.floor(Math.random() * newsSources.length)];
      setNewsSource(randomSource);
    } else {
      // No es URL, limpiar título y contenido pero detectar tema del texto
      setNewsTitle('');
      setNewsContent('');
      setContentTheme('Información General');
      setNewsScreenshot('');
      setNewsSource(null);
    }

    performRealAIAnalysis();
  };

  const resetForm = () => {
    setContent('');
    setUploadedFiles([]);
    setTransmissionMedium('');
    setAnalysisComplete(false);
    setAiAnalysis(null);
    setAnalysisProgress(0);
    setCaseNumber('');
    setNewsTitle('');
    setNewsContent('');
    setContentTheme('');
    setNewsScreenshot('');
    setReportDateTime('');
    setNewsSource(null);
    setReportedBy('');
  };

  // Función helper para dibujar rectángulos redondeados
  const drawRoundedRect = (ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number, radius: number) => {
    ctx.beginPath();
    ctx.moveTo(x + radius, y);
    ctx.lineTo(x + width - radius, y);
    ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
    ctx.lineTo(x + width, y + height - radius);
    ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
    ctx.lineTo(x + radius, y + height);
    ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
    ctx.lineTo(x, y + radius);
    ctx.quadraticCurveTo(x, y, x + radius, y);
    ctx.closePath();
  };

  // Función para generar imagen resumen para redes sociales
  const generateSummaryImage = () => {
    const canvas = canvasRef.current;
    if (!canvas || !aiAnalysis) return;

    const ctx = canvas.getContext('2d');
    if (!ctx) return;

    // Configurar dimensiones más grandes para mejor calidad
    canvas.width = 1200;
    canvas.height = 1400;

    // Fondo blanco
    ctx.fillStyle = '#ffffff';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Franja amarilla superior con borde
    ctx.fillStyle = '#ffe97a';
    ctx.fillRect(20, 20, canvas.width - 40, 140);
    ctx.strokeStyle = '#ffda00';
    ctx.lineWidth = 4;
    ctx.strokeRect(20, 20, canvas.width - 40, 140);

    // Logo/Título "BOTILITO" en la franja
    ctx.fillStyle = '#000000';
    ctx.font = 'bold 42px Lexend, sans-serif';
    ctx.fillText('BOTILITO', 40, 70);
    
    // Subtítulo
    ctx.font = '22px Lexend, sans-serif';
    ctx.fillText('Diagnóstico Desinfodémico', 40, 105);

    // Número de caso
    ctx.font = 'bold 20px Lexend, sans-serif';
    ctx.fillText(`Caso: ${caseNumber}`, 40, 140);

    // Tarjeta de contenido con borde
    let yPosition = 200;
    
    // Título de la noticia con fondo
    if (newsTitle) {
      ctx.fillStyle = '#f8f8f8';
      ctx.fillRect(40, yPosition, canvas.width - 80, 120);
      ctx.strokeStyle = '#e5e5e5';
      ctx.lineWidth = 2;
      ctx.strokeRect(40, yPosition, canvas.width - 80, 120);
      
      ctx.fillStyle = '#000000';
      ctx.font = 'bold 26px Lexend, sans-serif';
      const maxWidth = canvas.width - 120;
      const words = newsTitle.split(' ');
      let line = '';
      let y = yPosition + 40;
      let lineCount = 0;
      
      for (let i = 0; i < words.length; i++) {
        const testLine = line + words[i] + ' ';
        const metrics = ctx.measureText(testLine);
        if (metrics.width > maxWidth && i > 0) {
          ctx.fillText(line, 60, y);
          line = words[i] + ' ';
          y += 35;
          lineCount++;
          if (lineCount >= 2) break; // Máximo 3 líneas
        } else {
          line = testLine;
        }
      }
      ctx.fillText(line, 60, y);
      yPosition += 140;
    }

    // Tema del contenido
    if (contentTheme) {
      yPosition += 10;
      ctx.fillStyle = '#666666';
      ctx.font = 'bold 18px Lexend, sans-serif';
      ctx.fillText('TEMA:', 40, yPosition);
      ctx.fillStyle = '#000000';
      ctx.font = '18px Lexend, sans-serif';
      ctx.fillText(contentTheme, 110, yPosition);
      yPosition += 35;
    }

    // Fuente
    if (newsSource) {
      ctx.fillStyle = '#666666';
      ctx.font = 'bold 18px Lexend, sans-serif';
      ctx.fillText('FUENTE:', 40, yPosition);
      ctx.fillStyle = '#000000';
      ctx.font = '18px Lexend, sans-serif';
      ctx.fillText(newsSource.name, 130, yPosition);
      yPosition += 45;
    }

    // Espacio para indicar que hay captura (sin cargar la imagen para evitar problemas async)
    if (newsScreenshot) {
      const imgWidth = canvas.width - 80;
      const imgHeight = 300;
      
      // Fondo gris con indicador de captura
      ctx.fillStyle = '#f0f0f0';
      ctx.fillRect(40, yPosition, imgWidth, imgHeight);
      
      // Borde
      ctx.strokeStyle = '#cccccc';
      ctx.lineWidth = 2;
      ctx.strokeRect(40, yPosition, imgWidth, imgHeight);
      
      // Texto indicando captura
      ctx.fillStyle = '#999999';
      ctx.font = '20px Lexend, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('📸 Captura de pantalla incluida', canvas.width / 2, yPosition + imgHeight / 2);
      ctx.textAlign = 'left';
      
      yPosition += 320;
    } else {
      yPosition += 20;
    }

    // Marcadores detectados con badges coloridos
    ctx.fillStyle = '#000000';
    ctx.font = 'bold 24px Lexend, sans-serif';
    ctx.fillText('Marcadores de Diagnóstico:', 40, yPosition);
    yPosition += 20;

    // Dibujar marcadores como badges
    const topMarkers = aiAnalysis.markersDetected?.slice(0, 5) || [];
    
    topMarkers.forEach((marker: any, index: number) => {
      const markerColors: { [key: string]: string } = {
        'Verdadero': '#10b981',
        'Falso': '#ef4444',
        'Engañoso': '#f97316',
        'Satírico': '#3b82f6',
        'Manipulado': '#a855f7',
        'Discurso de odio': '#991b1b',
        'Discurso de odio (Xenofobia)': '#991b1b',
        'Propaganda': '#6366f1',
        'Spam': '#6b7280',
        'Conspiración': '#8b5cf6',
        'Sesgo Político': '#ec4899',
        'Estafa': '#ef4444',
        'Sensacionalista': '#fb923c',
        'Incitación a la violencia': '#7f1d1d',
        'Descontextualizado': '#f59e0b',
        'Parcialmente Cierto': '#06b6d4',
        'Contenido Patrocinado': '#10b981',
        'Opinión': '#64748b',
        'Rumor': '#14b8a6',
        'Deepfake': '#991b1b',
        'Sin Verificar': '#6b7280'
      };

      const color = markerColors[marker.type] || '#6b7280';
      const confidence = (marker.confidence * 100).toFixed(0);

      // Badge background con sombra
      yPosition += 15;
      ctx.shadowColor = 'rgba(0, 0, 0, 0.1)';
      ctx.shadowBlur = 8;
      ctx.shadowOffsetX = 0;
      ctx.shadowOffsetY = 2;
      
      ctx.fillStyle = color;
      const badgeWidth = canvas.width - 80;
      const badgeHeight = 70;
      drawRoundedRect(ctx, 40, yPosition, badgeWidth, badgeHeight, 12);
      ctx.fill();

      // Resetear sombra
      ctx.shadowColor = 'transparent';
      ctx.shadowBlur = 0;
      ctx.shadowOffsetX = 0;
      ctx.shadowOffsetY = 0;

      // Badge text
      ctx.fillStyle = '#ffffff';
      ctx.font = `bold ${index === 0 ? '32' : '26'}px Lexend, sans-serif`;
      ctx.fillText(`${marker.type}`, 60, yPosition + 30);
      
      ctx.font = `${index === 0 ? '24' : '20'}px Lexend, sans-serif`;
      ctx.fillText(`Confianza: ${confidence}%`, 60, yPosition + 58);

      yPosition += 70;
    });

    // Footer con fecha
    yPosition += 30;
    ctx.fillStyle = '#666666';
    ctx.font = '16px Lexend, sans-serif';
    ctx.fillText(reportDateTime, 40, yPosition);
    
    yPosition += 30;
    ctx.fillStyle = '#000000';
    ctx.font = 'bold 18px Lexend, sans-serif';
    ctx.fillText('Verificado por Botilito - Análisis desinfodémico con IA', 40, yPosition);
  };

  // Función para descargar la imagen
  const handleDownloadImage = () => {
    generateSummaryImage();
    
    setTimeout(() => {
      const canvas = canvasRef.current;
      if (!canvas) return;

      canvas.toBlob((blob) => {
        if (!blob) return;
        
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.download = `botilito-diagnostico-${caseNumber}.png`;
        link.href = url;
        link.click();
        URL.revokeObjectURL(url);
      });
    }, 100);
  };

  // Funciones para compartir en redes sociales
  const shareOnTwitter = () => {
    const topMarker = aiAnalysis?.markersDetected?.[0];
    const markerText = topMarker ? `${topMarker.type} (${(topMarker.confidence * 100).toFixed(0)}%)` : 'contenido analizado';
    const text = `🔍 Botilito detectó: ${markerText}\n${newsTitle ? `\n"${newsTitle}"\n` : ''}\nCaso: ${caseNumber}\n#Botilito #VerificaciónDeFechos #Desinformación`;
    const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
    window.open(url, '_blank');
  };

  const shareOnFacebook = () => {
    const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`;
    window.open(url, '_blank');
  };

  const shareOnWhatsApp = () => {
    const topMarker = aiAnalysis?.markersDetected?.[0];
    const markerText = topMarker ? `${topMarker.type} (${(topMarker.confidence * 100).toFixed(0)}%)` : 'contenido analizado';
    const text = `🔍 *Botilito* detectó: *${markerText}*\n${newsTitle ? `\n"${newsTitle}"\n` : ''}\nCaso: ${caseNumber}\n\nVerificación completa de desinformación con IA`;
    const url = `https://wa.me/?text=${encodeURIComponent(text)}`;
    window.open(url, '_blank');
  };

  const shareOnLinkedIn = () => {
    const url = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(window.location.href)}`;
    window.open(url, '_blank');
  };

  return (
    <div className="max-w-5xl mx-auto space-y-6 pt-[20px] pr-[0px] pb-[0px] pl-[0px]">
      {/* Franja superior de Botilito cuando el análisis está completo */}
      {analysisComplete && (
        <div className="bg-[#ffe97a] border-2 border-[#ffda00] rounded-lg p-4 shadow-lg">
          <div className="flex items-center space-x-4">
            <img 
              src={botilitoImage} 
              alt="Botilito" 
              className="w-24 h-24 object-contain mt-[0px] mr-[16px] mb-[-18px] ml-[0px]"
            />
            <div className="flex-1">
              <p className="text-xl">
                ¡Mis circuitos ya escanearon esto de arriba a abajo! 🔍⚡
              </p>
              <p className="text-sm mt-1 opacity-80">
                Ya le pasé este caso a mis parceros de carne y hueso de <span className="font-medium">Digital-IA</span> para que hagan su diagnóstico humano! 🤝
              </p>
            </div>
          </div>
        </div>
      )}
      
      {!analysisComplete && (
        <>
          {/* Main Upload Card */}
          <Card>
            <CardHeader>
              <CardTitle className="font-bold">Ajá! ¿listos para diagnosticar juntos lo que se esconde detrás de lo evidente?</CardTitle>
            </CardHeader>
            <CardContent>
              {/* Universal Input Area */}
              <div 
                ref={dropZoneRef}
                onDragEnter={handleDragEnter}
                onDragOver={handleDragOver}
                onDragLeave={handleDragLeave}
                onDrop={handleDrop}
                className={`relative border-2 border-solid rounded-xl p-8 transition-all duration-300 bg-[#ffeea9] border-secondary/60 ${
                  isDragging 
                    ? 'bg-[#ffe68f] border-primary scale-[1.02] shadow-lg' 
                    : 'hover:bg-[#ffeb98] hover:border-primary/80 hover:shadow-md'
                }`}
              >
                {/* Layout Horizontal: Botilito a la izquierda, contenido a la derecha */}
                <div className="grid grid-cols-[auto_1fr] gap-8 items-center">
                  {/* Columna Derecha: Contenido */}
                  <div className="space-y-6 col-span-2">
                    {/* Sección Superior: Formatos Soportados */}
                    <div className="flex items-center gap-4 px-[92px] py-[0px] bg-[rgb(255,233,122)] rounded-[10px] border-2 border-[#ffda00]">
                      {/* Botilito a la izquierda */}
                      <img src={botilitoImage} alt="Botilito" className="h-[100px] w-[100px] object-contain flex-shrink-0 pt-[4px] pr-[0px] pb-[0px] pl-[0px]" />
                      
                      {/* Contenido a la derecha */}
                      <div className="flex-1 space-y-3">
                        <p className="text-left px-[7px] py-[0px]">
                          <strong>En Digital-IA me incorporaron tecnología para analizar:</strong>
                        </p>
                        <TooltipProvider>
                          <div className="flex flex-wrap items-center gap-2">
                            {/* Enlaces */}
                            <Tooltip>
                              <TooltipTrigger asChild>
                                <div className="inline-flex items-center gap-2 px-4 py-2 bg-white rounded-full border border-gray-200 cursor-help">
                                  <Link2 className="h-4 w-4 text-black" />
                                  <span className="text-sm">Enlaces</span>
                                </div>
                              </TooltipTrigger>
                              <TooltipContent side="bottom">
                                <p>Pega URLs de redes sociales, noticias o cualquier link pa' verificar</p>
                              </TooltipContent>
                            </Tooltip>

                            {/* Texto */}
                            <Tooltip>
                              <TooltipTrigger asChild>
                                <div className="inline-flex items-center gap-2 px-4 py-2 bg-white rounded-full border border-gray-200 cursor-help">
                                  <FileText className="h-4 w-4 text-black" />
                                  <span className="text-sm">Texto</span>
                                </div>
                              </TooltipTrigger>
                              <TooltipContent side="bottom">
                                <p>Escribe o pega el texto que quieres chequear, parce</p>
                              </TooltipContent>
                            </Tooltip>

                            {/* Imágenes */}
                            <Tooltip>
                              <TooltipTrigger asChild>
                                <div className="inline-flex items-center gap-2 px-4 py-2 bg-white rounded-full border border-gray-200 cursor-help">
                                  <Image className="h-4 w-4 text-black" />
                                  <span className="text-sm">Imágenes</span>
                                </div>
                              </TooltipTrigger>
                              <TooltipContent side="bottom">
                                <p>Sube capturas de pantalla, memes o fotos que te parezcan raras</p>
                              </TooltipContent>
                            </Tooltip>

                            {/* Videos */}
                            <Tooltip>
                              <TooltipTrigger asChild>
                                <div className="inline-flex items-center gap-2 px-4 py-2 bg-white rounded-full border border-gray-200 cursor-help">
                                  <Video className="h-4 w-4 text-black" />
                                  <span className="text-sm">Videos</span>
                                </div>
                              </TooltipTrigger>
                              <TooltipContent side="bottom">
                                <p>Sube tus archivos de video MP4, MOV, AVI o cualquier formato</p>
                              </TooltipContent>
                            </Tooltip>

                            {/* Audios */}
                            <Tooltip>
                              <TooltipTrigger asChild>
                                <div className="inline-flex items-center gap-2 px-4 py-2 bg-white rounded-full border border-gray-200 cursor-help">
                                  <Volume2 className="h-4 w-4 text-black" />
                                  <span className="text-sm">Audios</span>
                                </div>
                              </TooltipTrigger>
                              <TooltipContent side="bottom">
                                <p>Sube notas de voz, podcasts o audios que circulan por ahí</p>
                              </TooltipContent>
                            </Tooltip>
                          </div>
                        </TooltipProvider>
                      </div>
                    </div>

                    {/* Sección Media: Instrucciones */}
                    <div className="text-center">
                      <p>Arrastra y suelta o pega tu contenido aquí</p>
                    </div>

                    {/* Sección Inferior: Barra de Input */}
                    <div className="space-y-2">
                      <div className="relative flex items-center bg-white border-2 border-secondary/60 rounded-[8px] shadow-sm h-11">
                        {/* Botón + integrado a la izquierda */}
                        <button
                          type="button"
                          onClick={() => fileInputRef.current?.click()}
                          className="flex-shrink-0 ml-2 p-1.5 rounded-full bg-transparent hover:bg-primary no-hover-effect group transition-colors"
                          title="Adjuntar archivo"
                        >
                          <Plus className="h-4 w-4 text-black/60" />
                        </button>

                        {/* Textarea integrado en el centro */}
                        <Textarea
                          placeholder="Pega aquí una URL, texto sospechoso, o escribe lo que quieras analizar..."
                          value={content}
                          onChange={(e) => setContent(e.target.value)}
                          onKeyDown={(e) => {
                            if (e.key === 'Enter' && !e.shiftKey) {
                              e.preventDefault();
                              handleSubmit(e as any);
                            }
                          }}
                          rows={1}
                          className="flex-1 resize-none border-0 bg-transparent px-3 h-11 focus:outline-none focus:ring-0 focus-visible:ring-0 focus-visible:border-0 placeholder:text-muted-foreground text-sm leading-[2.75rem] flex items-center transition-none"
                        />
                      </div>
                      {content.length > 0 && (
                        <p className="text-xs text-muted-foreground text-right">
                          {content.length} caracteres
                        </p>
                      )}
                    </div>
                  </div>
                </div>

                {/* Input de archivo oculto - Se activa con el botón + de la barra de chat */}
                <input
                  ref={fileInputRef}
                  type="file"
                  multiple
                  className="hidden"
                  accept="image/*,video/*,audio/*"
                  onChange={(e) => handleFileUpload(e.target.files)}
                />

                {/* Uploaded Files List */}
                {uploadedFiles.length > 0 && (
                  <div className="space-y-2 pt-6 mt-6 border-t border-secondary/40">
                    <Label>Archivos seleccionados:</Label>
                    {uploadedFiles.map((file, index) => (
                      <div key={index} className="flex items-center justify-between p-3 bg-white border border-secondary/40 rounded-lg hover:border-primary/60 transition-colors">
                        <div className="flex items-center space-x-3">
                          <div className="p-2 bg-secondary/40 rounded">
                            {file.type.startsWith('image/') && <Image className="h-4 w-4 text-black" />}
                            {file.type.startsWith('video/') && <Video className="h-4 w-4 text-black" />}
                            {file.type.startsWith('audio/') && <Volume2 className="h-4 w-4 text-black" />}
                            {!file.type.startsWith('image/') && !file.type.startsWith('video/') && !file.type.startsWith('audio/') && <FileText className="h-4 w-4 text-black" />}
                          </div>
                          <div>
                            <p className="font-medium">{file.name}</p>
                            <p className="text-xs text-muted-foreground">
                              {(file.size / 1024 / 1024).toFixed(2)} MB
                            </p>
                          </div>
                        </div>
                        <Button
                          variant="ghost"
                          size="sm"
                          onClick={() => removeFile(index)}
                          className="h-8 w-8 p-0 hover:bg-secondary/40"
                        >
                          <X className="h-4 w-4" />
                        </Button>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            </CardContent>
          </Card>

          {/* Transmission Medium Selection */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Share2 className="h-5 w-5" />
                Vector de Transmisión
              </CardTitle>
              <CardDescription>
                ¿Por dónde recibiste este contenido? Esta información nos ayuda a rastrear las rutas epidemiológicas de la desinformación.
              </CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-2">
                <Select value={transmissionMedium} onValueChange={setTransmissionMedium}>
                  <SelectTrigger className="w-full border-2 border-gray-300 focus:border-primary/50 transition-colors">
                    <SelectValue placeholder="Cuéntame, ¿por dónde viste eso?" />
                  </SelectTrigger>
                  <SelectContent>
                    {transmissionMediums.map((medium) => {
                      const IconComponent = medium.icon;
                      return (
                        <SelectItem key={medium.value} value={medium.value}>
                          <div className="flex items-center gap-2">
                            <IconComponent className="h-4 w-4" />
                            <span>{medium.label}</span>
                          </div>
                        </SelectItem>
                      );
                    })}
                  </SelectContent>
                </Select>
              </div>
            </CardContent>
          </Card>

          {/* Submit Button */}
          <div className="flex justify-end">
            <Button 
              onClick={handleSubmit}
              disabled={(!content && uploadedFiles.length === 0) || !transmissionMedium}
              className="flex items-center space-x-2"
            >
              <Send className="h-4 w-4" />
              <span>Iniciar Diagnóstico</span>
            </Button>
          </div>
        </>
      )}

      {/* Analysis Progress */}
      {isAnalyzing && (
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Bot className="h-5 w-5 text-primary animate-pulse" />
              <span>Botilito está diagnosticando...</span>
            </CardTitle>
            <CardDescription>
              Aplicando análisis epidemiológico para detectar patrones de desinformación y evaluar su potencial viral
            </CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-2">
              <Progress value={analysisProgress} className="w-full" />
              <p className="text-sm text-muted-foreground text-center">
                {analysisProgress < 30 && "Secuenciando contenido desinfodémico..."}
                {analysisProgress >= 30 && analysisProgress < 60 && "Identificando vectores de transmisión..."}
                {analysisProgress >= 60 && analysisProgress < 90 && "Calculando índice de infectividad..."}
                {analysisProgress >= 90 && "Generando diagnóstico epidemiológico..."}
              </p>
            </div>
          </CardContent>
        </Card>
      )}

      {/* Analysis Results */}
      {analysisComplete && aiAnalysis && (
        <div className="space-y-6">
          <Card>
            <CardHeader>
              <div className="flex items-center justify-between">
                <CardTitle className="flex items-center space-x-2 text-[24px]">
                  <Bot className="h-5 w-5 text-primary" />
                  <span className="text-[24px] font-bold">Diagnóstico Desinfodémico de Botilito</span>
                </CardTitle>
                <div className="flex flex-col items-end space-y-1">
                  <div className="flex flex-wrap gap-2 justify-end">
                    <Badge variant="outline" className="text-sm bg-[#ffe97a]">
                      Caso: {caseNumber}
                    </Badge>
                    {aiAnalysis.consensusState && (
                      <Badge
                        variant="outline"
                        className={`text-sm ${
                          aiAnalysis.consensusState === 'human_consensus'
                            ? 'bg-emerald-100 border-emerald-500 text-emerald-700'
                            : aiAnalysis.consensusState === 'conflicted'
                            ? 'bg-orange-100 border-orange-500 text-orange-700'
                            : 'bg-blue-100 border-blue-500 text-blue-700'
                        }`}
                      >
                        {aiAnalysis.consensusState === 'human_consensus' && '✓ Verificado por Humanos'}
                        {aiAnalysis.consensusState === 'conflicted' && '⚠ Opiniones Divididas'}
                        {aiAnalysis.consensusState === 'ai_only' && '🤖 Análisis AI'}
                      </Badge>
                    )}
                  </div>
                  {reportDateTime && (
                    <p className="text-xs text-muted-foreground">
                      {reportDateTime}
                    </p>
                  )}
                  {reportedBy && (
                    <div className="flex items-center space-x-1 text-xs text-muted-foreground">
                      <User className="h-3 w-3" />
                      <span className="font-normal font-bold">Reportado por: {reportedBy}</span>
                    </div>
                  )}
                </div>
              </div>
            </CardHeader>
            <CardContent className="space-y-4">
              {/* Título y contenido de la noticia si corresponde */}
              {newsTitle && newsContent && (
                <div className="p-4 bg-secondary/30 border-2 border-secondary/60 rounded-lg space-y-3">
                  {/* Captura de la noticia con etiquetas superpuestas - Formato horizontal compacto */}
                  {newsScreenshot && (
                    <div>
                      <Label>Captura de la noticia:</Label>
                      <div className="mt-2 rounded-lg overflow-hidden border-2 border-secondary/40 relative max-h-48">
                        <img 
                          src={newsScreenshot} 
                          alt="Captura de la noticia" 
                          className="w-full h-48 object-cover object-top"
                        />
                        
                        {/* Overlay con etiquetas detectadas */}
                        <div className="absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent flex items-end justify-center p-4">
                          <TooltipProvider>
                            <div className="flex flex-wrap gap-2 justify-center">
                              {aiAnalysis.markersDetected?.slice(0, 3).map((marker: any, index: number) => {
                              const getMarkerColor = (type: string) => {
                                const colorMap: { [key: string]: string } = {
                                  'Verdadero': 'bg-emerald-500 hover:bg-emerald-600',
                                  'Falso': 'bg-red-500 hover:bg-red-600',
                                  'Engañoso': 'bg-orange-500 hover:bg-orange-600',
                                  'Satírico': 'bg-blue-500 hover:bg-blue-600',
                                  'Manipulado': 'bg-purple-500 hover:bg-purple-600',
                                  'Discurso de odio': 'bg-red-700 hover:bg-red-800',
                                  'Discurso de odio (Xenofobia)': 'bg-red-700 hover:bg-red-800',
                                  'Racismo/Xenofobia': 'bg-red-700 hover:bg-red-800',
                                  'Sexismo/LGBTQ+fobia': 'bg-red-700 hover:bg-red-800',
                                  'Clasismo/Aporofobia': 'bg-red-600 hover:bg-red-700',
                                  'Ableismo': 'bg-red-600 hover:bg-red-700',
                                  'Propaganda': 'bg-indigo-600 hover:bg-indigo-700',
                                  'Spam': 'bg-gray-500 hover:bg-gray-600',
                                  'Conspiración': 'bg-violet-600 hover:bg-violet-700',
                                  'Teoría conspirativa': 'bg-violet-600 hover:bg-violet-700',
                                  'Sesgo Político': 'bg-yellow-600 hover:bg-yellow-700',
                                  'Estafa': 'bg-purple-700 hover:bg-purple-800',
                                  'Sensacionalista': 'bg-orange-400 hover:bg-orange-500',
                                  'Incitación a la violencia': 'bg-red-900 hover:bg-red-950',
                                  'Descontextualizado': 'bg-amber-500 hover:bg-amber-600',
                                  'Sin contexto': 'bg-amber-500 hover:bg-amber-600',
                                  'Parcialmente Cierto': 'bg-orange-500 hover:bg-orange-600',
                                  'Contenido Patrocinado': 'bg-indigo-600 hover:bg-indigo-700',
                                  'Opinión': 'bg-gray-500 hover:bg-gray-600',
                                  'Rumor': 'bg-gray-500 hover:bg-gray-600',
                                  'No verificable': 'bg-gray-500 hover:bg-gray-600',
                                  'Deepfake': 'bg-purple-500 hover:bg-purple-600',
                                  'Sin Verificar': 'bg-gray-500 hover:bg-gray-600',
                                  'Bot/Coordinado': 'bg-indigo-600 hover:bg-indigo-700',
                                  'Suplantación de identidad': 'bg-purple-700 hover:bg-purple-800',
                                  'Acoso/Ciberbullying': 'bg-orange-700 hover:bg-orange-800',
                                  'Contenido prejuicioso': 'bg-yellow-600 hover:bg-yellow-700',
                                  'En revisión': 'bg-gray-400 hover:bg-gray-500',
                                  'Satírico/Humorístico': 'bg-blue-500 hover:bg-blue-600'
                                };
                                return colorMap[type] || 'bg-gray-500 hover:bg-gray-600';
                              };

                              const getMarkerIcon = (type: string) => {
                                const iconMap: { [key: string]: React.ReactNode } = {
                                  'Falso': <XCircle className={index === 0 ? "h-6 w-6" : "h-5 w-5"} />,
                                  'Discurso de odio (Xenofobia)': <Skull className={index === 0 ? "h-6 w-6" : "h-5 w-5"} />,
                                  'Incitación a la violencia': <Ban className={index === 0 ? "h-6 w-6" : "h-5 w-5"} />,
                                  'Sensacionalista': <Flame className={index === 0 ? "h-6 w-6" : "h-5 w-5"} />,
                                };
                                return iconMap[type] || <Target className={index === 0 ? "h-6 w-6" : "h-5 w-5"} />;
                              };

                              return (
                                <Tooltip key={index}>
                                  <TooltipTrigger asChild>
                                    <Badge
                                      className={`${getMarkerColor(marker.type)} text-white shadow-lg cursor-help ${
                                        index === 0
                                          ? 'px-4 py-2 text-base scale-105'
                                          : 'px-3 py-1.5 text-sm'
                                      }`}
                                    >
                                      {getMarkerIcon(marker.type)}
                                      <span className="ml-1.5">{marker.type}</span>
                                    </Badge>
                                  </TooltipTrigger>
                                  <TooltipContent className="max-w-xs">
                                    <p className="text-sm">{marker.explanation}</p>
                                  </TooltipContent>
                                </Tooltip>
                              );
                            })}
                            </div>
                          </TooltipProvider>
                        </div>
                      </div>
                    </div>
                  )}
                  
                  {newsSource && (
                    <div className="flex flex-wrap items-center gap-4 pb-2">
                      {/* Fuente de la noticia */}
                      <div className="flex items-center space-x-2">
                        <Newspaper className="h-4 w-4 text-primary" />
                        <Label className="text-sm">Fuente:</Label>
                        <a 
                          href={newsSource.url} 
                          target="_blank" 
                          rel="noopener noreferrer"
                          className="inline-flex items-center space-x-1.5 px-3 py-1.5 bg-secondary/60 hover:bg-secondary text-secondary-foreground rounded-md transition-colors text-xs no-hover-effect"
                        >
                          <span>{newsSource.name}</span>
                          <ExternalLink className="h-3 w-3" />
                        </a>
                      </div>
                      
                      {/* Tema del contenido */}
                      {contentTheme && (
                        <div className="flex items-center space-x-2">
                          <Tag className="h-4 w-4 text-primary" />
                          <Label className="text-sm">Tema:</Label>
                          <Badge variant="outline" className="text-xs border-primary/40 bg-primary/10">
                            {contentTheme}
                          </Badge>
                        </div>
                      )}

                      {/* Región del contenido */}
                      {aiAnalysis.region && (
                        <div className="flex items-center space-x-2">
                          <Tag className="h-4 w-4 text-primary" />
                          <Label className="text-sm">Región:</Label>
                          <Badge variant="outline" className="text-xs border-primary/40 bg-primary/10">
                            {aiAnalysis.region}
                          </Badge>
                        </div>
                      )}
                    </div>
                  )}
                  
                  <div>
                    <Label>Titular de la noticia:</Label>
                    <div className="mt-1 p-3 bg-primary/20 border border-primary/40 rounded-lg">
                      <p className="font-medium">{newsTitle}</p>
                    </div>
                  </div>
                  <div>
                    <Label>Contenido analizado:</Label>
                    <p className="text-sm text-muted-foreground mt-1 leading-relaxed">{newsContent}</p>
                  </div>
                </div>
              )}

              <div>
                <h4 className="text-[20px]">Evaluación epidemiológica:</h4>
                <p className="text-sm text-muted-foreground mt-1">{aiAnalysis.summary}</p>
              </div>

              <div>
                <Label className="flex items-center space-x-2">
                  <Share2 className="h-4 w-4 text-primary" />
                  <span>Vectores de transmisión identificados:</span>
                </Label>
                <div className="flex flex-wrap gap-2 mt-3">
                  {aiAnalysis.sources.map((source: string, index: number) => {
                    const getPlatformIcon = (platform: string) => {
                      const lowerPlatform = platform.toLowerCase();
                      if (lowerPlatform.includes('whatsapp')) return <MessageCircle className="h-4 w-4" />;
                      if (lowerPlatform.includes('facebook')) return <Facebook className="h-4 w-4" />;
                      if (lowerPlatform.includes('twitter') || lowerPlatform.includes('x')) return <Twitter className="h-4 w-4" />;
                      if (lowerPlatform.includes('instagram')) return <Instagram className="h-4 w-4" />;
                      if (lowerPlatform.includes('tiktok')) return <Music className="h-4 w-4" />;
                      if (lowerPlatform.includes('youtube')) return <Youtube className="h-4 w-4" />;
                      if (lowerPlatform.includes('telegram')) return <Send className="h-4 w-4" />;
                      if (lowerPlatform.includes('linkedin')) return <Linkedin className="h-4 w-4" />;
                      if (lowerPlatform.includes('email') || lowerPlatform.includes('correo')) return <Mail className="h-4 w-4" />;
                      return <Share2 className="h-4 w-4" />;
                    };

                    const getPlatformColor = (platform: string) => {
                      // Colores de marca de cada vector de transmisión
                      const lowerPlatform = platform.toLowerCase();
                      if (lowerPlatform.includes('whatsapp')) return 'bg-[#25D366] text-white border border-[#1da851]';
                      if (lowerPlatform.includes('facebook')) return 'bg-[#1877F2] text-white border border-[#0c63d4]';
                      if (lowerPlatform.includes('twitter') || lowerPlatform.includes('x')) return 'bg-black text-white border border-gray-800';
                      if (lowerPlatform.includes('instagram')) return 'bg-gradient-to-tr from-[#F58529] via-[#DD2A7B] to-[#8134AF] text-white border border-[#C13584]';
                      if (lowerPlatform.includes('tiktok')) return 'bg-black text-white border border-[#00f2ea]';
                      if (lowerPlatform.includes('youtube')) return 'bg-[#FF0000] text-white border border-[#cc0000]';
                      if (lowerPlatform.includes('telegram')) return 'bg-[#0088cc] text-white border border-[#006ba1]';
                      if (lowerPlatform.includes('linkedin')) return 'bg-[#0A66C2] text-white border border-[#004182]';
                      if (lowerPlatform.includes('email') || lowerPlatform.includes('correo')) return 'bg-[#5f6368] text-white border border-[#4a4d50]';
                      return 'bg-gray-600 text-white border border-gray-700';
                    };

                    return (
                      <Badge 
                        key={index}
                        className={`${getPlatformColor(source)} px-3 py-2 flex items-center space-x-2 shadow-sm`}
                      >
                        {getPlatformIcon(source)}
                        <span>{source}</span>
                      </Badge>
                    );
                  })}
                </div>
              </div>

              {/* Compartir en redes sociales y descargar */}
              <div className="pt-6 border-t space-y-4">
                <div>
                  <Label className="flex items-center space-x-2 mb-3">
                    <Share2 className="h-4 w-4 text-primary" />
                    <span>¡Vamos a inmunizar a todo el país! Comparte este diagnóstico en tus redes sociales.</span>
                  </Label>
                  <div className="flex flex-wrap items-center gap-2">
                    <Button
                      onClick={shareOnTwitter}
                      size="icon"
                      title="Compartir en Twitter/X"
                      className="h-9 w-9 rounded-full bg-black hover:bg-gray-800 text-white no-hover-effect"
                    >
                      <Twitter className="h-4 w-4" />
                    </Button>
                    <Button
                      onClick={shareOnFacebook}
                      size="icon"
                      title="Compartir en Facebook"
                      className="h-9 w-9 rounded-full bg-[#1877F2] hover:bg-[#166fe5] text-white no-hover-effect"
                    >
                      <Facebook className="h-4 w-4" />
                    </Button>
                    <Button
                      onClick={shareOnWhatsApp}
                      size="icon"
                      title="Compartir en WhatsApp"
                      className="h-9 w-9 rounded-full bg-[#25D366] hover:bg-[#20bd5a] text-white no-hover-effect"
                    >
                      <MessageCircle className="h-4 w-4" />
                    </Button>
                    <Button
                      onClick={shareOnLinkedIn}
                      size="icon"
                      title="Compartir en LinkedIn"
                      className="h-9 w-9 rounded-full bg-[#0A66C2] hover:bg-[#095bad] text-white no-hover-effect"
                    >
                      <Linkedin className="h-4 w-4" />
                    </Button>
                    <div className="h-4 w-px bg-border mx-1"></div>
                    <Button
                      onClick={handleDownloadImage}
                      size="sm"
                      title="Descargar imagen resumen"
                      className="rounded-[6px] bg-secondary hover:bg-primary text-primary-foreground px-4"
                    >
                      <Download className="h-4 w-4 mr-2" />
                      <span className="text-sm">Descargar</span>
                    </Button>
                  </div>
                </div>
              </div>

              {/* Canvas oculto para generar imagen */}
              <canvas ref={canvasRef} className="hidden" />
            </CardContent>
          </Card>

          <div className="flex">
            <Button onClick={resetForm} className="bg-secondary hover:bg-primary text-primary-foreground transition-all duration-300">
              Quiero reportar otro contenido!
            </Button>
          </div>
        </div>
      )}
    </div>
  );
}
 - - - - - - - - - - - - 
src/components/components/ImmunizationStudio.tsx

import React, { useState } from 'react';
import botilitoImage from 'figma:asset/e27a276e6ff0e187a67cf54678c265c1c38adbf7.png';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Badge } from './ui/badge';
import { Textarea } from './ui/textarea';
import { Input } from './ui/input';
import { Label } from './ui/label';
import { Separator } from './ui/separator';
import { Alert, AlertDescription } from './ui/alert';
import { 
  Syringe, 
  Plus,
  Trash2,
  Link2,
  FileText,
  AlertTriangle,
  TrendingUp,
  Save,
  CheckCircle,
  XCircle,
  Bot,
  Users,
  Layers,
  Hash,
  Filter,
  Search,
  ArrowLeft,
  Newspaper,
  ExternalLink,
  Tag,
  Image,
  Video,
  Volume2,
  Shield,
  User,
  Calendar
} from 'lucide-react';
import { motion } from 'motion/react';

// Definición de las 19 categorías de marcadores de diagnóstico
const ETIQUETAS_CATEGORIAS = [
  { id: 'verdadero', label: 'Verdadero', icon: CheckCircle, color: 'text-green-600', bg: 'bg-green-50', border: 'border-green-200' },
  { id: 'falso', label: 'Falso', icon: XCircle, color: 'text-red-600', bg: 'bg-red-50', border: 'border-red-200' },
  { id: 'enganoso', label: 'Engañoso', icon: AlertTriangle, color: 'text-orange-600', bg: 'bg-orange-50', border: 'border-orange-200' },
  { id: 'satirico', label: 'Satírico/Humorístico', icon: CheckCircle, color: 'text-blue-600', bg: 'bg-blue-50', border: 'border-blue-200' },
  { id: 'manipulado', label: 'Manipulado', icon: Image, color: 'text-purple-600', bg: 'bg-purple-50', border: 'border-purple-200' },
  { id: 'sin_contexto', label: 'Sin contexto', icon: AlertTriangle, color: 'text-amber-600', bg: 'bg-amber-50', border: 'border-amber-200' },
  { id: 'no_verificable', label: 'No verificable', icon: CheckCircle, color: 'text-gray-600', bg: 'bg-gray-50', border: 'border-gray-200' },
  { id: 'teoria_conspirativa', label: 'Teoría conspirativa', icon: AlertTriangle, color: 'text-violet-600', bg: 'bg-violet-50', border: 'border-violet-200' },
  { id: 'discurso_odio', label: 'Discurso de odio', icon: XCircle, color: 'text-red-800', bg: 'bg-red-100', border: 'border-red-300' },
  { id: 'sensacionalista', label: 'Sensacionalista', icon: AlertTriangle, color: 'text-orange-500', bg: 'bg-orange-50', border: 'border-orange-200' },
];

interface Vaccine {
  id: string;
  name: string;
  description: string;
  supports: VaccineSupport[];
}

interface VaccineSupport {
  id: string;
  title: string;
  url: string;
}

export function ImmunizationStudio() {
  const [selectedContent, setSelectedContent] = useState<string | null>(null);
  const [vaccines, setVaccines] = useState<Vaccine[]>([]);
  const [newVaccineName, setNewVaccineName] = useState('');
  const [newVaccineDescription, setNewVaccineDescription] = useState('');
  const [newSupportTitle, setNewSupportTitle] = useState('');
  const [newSupportUrl, setNewSupportUrl] = useState('');
  const [editingVaccineId, setEditingVaccineId] = useState<string | null>(null);
  const [selectedFilter, setSelectedFilter] = useState('all');
  const [searchTerm, setSearchTerm] = useState('');
  const [currentPage, setCurrentPage] = useState(1);
  const casesPerPage = 10;

  // Casos verificados - con consenso humano
  const verifiedContents = [
    {
      id: 'T-WA-20241013-045',
      type: 'text',
      title: 'Artículo sobre tratamiento alternativo para diabetes',
      content: 'Un nuevo estudio revela que beber agua con limón en ayunas puede curar la diabetes tipo 2 en solo 30 días. Médicos de Harvard confirman la efectividad del tratamiento...',
      headline: 'Descubren cura milagrosa para diabetes: solo agua con limón en ayunas',
      url: 'https://noticiasfalsas.com/cura-diabetes-limon',
      screenshot: 'https://images.unsplash.com/photo-1504711434969-e33886168f5c?w=800',
      source: { name: 'Noticias Falsas', url: 'https://noticiasfalsas.com' },
      theme: 'Salud y Medicina',
      aiAnalysis: {
        veracity: 'Falso',
        confidence: 0.94,
        detectedMarkers: ['falso', 'enganoso', 'sensacionalista'],
        issues: ['No se encontraron estudios de Harvard sobre este tema', 'Afirmaciones médicas sin respaldo científico', 'Promete "cura" para enfermedad crónica'],
        summary: 'El contenido presenta patrones epidemiológicos consistentes con desinformación médica. Alto riesgo de propagación exponencial debido a apelación emocional y falsa autoridad científica.',
        sources: ['WhatsApp', 'Facebook', 'Twitter'],
        markersDetected: [
          { type: 'Falso', confidence: 0.94 },
          { type: 'Engañoso', confidence: 0.89 },
          { type: 'Sensacionalista', confidence: 0.85 }
        ]
      },
      consensusMarkers: ['falso', 'enganoso', 'sensacionalista'],
      consensusPercentages: {
        'falso': 92,
        'enganoso': 83,
        'sensacionalista': 75
      },
      humanVerified: true,
      verifiedBy: 'Red de Validación Humana',
      submittedBy: 'usuario_123',
      submittedAt: '2024-01-15T10:30:00Z',
      priority: 'high',
      votesCount: 12,
    },
    {
      id: 'I-FB-20241013-067',
      type: 'image',
      title: 'Foto de manifestación en plaza principal',
      url: 'https://redessociales.com/manifestacion-falsa',
      headline: 'Miles protestan contra el gobierno en la plaza central',
      content: 'manifestacion_plaza_central.jpg',
      description: 'Imagen que muestra una gran manifestación en la plaza central con miles de personas',
      screenshot: 'https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?w=800',
      source: { name: 'Redes Sociales', url: 'https://redessociales.com' },
      theme: 'Política y Sociedad',
      aiAnalysis: {
        veracity: 'Fuera de Contexto',
        confidence: 0.82,
        detectedMarkers: ['sin_contexto', 'manipulado'],
        issues: ['La imagen parece ser de otro evento', 'La fecha no coincide con eventos recientes', 'Metadatos sugieren manipulación'],
        summary: 'La imagen corresponde a un evento diferente realizado en 2019. Uso fuera de contexto para generar percepción de crisis actual.',
        sources: ['Facebook', 'Instagram', 'Telegram'],
        markersDetected: [
          { type: 'Sin contexto', confidence: 0.82 },
          { type: 'Manipulado', confidence: 0.68 }
        ]
      },
      consensusMarkers: ['sin_contexto', 'manipulado', 'enganoso'],
      consensusPercentages: {
        'sin_contexto': 88,
        'manipulado': 75,
        'enganoso': 63
      },
      humanVerified: true,
      verifiedBy: 'Red de Validación Humana',
      submittedBy: 'usuario_456',
      submittedAt: '2024-01-15T09:15:00Z',
      priority: 'high',
      votesCount: 8,
    },
    {
      id: 'V-YT-20241012-128',
      type: 'video',
      title: 'Video de declaraciones del ministro de economía',
      url: 'https://videosvirales.com/ministro-economia',
      headline: 'Ministro anuncia sorprendentes medidas económicas',
      content: 'declaraciones_ministro_economia.mp4',
      description: 'Video donde el ministro supuestamente anuncia nuevas medidas económicas',
      screenshot: 'https://images.unsplash.com/photo-1588681664899-f142ff2dc9b1?w=800',
      source: { name: 'Videos Virales', url: 'https://videosvirales.com' },
      theme: 'Economía y Política',
      aiAnalysis: {
        veracity: 'Manipulado',
        confidence: 0.88,
        detectedMarkers: ['manipulado', 'no_verificable'],
        issues: ['Calidad de audio inconsistente', 'Movimientos faciales sospechosos', 'No hay registro oficial de esta declaración'],
        summary: 'Video presenta inconsistencias en sincronización labial y calidad de audio. Posible manipulación mediante deepfake. No existe comunicado oficial que respalde estas declaraciones.',
        sources: ['TikTok', 'YouTube', 'WhatsApp', 'Twitter'],
        markersDetected: [
          { type: 'Manipulado', confidence: 0.88 },
          { type: 'No verificable', confidence: 0.62 }
        ]
      },
      consensusMarkers: ['manipulado', 'falso', 'sensacionalista'],
      consensusPercentages: {
        'manipulado': 90,
        'falso': 80,
        'sensacionalista': 70
      },
      humanVerified: true,
      verifiedBy: 'Red de Validación Humana',
      submittedBy: 'usuario_789',
      submittedAt: '2024-01-15T08:45:00Z',
      priority: 'high',
      votesCount: 10,
    },
  ];

  const getTypeIcon = (type: string) => {
    switch (type) {
      case 'text': return FileText;
      case 'image': return Image;
      case 'video': return Video;
      case 'audio': return Volume2;
      default: return FileText;
    }
  };

  const getPriorityBadge = (priority: string) => {
    switch (priority) {
      case 'high':
        return <Badge variant="destructive">Alta Prioridad</Badge>;
      case 'medium':
        return <Badge variant="default">Prioridad Media</Badge>;
      case 'low':
        return <Badge variant="secondary">Baja Prioridad</Badge>;
      default:
        return <Badge variant="outline">Sin Prioridad</Badge>;
    }
  };

  const getMarcador = (marcadorId: string) => {
    return ETIQUETAS_CATEGORIAS.find(c => c.id === marcadorId);
  };

  const getMarcadorBadgeColor = (marcadorId: string) => {
    const marcador = getMarcador(marcadorId);
    if (!marcador) return 'bg-gray-100 text-gray-700 border-gray-300';
    
    const colorMap: { [key: string]: string } = {
      'verdadero': 'bg-green-100 text-green-700 border-green-300',
      'falso': 'bg-red-100 text-red-700 border-red-300',
      'enganoso': 'bg-orange-100 text-orange-700 border-orange-300',
      'satirico': 'bg-blue-100 text-blue-700 border-blue-300',
      'manipulado': 'bg-purple-100 text-purple-700 border-purple-300',
      'sin_contexto': 'bg-amber-100 text-amber-700 border-amber-300',
      'no_verificable': 'bg-gray-100 text-gray-700 border-gray-300',
      'teoria_conspirativa': 'bg-violet-100 text-violet-700 border-violet-300',
      'discurso_odio': 'bg-red-200 text-red-900 border-red-400',
      'sensacionalista': 'bg-orange-100 text-orange-600 border-orange-300',
    };
    return colorMap[marcadorId] || 'bg-gray-100 text-gray-700 border-gray-300';
  };

  const addVaccine = () => {
    if (!newVaccineName.trim() || !newVaccineDescription.trim()) return;

    const newVaccine: Vaccine = {
      id: `vaccine-${Date.now()}`,
      name: newVaccineName,
      description: newVaccineDescription,
      supports: []
    };

    setVaccines([...vaccines, newVaccine]);
    setNewVaccineName('');
    setNewVaccineDescription('');
    setEditingVaccineId(newVaccine.id);
  };

  const removeVaccine = (vaccineId: string) => {
    setVaccines(vaccines.filter(v => v.id !== vaccineId));
    if (editingVaccineId === vaccineId) {
      setEditingVaccineId(null);
    }
  };

  const addSupport = (vaccineId: string) => {
    if (!newSupportTitle.trim() || !newSupportUrl.trim()) return;

    const newSupport: VaccineSupport = {
      id: `support-${Date.now()}`,
      title: newSupportTitle,
      url: newSupportUrl
    };

    setVaccines(vaccines.map(v => 
      v.id === vaccineId 
        ? { ...v, supports: [...v.supports, newSupport] }
        : v
    ));

    setNewSupportTitle('');
    setNewSupportUrl('');
  };

  const removeSupport = (vaccineId: string, supportId: string) => {
    setVaccines(vaccines.map(v => 
      v.id === vaccineId 
        ? { ...v, supports: v.supports.filter(s => s.id !== supportId) }
        : v
    ));
  };

  const saveImmunizationStrategy = () => {
    if (!selectedContent || vaccines.length === 0) return;
    
    console.log('Guardando estrategia de inmunización:', {
      caseId: selectedContent,
      vaccines: vaccines
    });
    
    alert('¡Berraco parcero! Tu estrategia de inmunización está más afilada que un bisturí 💉✨');
  };

  const selectedContentData = verifiedContents.find(c => c.id === selectedContent);

  // Si no hay caso seleccionado, mostrar la lista
  if (!selectedContent) {
    return (
      <div className="space-y-6">
        {/* Franja de Botilito */}
        <div className="bg-[#ffe97a] border-2 border-[#ffda00] rounded-lg p-4 shadow-lg">
          <div className="flex items-center space-x-4">
            <img 
              src={botilitoImage} 
              alt="Botilito" 
              className="w-24 h-24 object-contain mt-[0px] mr-[16px] mb-[-18px] ml-[0px]"
            />
            <div className="flex-1">
              <p className="text-xl">
                ¡Inmunólogos digitales! Aquí están todos los casos diagnosticados listos para pasar a las vacunas 💉🔬
              </p>
              <p className="text-sm mt-1 opacity-80">
                Ya estos casos pasaron por mi análisis y por el de la red humana. Ahora toca armar las vacunas pa' inmunizar a la gente contra esta desinformación. ¡A darle duro! 💪
              </p>
            </div>
          </div>
        </div>

        {/* Lista de casos verificados */}
        <Card>
          <CardHeader>
            <div className="flex items-center justify-between">
              <div>
                <CardTitle className="flex items-center space-x-2 text-[24px]">
                  <Syringe className="h-5 w-5 text-orange-500" />
                  <span>Casos Verificados</span>
                </CardTitle>
                <CardDescription>
                  Casos ya diagnosticados listos pa' estrategias de inmunización
                </CardDescription>
              </div>
              <Badge variant="outline" className="bg-orange-50 text-orange-700 border-orange-200">
                <Hash className="h-3 w-3 mr-1" />
                {verifiedContents.length} casos disponibles
              </Badge>
            </div>

            {/* Search and Filter Controls */}
            <div className="flex space-x-2 mt-4">
              <div className="relative flex-1">
                <Search className="absolute left-3 top-2.5 h-4 w-4 text-muted-foreground" />
                <Input
                  placeholder="Buscar casos por título o contenido..."
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                  className="pl-10 border border-gray-300"
                />
              </div>
              <div className="flex items-center space-x-2">
                <Filter className="h-4 w-4 text-muted-foreground" />
                <select 
                  value={selectedFilter} 
                  onChange={(e) => setSelectedFilter(e.target.value)}
                  className="px-3 py-2 border rounded-md text-sm bg-background"
                >
                  <option value="all">Todos los casos</option>
                  <option value="high">Alta prioridad</option>
                  <option value="medium">Prioridad media</option>
                  <option value="text">Solo texto</option>
                  <option value="image">Solo imágenes</option>
                  <option value="video">Solo videos</option>
                </select>
              </div>
            </div>
          </CardHeader>
          <CardContent className="space-y-4">
            {/* Lista de casos con altura fija y scroll */}
            <div className="space-y-4 max-h-[600px] min-h-[500px] overflow-y-auto custom-scrollbar">
              {(() => {
                // Calcular índices para la paginación
                const indexOfLastCase = currentPage * casesPerPage;
                const indexOfFirstCase = indexOfLastCase - casesPerPage;
                const currentCases = verifiedContents.slice(indexOfFirstCase, indexOfLastCase);
                
                return currentCases.map((content) => {
                  const TypeIcon = getTypeIcon(content.type);
              
              return (
                <div
                  key={content.id}
                  className="p-4 border rounded-lg cursor-pointer transition-all duration-200 bg-gray-50/50 hover:bg-accent hover:shadow-md hover:border-primary/50"
                  onClick={() => setSelectedContent(content.id)}
                >
                  <div className="flex items-start justify-between space-x-3">
                    <div className="flex items-start space-x-3 flex-1">
                      <div className="p-3 bg-muted rounded-lg">
                        <TypeIcon className="h-6 w-6 text-muted-foreground" />
                      </div>
                      <div className="space-y-2 flex-1">
                        <div className="flex items-center justify-between">
                          <div className="flex items-center space-x-2">
                            <Badge variant="outline" className="text-xs bg-white border-primary/30 font-mono">
                              CASO-{content.id.toString().padStart(3, '0')}
                            </Badge>
                            <h4 className="font-medium text-sm">{content.title}</h4>
                          </div>
                          <div className="flex items-center space-x-2">
                            {getPriorityBadge(content.priority)}
                          </div>
                        </div>
                        
                        <div className="space-y-1">
                          {/* Usuario y votación */}
                          <div className="flex items-center space-x-3 text-xs text-muted-foreground">
                            <div className="flex items-center space-x-1">
                              <Users className="h-3 w-3" />
                              <span>{content.verifiedBy}</span>
                            </div>
                            <div className="flex items-center space-x-1">
                              <CheckCircle className="h-3 w-3 text-green-600" />
                              <span>{content.votesCount} verificadores</span>
                            </div>
                          </div>
                          
                          {/* Contenido preview */}
                          <p className="text-xs text-muted-foreground line-clamp-2">
                            {content.type === 'text' ? content.content : content.description || content.content}
                          </p>
                        </div>
                        
                        <div className="space-y-2">
                          {/* Diagnóstico consensuado */}
                          {content.consensusMarkers && content.consensusMarkers.length > 0 && (
                            <div className="space-y-1">
                              <div className="flex items-center space-x-1 text-xs text-muted-foreground">
                                <Users className="h-3 w-3" />
                                <span>Diagnóstico verificado:</span>
                              </div>
                              <div className="grid grid-cols-2 gap-1">
                                {content.consensusMarkers.map((marcadorId, index) => {
                                  const marcador = getMarcador(marcadorId);
                                  if (!marcador) return null;
                                  const consensusPercentage = content.consensusPercentages?.[marcadorId] || 0;
                                  return (
                                    <Badge 
                                      key={index} 
                                      variant="outline" 
                                      className={`text-xs px-2 py-0.5 ${getMarcadorBadgeColor(marcadorId)}`}
                                    >
                                      {marcador.label} {consensusPercentage}%
                                    </Badge>
                                  );
                                })}
                              </div>
                            </div>
                          )}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              );
            });
              })()}
            </div>
            
            {/* Controles de paginación */}
            {verifiedContents.length > casesPerPage && (
              <div className="pt-4 border-t">
                <div className="flex items-center justify-between">
                  <div className="text-sm text-muted-foreground">
                    Mostrando {((currentPage - 1) * casesPerPage) + 1} - {Math.min(currentPage * casesPerPage, verifiedContents.length)} de {verifiedContents.length} casos
                  </div>
                  <div className="flex items-center space-x-2">
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}
                      disabled={currentPage === 1}
                    >
                      Anterior
                    </Button>
                    <div className="flex items-center space-x-1">
                      {Array.from({ length: Math.ceil(verifiedContents.length / casesPerPage) }, (_, i) => i + 1).map((page) => (
                        <Button
                          key={page}
                          variant={currentPage === page ? "default" : "outline"}
                          size="sm"
                          onClick={() => setCurrentPage(page)}
                          className={currentPage === page ? "bg-primary text-primary-foreground" : ""}
                        >
                          {page}
                        </Button>
                      ))}
                    </div>
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={() => setCurrentPage(prev => Math.min(Math.ceil(verifiedContents.length / casesPerPage), prev + 1))}
                      disabled={currentPage === Math.ceil(verifiedContents.length / casesPerPage)}
                    >
                      Siguiente
                    </Button>
                  </div>
                </div>
              </div>
            )}
          </CardContent>
        </Card>
      </div>
    );
  }

  // Si hay un caso seleccionado, mostrar el detalle con formulario de vacunas
  return (
    <div className="space-y-6">
      {/* Franja de Botilito para el detalle del caso */}
      <div className="bg-[#ffe97a] border-2 border-[#ffda00] rounded-lg p-4 shadow-lg">
        <div className="flex items-center space-x-4">
          <img 
            src={botilitoImage} 
            alt="Botilito" 
            className="w-24 h-24 object-contain mt-[0px] mr-[16px] mb-[-18px] ml-[0px]"
          />
          <div className="flex-1">
            <p className="text-xl">
              ¡Dale berraco! Acá está el caso completo pa' que le armes la estrategia de inmunización 💉🔬
            </p>
            <p className="text-sm mt-1 opacity-80">
              Este caso ya pasó por diagnóstico completo. Ahora crea las vacunas necesarias pa' inmunizar a la gente contra esta desinformación. ¡Tú puedes! 💪
            </p>
          </div>
        </div>
      </div>

      {/* Detalle del caso */}
      <Card>
        <CardHeader>
          {/* Botón de volver */}
          <div className="mb-4">
            <Button
              variant="outline"
              size="sm"
              onClick={() => {
                setSelectedContent(null);
                setVaccines([]);
                setEditingVaccineId(null);
              }}
            >
              <ArrowLeft className="h-4 w-4 mr-2" />
              Volver a la lista
            </Button>
          </div>

          {/* Franja unificada con toda la info del caso */}
          <div className="flex items-center justify-between gap-4 bg-gradient-to-r from-primary/10 via-secondary/10 to-primary/10 px-6 py-4 rounded-lg border-2 border-primary/30 mb-4">
            {/* Código del caso */}
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-primary/20 rounded-lg">
                <Shield className="h-5 w-5 text-primary" />
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Código del Caso</p>
                <p className="font-mono font-medium">{selectedContentData?.id}</p>
              </div>
            </div>

            <Separator orientation="vertical" className="h-12" />

            {/* Prioridad */}
            <div>
              <p className="text-xs text-muted-foreground mb-1">Prioridad</p>
              {getPriorityBadge(selectedContentData?.priority || 'high')}
            </div>

            <Separator orientation="vertical" className="h-12" />

            {/* Reportado por */}
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-blue-100 rounded-lg">
                <Users className="h-4 w-4 text-blue-600" />
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Reportado por</p>
                <p className="text-sm font-medium">{selectedContentData?.submittedBy || 'usuario_123'}</p>
              </div>
            </div>

            <Separator orientation="vertical" className="h-12" />

            {/* Fecha de reporte */}
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-emerald-100 rounded-lg">
                <CheckCircle className="h-4 w-4 text-emerald-600" />
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Fecha de reporte</p>
                <p className="text-sm font-medium">
                  {new Date(selectedContentData?.submittedAt || '2024-01-15T10:30:00Z').toLocaleDateString('es-CO', {
                    day: 'numeric',
                    month: 'short',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                  })}
                </p>
              </div>
            </div>
          </div>

          {/* Título de la sección */}
          <CardTitle className="flex items-center space-x-2">
            <Syringe className="h-5 w-5 text-primary" />
            <span>Caso Verificado - Estudio de Inmunización</span>
          </CardTitle>
        </CardHeader>
        <CardContent className="space-y-6">
          {/* Content Details - igual que en HumanVerification */}
          <div>
            <div className="p-4 bg-secondary/30 border-2 border-secondary/60 rounded-lg space-y-3">
              {/* Captura de la noticia con etiquetas superpuestas */}
              {selectedContentData?.screenshot && (
                <div>
                  <Label>Captura de la noticia:</Label>
                  <div className="mt-2 rounded-lg overflow-hidden border-2 border-secondary/40 relative max-h-48">
                    <img 
                      src={selectedContentData.screenshot} 
                      alt="Captura de la noticia" 
                      className="w-full h-48 object-cover object-top"
                    />
                    
                    {/* Overlay con etiquetas detectadas */}
                    <div className="absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent flex flex-col items-center justify-end p-4 space-y-2">
                      <div className="flex flex-wrap gap-2 justify-center">
                        {selectedContentData.consensusMarkers?.slice(0, 3).map((marcadorId, index) => {
                          const marcador = getMarcador(marcadorId);
                          if (!marcador) return null;
                          
                          const getMarkerColor = (id: string) => {
                            const colorMap: { [key: string]: string } = {
                              'verdadero': 'bg-emerald-500 hover:bg-emerald-600',
                              'falso': 'bg-red-500 hover:bg-red-600',
                              'enganoso': 'bg-orange-500 hover:bg-orange-600',
                              'satirico': 'bg-blue-500 hover:bg-blue-600',
                              'manipulado': 'bg-purple-500 hover:bg-purple-600',
                              'sin_contexto': 'bg-amber-500 hover:bg-amber-600',
                              'no_verificable': 'bg-gray-500 hover:bg-gray-600',
                              'teoria_conspirativa': 'bg-violet-600 hover:bg-violet-700',
                              'discurso_odio': 'bg-red-700 hover:bg-red-800',
                              'sensacionalista': 'bg-orange-400 hover:bg-orange-500',
                            };
                            return colorMap[id] || 'bg-gray-500 hover:bg-gray-600';
                          };

                          const Icon = marcador.icon;
                          const consensusPercentage = selectedContentData.consensusPercentages?.[marcadorId] || 0;
                          
                          return (
                            <Badge 
                              key={index}
                              className={`${getMarkerColor(marcadorId)} text-white shadow-lg ${
                                index === 0 
                                  ? 'px-4 py-2 text-base scale-105' 
                                  : 'px-3 py-1.5 text-sm'
                              }`}
                            >
                              <Icon className={index === 0 ? "h-6 w-6" : "h-5 w-5"} />
                              <span className="ml-1.5">{marcador.label}</span>
                              <span className={`ml-1.5 opacity-90 ${index === 0 ? 'text-sm' : 'text-xs'}`}>
                                {consensusPercentage}%
                              </span>
                            </Badge>
                          );
                        })}
                      </div>
                    </div>
                  </div>
                </div>
              )}
              
              {/* Fuente y tema */}
              {(selectedContentData?.source || selectedContentData?.theme) && (
                <div className="flex flex-wrap items-center gap-4 pb-2">
                  {/* Fuente de la noticia */}
                  {selectedContentData.source && (
                    <div className="flex items-center space-x-2">
                      <Newspaper className="h-4 w-4 text-primary" />
                      <Label className="text-sm">Fuente:</Label>
                      <a 
                        href={selectedContentData.source.url} 
                        target="_blank" 
                        rel="noopener noreferrer"
                        className="inline-flex items-center space-x-1.5 px-3 py-1.5 bg-secondary/60 hover:bg-secondary text-secondary-foreground rounded-md transition-colors text-xs no-hover-effect"
                      >
                        <span>{selectedContentData.source.name}</span>
                        <ExternalLink className="h-3 w-3" />
                      </a>
                    </div>
                  )}
                  
                  {/* Tema del contenido */}
                  {selectedContentData.theme && (
                    <div className="flex items-center space-x-2">
                      <Tag className="h-4 w-4 text-primary" />
                      <Label className="text-sm">Tema:</Label>
                      <Badge variant="outline" className="text-xs border-primary/40 bg-primary/10">
                        {selectedContentData.theme}
                      </Badge>
                    </div>
                  )}
                </div>
              )}
              
              {/* Titular de la noticia */}
              {selectedContentData?.headline && (
                <div>
                  <Label>Titular de la noticia:</Label>
                  <div className="mt-1 p-3 bg-primary/20 border border-primary/40 rounded-lg">
                    <p className="font-medium">{selectedContentData.headline}</p>
                  </div>
                </div>
              )}
              
              {/* Contenido analizado */}
              <div>
                <Label>Contenido analizado:</Label>
                <p className="text-sm text-muted-foreground mt-1 leading-relaxed">
                  {selectedContentData?.type === 'text' ? 
                    selectedContentData.content : 
                    selectedContentData?.description || selectedContentData?.content
                  }
                </p>
              </div>
            </div>

            {/* Evaluación epidemiológica */}
            {selectedContentData?.aiAnalysis.summary && (
              <div className="mt-6">
                <h4>Evaluación epidemiológica:</h4>
                <p className="text-sm text-muted-foreground mt-1">{selectedContentData.aiAnalysis.summary}</p>
              </div>
            )}
          </div>

          <Separator />

          {/* Estrategia de Inmunización */}
          <div>
            <Label className="mb-3 flex items-center space-x-2">
              <Syringe className="h-4 w-4 text-orange-500" />
              <span>Estrategia de Inmunización</span>
            </Label>
            <p className="text-xs text-muted-foreground mb-4">
              Crea las vacunas necesarias pa' inmunizar contra este caso. Cada vacuna debe tener un nombre, descripción y soportes (evidencias, recursos educativos, referencias).
            </p>

            {/* Agregar Nueva Vacuna */}
            <div className="p-4 bg-blue-50 border-2 border-blue-200 rounded-lg space-y-3 mb-4">
              <h4 className="flex items-center space-x-2">
                <Plus className="h-4 w-4 text-blue-600" />
                <span>Agregar Nueva Vacuna</span>
              </h4>
              
              <div className="space-y-2">
                <Label htmlFor="vaccine-name">Nombre de la Vacuna</Label>
                <Input
                  id="vaccine-name"
                  placeholder="Ej: Alfabetización mediática sobre salud"
                  value={newVaccineName}
                  onChange={(e) => setNewVaccineName(e.target.value)}
                  className="bg-white"
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="vaccine-description">Descripción</Label>
                <Textarea
                  id="vaccine-description"
                  placeholder="Describe cómo esta vacuna inmuniza contra el caso seleccionado..."
                  value={newVaccineDescription}
                  onChange={(e) => setNewVaccineDescription(e.target.value)}
                  rows={4}
                  className="bg-white resize-none"
                />
              </div>

              <Button
                onClick={addVaccine}
                disabled={!newVaccineName.trim() || !newVaccineDescription.trim()}
                className="w-full flex items-center justify-center space-x-2"
              >
                <Plus className="h-4 w-4" />
                <span>Agregar Vacuna</span>
              </Button>
            </div>

            {/* Lista de Vacunas */}
            {vaccines.length > 0 && (
              <div className="space-y-4">
                <h4 className="flex items-center space-x-2">
                  <Syringe className="h-4 w-4 text-green-600" />
                  <span>Vacunas Propuestas ({vaccines.length})</span>
                </h4>

                {vaccines.map((vaccine, index) => (
                  <motion.div
                    key={vaccine.id}
                    initial={{ opacity: 0, y: 20 }}
                    animate={{ opacity: 1, y: 0 }}
                    className="p-4 bg-white border-2 border-green-200 rounded-lg space-y-3"
                  >
                    <div className="flex items-start justify-between">
                      <div className="flex-1">
                        <div className="flex items-center space-x-2 mb-1">
                          <Badge className="bg-green-500 text-white">
                            Vacuna #{index + 1}
                          </Badge>
                          <h4>{vaccine.name}</h4>
                        </div>
                        <p className="text-sm text-muted-foreground">{vaccine.description}</p>
                      </div>
                      <Button
                        variant="ghost"
                        size="icon"
                        onClick={() => removeVaccine(vaccine.id)}
                        className="flex-shrink-0"
                      >
                        <Trash2 className="h-4 w-4 text-red-500" />
                      </Button>
                    </div>

                    <Separator />

                    {/* Soportes de la Vacuna */}
                    <div className="space-y-2">
                      <Label className="text-xs">Soportes (evidencias, recursos, referencias)</Label>
                      
                      {/* Lista de Soportes */}
                      {vaccine.supports.length > 0 && (
                        <div className="space-y-2 mb-2">
                          {vaccine.supports.map((support) => (
                            <div
                              key={support.id}
                              className="flex items-center justify-between p-2 bg-gray-50 border border-gray-200 rounded"
                            >
                              <div className="flex items-center space-x-2 flex-1 min-w-0">
                                <Link2 className="h-3 w-3 text-blue-600 flex-shrink-0" />
                                <div className="min-w-0 flex-1">
                                  <p className="text-xs truncate">{support.title}</p>
                                  <a
                                    href={support.url}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    className="text-xs text-blue-600 hover:underline truncate block"
                                  >
                                    {support.url}
                                  </a>
                                </div>
                              </div>
                              <Button
                                variant="ghost"
                                size="icon"
                                onClick={() => removeSupport(vaccine.id, support.id)}
                                className="h-6 w-6 flex-shrink-0"
                              >
                                <Trash2 className="h-3 w-3 text-red-500" />
                              </Button>
                            </div>
                          ))}
                        </div>
                      )}

                      {/* Agregar Soporte */}
                      {editingVaccineId === vaccine.id && (
                        <div className="grid grid-cols-12 gap-2">
                          <div className="col-span-5">
                            <Input
                              placeholder="Título del soporte"
                              value={newSupportTitle}
                              onChange={(e) => setNewSupportTitle(e.target.value)}
                              className="bg-white text-xs h-8"
                            />
                          </div>
                          <div className="col-span-6">
                            <Input
                              placeholder="URL del soporte"
                              value={newSupportUrl}
                              onChange={(e) => setNewSupportUrl(e.target.value)}
                              className="bg-white text-xs h-8"
                            />
                          </div>
                          <div className="col-span-1">
                            <Button
                              onClick={() => addSupport(vaccine.id)}
                              disabled={!newSupportTitle.trim() || !newSupportUrl.trim()}
                              className="w-full h-8 p-0"
                            >
                              <Plus className="h-3 w-3" />
                            </Button>
                          </div>
                        </div>
                      )}

                      {editingVaccineId !== vaccine.id && (
                        <Button
                          variant="outline"
                          size="sm"
                          onClick={() => setEditingVaccineId(vaccine.id)}
                          className="w-full text-xs h-8"
                        >
                          <Plus className="h-3 w-3 mr-1" />
                          Agregar Soporte
                        </Button>
                      )}
                    </div>
                  </motion.div>
                ))}
              </div>
            )}

            {/* Botón de Guardar Estrategia */}
            {vaccines.length > 0 && (
              <div className="pt-4 border-t">
                <Button
                  onClick={saveImmunizationStrategy}
                  className="w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-orange-500 to-red-500"
                >
                  <Save className="h-4 w-4" />
                  <span>Guardar Estrategia de Inmunización</span>
                </Button>
              </div>
            )}
          </div>
        </CardContent>
      </Card>
    </div>
  );
} - - - - - - - - - - - - 
src/components/components/Register.tsx

import React, { useState } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Input } from './ui/input';
import { Label } from './ui/label';
import { Checkbox } from './ui/checkbox';
import { Eye, EyeOff, Phone, MapPin, Calendar, Loader2 } from 'lucide-react';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';
import registerImage from 'figma:asset/60be6d6fe2b2bb2089603fb76c90d0926c3104a3.png';
import botilitoImage from 'figma:asset/ce81bb4aba8c9f36807cd145a086a12ce7f876dc.png';
import { signUp } from '../utils/supabase/auth';

interface RegisterProps {
  onRegister: () => void;
  onBackToLogin: () => void;
}

export function Register({ onRegister, onBackToLogin }: RegisterProps) {
  const [showPassword, setShowPassword] = useState(false);
  const [showConfirmPassword, setShowConfirmPassword] = useState(false);
  const [acceptTerms, setAcceptTerms] = useState(false);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [credentials, setCredentials] = useState({
    fullName: '',
    email: '',
    password: '',
    confirmPassword: '',
    phone: '',
    department: '',
    city: '',
    birthDate: ''
  });

  // Departamentos de Colombia
  const departments = [
    'Amazonas', 'Antioquia', 'Arauca', 'Atlántico', 'Bolívar', 'Boyacá', 'Caldas',
    'Caquetá', 'Casanare', 'Cauca', 'Cesar', 'Chocó', 'Córdoba', 'Cundinamarca',
    'Guainía', 'Guaviare', 'Huila', 'La Guajira', 'Magdalena', 'Meta', 'Nariño',
    'Norte de Santander', 'Putumayo', 'Quindío', 'Risaralda', 'San Andrés y Providencia',
    'Santander', 'Sucre', 'Tolima', 'Valle del Cauca', 'Vaupés', 'Vichada'
  ];

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setError(null);

    // Validaciones básicas
    if (credentials.password !== credentials.confirmPassword) {
      setError('Las contraseñas no coinciden');
      return;
    }

    if (!acceptTerms) {
      setError('Debes aceptar los términos y condiciones');
      return;
    }

    if (credentials.password.length < 6) {
      setError('La contraseña debe tener al menos 6 caracteres');
      return;
    }

    setIsLoading(true);

    try {
      await signUp({
        email: credentials.email,
        password: credentials.password,
        name: credentials.fullName,
        phone: credentials.phone,
        location: `${credentials.city}, ${credentials.department}`,
        birthDate: credentials.birthDate
      });
      onRegister();
    } catch (err: any) {
      console.error('Registration error:', err);
      setError(err.message || 'Error al crear la cuenta. Por favor, intenta de nuevo.');
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="min-h-screen bg-primary">
      <div className="w-full h-screen">
        {/* Contenedor principal con la imagen de referencia como fondo */}
        <div className="relative bg-white h-full overflow-hidden">
          {/* Imagen de fondo de referencia */}
          <div className="absolute inset-0 opacity-10">
            <img 
              src={registerImage} 
              alt="Botilito Register Reference" 
              className="w-full h-full object-cover"
            />
          </div>
          
          <div className="relative z-10 grid lg:grid-cols-2 gap-0 h-full">
            {/* Lado izquierdo - Presentación de Botilito */}
            <div className="bg-gradient-to-br from-primary to-secondary p-8 lg:p-12 flex flex-col justify-center items-center text-center">
              {/* Burbuja de diálogo */}
              <div className="bg-white rounded-2xl p-6 mb-8 relative shadow-lg max-w-md">
                <h1 className="text-3xl font-bold text-black mb-4">
                  ¡Únete a la lucha!
                </h1>
                <p className="text-gray-700 leading-relaxed">
                  Ayúdame a combatir la desinformación y crear un internet más seguro para todos.
                </p>
                {/* Flecha de la burbuja */}
                <div className="absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full">
                  <div className="w-0 h-0 border-l-[15px] border-r-[15px] border-t-[20px] border-l-transparent border-r-transparent border-t-white"></div>
                </div>
              </div>

              {/* Botilito Character - Imagen oficial */}
              <div className="relative">
                <img 
                  src={botilitoImage} 
                  alt="Botilito - El ex-agente digital convertido en luchador contra la desinformación" 
                  className="w-80 h-auto drop-shadow-2xl"
                />
              </div>
            </div>

            {/* Lado derecho - Formulario de registro */}
            <div className="bg-white p-8 lg:p-12 flex flex-col justify-center">
              <div className="max-w-md mx-auto w-full">
                {/* Header del formulario */}
                <div className="text-center mb-8">
                  <div className="inline-block bg-primary text-black px-6 py-3 rounded-2xl text-xl font-bold mb-6">
                    ¡A camellar contra las noticias falsas!
                  </div>
                </div>

                {/* Formulario */}
                <form onSubmit={handleSubmit} className="space-y-6">
                  {/* Error message */}
                  {error && (
                    <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg">
                      {error}
                    </div>
                  )}

                  {/* Campo de nombre completo */}
                  <div className="space-y-2">
                    <Label htmlFor="fullName" className="text-gray-700">
                      Nombre y apellido
                    </Label>
                    <Input
                      id="fullName"
                      type="text"
                      value={credentials.fullName}
                      onChange={(e) => setCredentials(prev => ({ ...prev, fullName: e.target.value }))}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                      placeholder="Tu nombre completo"
                      required
                    />
                  </div>

                  {/* Campo de email */}
                  <div className="space-y-2">
                    <Label htmlFor="email" className="text-gray-700">
                      Correo electrónico
                    </Label>
                    <Input
                      id="email"
                      type="email"
                      value={credentials.email}
                      onChange={(e) => setCredentials(prev => ({ ...prev, email: e.target.value }))}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                      placeholder="tu@ejemplo.com"
                      required
                    />
                  </div>

                  {/* Campo de teléfono */}
                  <div className="space-y-2">
                    <Label htmlFor="phone" className="text-gray-700 flex items-center space-x-2">
                      <Phone className="h-4 w-4" />
                      <span>Número de teléfono</span>
                    </Label>
                    <Input
                      id="phone"
                      type="tel"
                      value={credentials.phone}
                      onChange={(e) => setCredentials(prev => ({ ...prev, phone: e.target.value }))}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                      placeholder="3001234567"
                      required
                    />
                  </div>

                  {/* Ubicación: Departamento y Ciudad */}
                  <div className="grid grid-cols-2 gap-4">
                    <div className="space-y-2">
                      <Label htmlFor="department" className="text-gray-700 flex items-center space-x-2">
                        <MapPin className="h-4 w-4" />
                        <span>Departamento</span>
                      </Label>
                      <Select
                        value={credentials.department}
                        onValueChange={(value) => setCredentials(prev => ({ ...prev, department: value }))}
                        required
                      >
                        <SelectTrigger className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors">
                          <SelectValue placeholder="Selecciona" />
                        </SelectTrigger>
                        <SelectContent className="max-h-60">
                          {departments.map((dept) => (
                            <SelectItem key={dept} value={dept}>
                              {dept}
                            </SelectItem>
                          ))}
                        </SelectContent>
                      </Select>
                    </div>

                    <div className="space-y-2">
                      <Label htmlFor="city" className="text-gray-700">
                        Ciudad/Municipio
                      </Label>
                      <Input
                        id="city"
                        type="text"
                        value={credentials.city}
                        onChange={(e) => setCredentials(prev => ({ ...prev, city: e.target.value }))}
                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                        placeholder="Tu ciudad"
                        required
                      />
                    </div>
                  </div>

                  {/* Fecha de nacimiento */}
                  <div className="space-y-2">
                    <Label htmlFor="birthDate" className="text-gray-700 flex items-center space-x-2">
                      <Calendar className="h-4 w-4" />
                      <span>Fecha de nacimiento</span>
                    </Label>
                    <Input
                      id="birthDate"
                      type="date"
                      value={credentials.birthDate}
                      onChange={(e) => setCredentials(prev => ({ ...prev, birthDate: e.target.value }))}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                      required
                    />
                  </div>

                  {/* Campos de contraseña en fila */}
                  <div className="grid grid-cols-2 gap-4">
                    {/* Campo de contraseña */}
                    <div className="space-y-2">
                      <Label htmlFor="password" className="text-gray-700">
                        Contraseña
                      </Label>
                      <div className="relative">
                        <Input
                          id="password"
                          type={showPassword ? 'text' : 'password'}
                          value={credentials.password}
                          onChange={(e) => setCredentials(prev => ({ ...prev, password: e.target.value }))}
                          className="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                          placeholder="••••••••"
                          required
                        />
                        <button
                          type="button"
                          onClick={() => setShowPassword(!showPassword)}
                          className="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors"
                        >
                          {showPassword ? (
                            <EyeOff className="h-5 w-5" />
                          ) : (
                            <Eye className="h-5 w-5" />
                          )}
                        </button>
                      </div>
                    </div>

                    {/* Campo de confirmar contraseña */}
                    <div className="space-y-2">
                      <Label htmlFor="confirmPassword" className="text-gray-700">
                        Confirmar contraseña
                      </Label>
                      <div className="relative">
                        <Input
                          id="confirmPassword"
                          type={showConfirmPassword ? 'text' : 'password'}
                          value={credentials.confirmPassword}
                          onChange={(e) => setCredentials(prev => ({ ...prev, confirmPassword: e.target.value }))}
                          className="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                          placeholder="••••••••"
                          required
                        />
                        <button
                          type="button"
                          onClick={() => setShowConfirmPassword(!showConfirmPassword)}
                          className="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors"
                        >
                          {showConfirmPassword ? (
                            <EyeOff className="h-5 w-5" />
                          ) : (
                            <Eye className="h-5 w-5" />
                          )}
                        </button>
                      </div>
                    </div>
                  </div>

                  {/* Checkbox de términos y condiciones */}
                  <div className="flex items-start gap-3">
                    <Checkbox
                      id="terms"
                      checked={acceptTerms}
                      onCheckedChange={(checked) => setAcceptTerms(!!checked)}
                      className="mt-1"
                    />
                    <Label htmlFor="terms" className="text-sm text-gray-600 leading-relaxed cursor-pointer">
                      <div>Al crear una cuenta confirmas que has leído y aceptas nuestros:</div>
                      <div className="mt-1">
                        <button type="button" className="text-[rgba(0,0,0,1)] hover:text-secondary font-medium underline">
                          Términos y Condiciones
                        </button>
                      </div>
                      <div className="mt-1">
                        <button type="button" className="text-[rgba(0,0,0,1)] hover:text-secondary font-medium underline">
                          Política de Privacidad
                        </button>
                      </div>
                    </Label>
                  </div>

                  {/* Botón de registrarse */}
                  <Button
                    type="submit"
                    className="w-full bg-black hover:bg-gray-800 text-white py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                    disabled={!acceptTerms || isLoading}
                  >
                    {isLoading ? (
                      <>
                        <Loader2 className="mr-2 h-5 w-5 animate-spin inline" />
                        Creando cuenta...
                      </>
                    ) : (
                      '¡Vamos pa\'dentro!'
                    )}
                  </Button>

                  {/* Enlace de login */}
                  <div className="text-center">
                    <span className="text-gray-600">¿Ya eres miembro? </span>
                    <button
                      type="button"
                      onClick={onBackToLogin}
                      className="text-primary hover:text-secondary font-medium transition-colors font-bold"
                    >
                      Inicia sesión
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
} - - - - - - - - - - - - 
src/components/components/HumanVerification.tsx

import React, { useState } from 'react';
import botilitoImage from 'figma:asset/e27a276e6ff0e187a67cf54678c265c1c38adbf7.png';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Badge } from './ui/badge';
import { Textarea } from './ui/textarea';
import { Input } from './ui/input';
import { Label } from './ui/label';
import { Checkbox } from './ui/checkbox';
import { RadioGroup, RadioGroupItem } from './ui/radio-group';
import { Progress } from './ui/progress';
import { motion, AnimatePresence } from 'motion/react';
import { Separator } from './ui/separator';
import { 
  Users, CheckCircle, XCircle, AlertTriangle, Bot, 
  FileText, Image, Video, Volume2, ThumbsUp, ThumbsDown, 
  MessageSquare, Award, Clock, Send, Smile, Heart, Shield,
  Target, Flame, Vote, DollarSign, Zap, Eye, Ban, Skull,
  Microscope, AlertCircle, HelpCircle,
  Megaphone, Calendar, 
  Filter, Search, Layers, Hash,
  User, Gauge, Timer, Link, ExternalLink, ArrowLeft, Link2,
  Newspaper, Tag, Trophy, Star, Sparkles, TrendingUp
} from 'lucide-react';
import { Alert, AlertDescription } from './ui/alert';
import { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from './ui/dialog';

// Definición de las 19 categorías de marcadores de diagnóstico con enfoque epidemiológico
const ETIQUETAS_CATEGORIAS = [
  { id: 'verdadero', label: 'Verdadero', icon: CheckCircle, color: 'text-green-600', bg: 'bg-green-50', border: 'border-green-200', virulencia: 0, descripcion: 'Información verificada y respaldada por fuentes confiables' },
  { id: 'falso', label: 'Falso', icon: XCircle, color: 'text-red-600', bg: 'bg-red-50', border: 'border-red-200', virulencia: 90, descripcion: 'Información completamente falsa sin sustento verificable' },
  { id: 'enganoso', label: 'Engañoso', icon: AlertTriangle, color: 'text-orange-600', bg: 'bg-orange-50', border: 'border-orange-200', virulencia: 75, descripcion: 'Mezcla hechos reales con interpretaciones falsas o exageradas' },
  { id: 'satirico', label: 'Satírico/Humorístico', icon: Smile, color: 'text-blue-600', bg: 'bg-blue-50', border: 'border-blue-200', virulencia: 20, descripcion: 'Contenido humorístico o satírico que puede confundirse con noticias reales' },
  { id: 'manipulado', label: 'Manipulado', icon: Image, color: 'text-purple-600', bg: 'bg-purple-50', border: 'border-purple-200', virulencia: 85, descripcion: 'Contenido editado o alterado para cambiar su significado original' },
  { id: 'sin_contexto', label: 'Sin contexto', icon: AlertCircle, color: 'text-amber-600', bg: 'bg-amber-50', border: 'border-amber-200', virulencia: 60, descripcion: 'Contenido real usado fuera de su contexto temporal o situacional' },
  { id: 'no_verificable', label: 'No verificable', icon: HelpCircle, color: 'text-gray-600', bg: 'bg-gray-50', border: 'border-gray-200', virulencia: 35, descripcion: 'Información que no puede confirmarse con fuentes disponibles' },
  { id: 'teoria_conspirativa', label: 'Teoría conspirativa', icon: Eye, color: 'text-violet-600', bg: 'bg-violet-50', border: 'border-violet-200', virulencia: 80, descripcion: 'Narrativas que sugieren conspiraciones sin evidencia sólida' },
  { id: 'discurso_odio_racismo', label: 'Racismo/Xenofobia', icon: Skull, color: 'text-red-800', bg: 'bg-red-100', border: 'border-red-300', virulencia: 95, descripcion: 'Contenido que promueve odio contra grupos raciales o étnicos' },
  { id: 'discurso_odio_sexismo', label: 'Sexismo/LGBTQ+fobia', icon: Ban, color: 'text-red-700', bg: 'bg-red-100', border: 'border-red-300', virulencia: 95, descripcion: 'Contenido discriminatorio por género u orientación sexual' },
  { id: 'discurso_odio_clasismo', label: 'Clasismo/Aporofobia', icon: DollarSign, color: 'text-red-700', bg: 'bg-red-100', border: 'border-red-300', virulencia: 90, descripcion: 'Discriminación basada en clase social o condición económica' },
  { id: 'discurso_odio_ableismo', label: 'Ableismo', icon: Shield, color: 'text-red-700', bg: 'bg-red-100', border: 'border-red-300', virulencia: 90, descripcion: 'Discriminación contra personas con discapacidades' },
  { id: 'incitacion_violencia', label: 'Incitación a la violencia', icon: Flame, color: 'text-red-900', bg: 'bg-red-100', border: 'border-red-400', virulencia: 98, descripcion: 'Contenido que promueve o incita actos violentos' },
  { id: 'acoso_ciberbullying', label: 'Acoso/Ciberbullying', icon: Target, color: 'text-orange-700', bg: 'bg-orange-100', border: 'border-orange-300', virulencia: 85, descripcion: 'Ataques sistemáticos contra individuos específicos en línea' },
  { id: 'contenido_prejuicioso', label: 'Contenido prejuicioso', icon: AlertTriangle, color: 'text-yellow-700', bg: 'bg-yellow-50', border: 'border-yellow-200', virulencia: 70, descripcion: 'Presenta sesgos evidentes sin considerar otras perspectivas' },
  { id: 'bot_coordinado', label: 'Bot/Coordinado', icon: Bot, color: 'text-indigo-600', bg: 'bg-indigo-50', border: 'border-indigo-200', virulencia: 65, descripcion: 'Contenido generado o amplificado por cuentas automatizadas' },
  { id: 'suplantacion_identidad', label: 'Suplantación de identidad', icon: User, color: 'text-purple-700', bg: 'bg-purple-100', border: 'border-purple-300', virulencia: 88, descripcion: 'Se hace pasar por otra persona, organización o medio legítimo' },
  { id: 'sensacionalista', label: 'Sensacionalista', icon: Megaphone, color: 'text-orange-500', bg: 'bg-orange-50', border: 'border-orange-200', virulencia: 55, descripcion: 'Exagera o dramatiza para generar clics o emociones fuertes' },
  { id: 'en_revision', label: 'En revisión', icon: Clock, color: 'text-gray-500', bg: 'bg-gray-50', border: 'border-gray-200', virulencia: 40, descripcion: 'Contenido pendiente de verificación adicional' }
];

export function HumanVerification() {
  const [selectedContent, setSelectedContent] = useState<string | null>(null);
  const [verificationNotes, setVerificationNotes] = useState('');
  const [verificationResult, setVerificationResult] = useState<string>('');
  const [marcadoresDiagnostico, setMarcadoresDiagnostico] = useState<string[]>([]);
  const [marcadoresJustificaciones, setMarcadoresJustificaciones] = useState<{ [key: string]: string }>({});
  const [marcadoresEnlaces, setMarcadoresEnlaces] = useState<{ [key: string]: string }>({});
  const [selectedFilter, setSelectedFilter] = useState('all');
  const [searchTerm, setSearchTerm] = useState('');
  const [currentPage, setCurrentPage] = useState(1);
  const casesPerPage = 10;
  const [showSuccessDialog, setShowSuccessDialog] = useState(false);
  const [gamificationData, setGamificationData] = useState({
    pointsEarned: 0,
    currentLevel: '',
    currentLevelBadge: '',
    currentLevelSubtitle: '',
    totalDiagnoses: 0,
    streak: 0,
    newBadge: null as string | null,
    newBadgeIcon: null as string | null,
    newBadgeDescription: null as string | null,
    currentXP: 0,
    nextLevelXP: 0,
    progressToNext: 0
  });

  const pendingContents = [
    {
      id: 'T-WB-20241014-001',
      type: 'text',
      title: 'Artículo sobre tratamiento alternativo para diabetes',
      content: 'Un nuevo estudio revela que beber agua con limón en ayunas puede curar la diabetes tipo 2 en solo 30 días. Médicos de Harvard confirman la efectividad del tratamiento...',
      headline: 'Descubren cura milagrosa para diabetes: solo agua con limón en ayunas',
      url: 'https://noticiasfalsas.com/cura-diabetes-limon',
      screenshot: 'https://images.unsplash.com/photo-1504711434969-e33886168f5c?w=800',
      source: { name: 'Noticias Falsas', url: 'https://noticiasfalsas.com' },
      theme: 'Salud y Medicina',
      aiAnalysis: {
        veracity: 'Posible Desinformación',
        confidence: 0.89,
        detectedMarkers: ['enganoso', 'sensacionalista', 'no_verificable'],
        issues: ['No se encontraron estudios de Harvard sobre este tema', 'Afirmaciones médicas sin respaldo científico', 'Promete "cura" para enfermedad crónica'],
        summary: 'El contenido presenta patrones epidemiológicos consistentes con desinformación médica. Alto riesgo de propagación exponencial debido a apelación emocional y falsa autoridad científica.',
        sources: ['WhatsApp', 'Facebook', 'Twitter'],
        markersDetected: [
          { type: 'Engañoso', confidence: 0.89 },
          { type: 'Sensacionalista', confidence: 0.85 },
          { type: 'No verificable', confidence: 0.78 }
        ]
      },
      consensusMarkers: [],
      submittedBy: 'usuario_123',
      submittedAt: '2024-01-15T10:30:00Z',
      priority: 'high',
      votesCount: 0,
    },
    {
      id: 'I-FB-20241014-002',
      type: 'image',
      title: 'Foto de manifestación en plaza principal',
      url: 'https://redessociales.com/manifestacion-falsa',
      headline: 'Miles protestan contra el gobierno en la plaza central',
      content: 'manifestacion_plaza_central.jpg',
      description: 'Imagen que muestra una gran manifestación en la plaza central con miles de personas',
      screenshot: 'https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?w=800',
      source: { name: 'Redes Sociales', url: 'https://redessociales.com' },
      theme: 'Política y Sociedad',
      aiAnalysis: {
        veracity: 'Fuera de Contexto',
        confidence: 0.76,
        detectedMarkers: ['sin_contexto', 'manipulado'],
        issues: ['La imagen parece ser de otro evento', 'La fecha no coincide con eventos recientes', 'Metadatos sugieren manipulación'],
        summary: 'La imagen corresponde a un evento diferente realizado en 2019. Uso fuera de contexto para generar percepción de crisis actual.',
        sources: ['Facebook', 'Instagram', 'Telegram'],
        markersDetected: [
          { type: 'Sin contexto', confidence: 0.76 },
          { type: 'Manipulado', confidence: 0.68 },
          { type: 'Engañoso', confidence: 0.72 }
        ]
      },
      consensusMarkers: ['sin_contexto', 'enganoso'],
      submittedBy: 'usuario_456',
      submittedAt: '2024-01-15T09:15:00Z',
      priority: 'medium',
      votesCount: 2,
    },
    {
      id: 'V-TK-20241014-003',
      type: 'video',
      title: 'Video de declaraciones del ministro de economía',
      url: 'https://videosvirales.com/ministro-economia',
      headline: 'Ministro anuncia sorprendentes medidas económicas',
      content: 'declaraciones_ministro_economia.mp4',
      description: 'Video donde el ministro supuestamente anuncia nuevas medidas económicas',
      screenshot: 'https://images.unsplash.com/photo-1588681664899-f142ff2dc9b1?w=800',
      source: { name: 'Videos Virales', url: 'https://videosvirales.com' },
      theme: 'Economía y Política',
      aiAnalysis: {
        veracity: 'Requiere Verificación',
        confidence: 0.62,
        detectedMarkers: ['manipulado', 'no_verificable'],
        issues: ['Calidad de audio inconsistente', 'Movimientos faciales sospechosos', 'No hay registro oficial de esta declaración'],
        summary: 'Video presenta inconsistencias en sincronización labial y calidad de audio. Posible manipulación mediante deepfake. No existe comunicado oficial que respalde estas declaraciones.',
        sources: ['TikTok', 'YouTube', 'WhatsApp', 'Twitter'],
        markersDetected: [
          { type: 'Manipulado', confidence: 0.82 },
          { type: 'No verificable', confidence: 0.62 },
          { type: 'Sensacionalista', confidence: 0.71 }
        ]
      },
      consensusMarkers: ['manipulado'],
      submittedBy: 'usuario_789',
      submittedAt: '2024-01-15T08:45:00Z',
      priority: 'high',
      votesCount: 1,
    },
    {
      id: '4',
      type: 'text',
      title: 'Supuesto mensaje del alcalde sobre toque de queda',
      url: null,
      headline: 'URGENTE: Toque de queda total desde mañana',
      content: 'El alcalde anuncia toque de queda total desde mañana por tres semanas. Compartir urgente con todos sus contactos. La policía patrullará las calles y multará a quien salga.',
      aiAnalysis: {
        veracity: 'Falso',
        confidence: 0.94,
        detectedMarkers: ['falso', 'sensacionalista'],
        issues: ['No hay comunicado oficial de la alcaldía', 'Lenguaje alarmista típico de cadenas falsas', 'No coincide con protocolos municipales']
      },
      consensusMarkers: ['falso', 'sensacionalista', 'suplantacion_identidad'],
      submittedBy: 'usuario_234',
      submittedAt: '2024-01-15T08:20:00Z',
      priority: 'high',
      votesCount: 5,
    },
    {
      id: '5',
      type: 'image',
      title: 'Captura de pantalla de chat WhatsApp',
      url: null,
      headline: null,
      content: 'chat_supuesta_amenaza.jpg',
      description: 'Conversación donde supuestamente se planea un ataque en zona comercial',
      aiAnalysis: {
        veracity: 'Posible Desinformación',
        confidence: 0.81,
        detectedMarkers: ['no_verificable', 'sensacionalista'],
        issues: ['No es posible verificar autenticidad del chat', 'Contenido alarmista', 'No hay reportes oficiales relacionados']
      },
      consensusMarkers: ['no_verificable', 'enganoso', 'sensacionalista'],
      submittedBy: 'usuario_567',
      submittedAt: '2024-01-15T07:55:00Z',
      priority: 'high',
      votesCount: 3,
    },
    {
      id: '6',
      type: 'video',
      title: 'Influencer promocionando inversión cripto "garantizada"',
      url: null,
      headline: null,
      content: 'video_cripto_inversion.mp4',
      description: 'Persona conocida promete ganancias del 300% en criptomonedas',
      aiAnalysis: {
        veracity: 'Engañoso',
        confidence: 0.88,
        detectedMarkers: ['enganoso', 'sensacionalista'],
        issues: ['Promesas de retorno irreales', 'Presión para inversión inmediata', 'Características de esquema Ponzi']
      },
      consensusMarkers: ['enganoso', 'falso', 'sensacionalista'],
      submittedBy: 'usuario_890',
      submittedAt: '2024-01-15T07:30:00Z',
      priority: 'medium',
      votesCount: 7,
    },
    {
      id: '7',
      type: 'text',
      title: 'Noticia sobre subsidio del gobierno',
      url: 'https://subsidios-gov-colombia.online/registro-500mil',
      headline: 'Gobierno Nacional anuncia subsidio de $500.000 para todos los ciudadanos',
      content: 'El gobierno anuncia nuevo subsidio de $500.000 para todos los ciudadanos mayores de edad. Regístrese en este link antes del viernes para reclamar su dinero. Se necesita cédula, RUT y datos bancarios para el pago inmediato.',
      aiAnalysis: {
        veracity: 'Posible Phishing',
        confidence: 0.92,
        detectedMarkers: ['suplantacion_identidad', 'falso', 'enganoso'],
        issues: ['Link no corresponde a dominio gubernamental', 'No hay anuncio oficial', 'Solicita datos personales sensibles']
      },
      consensusMarkers: ['suplantacion_identidad', 'falso', 'enganoso', 'sensacionalista'],
      submittedBy: 'usuario_345',
      submittedAt: '2024-01-15T07:10:00Z',
      priority: 'high',
      votesCount: 9,
    },
    {
      id: '8',
      type: 'audio',
      title: 'Audio de supuesto secuestro en el barrio',
      url: null,
      headline: null,
      content: 'audio_alerta_secuestro.mp3',
      description: 'Mensaje de voz advirtiendo sobre secuestros en la zona',
      aiAnalysis: {
        veracity: 'Fuera de Contexto',
        confidence: 0.73,
        detectedMarkers: ['sin_contexto', 'sensacionalista'],
        issues: ['El audio es de hace 2 años en otra ciudad', 'No hay reportes recientes de secuestros', 'Metadatos de archivo antiguo']
      },
      consensusMarkers: ['sin_contexto', 'enganoso', 'sensacionalista'],
      submittedBy: 'usuario_678',
      submittedAt: '2024-01-15T06:45:00Z',
      priority: 'medium',
      votesCount: 4,
    },
    {
      id: '9',
      type: 'text',
      title: 'Publicación sobre vacunas y autismo',
      url: 'https://medicinanatural.info/vacunas-autismo-verdad-oculta',
      headline: 'Estudio científico comprueba relación directa entre vacunas infantiles y autismo',
      content: 'Un estudio reciente comprueba la relación entre vacunas infantiles y autismo que los médicos y las farmacéuticas están ocultando. Miles de padres reportan que sus hijos desarrollaron autismo después de la vacunación. La verdad que no quieren que sepas.',
      aiAnalysis: {
        veracity: 'Falso',
        confidence: 0.97,
        detectedMarkers: ['falso', 'teoria_conspirativa', 'enganoso'],
        issues: ['Múltiples estudios científicos desmienten esta teoría', 'Información puede causar daño a la salud pública', 'No cita fuentes verificables']
      },
      consensusMarkers: ['falso', 'teoria_conspirativa', 'enganoso', 'sensacionalista'],
      submittedBy: 'usuario_901',
      submittedAt: '2024-01-15T06:20:00Z',
      priority: 'high',
      votesCount: 12,
    },
    {
      id: '10',
      type: 'image',
      title: 'Foto de celebridad con político controversial',
      url: null,
      headline: null,
      content: 'foto_celebridad_politico.jpg',
      description: 'Imagen sugiere apoyo de celebridad a candidato político',
      aiAnalysis: {
        veracity: 'Manipulado',
        confidence: 0.85,
        detectedMarkers: ['manipulado', 'enganoso'],
        issues: ['Análisis forense muestra inconsistencias en iluminación', 'La celebridad desmintió la foto públicamente', 'Bordes borrosos alrededor de las figuras']
      },
      consensusMarkers: ['manipulado', 'falso', 'enganoso'],
      submittedBy: 'usuario_112',
      submittedAt: '2024-01-15T05:50:00Z',
      priority: 'medium',
      votesCount: 6,
    },
    {
      id: '11',
      type: 'video',
      title: 'Tutorial de "remedio casero" para COVID-19',
      url: null,
      headline: null,
      content: 'video_remedio_covid.mp4',
      description: 'Persona explica cómo curar COVID con productos naturales',
      aiAnalysis: {
        veracity: 'Desinformación Peligrosa',
        confidence: 0.96,
        detectedMarkers: ['falso', 'enganoso', 'sensacionalista'],
        issues: ['Contradice recomendaciones de OMS', 'No hay evidencia científica de efectividad', 'Puede causar que personas eviten tratamiento médico real']
      },
      consensusMarkers: ['falso', 'enganoso', 'sensacionalista', 'contenido_prejuicioso'],
      submittedBy: 'usuario_223',
      submittedAt: '2024-01-15T05:15:00Z',
      priority: 'high',
      votesCount: 15,
    }
  ];

  // Usar las mismas categorías del banco de marcadores de diagnóstico
  const verificationOptions = ETIQUETAS_CATEGORIAS;

  const getTypeIcon = (type: string) => {
    switch (type) {
      case 'text': return FileText;
      case 'image': return Image;
      case 'video': return Video;
      case 'audio': return Volume2;
      default: return FileText;
    }
  };

  const getPriorityBadge = (priority: string) => {
    switch (priority) {
      case 'high':
        return <Badge variant="destructive">Alta Prioridad</Badge>;
      case 'medium':
        return <Badge variant="default">Prioridad Media</Badge>;
      case 'low':
        return <Badge variant="secondary">Baja Prioridad</Badge>;
      default:
        return <Badge variant="outline">Sin Prioridad</Badge>;
    }
  };

  const handleVerificationSubmit = () => {
    if (!selectedContent || marcadoresDiagnostico.length === 0) return;
    
    // Simulate verification submission
    console.log('Verificación enviada:', {
      contenido: selectedContent,
      marcadores: marcadoresDiagnostico,
      justificaciones: marcadoresJustificaciones,
      enlaces: marcadoresEnlaces,
      notas: verificationNotes
    });
    
    // Calcular puntos basados en criterios detallados
    const basePoints = 20; // XP base por realizar un diagnóstico
    const markerBonus = marcadoresDiagnostico.length * 5; // 5 XP por cada marcador aplicado
    const justificationBonus = Object.keys(marcadoresJustificaciones).filter(k => marcadoresJustificaciones[k].length > 20).length * 10; // 10 XP por justificación detallada
    const linkBonus = Object.keys(marcadoresEnlaces).filter(k => marcadoresEnlaces[k]).length * 15; // 15 XP por cada enlace de fuente
    const totalPoints = basePoints + markerBonus + justificationBonus + linkBonus;
    
    // Sistema de niveles epidemiológicos (mismo que UserProfile)
    const levels = [
      { 
        level: 1, 
        title: 'VIGILANTE CENTINELA', 
        subtitle: 'Primera Línea de Defensa',
        minXP: 0, 
        maxXP: 500, 
        badge: '👁️'
      },
      { 
        level: 2, 
        title: 'EPIDEMIÓLOGO DIGITAL VOLUNTARIO', 
        subtitle: 'Analista de Contagio',
        minXP: 500, 
        maxXP: 2000, 
        badge: '🔬'
      },
      { 
        level: 3, 
        title: 'ESPECIALISTA EN INMUNOLOGÍA INFORMATIVA', 
        subtitle: 'Educomunicador Estratégico',
        minXP: 2000, 
        maxXP: 999999, 
        badge: '💉'
      }
    ];
    
    // Simular XP actual del usuario (850 = Nivel 2)
    const currentXP = 850 + totalPoints;
    const getCurrentLevel = (xp: number) => {
      return levels.find(level => xp >= level.minXP && xp < level.maxXP) || levels[levels.length - 1];
    };
    
    const currentLevel = getCurrentLevel(currentXP);
    const nextLevel = levels.find(level => level.level === currentLevel.level + 1);
    const progressToNext = nextLevel ? 
      Math.round(((currentXP - currentLevel.minXP) / (nextLevel.minXP - currentLevel.minXP)) * 100)
      : 100;
    
    // Simular total de diagnósticos completados
    const totalDiagnoses = 28 + 1; // María tiene 28, ahora 29
    
    // Racha diaria
    const streak = 12; // Misma racha que en el perfil
    
    // Insignias desbloqueables (alineadas con UserProfile)
    const availableBadges = [
      { id: 'analista-contagio', name: 'Analista de Contagio', icon: '🔬', description: 'Nivel 2 desbloqueado', threshold: 500 },
      { id: 'detector-25', name: 'Detector Activo', icon: '👁️', description: '25 diagnósticos completados', threshold: 25 },
      { id: 'racha-7', name: 'Constancia Inicial', icon: '🔥', description: '7 días consecutivos', threshold: 7 },
      { id: 'precision', name: 'Precisión Destacada', icon: '🎯', description: '90%+ de precisión', threshold: 90 }
    ];
    
    // Verificar si se desbloquea una nueva insignia
    let newBadge = null;
    if (totalDiagnoses === 25) {
      newBadge = availableBadges.find(b => b.id === 'detector-25');
    } else if (totalDiagnoses === 30) {
      newBadge = availableBadges.find(b => b.id === 'precision');
    }
    
    setGamificationData({
      pointsEarned: totalPoints,
      currentLevel: currentLevel.title,
      currentLevelBadge: currentLevel.badge,
      currentLevelSubtitle: currentLevel.subtitle,
      totalDiagnoses,
      streak,
      newBadge: newBadge ? newBadge.name : null,
      newBadgeIcon: newBadge ? newBadge.icon : null,
      newBadgeDescription: newBadge ? newBadge.description : null,
      currentXP,
      nextLevelXP: nextLevel ? nextLevel.minXP : currentLevel.maxXP,
      progressToNext
    });
    
    // Mostrar diálogo de éxito
    setShowSuccessDialog(true);
  };

  const handleCloseSuccessDialog = () => {
    // Cerrar el diálogo
    setShowSuccessDialog(false);
    
    // Limpiar formulario y regresar a la cola
    setTimeout(() => {
      setSelectedContent(null);
      setVerificationNotes('');
      setVerificationResult('');
      setMarcadoresDiagnostico([]);
      setMarcadoresJustificaciones({});
      setMarcadoresEnlaces({});
    }, 300);
  };

  const toggleMarcadorDiagnostico = (marcadorId: string) => {
    setMarcadoresDiagnostico(prev => {
      if (prev.includes(marcadorId)) {
        // Si se está quitando, también eliminar su justificación y enlace
        const newJustificaciones = { ...marcadoresJustificaciones };
        const newEnlaces = { ...marcadoresEnlaces };
        delete newJustificaciones[marcadorId];
        delete newEnlaces[marcadorId];
        setMarcadoresJustificaciones(newJustificaciones);
        setMarcadoresEnlaces(newEnlaces);
        return prev.filter(m => m !== marcadorId);
      } else {
        return [...prev, marcadorId];
      }
    });
  };

  const updateMarcadorJustificacion = (marcadorId: string, justificacion: string) => {
    setMarcadoresJustificaciones(prev => ({
      ...prev,
      [marcadorId]: justificacion
    }));
  };

  const updateMarcadorEnlace = (marcadorId: string, enlace: string) => {
    setMarcadoresEnlaces(prev => ({
      ...prev,
      [marcadorId]: enlace
    }));
  };

  const getMarcador = (marcadorId: string) => {
    return ETIQUETAS_CATEGORIAS.find(c => c.id === marcadorId);
  };

  const getMarcadorBadgeColor = (marcadorId: string) => {
    const marcador = getMarcador(marcadorId);
    if (!marcador) return 'bg-gray-100 text-gray-700 border-gray-300';
    
    const colorMap: { [key: string]: string } = {
      'verdadero': 'bg-green-100 text-green-700 border-green-300',
      'falso': 'bg-red-100 text-red-700 border-red-300',
      'enganoso': 'bg-orange-100 text-orange-700 border-orange-300',
      'satirico': 'bg-blue-100 text-blue-700 border-blue-300',
      'manipulado': 'bg-purple-100 text-purple-700 border-purple-300',
      'sin_contexto': 'bg-amber-100 text-amber-700 border-amber-300',
      'no_verificable': 'bg-gray-100 text-gray-700 border-gray-300',
      'teoria_conspirativa': 'bg-violet-100 text-violet-700 border-violet-300',
      'discurso_odio_racismo': 'bg-red-200 text-red-900 border-red-400',
      'discurso_odio_sexismo': 'bg-red-200 text-red-900 border-red-400',
      'discurso_odio_clasismo': 'bg-red-200 text-red-900 border-red-400',
      'discurso_odio_ableismo': 'bg-red-200 text-red-900 border-red-400',
      'incitacion_violencia': 'bg-red-300 text-red-950 border-red-500',
      'acoso_ciberbullying': 'bg-orange-200 text-orange-900 border-orange-400',
      'contenido_prejuicioso': 'bg-yellow-100 text-yellow-800 border-yellow-300',
      'bot_coordinado': 'bg-indigo-100 text-indigo-700 border-indigo-300',
      'suplantacion_identidad': 'bg-purple-200 text-purple-900 border-purple-400',
      'sensacionalista': 'bg-orange-100 text-orange-600 border-orange-300',
      'en_revision': 'bg-gray-100 text-gray-600 border-gray-300'
    };
    return colorMap[marcadorId] || 'bg-gray-100 text-gray-700 border-gray-300';
  };

  const getMarcadorColor = (marcadorId: string) => {
    const colorMap: { [key: string]: string } = {
      'verdadero': 'bg-emerald-500 hover:bg-emerald-600',
      'falso': 'bg-red-500 hover:bg-red-600',
      'enganoso': 'bg-orange-500 hover:bg-orange-600',
      'satirico': 'bg-blue-500 hover:bg-blue-600',
      'manipulado': 'bg-purple-500 hover:bg-purple-600',
      'sin_contexto': 'bg-amber-500 hover:bg-amber-600',
      'no_verificable': 'bg-gray-500 hover:bg-gray-600',
      'teoria_conspirativa': 'bg-violet-600 hover:bg-violet-700',
      'discurso_odio_racismo': 'bg-red-700 hover:bg-red-800',
      'discurso_odio_sexismo': 'bg-red-700 hover:bg-red-800',
      'discurso_odio_clasismo': 'bg-red-600 hover:bg-red-700',
      'discurso_odio_ableismo': 'bg-red-600 hover:bg-red-700',
      'incitacion_violencia': 'bg-red-900 hover:bg-red-950',
      'acoso_ciberbullying': 'bg-orange-700 hover:bg-orange-800',
      'contenido_prejuicioso': 'bg-yellow-600 hover:bg-yellow-700',
      'bot_coordinado': 'bg-indigo-600 hover:bg-indigo-700',
      'suplantacion_identidad': 'bg-purple-700 hover:bg-purple-800',
      'sensacionalista': 'bg-orange-400 hover:bg-orange-500',
      'en_revision': 'bg-gray-400 hover:bg-gray-500'
    };
    return colorMap[marcadorId] || 'bg-gray-500 hover:bg-gray-600';
  };

  const selectedContentData = pendingContents.find(c => c.id === selectedContent);

  // Componente de diálogo de éxito gamificado (alineado con sistema de UserProfile)
  const renderSuccessDialog = () => (
    <Dialog open={showSuccessDialog} onOpenChange={(open) => {
      // Solo permitir cerrar mediante el botón, no con ESC o clic fuera
      if (!open) return;
    }}>
      <DialogContent 
        className="max-w-md border-4 border-primary shadow-2xl [&>button]:hidden"
        onEscapeKeyDown={(e) => e.preventDefault()}
        onPointerDownOutside={(e) => e.preventDefault()}
      >
        <div className="relative">
          {/* Confetti effect background */}
          <div className="absolute inset-0 overflow-hidden pointer-events-none">
            <div className="absolute top-0 left-0 w-full h-full opacity-20">
              {[...Array(20)].map((_, i) => (
                <div
                  key={i}
                  className="absolute animate-bounce-subtle"
                  style={{
                    left: `${Math.random() * 100}%`,
                    top: `${Math.random() * 100}%`,
                    animationDelay: `${Math.random() * 2}s`,
                    fontSize: `${Math.random() * 20 + 10}px`
                  }}
                >
                  {['🎉', '⭐', '🔬', '💛', '✨', '🏆'][Math.floor(Math.random() * 6)]}
                </div>
              ))}
            </div>
          </div>

          <DialogHeader className="relative z-10">
            <div className="flex flex-col items-center space-y-4 py-4">
              {/* Botilito celebrando */}
              <div className="relative">
                <img 
                  src={botilitoImage} 
                  alt="Botilito" 
                  className="w-32 h-32 object-contain animate-bounce-subtle"
                />
                <div className="absolute -top-2 -right-2 bg-primary text-primary-foreground rounded-full p-2 animate-pulse-glow">
                  <Trophy className="h-6 w-6" />
                </div>
              </div>

              <DialogTitle className="text-center text-3xl">
                ¡Berraquísimo, parcero! 🎉
              </DialogTitle>
              
              <DialogDescription className="text-center text-lg">
                Tu diagnóstico está más afilado que un bisturí. ¡Sos una chimba contribuyendo a la inmunización digital del país! 💉💛
              </DialogDescription>
            </div>
          </DialogHeader>

          <div className="space-y-4 py-4 relative z-10">
            {/* Puntos ganados - diseño destacado */}
            <div className="bg-gradient-to-br from-primary/30 via-primary/20 to-primary/10 border-2 border-primary rounded-lg p-6 text-center">
              <div className="flex items-center justify-center space-x-2 mb-2">
                <Sparkles className="h-6 w-6 text-primary animate-pulse" />
                <p className="text-sm text-muted-foreground">¡Ganaste XP!</p>
              </div>
              <p className="text-5xl font-bold text-primary mb-1">+{gamificationData.pointsEarned}</p>
              <p className="text-sm text-muted-foreground">puntos de experiencia</p>
            </div>

            {/* Nivel actual - badge epidemiológico */}
            <div className="bg-gradient-to-r from-purple-100 via-purple-50 to-purple-100 border-2 border-purple-300 rounded-lg p-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-3">
                  <div className="text-4xl">{gamificationData.currentLevelBadge}</div>
                  <div>
                    <p className="text-xs text-purple-600 uppercase tracking-wider">Tu rango actual</p>
                    <p className="text-sm">{gamificationData.currentLevel}</p>
                    <p className="text-xs text-muted-foreground">{gamificationData.currentLevelSubtitle}</p>
                  </div>
                </div>
              </div>
              
              {/* Barra de progreso al siguiente nivel */}
              {gamificationData.progressToNext < 100 && (
                <div className="mt-3 space-y-1">
                  <div className="flex justify-between text-xs text-muted-foreground">
                    <span>{gamificationData.currentXP} XP</span>
                    <span>{gamificationData.nextLevelXP} XP</span>
                  </div>
                  <div className="w-full bg-gray-200 rounded-full h-2">
                    <div 
                      className="bg-gradient-to-r from-purple-500 to-purple-600 h-2 rounded-full transition-all duration-500"
                      style={{ width: `${gamificationData.progressToNext}%` }}
                    />
                  </div>
                  <p className="text-xs text-center text-muted-foreground mt-1">
                    {gamificationData.progressToNext}% al siguiente nivel
                  </p>
                </div>
              )}
            </div>

            {/* Estadísticas clave */}
            <div className="grid grid-cols-3 gap-2">
              <div className="bg-secondary/30 rounded-lg p-3 text-center border border-secondary/40">
                <div className="flex items-center justify-center mb-1">
                  <Microscope className="h-4 w-4 text-primary" />
                </div>
                <p className="text-xl">{gamificationData.totalDiagnoses}</p>
                <p className="text-xs text-muted-foreground">Diagnósticos</p>
              </div>
              
              <div className="bg-orange-50 rounded-lg p-3 text-center border border-orange-200">
                <div className="flex items-center justify-center mb-1">
                  <Flame className="h-4 w-4 text-orange-500" />
                </div>
                <p className="text-xl">{gamificationData.streak}</p>
                <p className="text-xs text-muted-foreground">Días racha</p>
              </div>
              
              <div className="bg-green-50 rounded-lg p-3 text-center border border-green-200">
                <div className="flex items-center justify-center mb-1">
                  <TrendingUp className="h-4 w-4 text-green-500" />
                </div>
                <p className="text-xl">92%</p>
                <p className="text-xs text-muted-foreground">Precisión</p>
              </div>
            </div>

            {/* Insignia desbloqueada */}
            {gamificationData.newBadge && (
              <div className="bg-gradient-to-r from-yellow-400 via-yellow-300 to-yellow-400 rounded-lg p-4 text-center border-2 border-yellow-500 shadow-lg animate-pulse-glow">
                <div className="flex items-center justify-center space-x-2 mb-2">
                  <Award className="h-6 w-6 text-yellow-800" />
                  <p className="text-yellow-900">¡Insignia Desbloqueada!</p>
                </div>
                <div className="flex items-center justify-center space-x-2 mb-1">
                  <span className="text-2xl">{gamificationData.newBadgeIcon}</span>
                  <p className="text-lg text-yellow-900">{gamificationData.newBadge}</p>
                </div>
                <p className="text-xs text-yellow-800">{gamificationData.newBadgeDescription}</p>
              </div>
            )}

            {/* Mensaje motivacional con tono colombiano */}
            <div className="bg-muted/30 rounded-lg p-4 text-center border border-muted">
              <p className="text-sm italic">
                "Cada diagnóstico que haces ayuda a proteger a miles de colombianos de la desinformación. ¡Sigue así, crack!" 💪🇨🇴
              </p>
            </div>

            {/* Botón para continuar */}
            <Button
              onClick={handleCloseSuccessDialog}
              className="w-full bg-primary hover:bg-primary/90 text-primary-foreground text-lg py-6"
            >
              <CheckCircle className="mr-2 h-5 w-5" />
              ¡A darle duro al siguiente caso!
            </Button>
          </div>
        </div>
      </DialogContent>
    </Dialog>
  );

  // FLUJO NUEVO: Si no hay contenido seleccionado, mostrar solo la cola
  if (!selectedContentData) {
    return (
      <div className="space-y-6">
        {/* Franja superior de Botilito */}
        <div className="bg-[#ffe97a] border-2 border-[#ffda00] rounded-lg p-4 shadow-lg">
          <div className="flex items-center space-x-4">
            <img 
              src={botilitoImage} 
              alt="Botilito" 
              className="w-24 h-24 object-contain mt-[0px] mr-[16px] mb-[-18px] ml-[0px]"
            />
            <div className="flex-1">
              <p className="text-xl">
                ¡Ey parcero! Acá están los casos que necesitan ojo humano 🔍👀
              </p>
              <p className="text-sm mt-1 opacity-80">
                Ya hice mi tarea con la IA, pero ahora necesito que vos y tus colegas hagan el diagnóstico fino. ¡Entre todos le paramos bolas a la desinformación! 💪
              </p>
            </div>
          </div>
        </div>

        {/* Solo la cola de casos pendientes */}
        <Card>
          <CardHeader>
            <div className="flex items-center justify-between">
              <div>
                <CardTitle className="flex items-center space-x-2 text-[24px]">
                  <Layers className="h-5 w-5 text-primary" />
                  <span>Listado de Casos</span>
                </CardTitle>
                <CardDescription>
                  Casos bajo análisis epidemiológico que requieren diagnóstico especializado
                </CardDescription>
              </div>
              <Badge variant="outline" className="bg-yellow-50 text-yellow-700 border-yellow-200">
                <Hash className="h-3 w-3 mr-1" />
                {pendingContents.length} casos activos
              </Badge>
            </div>

            {/* Search and Filter Controls */}
            <div className="flex space-x-2 mt-4">
              <div className="relative flex-1">
                <Search className="absolute left-3 top-2.5 h-4 w-4 text-muted-foreground" />
                <Input
                  placeholder="Buscar casos por título o contenido..."
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                  className="pl-10 border border-gray-300"
                />
              </div>
              <div className="flex items-center space-x-2">
                <Filter className="h-4 w-4 text-muted-foreground" />
                <select 
                  value={selectedFilter} 
                  onChange={(e) => setSelectedFilter(e.target.value)}
                  className="px-3 py-2 border rounded-md text-sm bg-background"
                >
                  <option value="all">Todos los casos</option>
                  <option value="high">Alta prioridad</option>
                  <option value="medium">Prioridad media</option>
                  <option value="text">Solo texto</option>
                  <option value="image">Solo imágenes</option>
                  <option value="video">Solo videos</option>
                </select>
              </div>
            </div>
          </CardHeader>
          <CardContent className="space-y-4">
            {/* Lista de casos con altura fija y scroll */}
            <div className="space-y-4 max-h-[600px] min-h-[500px] overflow-y-auto custom-scrollbar">
              {(() => {
                // Calcular índices para la paginación
                const indexOfLastCase = currentPage * casesPerPage;
                const indexOfFirstCase = indexOfLastCase - casesPerPage;
                const currentCases = pendingContents.slice(indexOfFirstCase, indexOfLastCase);
                
                return currentCases.map((content) => {
                  const TypeIcon = getTypeIcon(content.type);
              
              return (
                <div
                  key={content.id}
                  className="p-4 border rounded-lg cursor-pointer transition-all duration-200 bg-gray-50/50 hover:bg-accent hover:shadow-md hover:border-primary/50"
                  onClick={() => setSelectedContent(content.id)}
                >
                  <div className="flex items-start justify-between space-x-3">
                    <div className="flex items-start space-x-3 flex-1">
                      <div className="p-3 bg-muted rounded-lg">
                        <TypeIcon className="h-6 w-6 text-muted-foreground" />
                      </div>
                      <div className="space-y-2 flex-1">
                        <div className="flex items-center justify-between">
                          <div className="flex items-center space-x-2">
                            <Badge variant="outline" className="text-xs bg-white border-primary/30 font-mono">
                              {content.id}
                            </Badge>
                            {content.title && <h4 className="font-medium text-sm">{content.title}</h4>}
                          </div>
                          <div className="flex items-center space-x-2">
                            {getPriorityBadge(content.priority)}
                          </div>
                        </div>
                        
                        <div className="space-y-1">
                          {/* Fecha y hora de reporte + Usuario */}
                          <div className="flex items-center flex-wrap gap-x-3 gap-y-1 text-xs text-muted-foreground">
                            <div className="flex items-center space-x-1">
                              <Calendar className="h-3 w-3" />
                              <span>
                                {new Date(content.submittedAt).toLocaleDateString('es-CO', { 
                                  year: 'numeric', 
                                  month: 'short', 
                                  day: 'numeric',
                                  hour: '2-digit',
                                  minute: '2-digit'
                                })}
                                <span className="ml-1">
                                  (hace {Math.floor((Date.now() - new Date(content.submittedAt).getTime()) / (1000 * 60 * 60))}h)
                                </span>
                              </span>
                            </div>
                            
                            <Separator orientation="vertical" className="h-3" />
                            
                            <div className="flex items-center space-x-1">
                              <User className="h-3 w-3" />
                              <span>Reportado por: <span className="font-medium">{content.submittedBy}</span></span>
                            </div>
                          </div>
                          
                          {/* Cantidad de diagnósticos previos */}
                          {content.votesCount > 0 && (
                            <div className="flex items-center space-x-1 text-xs text-muted-foreground">
                              <Users className="h-3 w-3" />
                              <span>{content.votesCount} diagnósticos humanos</span>
                            </div>
                          )}
                          
                          {/* Consenso Humano + IA: Porcentaje de coincidencia */}
                          <div className="flex items-center space-x-1 text-xs">
                            <Gauge className="h-3 w-3 text-purple-600" />
                            <span className="text-muted-foreground">Consenso Humano + IA:</span>
                            {(() => {
                              const humanMarkers = content.consensusMarkers || [];
                              const aiMarkers = content.aiAnalysis?.detectedMarkers || [];
                              
                              // Si no hay consenso humano todavía
                              if (humanMarkers.length === 0) {
                                return (
                                  <Badge variant="outline" className="text-[10px] px-1.5 py-0 bg-gray-100 text-gray-600 border-gray-300">
                                    Sin datos
                                  </Badge>
                                );
                              }
                              
                              // Calcular coincidencia
                              const commonMarkers = humanMarkers.filter(marker => aiMarkers.includes(marker));
                              const totalUniqueMarkers = new Set([...humanMarkers, ...aiMarkers]).size;
                              const coincidencePercentage = totalUniqueMarkers > 0 
                                ? Math.round((commonMarkers.length / totalUniqueMarkers) * 100) 
                                : 0;
                              
                              // Determinar color basado en el porcentaje
                              const coincidenceColor = coincidencePercentage >= 70
                                ? 'bg-green-100 text-green-700 border-green-300'
                                : coincidencePercentage >= 40
                                  ? 'bg-yellow-100 text-yellow-700 border-yellow-300'
                                  : 'bg-red-100 text-red-700 border-red-300';
                              
                              return (
                                <Badge variant="outline" className={`text-[10px] px-1.5 py-0 ${coincidenceColor}`}>
                                  {coincidencePercentage}% coincidencia
                                </Badge>
                              );
                            })()}
                          </div>
                        </div>
                        
                        <div className="space-y-2">
                          {/* Diagnóstico desinfodémico unificado */}
                          {(() => {
                            // Priorizar diagnóstico consensuado si existe, sino mostrar el de Botilito
                            const marcadores = content.consensusMarkers && content.consensusMarkers.length > 0 
                              ? content.consensusMarkers 
                              : content.aiAnalysis.detectedMarkers || [];
                            const isConsensus = content.consensusMarkers && content.consensusMarkers.length > 0;
                            const IconComponent = isConsensus ? Users : Bot;
                            
                            if (marcadores.length === 0) return null;
                            
                            return (
                              <div className="space-y-1">
                                <div className="flex items-center space-x-1 text-xs text-muted-foreground">
                                  <IconComponent className="h-3 w-3" />
                                  <span>Diagnóstico desinfodémico:</span>
                                  {!isConsensus && (
                                    <Badge variant="outline" className="text-[10px] px-1.5 py-0 ml-1 bg-blue-50 text-blue-700 border-blue-200">
                                      analizado solo por Botilito
                                    </Badge>
                                  )}
                                </div>
                                <div className="grid grid-cols-2 gap-1">
                                  {marcadores.map((marcadorId, index) => {
                                    const marcador = getMarcador(marcadorId);
                                    if (!marcador) return null;
                                    return (
                                      <Badge 
                                        key={index} 
                                        variant="outline" 
                                        className={`text-xs px-2 py-0.5 ${getMarcadorBadgeColor(marcadorId)}`}
                                      >
                                        {marcador.label}
                                      </Badge>
                                    );
                                  })}
                                </div>
                              </div>
                            );
                          })()}
                          
                          {/* URL a la noticia original si existe */}
                          {content.url && (
                            <div className="flex items-center space-x-1 text-xs text-blue-600">
                              <Link className="h-3 w-3 flex-shrink-0" />
                              <span className="truncate">{content.url}</span>
                            </div>
                          )}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              );
            });
              })()}
            </div>
            
            {/* Controles de paginación */}
            {pendingContents.length > casesPerPage && (
              <div className="pt-4 border-t">
                <div className="flex items-center justify-between">
                  <div className="text-sm text-muted-foreground">
                    Mostrando {((currentPage - 1) * casesPerPage) + 1} - {Math.min(currentPage * casesPerPage, pendingContents.length)} de {pendingContents.length} casos
                  </div>
                  <div className="flex items-center space-x-2">
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}
                      disabled={currentPage === 1}
                    >
                      Anterior
                    </Button>
                    <div className="flex items-center space-x-1">
                      {Array.from({ length: Math.ceil(pendingContents.length / casesPerPage) }, (_, i) => i + 1).map((page) => (
                        <Button
                          key={page}
                          variant={currentPage === page ? "default" : "outline"}
                          size="sm"
                          onClick={() => setCurrentPage(page)}
                          className={currentPage === page ? "bg-primary text-primary-foreground" : ""}
                        >
                          {page}
                        </Button>
                      ))}
                    </div>
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={() => setCurrentPage(prev => Math.min(Math.ceil(pendingContents.length / casesPerPage), prev + 1))}
                      disabled={currentPage === Math.ceil(pendingContents.length / casesPerPage)}
                    >
                      Siguiente
                    </Button>
                  </div>
                </div>
              </div>
            )}
          </CardContent>
        </Card>
      </div>
    );
  }

  // FLUJO NUEVO: Si hay contenido seleccionado, mostrar el laboratorio completo
  return (
    <div className="space-y-6">
      {/* Franja de Botilito para el detalle del caso */}
      <div className="bg-[#ffe97a] border-2 border-[#ffda00] rounded-lg p-4 shadow-lg">
        <div className="flex items-center space-x-4">
          <img 
            src={botilitoImage} 
            alt="Botilito" 
            className="w-24 h-24 object-contain mt-[0px] mr-[16px] mb-[-18px] ml-[0px]"
          />
          <div className="flex-1">
            <p className="text-xl">
              ¡Ey parcero! Acá tienes el detalle completo de este caso 🔬👀
            </p>
            <p className="text-sm mt-1 opacity-80">
              Ya hice mi análisis, pero ahora vos y tu experiencia pueden afinar el diagnóstico. ¿Cómo lo ves? Dale duro al análisis! 💪
            </p>
          </div>
        </div>
      </div>

      {/* Botón para volver a la lista */}
      <div className="flex justify-start">
        <Button
          variant="outline"
          onClick={() => setSelectedContent(null)}
          className="border-2 border-gray-300 hover:border-primary hover:bg-primary/10"
        >
          <ArrowLeft className="mr-2 h-4 w-4" />
          Volver a la lista de casos
        </Button>
      </div>

      {/* Laboratorio de diagnóstico completo */}
      <Card>
        <CardHeader>
          {/* Franja unificada con toda la info del caso */}
          <div className="flex items-center justify-between gap-4 bg-gradient-to-r from-primary/10 via-secondary/10 to-primary/10 px-6 py-4 rounded-lg border-2 border-primary/30 mb-4">
            {/* Código del caso */}
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-primary/20 rounded-lg">
                <Shield className="h-5 w-5 text-primary" />
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Código del Caso</p>
                <p className="font-mono font-medium">{selectedContentData.id}</p>
              </div>
            </div>

            <Separator orientation="vertical" className="h-12" />

            {/* Prioridad */}
            <div>
              <p className="text-xs text-muted-foreground mb-1">Prioridad</p>
              {getPriorityBadge(selectedContentData.priority)}
            </div>

            <Separator orientation="vertical" className="h-12" />

            {/* Reportado por */}
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-blue-100 rounded-lg">
                <User className="h-4 w-4 text-blue-600" />
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Reportado por</p>
                <p className="text-sm font-medium">{selectedContentData.submittedBy}</p>
              </div>
            </div>

            <Separator orientation="vertical" className="h-12" />

            {/* Fecha de reporte */}
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-emerald-100 rounded-lg">
                <Calendar className="h-4 w-4 text-emerald-600" />
              </div>
              <div>
                <p className="text-xs text-muted-foreground">Fecha de reporte</p>
                <p className="text-sm font-medium">
                  {new Date(selectedContentData.submittedAt).toLocaleDateString('es-CO', {
                    day: 'numeric',
                    month: 'short',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                  })}
                </p>
              </div>
            </div>
          </div>

          {/* Título de la sección */}
          <CardTitle className="flex items-center space-x-2">
            <Microscope className="h-5 w-5 text-primary" />
            <span>Análisis Especializado del Caso</span>
          </CardTitle>
        </CardHeader>
        <CardContent className="space-y-6">
          {/* Content Details */}
          <div>
            <div className="p-4 bg-secondary/30 border-2 border-secondary/60 rounded-lg space-y-3">
              {/* Captura de la noticia con etiquetas superpuestas */}
              {selectedContentData.screenshot && (
                <div>
                  <Label>Captura de la noticia:</Label>
                  <div className="mt-2 rounded-lg overflow-hidden border-2 border-secondary/40 relative max-h-48">
                    <img 
                      src={selectedContentData.screenshot} 
                      alt="Captura de la noticia" 
                      className="w-full h-48 object-cover object-top"
                    />
                  </div>
                </div>
              )}
              
              {/* Fuente y tema */}
              {(selectedContentData.source || selectedContentData.theme) && (
                <div className="flex flex-wrap items-center gap-4 pb-2">
                  {/* Fuente de la noticia */}
                  {selectedContentData.source && (
                    <div className="flex items-center space-x-2">
                      <Newspaper className="h-4 w-4 text-primary" />
                      <Label className="text-sm">Fuente:</Label>
                      <a 
                        href={selectedContentData.source.url} 
                        target="_blank" 
                        rel="noopener noreferrer"
                        className="inline-flex items-center space-x-1.5 px-3 py-1.5 bg-secondary/60 hover:bg-secondary text-secondary-foreground rounded-md transition-colors text-xs no-hover-effect"
                      >
                        <span>{selectedContentData.source.name}</span>
                        <ExternalLink className="h-3 w-3" />
                      </a>
                    </div>
                  )}
                  
                  {/* Tema del contenido */}
                  {selectedContentData.theme && (
                    <div className="flex items-center space-x-2">
                      <Tag className="h-4 w-4 text-primary" />
                      <Label className="text-sm">Tema:</Label>
                      <Badge variant="outline" className="text-xs border-primary/40 bg-primary/10">
                        {selectedContentData.theme}
                      </Badge>
                    </div>
                  )}
                </div>
              )}
              
              {/* Titular de la noticia */}
              {selectedContentData.headline && (
                <div>
                  <Label>Titular de la noticia:</Label>
                  <div className="mt-1 p-3 bg-primary/20 border border-primary/40 rounded-lg">
                    <p className="font-medium">{selectedContentData.headline}</p>
                  </div>
                </div>
              )}
              
              {/* Contenido analizado */}
              <div>
                <Label>Contenido analizado:</Label>
                <p className="text-sm text-muted-foreground mt-1 leading-relaxed">
                  {selectedContentData.type === 'text' ? 
                    selectedContentData.content : 
                    selectedContentData.description || selectedContentData.content
                  }
                </p>
              </div>
            </div>

            {/* Evaluación epidemiológica */}
            {selectedContentData.aiAnalysis.summary && (
              <div className="mt-6">
                <Label>Evaluación epidemiológica:</Label>
                <p className="text-sm text-muted-foreground mt-1">{selectedContentData.aiAnalysis.summary}</p>
              </div>
            )}
          </div>

          <Separator />

          {/* Comparativa de Diagnósticos: Botilito vs Verificadores Humanos */}
          <div>
            <Label className="mb-4 flex items-center space-x-2">
              <Microscope className="h-5 w-5 text-primary" />
              <span>Comparativa de Diagnósticos</span>
            </Label>
            
            <div className="grid grid-cols-2 gap-6">
              {/* Columna 1: Diagnóstico de Botilito (IA) */}
              <div className="space-y-4 border border-gray-300 rounded-lg p-4">
                <div className="flex items-center space-x-2 mb-3">
                  <div className="p-2 bg-purple-100 rounded-lg">
                    <Bot className="h-5 w-5 text-purple-600" />
                  </div>
                  <div>
                    <h3 className="font-medium">Diagnóstico de Botilito</h3>
                    <p className="text-xs text-muted-foreground">Análisis inicial de IA</p>
                  </div>
                </div>
                
                {/* Etiquetas de Botilito - SIN porcentajes */}
                <div className="space-y-2">
                  <Label className="text-xs text-muted-foreground">Marcadores detectados:</Label>
                  <div className="flex flex-wrap gap-2">
                    {selectedContentData.aiAnalysis.detectedMarkers?.map((marcadorId) => {
                      const marcador = getMarcador(marcadorId);
                      if (!marcador) return null;
                      const Icon = marcador.icon;
                      
                      return (
                        <Badge 
                          key={marcadorId}
                          variant="outline"
                          className="bg-white border-gray-300"
                        >
                          <Icon className={`h-4 w-4 mr-1.5 ${marcador.color}`} />
                          {marcador.label}
                        </Badge>
                      );
                    })}
                  </div>
                </div>
                
                {/* Comentario de Botilito */}
                {selectedContentData.aiAnalysis.summary && (
                  <div className="p-3 bg-purple-50 border border-purple-200 rounded-lg">
                    <Label className="text-xs text-muted-foreground mb-1 flex items-center space-x-1">
                      <MessageSquare className="h-3 w-3" />
                      <span>Análisis:</span>
                    </Label>
                    <p className="text-sm mt-1">{selectedContentData.aiAnalysis.summary}</p>
                  </div>
                )}
              </div>

              {/* Columna 2: Diagnóstico de Verificadores Humanos */}
              <div className="space-y-4 border border-gray-300 rounded-lg p-4">
                <div className="flex items-center justify-between mb-3">
                  <div className="flex items-center space-x-2">
                    <div className="p-2 bg-emerald-100 rounded-lg">
                      <Users className="h-5 w-5 text-emerald-600" />
                    </div>
                    <div>
                      <h3 className="font-medium">Diagnóstico de Verificadores</h3>
                      <p className="text-xs text-muted-foreground">Consenso humano</p>
                    </div>
                  </div>
                  {/* Número de verificadores */}
                  <Badge variant="outline" className="bg-emerald-50 border-emerald-300">
                    <Users className="h-3 w-3 mr-1" />
                    12 verificadores
                  </Badge>
                </div>
                
                {/* Etiquetas de Verificadores - CON porcentajes */}
                <div className="space-y-2">
                  <Label className="text-xs text-muted-foreground">Marcadores por consenso:</Label>
                  <div className="space-y-2">
                    {/* Simulamos datos de consenso basados en los marcadores de IA */}
                    {selectedContentData.aiAnalysis.detectedMarkers?.map((marcadorId, index) => {
                      const marcador = getMarcador(marcadorId);
                      if (!marcador) return null;
                      const Icon = marcador.icon;
                      
                      // Porcentajes simulados de consenso (en producción vendrían de la BD)
                      const consensusPercentages = [92, 83, 75];
                      const percentage = consensusPercentages[index] || 70;
                      
                      return (
                        <div key={marcadorId} className="flex items-center justify-between py-2 border-b last:border-b-0">
                          <div className="flex items-center space-x-2">
                            <Icon className={`h-4 w-4 ${marcador.color}`} />
                            <span className="text-sm">{marcador.label}</span>
                          </div>
                          <span className="text-sm font-medium text-muted-foreground">
                            {percentage}%
                          </span>
                        </div>
                      );
                    })}
                  </div>
                </div>
              </div>
            </div>
          </div>

          <Separator />

          {/* Marcadores de Diagnóstico Desinfodémico */}
          <div>
            <Label className="mb-3 flex items-center space-x-2">
              <Target className="h-4 w-4 text-primary" />
              <span>Marcadores de Diagnóstico Desinfodémico</span>
            </Label>
            <p className="text-xs text-muted-foreground mb-4">
              Selecciona los marcadores que apliquen. Al seleccionar cada uno, puedes justificar tu elección y agregar enlaces de soporte.
            </p>
            
            <div className="grid grid-cols-3 gap-3">
              {ETIQUETAS_CATEGORIAS.map((marcador) => {
                const Icon = marcador.icon;
                const isSelected = marcadoresDiagnostico.includes(marcador.id);
                
                return (
                  <div 
                    key={marcador.id}
                    className={`border-2 rounded-lg transition-all ${
                      isSelected 
                        ? `${marcador.border} ${marcador.bg} shadow-sm col-span-3` 
                        : 'border-gray-200 hover:border-primary/30 hover:bg-accent/30'
                    }`}
                  >
                    {/* Header del marcador - siempre visible */}
                    <div 
                      className="flex items-start space-x-3 p-4 cursor-pointer"
                      onClick={() => toggleMarcadorDiagnostico(marcador.id)}
                    >
                      <Checkbox 
                        checked={isSelected}
                        onCheckedChange={() => toggleMarcadorDiagnostico(marcador.id)}
                        className="mt-1"
                      />
                      <div className="flex-1">
                        <div className="flex items-center space-x-2 mb-1">
                          <Icon className={`h-5 w-5 ${marcador.color}`} />
                          <Label className="cursor-pointer font-medium">
                            {marcador.label}
                          </Label>
                        </div>
                        <p className="text-xs text-muted-foreground">
                          {marcador.descripcion}
                        </p>
                      </div>
                    </div>
                    
                    {/* Área expandida con justificación y enlace - solo cuando está seleccionado */}
                    {isSelected && (
                      <div className="px-4 pb-4 space-y-3 border-t pt-3 mt-2">
                        {/* Campo de justificación */}
                        <div>
                          <Label className="text-xs text-muted-foreground mb-1 flex items-center space-x-1">
                            <MessageSquare className="h-3 w-3" />
                            <span>Justificación:</span>
                          </Label>
                          <Textarea
                            placeholder={`Explica por qué este contenido presenta características de "${marcador.label}"...`}
                            value={marcadoresJustificaciones[marcador.id] || ''}
                            onChange={(e) => updateMarcadorJustificacion(marcador.id, e.target.value)}
                            className="text-sm resize-none"
                            rows={3}
                          />
                        </div>
                        
                        {/* Campo de enlace de soporte */}
                        <div>
                          <Label className="text-xs text-muted-foreground mb-1 flex items-center space-x-1">
                            <Link2 className="h-3 w-3" />
                            <span>Enlace de soporte (opcional):</span>
                          </Label>
                          <Input
                            type="url"
                            placeholder="https://ejemplo.com/fuente-verificacion"
                            value={marcadoresEnlaces[marcador.id] || ''}
                            onChange={(e) => updateMarcadorEnlace(marcador.id, e.target.value)}
                            className="text-sm"
                          />
                          <p className="text-xs text-muted-foreground mt-1">
                            Agrega un enlace a fuentes, artículos o evidencia que respalde tu diagnóstico
                          </p>
                        </div>
                      </div>
                    )}
                  </div>
                );
              })}
            </div>
          </div>

          <Separator />

          {/* Verification Notes */}
          <div>
            <Label htmlFor="notes" className="mb-2 flex items-center space-x-2">
              <MessageSquare className="h-4 w-4 text-primary" />
              <span>Notas de diagnóstico</span>
            </Label>
            <Textarea
              id="notes"
              placeholder="Agrega observaciones, fuentes consultadas, o cualquier información relevante sobre tu diagnóstico..."
              value={verificationNotes}
              onChange={(e) => setVerificationNotes(e.target.value)}
              rows={4}
              className="resize-none border border-gray-300"
            />
          </div>

          <Separator />

          {/* Submit Button */}
          <div className="flex items-center justify-between pt-4">
            <div className="text-sm text-muted-foreground">
              {marcadoresDiagnostico.length > 0 && (
                <p className="flex items-center space-x-1">
                  <Target className="h-4 w-4" />
                  <span>{marcadoresDiagnostico.length} marcador(es) seleccionado(s)</span>
                </p>
              )}
            </div>
            <Button 
              onClick={handleVerificationSubmit}
              disabled={marcadoresDiagnostico.length === 0}
              size="lg"
              className="bg-primary hover:bg-primary/90 text-primary-foreground"
            >
              <Send className="mr-2 h-4 w-4" />
              Enviar diagnóstico humano
            </Button>
          </div>

          {marcadoresDiagnostico.length === 0 && (
            <Alert className="bg-[rgb(255,140,140)]">
              <AlertCircle className="h-4 w-4" />
              <AlertDescription className="text-[rgb(0,0,0)]">
                Debes seleccionar al menos un marcador de diagnóstico
              </AlertDescription>
            </Alert>
          )}

          <Separator />

          {/* Sección de Verificaciones de Otros y Debate - Grid 2 columnas */}
          <div className="grid grid-cols-2 gap-6">
            {/* Columna 1: Verificaciones de Otros Verificadores */}
            <div className="space-y-4 border border-gray-300 rounded-lg p-4">
              <div className="flex items-center space-x-2 mb-4">
                <Users className="h-5 w-5 text-primary" />
                <h3 className="font-medium">Verificaciones de Otros Colegas</h3>
              </div>

              {/* Lista de verificaciones de otros verificadores */}
              <div className="space-y-4">
                {/* Verificador 1 */}
                <div className="border border-gray-300 rounded-lg p-4 space-y-3">
                  <div className="flex items-center justify-between">
                    <div className="flex items-center space-x-2">
                      <div className="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center">
                        <User className="h-4 w-4 text-blue-600" />
                      </div>
                      <div>
                        <p className="text-sm font-medium">Carlos Ramírez</p>
                        <p className="text-xs text-muted-foreground">Hace 2 horas</p>
                      </div>
                    </div>
                    <Badge variant="outline" className="bg-emerald-50 border-emerald-300 text-xs">
                      <CheckCircle className="h-3 w-3 mr-1" />
                      Verificado
                    </Badge>
                  </div>

                  {/* Marcadores seleccionados */}
                  <div>
                    <Label className="text-xs text-muted-foreground mb-2">Marcadores:</Label>
                    <div className="flex flex-wrap gap-1.5">
                      {['enganoso', 'sensacionalista'].map((marcadorId) => {
                        const marcador = getMarcador(marcadorId);
                        if (!marcador) return null;
                        const Icon = marcador.icon;
                        return (
                          <Badge 
                            key={marcadorId}
                            variant="outline"
                            className="bg-white border-gray-300 text-xs"
                          >
                            <Icon className={`h-3 w-3 mr-1 ${marcador.color}`} />
                            {marcador.label}
                          </Badge>
                        );
                      })}
                    </div>
                  </div>

                  {/* Notas del verificador */}
                  <div>
                    <Label className="text-xs text-muted-foreground mb-1">Notas de diagnóstico:</Label>
                    <p className="text-sm p-2 bg-accent/20 rounded-md">
                      El titular usa lenguaje sensacionalista sin evidencia científica respaldada. No encontré estudios de Harvard que confirmen esto.
                    </p>
                  </div>
                </div>

                {/* Verificador 2 */}
                <div className="border border-gray-300 rounded-lg p-4 space-y-3">
                  <div className="flex items-center justify-between">
                    <div className="flex items-center space-x-2">
                      <div className="w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center">
                        <User className="h-4 w-4 text-purple-600" />
                      </div>
                      <div>
                        <p className="text-sm font-medium">Ana Martínez</p>
                        <p className="text-xs text-muted-foreground">Hace 4 horas</p>
                      </div>
                    </div>
                    <Badge variant="outline" className="bg-emerald-50 border-emerald-300 text-xs">
                      <CheckCircle className="h-3 w-3 mr-1" />
                      Verificado
                    </Badge>
                  </div>

                  {/* Marcadores seleccionados */}
                  <div>
                    <Label className="text-xs text-muted-foreground mb-2">Marcadores:</Label>
                    <div className="flex flex-wrap gap-1.5">
                      {['enganoso', 'no_verificable'].map((marcadorId) => {
                        const marcador = getMarcador(marcadorId);
                        if (!marcador) return null;
                        const Icon = marcador.icon;
                        return (
                          <Badge 
                            key={marcadorId}
                            variant="outline"
                            className="bg-white border-gray-300 text-xs"
                          >
                            <Icon className={`h-3 w-3 mr-1 ${marcador.color}`} />
                            {marcador.label}
                          </Badge>
                        );
                      })}
                    </div>
                  </div>

                  {/* Notas del verificador */}
                  <div>
                    <Label className="text-xs text-muted-foreground mb-1">Notas de diagnóstico:</Label>
                    <p className="text-sm p-2 bg-accent/20 rounded-md">
                      Coincido con Carlos. Además, la fuente "Noticias Falsas" no tiene credibilidad verificada. No hay manera de validar la información presentada.
                    </p>
                  </div>
                </div>

                {/* Verificador 3 */}
                <div className="border border-gray-300 rounded-lg p-4 space-y-3">
                  <div className="flex items-center justify-between">
                    <div className="flex items-center space-x-2">
                      <div className="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center">
                        <User className="h-4 w-4 text-green-600" />
                      </div>
                      <div>
                        <p className="text-sm font-medium">Diego Torres</p>
                        <p className="text-xs text-muted-foreground">Hace 6 horas</p>
                      </div>
                    </div>
                    <Badge variant="outline" className="bg-emerald-50 border-emerald-300 text-xs">
                      <CheckCircle className="h-3 w-3 mr-1" />
                      Verificado
                    </Badge>
                  </div>

                  {/* Marcadores seleccionados */}
                  <div>
                    <Label className="text-xs text-muted-foreground mb-2">Marcadores:</Label>
                    <div className="flex flex-wrap gap-1.5">
                      {['enganoso', 'sensacionalista', 'no_verificable'].map((marcadorId) => {
                        const marcador = getMarcador(marcadorId);
                        if (!marcador) return null;
                        const Icon = marcador.icon;
                        return (
                          <Badge 
                            key={marcadorId}
                            variant="outline"
                            className="bg-white border-gray-300 text-xs"
                          >
                            <Icon className={`h-3 w-3 mr-1 ${marcador.color}`} />
                            {marcador.label}
                          </Badge>
                        );
                      })}
                    </div>
                  </div>

                  {/* Notas del verificador */}
                  <div>
                    <Label className="text-xs text-muted-foreground mb-1">Notas de diagnóstico:</Label>
                    <p className="text-sm p-2 bg-accent/20 rounded-md">
                      Busqué en PubMed y Google Scholar. No hay estudios recientes de Harvard sobre limón y diabetes. Claramente engañoso y peligroso para personas diabéticas.
                    </p>
                  </div>
                </div>
              </div>
            </div>

            {/* Columna 2: Comentarios y Debate Libre */}
            <div className="space-y-4 border border-gray-300 rounded-lg p-4">
              <div className="flex items-center space-x-2 mb-4">
                <MessageSquare className="h-5 w-5 text-primary" />
                <h3 className="font-medium">Comentarios y Debate</h3>
              </div>

              {/* Lista de comentarios */}
              <div className="space-y-3 max-h-[500px] overflow-y-auto pr-2">
                {/* Comentario 1 */}
                <div className="border-l-2 border-primary/30 pl-3 py-2">
                  <div className="flex items-start space-x-2">
                    <div className="w-7 h-7 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0">
                      <User className="h-3.5 w-3.5 text-blue-600" />
                    </div>
                    <div className="flex-1">
                      <div className="flex items-center space-x-2 mb-1">
                        <p className="text-sm font-medium">Carlos Ramírez</p>
                        <span className="text-xs text-muted-foreground">Hace 2 horas</span>
                      </div>
                      <p className="text-sm">
                        Parceros, revisé la base de datos de Harvard Medical School y no hay nada publicado sobre esto. Es claramente fake news.
                      </p>
                    </div>
                  </div>
                </div>

                {/* Comentario 2 */}
                <div className="border-l-2 border-primary/30 pl-3 py-2">
                  <div className="flex items-start space-x-2">
                    <div className="w-7 h-7 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0">
                      <User className="h-3.5 w-3.5 text-purple-600" />
                    </div>
                    <div className="flex-1">
                      <div className="flex items-center space-x-2 mb-1">
                        <p className="text-sm font-medium">Ana Martínez</p>
                        <span className="text-xs text-muted-foreground">Hace 3 horas</span>
                      </div>
                      <p className="text-sm">
                        Totalmente de acuerdo. Además, vi que esta misma noticia circuló el año pasado con otro titular. Están reciclando desinformación.
                      </p>
                    </div>
                  </div>
                </div>

                {/* Comentario 3 */}
                <div className="border-l-2 border-primary/30 pl-3 py-2">
                  <div className="flex items-start space-x-2">
                    <div className="w-7 h-7 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0">
                      <User className="h-3.5 w-3.5 text-green-600" />
                    </div>
                    <div className="flex-1">
                      <div className="flex items-center space-x-2 mb-1">
                        <p className="text-sm font-medium">Diego Torres</p>
                        <span className="text-xs text-muted-foreground">Hace 5 horas</span>
                      </div>
                      <p className="text-sm">
                        ¿Alguien logró contactar al medio "Noticias Falsas"? Deberíamos verificar si existe realmente o es una web fantasma.
                      </p>
                    </div>
                  </div>
                </div>

                {/* Comentario 4 */}
                <div className="border-l-2 border-primary/30 pl-3 py-2">
                  <div className="flex items-start space-x-2">
                    <div className="w-7 h-7 rounded-full bg-orange-100 flex items-center justify-center flex-shrink-0">
                      <User className="h-3.5 w-3.5 text-orange-600" />
                    </div>
                    <div className="flex-1">
                      <div className="flex items-center space-x-2 mb-1">
                        <p className="text-sm font-medium">Laura Gómez</p>
                        <span className="text-xs text-muted-foreground">Hace 6 horas</span>
                      </div>
                      <p className="text-sm">
                        Chequeé el dominio y fue registrado hace solo 2 meses. Definitivamente no es una fuente confiable. Marquemos esto como alta prioridad.
                      </p>
                    </div>
                  </div>
                </div>

                {/* Comentario 5 */}
                <div className="border-l-2 border-primary/30 pl-3 py-2">
                  <div className="flex items-start space-x-2">
                    <div className="w-7 h-7 rounded-full bg-pink-100 flex items-center justify-center flex-shrink-0">
                      <User className="h-3.5 w-3.5 text-pink-600" />
                    </div>
                    <div className="flex-1">
                      <div className="flex items-center space-x-2 mb-1">
                        <p className="text-sm font-medium">Sofía Vargas</p>
                        <span className="text-xs text-muted-foreground">Hace 8 horas</span>
                      </div>
                      <p className="text-sm">
                        Este tipo de contenido es peligroso porque la gente diabética podría abandonar su tratamiento. Debemos ser contundentes con el marcador.
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              {/* Campo para agregar nuevo comentario */}
              <div className="border-t pt-4 mt-4">
                <Label className="text-xs text-muted-foreground mb-2">Agregar comentario:</Label>
                <div className="flex space-x-2">
                  <Textarea
                    placeholder="Comparte tus observaciones con los demás verificadores..."
                    rows={2}
                    className="resize-none text-sm"
                  />
                  <Button size="sm" className="bg-primary hover:bg-primary/90 self-end">
                    <Send className="h-4 w-4" />
                  </Button>
                </div>
              </div>
            </div>
          </div>
        </CardContent>
      </Card>

      {/* Diálogo de éxito gamificado */}
      {renderSuccessDialog()}
    </div>
  );
}
 - - - - - - - - - - - - 
src/components/components/ContentReview.tsx

import React, { useState, useRef, useEffect } from 'react';
import botilitoImage from 'figma:asset/e27a276e6ff0e187a67cf54678c265c1c38adbf7.png';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Badge } from './ui/badge';
import { Input } from './ui/input';
import { Separator } from './ui/separator';
import { Label } from './ui/label';
import { Textarea } from './ui/textarea';
import { 
  Search, Filter, Bot, FileText, Image, Video, Volume2, 
  CheckCircle, AlertTriangle, Clock, Eye, Hash, Layers,
  Calendar, User, Shield, XCircle, AlertCircle, ArrowLeft,
  Newspaper, Tag, ExternalLink, Syringe, Target, Activity,
  Users, TrendingUp, Share2, MessageCircle, Zap, Flame,
  Crosshair, Brain, BookOpen, CheckSquare, Plus, Edit, Trash2,
  Download, Twitter, Facebook, Linkedin
} from 'lucide-react';

export function ContentReview() {
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedFilter, setSelectedFilter] = useState('all');
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedCaseId, setSelectedCaseId] = useState<string | null>(null);
  const casesPerPage = 10;
  const canvasRef = useRef<HTMLCanvasElement>(null);

  // Estado para las vacunas de inmunización
  const [vaccines, setVaccines] = useState<any[]>([
    {
      id: '1',
      title: 'Verificación de Datos sobre Vacunas COVID',
      description: 'Infografía explicando con datos reales y estudios verificados los efectos de las vacunas, desmintiendo el contenido falso.',
      format: 'Infografía',
      platforms: ['Instagram', 'Facebook', 'Twitter'],
      reach: 'Alto',
      engagement: '8.5%',
      status: 'active'
    },
    {
      id: '2',
      title: 'Video Educativo: Cómo Identificar Desinformación Médica',
      description: 'Tutorial corto mostrando señales de alerta en contenido médico falso y cómo verificar información de salud.',
      format: 'Video corto',
      platforms: ['TikTok', 'Instagram Reels', 'YouTube Shorts'],
      reach: 'Muy Alto',
      engagement: '12.3%',
      status: 'active'
    }
  ]);

  const [newVaccine, setNewVaccine] = useState({
    title: '',
    description: '',
    format: '',
    platforms: [] as string[],
    reach: '',
  });

  const [editingVaccineId, setEditingVaccineId] = useState<string | null>(null);

  // Mock data con casos históricos completos
  const historialCasos = [
    {
      id: 'T-WB-20241015-156',
      type: 'text',
      title: 'Artículo sobre vacunas y efectos secundarios',
      content: 'Las vacunas contra COVID-19 causan problemas cardíacos en el 90% de los vacunados según estudio reciente de la Universidad de Harvard. Miles de casos reportados...',
      headline: 'Estudio de Harvard revela efectos cardíacos masivos de vacunas COVID',
      url: 'https://noticiasfalsas.com/vacunas-corazon',
      screenshot: 'https://images.unsplash.com/photo-1584036561566-baf8f5f1b144?w=800',
      source: { name: 'Noticias Falsas', url: 'https://noticiasfalsas.com' },
      theme: 'Salud y Medicina',
      aiAnalysis: {
        veracity: 'Falso',
        confidence: 0.92,
        detectedMarkers: ['falso', 'enganoso', 'sensacionalista'],
        issues: ['No existe tal estudio de Harvard', 'Estadísticas inventadas', 'Fuente no confiable'],
        summary: 'Contenido presenta desinformación médica grave. Alto riesgo de propagación por apelación emocional y falsa autoridad científica.',
        sources: ['WhatsApp', 'Facebook', 'Twitter'],
        markersDetected: [
          { type: 'Falso', confidence: 0.92 },
          { type: 'Engañoso', confidence: 0.87 },
          { type: 'Sensacionalista', confidence: 0.79 }
        ]
      },
      consensusMarkers: ['falso', 'enganoso', 'sensacionalista'],
      consensusPercentages: {
        'falso': 92,
        'enganoso': 87,
        'sensacionalista': 79
      },
      status: 'verified',
      submittedBy: 'usuario_123',
      submittedAt: '2024-01-15T10:30:00Z',
      verifiedAt: '2024-01-15T14:22:00Z',
      humanVerifiers: 8,
      priority: 'high',
      votesCount: 8,
    },
    {
      id: 'I-FB-20241015-234',
      type: 'image',
      title: 'Imagen de manifestación política',
      content: 'imagen_manifestacion_2024.jpg',
      description: 'Foto que supuestamente muestra protesta masiva en la capital el mes pasado',
      screenshot: 'https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?w=800',
      source: { name: 'Redes Sociales', url: 'https://facebook.com' },
      theme: 'Política y Sociedad',
      aiAnalysis: {
        veracity: 'Sin contexto',
        confidence: 0.78,
        detectedMarkers: ['sin_contexto', 'manipulado'],
        issues: ['La imagen es de 2019', 'Contexto diferente', 'Fecha manipulada'],
        summary: 'Imagen real pero usada fuera de contexto temporal y geográfico para crear narrativa falsa.',
        sources: ['Facebook', 'Instagram', 'Telegram'],
        markersDetected: [
          { type: 'Sin contexto', confidence: 0.78 },
          { type: 'Manipulado', confidence: 0.65 }
        ]
      },
      consensusMarkers: ['sin_contexto', 'enganoso'],
      consensusPercentages: {
        'sin_contexto': 78,
        'enganoso': 65
      },
      status: 'verified',
      submittedBy: 'usuario_456',
      submittedAt: '2024-01-15T09:15:00Z',
      verifiedAt: '2024-01-15T12:45:00Z',
      humanVerifiers: 5,
      priority: 'medium',
      votesCount: 5,
    },
    {
      id: 'V-YT-20241015-089',
      type: 'video',
      title: 'Video de declaraciones presidenciales oficiales',
      content: 'declaraciones_presidente_economia.mp4',
      description: 'Video de rueda de prensa oficial del presidente sobre medidas económicas',
      screenshot: 'https://images.unsplash.com/photo-1588681664899-f142ff2dc9b1?w=800',
      source: { name: 'Canal Presidencial', url: 'https://presidencia.gov.co' },
      theme: 'Política y Economía',
      aiAnalysis: {
        veracity: 'Verdadero',
        confidence: 0.95,
        detectedMarkers: ['verdadero'],
        issues: [],
        summary: 'Contenido verificado de fuente oficial gubernamental. Información precisa y contextualizada.',
        sources: ['YouTube', 'Sitio oficial'],
        markersDetected: [
          { type: 'Verdadero', confidence: 0.95 }
        ]
      },
      consensusMarkers: ['verdadero'],
      consensusPercentages: {
        'verdadero': 95
      },
      status: 'verified',
      submittedBy: 'usuario_789',
      submittedAt: '2024-01-15T08:45:00Z',
      verifiedAt: '2024-01-15T09:10:00Z',
      humanVerifiers: 3,
      priority: 'low',
      votesCount: 3,
    },
    {
      id: 'A-WA-20241014-312',
      type: 'audio',
      title: 'Audio de WhatsApp sobre emergencia sanitaria',
      content: 'audio_emergencia_sanitaria.m4a',
      description: 'Mensaje de voz humorístico imitando alerta de emergencia sanitaria',
      screenshot: 'https://images.unsplash.com/photo-1614680376593-902f74cf0d41?w=800',
      source: { name: 'WhatsApp', url: '#' },
      theme: 'Salud y Humor',
      aiAnalysis: {
        veracity: 'Satírico/Humorístico',
        confidence: 0.85,
        detectedMarkers: ['satirico'],
        issues: [],
        summary: 'Contenido claramente satírico sin intención de desinformar. Contexto humorístico evidente.',
        sources: ['WhatsApp'],
        markersDetected: [
          { type: 'Satírico/Humorístico', confidence: 0.85 }
        ]
      },
      consensusMarkers: ['satirico'],
      consensusPercentages: {
        'satirico': 85
      },
      status: 'verified',
      submittedBy: 'usuario_012',
      submittedAt: '2024-01-14T16:20:00Z',
      verifiedAt: '2024-01-14T18:30:00Z',
      humanVerifiers: 6,
      priority: 'low',
      votesCount: 6,
    },
    {
      id: 'T-TW-20241014-445',
      type: 'text',
      title: 'Tweet sobre subsidio gubernamental falso',
      content: 'Gobierno anuncia subsidio de $500.000 para todos. Registrate en este link antes del viernes para recibir tu dinero. Solo necesitas cédula y datos bancarios...',
      headline: 'Nuevo subsidio universal de $500.000 - Regístrate ya',
      url: 'https://subsidios-falsos.com/registro',
      screenshot: 'https://images.unsplash.com/photo-1563986768609-322da13575f3?w=800',
      source: { name: 'Dominio Falso', url: 'https://subsidios-falsos.com' },
      theme: 'Phishing y Estafas',
      aiAnalysis: {
        veracity: 'Suplantación de identidad',
        confidence: 0.94,
        detectedMarkers: ['suplantacion_identidad', 'falso', 'enganoso'],
        issues: ['Dominio no gubernamental', 'Solicita datos personales', 'No hay anuncio oficial'],
        summary: 'Intento de phishing suplantando identidad gubernamental. Alto riesgo de fraude financiero.',
        sources: ['Twitter', 'WhatsApp'],
        markersDetected: [
          { type: 'Suplantación de identidad', confidence: 0.94 },
          { type: 'Falso', confidence: 0.91 },
          { type: 'Engañoso', confidence: 0.88 }
        ]
      },
      consensusMarkers: ['suplantacion_identidad', 'falso', 'enganoso'],
      consensusPercentages: {
        'suplantacion_identidad': 94,
        'falso': 91,
        'enganoso': 88
      },
      status: 'verified',
      submittedBy: 'usuario_345',
      submittedAt: '2024-01-14T11:20:00Z',
      verifiedAt: '2024-01-14T15:00:00Z',
      humanVerifiers: 12,
      priority: 'high',
      votesCount: 12,
    },
    {
      id: 'I-IG-20241013-678',
      type: 'image',
      title: 'Meme sobre situación económica',
      content: 'meme_economia_colombia.jpg',
      description: 'Imagen humorística sobre la economía del país con sátira política',
      screenshot: 'https://images.unsplash.com/photo-1611329532073-b17d3b645f74?w=800',
      source: { name: 'Instagram', url: '#' },
      theme: 'Política y Humor',
      aiAnalysis: {
        veracity: 'Satírico/Humorístico',
        confidence: 0.89,
        detectedMarkers: ['satirico'],
        issues: [],
        summary: 'Contenido satírico con intención humorística. No pretende ser información factual.',
        sources: ['Instagram', 'Facebook'],
        markersDetected: [
          { type: 'Satírico/Humorístico', confidence: 0.89 }
        ]
      },
      consensusMarkers: ['satirico'],
      consensusPercentages: {
        'satirico': 89
      },
      status: 'verified',
      submittedBy: 'usuario_567',
      submittedAt: '2024-01-13T14:30:00Z',
      verifiedAt: '2024-01-13T16:15:00Z',
      humanVerifiers: 4,
      priority: 'low',
      votesCount: 4,
    },
    {
      id: 'T-WA-20241012-890',
      type: 'text',
      title: 'Cadena de WhatsApp sobre remedio casero',
      content: 'Toma agua con limón y canela en ayunas para curar diabetes en 15 días. Comprobado científicamente por médicos naturistas. Compartelo con todos tus contactos...',
      headline: 'Cura milagrosa para diabetes en 15 días',
      url: null,
      screenshot: 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=800',
      source: { name: 'Cadena WhatsApp', url: '#' },
      theme: 'Salud y Medicina',
      aiAnalysis: {
        veracity: 'Falso',
        confidence: 0.96,
        detectedMarkers: ['falso', 'enganoso', 'no_verificable'],
        issues: ['Promesa médica falsa', 'No existe respaldo científico', 'Peligroso para pacientes'],
        summary: 'Desinformación médica peligrosa. Podría llevar a pacientes a abandonar tratamientos legítimos.',
        sources: ['WhatsApp'],
        markersDetected: [
          { type: 'Falso', confidence: 0.96 },
          { type: 'Engañoso', confidence: 0.93 },
          { type: 'No verificable', confidence: 0.87 }
        ]
      },
      consensusMarkers: [],
      consensusPercentages: {},
      status: 'ai_only',
      submittedBy: 'usuario_890',
      submittedAt: '2024-01-12T09:45:00Z',
      verifiedAt: null,
      humanVerifiers: 0,
      priority: 'high',
      votesCount: 0,
    },
    {
      id: 'V-TK-20241011-234',
      type: 'video',
      title: 'TikTok sobre teoría conspirativa global',
      content: 'video_conspiracion_mundial.mp4',
      description: 'Video promoviendo teorías conspirativas sobre control mundial sin fundamento',
      screenshot: 'https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=800',
      source: { name: 'TikTok', url: '#' },
      theme: 'Teorías Conspirativas',
      aiAnalysis: {
        veracity: 'Teoría conspirativa',
        confidence: 0.88,
        detectedMarkers: ['teoria_conspirativa', 'enganoso'],
        issues: ['Sin evidencia', 'Narrativa conspirativa', 'Fuentes cuestionables'],
        summary: 'Contenido promueve teorías conspirativas sin base fáctica ni evidencia verificable.',
        sources: ['TikTok', 'YouTube'],
        markersDetected: [
          { type: 'Teoría conspirativa', confidence: 0.88 },
          { type: 'Engañoso', confidence: 0.82 }
        ]
      },
      consensusMarkers: [],
      consensusPercentages: {},
      status: 'ai_only',
      submittedBy: 'usuario_234',
      submittedAt: '2024-01-11T18:20:00Z',
      verifiedAt: null,
      humanVerifiers: 0,
      priority: 'medium',
      votesCount: 0,
    },
  ];

  // Marcadores disponibles
  const marcadoresDisponibles = [
    { id: 'verdadero', label: 'Verdadero', icon: CheckCircle },
    { id: 'falso', label: 'Falso', icon: XCircle },
    { id: 'enganoso', label: 'Engañoso', icon: AlertTriangle },
    { id: 'satirico', label: 'Satírico/Humorístico', icon: Bot },
    { id: 'manipulado', label: 'Manipulado', icon: Crosshair },
    { id: 'sin_contexto', label: 'Sin contexto', icon: AlertCircle },
    { id: 'no_verificable', label: 'No verificable', icon: Clock },
    { id: 'teoria_conspirativa', label: 'Teoría conspirativa', icon: Eye },
    { id: 'suplantacion_identidad', label: 'Suplantación de identidad', icon: Shield },
    { id: 'sensacionalista', label: 'Sensacionalista', icon: Flame },
  ];

  const getMarcador = (id: string) => {
    return marcadoresDisponibles.find(m => m.id === id);
  };

  const getTypeIcon = (type: string) => {
    switch (type) {
      case 'text': return FileText;
      case 'image': return Image;
      case 'video': return Video;
      case 'audio': return Volume2;
      default: return FileText;
    }
  };

  const getVeracityBadge = (veracity: string) => {
    const config: Record<string, { bg: string; text: string; border: string; icon: any }> = {
      'Verdadero': { bg: 'bg-green-50', text: 'text-green-700', border: 'border-green-200', icon: CheckCircle },
      'Falso': { bg: 'bg-red-50', text: 'text-red-700', border: 'border-red-200', icon: XCircle },
      'Engañoso': { bg: 'bg-orange-50', text: 'text-orange-700', border: 'border-orange-200', icon: AlertTriangle },
      'Sin contexto': { bg: 'bg-amber-50', text: 'text-amber-700', border: 'border-amber-200', icon: AlertCircle },
      'Satírico/Humorístico': { bg: 'bg-blue-50', text: 'text-blue-700', border: 'border-blue-200', icon: Bot },
      'Suplantación de identidad': { bg: 'bg-purple-50', text: 'text-purple-700', border: 'border-purple-200', icon: Shield },
      'Teoría conspirativa': { bg: 'bg-violet-50', text: 'text-violet-700', border: 'border-violet-200', icon: Eye },
      'No verificable': { bg: 'bg-gray-50', text: 'text-gray-700', border: 'border-gray-200', icon: Clock },
    };

    const { bg, text, border, icon: Icon } = config[veracity] || config['No verificable'];

    return (
      <Badge variant="outline" className={`${bg} ${text} ${border}`}>
        <Icon className="h-3 w-3 mr-1" />
        {veracity}
      </Badge>
    );
  };

  const getStatusBadge = (status: string) => {
    if (status === 'verified') {
      return (
        <Badge variant="outline" className="bg-emerald-50 text-emerald-700 border-emerald-200">
          <CheckCircle className="h-3 w-3 mr-1" />
          Verificado por humanos
        </Badge>
      );
    } else {
      return (
        <Badge variant="outline" className="bg-blue-50 text-blue-700 border-blue-200">
          <Bot className="h-3 w-3 mr-1" />
          Solo análisis IA
        </Badge>
      );
    }
  };

  const getPriorityBadge = (priority: string) => {
    const config: Record<string, { bg: string; text: string; border: string; label: string }> = {
      high: { bg: 'bg-red-50', text: 'text-red-700', border: 'border-red-200', label: 'Alta Prioridad' },
      medium: { bg: 'bg-orange-50', text: 'text-orange-700', border: 'border-orange-200', label: 'Prioridad Media' },
      low: { bg: 'bg-blue-50', text: 'text-blue-700', border: 'border-blue-200', label: 'Prioridad Baja' },
    };

    const { bg, text, border, label } = config[priority] || config['medium'];

    return (
      <Badge variant="outline" className={`${bg} ${text} ${border}`}>
        {label}
      </Badge>
    );
  };

  // Filtrado
  const filteredCasos = historialCasos.filter((caso) => {
    const matchesSearch = 
      caso.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
      caso.content.toLowerCase().includes(searchTerm.toLowerCase()) ||
      caso.id.toLowerCase().includes(searchTerm.toLowerCase());

    if (selectedFilter === 'all') return matchesSearch;
    if (selectedFilter === 'verified') return matchesSearch && caso.status === 'verified';
    if (selectedFilter === 'ai_only') return matchesSearch && caso.status === 'ai_only';
    if (selectedFilter === 'text') return matchesSearch && caso.type === 'text';
    if (selectedFilter === 'image') return matchesSearch && caso.type === 'image';
    if (selectedFilter === 'video') return matchesSearch && caso.type === 'video';
    if (selectedFilter === 'audio') return matchesSearch && caso.type === 'audio';

    return matchesSearch;
  });

  // Paginación
  const indexOfLastCase = currentPage * casesPerPage;
  const indexOfFirstCase = indexOfLastCase - casesPerPage;
  const currentCases = filteredCasos.slice(indexOfFirstCase, indexOfLastCase);
  const totalPages = Math.ceil(filteredCasos.length / casesPerPage);

  // Caso seleccionado para ver detalle
  const selectedCase = selectedCaseId ? historialCasos.find(c => c.id === selectedCaseId) : null;

  // Función para dibujar rectángulos redondeados
  const drawRoundedRect = (ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number, radius: number) => {
    ctx.beginPath();
    ctx.moveTo(x + radius, y);
    ctx.lineTo(x + width - radius, y);
    ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
    ctx.lineTo(x + width, y + height - radius);
    ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
    ctx.lineTo(x + radius, y + height);
    ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
    ctx.lineTo(x, y + radius);
    ctx.quadraticCurveTo(x, y, x + radius, y);
    ctx.closePath();
  };

  // Generar imagen del diagnóstico
  const generateDiagnosticImage = () => {
    if (!selectedCase) return;
    
    const canvas = canvasRef.current;
    if (!canvas) return;

    const ctx = canvas.getContext('2d');
    if (!ctx) return;

    // Calcular altura necesaria
    const baseHeight = 800;
    const markersHeight = (selectedCase.aiAnalysis.markersDetected.length * 85) + 100;
    const totalHeight = baseHeight + markersHeight;
    
    canvas.width = 1200;
    canvas.height = totalHeight;

    // Fondo blanco
    ctx.fillStyle = '#ffffff';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Franja superior amarilla con info de Botilito
    ctx.fillStyle = '#ffe97a';
    ctx.fillRect(20, 20, canvas.width - 40, 140);
    ctx.strokeStyle = '#ffda00';
    ctx.lineWidth = 4;
    ctx.strokeRect(20, 20, canvas.width - 40, 140);

    // Logo/Título "BOTILITO"
    ctx.fillStyle = '#000000';
    ctx.font = 'bold 42px Lexend, sans-serif';
    ctx.fillText('BOTILITO', 40, 70);
    
    // Subtítulo
    ctx.font = '22px Lexend, sans-serif';
    ctx.fillText('Diagnóstico Desinfodémico', 40, 105);

    // Número de caso
    ctx.font = 'bold 20px Lexend, sans-serif';
    ctx.fillText(`Caso: ${selectedCase.id}`, 40, 140);

    let yPosition = 200;

    // Título del contenido
    if (selectedCase.headline || selectedCase.title) {
      ctx.fillStyle = '#f8f8f8';
      ctx.fillRect(40, yPosition, canvas.width - 80, 120);
      ctx.strokeStyle = '#e5e5e5';
      ctx.lineWidth = 2;
      ctx.strokeRect(40, yPosition, canvas.width - 80, 120);
      
      ctx.fillStyle = '#000000';
      ctx.font = 'bold 26px Lexend, sans-serif';
      const maxWidth = canvas.width - 120;
      const title = selectedCase.headline || selectedCase.title;
      const words = title.split(' ');
      let line = '';
      let y = yPosition + 40;
      let lineCount = 0;
      
      for (let i = 0; i < words.length; i++) {
        const testLine = line + words[i] + ' ';
        const metrics = ctx.measureText(testLine);
        if (metrics.width > maxWidth && i > 0) {
          ctx.fillText(line, 60, y);
          line = words[i] + ' ';
          y += 35;
          lineCount++;
          if (lineCount >= 2) break;
        } else {
          line = testLine;
        }
      }
      ctx.fillText(line, 60, y);
      yPosition += 140;
    }

    // Tema
    if (selectedCase.theme) {
      yPosition += 10;
      ctx.fillStyle = '#666666';
      ctx.font = 'bold 18px Lexend, sans-serif';
      ctx.fillText('TEMA:', 40, yPosition);
      ctx.fillStyle = '#000000';
      ctx.font = '18px Lexend, sans-serif';
      ctx.fillText(selectedCase.theme, 110, yPosition);
      yPosition += 35;
    }

    // Fuente
    if (selectedCase.source) {
      ctx.fillStyle = '#666666';
      ctx.font = 'bold 18px Lexend, sans-serif';
      ctx.fillText('FUENTE:', 40, yPosition);
      ctx.fillStyle = '#000000';
      ctx.font = '18px Lexend, sans-serif';
      ctx.fillText(selectedCase.source.name, 130, yPosition);
      yPosition += 45;
    }

    // Veredicto
    yPosition += 20;
    ctx.fillStyle = '#000000';
    ctx.font = 'bold 28px Lexend, sans-serif';
    ctx.fillText('VEREDICTO:', 40, yPosition);
    yPosition += 10;

    const veracityColors: { [key: string]: string } = {
      'Verdadero': '#10b981',
      'Falso': '#ef4444',
      'Engañoso': '#f97316',
      'Sin contexto': '#f59e0b',
      'Satírico/Humorístico': '#3b82f6',
      'Suplantación de identidad': '#a855f7',
      'Teoría conspirativa': '#7c3aed',
      'No verificable': '#6b7280',
    };

    const veracityColor = veracityColors[selectedCase.aiAnalysis.veracity] || '#6b7280';
    ctx.fillStyle = veracityColor;
    drawRoundedRect(ctx, 40, yPosition, canvas.width - 80, 80, 12);
    ctx.fill();

    ctx.fillStyle = '#ffffff';
    ctx.font = 'bold 36px Lexend, sans-serif';
    ctx.fillText(selectedCase.aiAnalysis.veracity.toUpperCase(), 60, yPosition + 50);

    yPosition += 100;

    // Marcadores detectados
    yPosition += 20;
    ctx.fillStyle = '#000000';
    ctx.font = 'bold 24px Lexend, sans-serif';
    ctx.fillText('Marcadores de Diagnóstico:', 40, yPosition);
    yPosition += 20;

    const topMarkers = selectedCase.aiAnalysis.markersDetected.slice(0, 5);
    
    topMarkers.forEach((marker: any, index: number) => {
      const markerColors: { [key: string]: string } = {
        'Verdadero': '#10b981',
        'Falso': '#ef4444',
        'Engañoso': '#f97316',
        'Satírico/Humorístico': '#3b82f6',
        'Manipulado': '#a855f7',
        'Sin contexto': '#f59e0b',
        'No verificable': '#6b7280',
        'Teoría conspirativa': '#7c3aed',
        'Suplantación de identidad': '#a855f7',
        'Sensacionalista': '#fb923c',
      };

      const color = markerColors[marker.type] || '#6b7280';
      const confidence = (marker.confidence * 100).toFixed(0);

      yPosition += 15;
      ctx.shadowColor = 'rgba(0, 0, 0, 0.1)';
      ctx.shadowBlur = 8;
      ctx.shadowOffsetX = 0;
      ctx.shadowOffsetY = 2;
      
      ctx.fillStyle = color;
      const badgeWidth = canvas.width - 80;
      const badgeHeight = 70;
      drawRoundedRect(ctx, 40, yPosition, badgeWidth, badgeHeight, 12);
      ctx.fill();

      ctx.shadowColor = 'transparent';
      ctx.shadowBlur = 0;
      ctx.shadowOffsetX = 0;
      ctx.shadowOffsetY = 0;

      ctx.fillStyle = '#ffffff';
      ctx.font = `bold ${index === 0 ? '32' : '26'}px Lexend, sans-serif`;
      ctx.fillText(`${marker.type}`, 60, yPosition + 30);
      
      ctx.font = `${index === 0 ? '24' : '20'}px Lexend, sans-serif`;
      ctx.fillText(`Confianza: ${confidence}%`, 60, yPosition + 58);

      yPosition += 70;
    });

    // Footer
    yPosition += 30;
    
    // Estado de verificación
    if (selectedCase.status === 'verified') {
      ctx.fillStyle = '#10b981';
      ctx.font = 'bold 20px Lexend, sans-serif';
      ctx.fillText(`✓ Verificado por ${selectedCase.humanVerifiers} especialistas`, 40, yPosition);
      yPosition += 30;
    }
    
    ctx.fillStyle = '#666666';
    ctx.font = '16px Lexend, sans-serif';
    const reportDate = new Date(selectedCase.submittedAt).toLocaleDateString('es-CO', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
    ctx.fillText(`Reportado: ${reportDate}`, 40, yPosition);
    
    yPosition += 30;
    ctx.fillStyle = '#000000';
    ctx.font = 'bold 18px Lexend, sans-serif';
    ctx.fillText('Verificado por Botilito - Análisis desinfodémico con IA', 40, yPosition);
  };

  // Descargar imagen
  const handleDownloadImage = () => {
    if (!selectedCase) return;
    
    generateDiagnosticImage();
    
    setTimeout(() => {
      const canvas = canvasRef.current;
      if (!canvas) return;

      canvas.toBlob((blob) => {
        if (!blob) return;
        
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.download = `botilito-caso-${selectedCase.id}.png`;
        link.href = url;
        link.click();
        URL.revokeObjectURL(url);
      });
    }, 100);
  };

  // Compartir en redes sociales
  const shareOnTwitter = () => {
    if (!selectedCase) return;
    const topMarker = selectedCase.aiAnalysis.markersDetected[0];
    const markerText = topMarker ? `${topMarker.type} (${(topMarker.confidence * 100).toFixed(0)}%)` : 'contenido analizado';
    const title = selectedCase.headline || selectedCase.title;
    const text = `🔍 Botilito detectó: ${markerText}\n${title ? `\n"${title}"\n` : ''}\nCaso: ${selectedCase.id}\n#Botilito #VerificaciónDeFechos #Desinformación`;
    const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
    window.open(url, '_blank');
  };

  const shareOnFacebook = () => {
    const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`;
    window.open(url, '_blank');
  };

  const shareOnWhatsApp = () => {
    if (!selectedCase) return;
    const topMarker = selectedCase.aiAnalysis.markersDetected[0];
    const markerText = topMarker ? `${topMarker.type} (${(topMarker.confidence * 100).toFixed(0)}%)` : 'contenido analizado';
    const title = selectedCase.headline || selectedCase.title;
    const text = `🔍 *Botilito* detectó: *${markerText}*\n${title ? `\n"${title}"\n` : ''}\nCaso: ${selectedCase.id}\n\nVerificación completa de desinformación con IA`;
    const url = `https://wa.me/?text=${encodeURIComponent(text)}`;
    window.open(url, '_blank');
  };

  const shareOnLinkedIn = () => {
    const url = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(window.location.href)}`;
    window.open(url, '_blank');
  };

  // Si hay un caso seleccionado, mostrar vista de detalle
  if (selectedCase) {
    return (
      <div className="space-y-6">
        {/* Mensaje de Botilito */}
        <div className="bg-[#ffe97a] border-2 border-[#ffda00] rounded-lg p-4 shadow-lg">
          <div className="flex items-center space-x-4">
            <img 
              src={botilitoImage} 
              alt="Botilito" 
              className="w-24 h-24 object-contain mt-[0px] mr-[16px] mb-[-18px] ml-[0px]"
            />
            <div className="flex-1">
              <p className="text-xl">
                ¡Ey parcero! Acá tienes el diagnóstico completo de este caso 🔬👀
              </p>
              <p className="text-sm mt-1 opacity-80">
                {selectedCase.status === 'verified' 
                  ? 'Este caso ya fue verificado por especialistas humanos. Puedes revisar el análisis y las estrategias de inmunización.' 
                  : 'Este caso solo tiene análisis de IA. Si quieres, puedes enviarlo a verificación humana.'}
              </p>
            </div>
          </div>
        </div>

        {/* Canvas oculto para generar la imagen */}
        <canvas ref={canvasRef} style={{ display: 'none' }} />

        {/* Detalle del caso */}
        <Card>
          <CardHeader>
            {/* Botón de volver */}
            <div className="mb-4">
              <Button
                variant="outline"
                size="sm"
                onClick={() => setSelectedCaseId(null)}
              >
                <ArrowLeft className="h-4 w-4 mr-2" />
                Volver al historial
              </Button>
            </div>

            {/* Franja unificada con toda la info del caso */}
            <div className="flex items-center justify-between gap-4 bg-gradient-to-r from-primary/10 via-secondary/10 to-primary/10 px-6 py-4 rounded-lg border-2 border-primary/30">
              {/* Código del caso */}
              <div className="flex items-center space-x-2">
                <div className="p-2 bg-primary/20 rounded-lg">
                  <Shield className="h-5 w-5 text-primary" />
                </div>
                <div>
                  <p className="text-xs text-muted-foreground">Código del Caso</p>
                  <p className="font-mono font-medium">{selectedCase.id}</p>
                </div>
              </div>

              <Separator orientation="vertical" className="h-12" />

              {/* Prioridad */}
              <div>
                <p className="text-xs text-muted-foreground mb-1">Prioridad</p>
                {getPriorityBadge(selectedCase.priority)}
              </div>

              <Separator orientation="vertical" className="h-12" />

              {/* Reportado por */}
              <div className="flex items-center space-x-2">
                <div className="p-2 bg-blue-100 rounded-lg">
                  <User className="h-4 w-4 text-blue-600" />
                </div>
                <div>
                  <p className="text-xs text-muted-foreground">Reportado por</p>
                  <p className="text-sm font-medium">{selectedCase.submittedBy}</p>
                </div>
              </div>

              <Separator orientation="vertical" className="h-12" />

              {/* Fecha de reporte */}
              <div className="flex items-center space-x-2">
                <div className="p-2 bg-emerald-100 rounded-lg">
                  <Calendar className="h-4 w-4 text-emerald-600" />
                </div>
                <div>
                  <p className="text-xs text-muted-foreground">Fecha de reporte</p>
                  <p className="text-sm font-medium">
                    {new Date(selectedCase.submittedAt).toLocaleDateString('es-CO', {
                      day: 'numeric',
                      month: 'short',
                      year: 'numeric',
                      hour: '2-digit',
                      minute: '2-digit'
                    })}
                  </p>
                </div>
              </div>
            </div>
          </CardHeader>
          <CardContent className="space-y-6">
            {/* Contenido del caso */}
            <div>
              <div className="p-4 bg-secondary/30 border-2 border-secondary/60 rounded-lg space-y-3">
                {/* Captura con marcadores */}
                {selectedCase.screenshot && (
                  <div>
                    <Label>Captura del contenido:</Label>
                    <div className="mt-2 rounded-lg overflow-hidden border-2 border-secondary/40 relative max-h-48">
                      <img 
                        src={selectedCase.screenshot} 
                        alt="Captura" 
                        className="w-full h-48 object-cover object-top"
                      />
                      

                    </div>
                  </div>
                )}
                
                {/* Fuente y tema */}
                {(selectedCase.source || selectedCase.theme) && (
                  <div className="flex flex-wrap items-center gap-4 pb-2">
                    {selectedCase.source && (
                      <div className="flex items-center space-x-2">
                        <Newspaper className="h-4 w-4 text-primary" />
                        <Label className="text-sm">Fuente:</Label>
                        <Badge variant="outline" className="text-xs border-primary/40 bg-primary/10">
                          {selectedCase.source.name}
                        </Badge>
                      </div>
                    )}
                    
                    {selectedCase.theme && (
                      <div className="flex items-center space-x-2">
                        <Tag className="h-4 w-4 text-primary" />
                        <Label className="text-sm">Tema:</Label>
                        <Badge variant="outline" className="text-xs border-primary/40 bg-primary/10">
                          {selectedCase.theme}
                        </Badge>
                      </div>
                    )}
                  </div>
                )}
                
                {/* Titular */}
                {selectedCase.headline && (
                  <div>
                    <Label>Titular:</Label>
                    <div className="mt-1 p-3 bg-primary/20 border border-primary/40 rounded-lg">
                      <p className="font-medium">{selectedCase.headline}</p>
                    </div>
                  </div>
                )}
                
                {/* Contenido */}
                <div>
                  <Label>Contenido analizado:</Label>
                  <p className="text-sm text-muted-foreground mt-1 leading-relaxed">
                    {selectedCase.content}
                  </p>
                </div>
              </div>

              {/* Evaluación */}
              {selectedCase.aiAnalysis.summary && (
                <div className="mt-6">
                  <h4>Evaluación epidemiológica:</h4>
                  <p className="text-sm text-muted-foreground mt-1">{selectedCase.aiAnalysis.summary}</p>
                </div>
              )}
            </div>

            {/* Análisis Unificado: IA + Humano */}
            <div>
              <Label className="flex items-center space-x-2 mb-3">
                <Activity className="h-4 w-4 text-primary" />
                <span>Análisis del Caso</span>
              </Label>
              
              <div className="p-4 bg-gradient-to-r from-blue-50 to-emerald-50 border-2 border-blue-200 rounded-lg space-y-4">
                {/* Fila de participantes */}
                <div className="flex items-center justify-between">
                  <div className="flex items-center space-x-6">
                    {/* Análisis IA */}
                    <div className="flex items-center space-x-2">
                      <div className="p-2 bg-blue-100 rounded-lg">
                        <Bot className="h-5 w-5 text-blue-600" />
                      </div>
                      <div>
                        <p className="text-xs text-muted-foreground">Analizado por IA</p>
                        <p className="text-sm font-medium">Botilito</p>
                      </div>
                    </div>

                    <Separator orientation="vertical" className="h-12" />

                    {/* Análisis Humano */}
                    <div className="flex items-center space-x-2">
                      <div className="p-2 bg-emerald-100 rounded-lg">
                        <Users className="h-5 w-5 text-emerald-600" />
                      </div>
                      <div>
                        <p className="text-xs text-muted-foreground">Red de Epidemiólogos</p>
                        <p className="text-sm font-medium">
                          {selectedCase.status === 'verified' 
                            ? `${selectedCase.humanVerifiers} epidemiólogos participaron`
                            : 'Pendiente verificación humana'
                          }
                        </p>
                      </div>
                    </div>
                  </div>

                  {selectedCase.status === 'verified' && selectedCase.verifiedAt && (
                    <div className="text-right">
                      <p className="text-xs text-muted-foreground">Verificado el</p>
                      <p className="text-sm font-medium">
                        {new Date(selectedCase.verifiedAt).toLocaleDateString('es-CO', {
                          day: 'numeric',
                          month: 'short',
                          year: 'numeric'
                        })}
                      </p>
                    </div>
                  )}
                </div>

                <Separator />

                {/* Marcadores detectados unificados (IA + Red Humana) */}
                <div>
                  <Label className="text-sm mb-2">Marcadores de diagnóstico detectados:</Label>
                  <div className="flex flex-wrap gap-2 mt-2">
                    {(() => {
                      // Obtener marcadores de IA
                      const aiMarkers = selectedCase.aiAnalysis.markersDetected.map((m: any) => m.type.toLowerCase().replace(/\s+/g, '_').replace(/\//g, '_'));
                      const aiConfidences: { [key: string]: number } = {};
                      selectedCase.aiAnalysis.markersDetected.forEach((m: any) => {
                        const id = m.type.toLowerCase().replace(/\s+/g, '_').replace(/\//g, '_');
                        aiConfidences[id] = m.confidence;
                      });
                      
                      // Obtener marcadores humanos
                      const humanMarkers = selectedCase.consensusMarkers || [];
                      const humanPercentages = selectedCase.consensusPercentages || {};
                      
                      // Unificar todos los marcadores únicos
                      const allMarkerIds = Array.from(new Set([...aiMarkers, ...humanMarkers]));
                      
                      return allMarkerIds.map((marcadorId: string, idx: number) => {
                        const marcador = getMarcador(marcadorId);
                        if (!marcador) return null;
                        const Icon = marcador.icon;
                        
                        const detectedByAI = aiMarkers.includes(marcadorId);
                        const detectedByHumans = humanMarkers.includes(marcadorId);
                        
                        // Calcular porcentaje unificado
                        let unifiedPercentage = 0;
                        if (detectedByAI && detectedByHumans) {
                          // Promedio entre ambos
                          const aiConf = aiConfidences[marcadorId] * 100;
                          const humanConf = humanPercentages[marcadorId] || 0;
                          unifiedPercentage = Math.round((aiConf + humanConf) / 2);
                        } else if (detectedByAI) {
                          unifiedPercentage = Math.round(aiConfidences[marcadorId] * 100);
                        } else if (detectedByHumans) {
                          unifiedPercentage = humanPercentages[marcadorId] || 0;
                        }
                        
                        return (
                          <span key={idx} className="inline-flex items-center space-x-1 px-2 py-1 rounded-md border bg-white border-gray-200 text-xs">
                            <Icon className={`h-3 w-3 ${marcador.color}`} />
                            <span>{marcador.label}</span>
                            <span className="font-medium text-muted-foreground">
                              {unifiedPercentage}%
                            </span>
                          </span>
                        );
                      });
                    })()}
                  </div>
                </div>

                {/* Issues detectados */}
                {selectedCase.aiAnalysis.issues && selectedCase.aiAnalysis.issues.length > 0 && (
                  <div>
                    <Label className="text-sm mb-2">Problemas identificados:</Label>
                    <ul className="list-disc list-inside space-y-1 text-sm text-muted-foreground">
                      {selectedCase.aiAnalysis.issues.map((issue: string, idx: number) => (
                        <li key={idx}>{issue}</li>
                      ))}
                    </ul>
                  </div>
                )}

                {/* Nivel de confianza */}
                <div>
                  <Label className="text-sm mb-2">Nivel de confianza del análisis IA:</Label>
                  <div className="flex items-center space-x-3">
                    <div className="flex-1 bg-white rounded-full h-3 border border-blue-200">
                      <div 
                        className="bg-blue-500 h-full rounded-full transition-all"
                        style={{ width: `${selectedCase.aiAnalysis.confidence * 100}%` }}
                      />
                    </div>
                    <span className="text-sm font-medium">
                      {(selectedCase.aiAnalysis.confidence * 100).toFixed(0)}%
                    </span>
                  </div>
                </div>
              </div>
            </div>

            {/* Estrategias de Inmunización */}
            {selectedCase.status === 'verified' && (
              <div>
                <Label className="flex items-center space-x-2 mb-3">
                  <Syringe className="h-4 w-4 text-primary" />
                  <span>Estrategias de Inmunización Desarrolladas</span>
                </Label>
                
                {/* Franja de inmunizadores */}
                <div className="p-4 bg-gradient-to-r from-purple-50 to-blue-50 border-2 border-purple-200 rounded-lg mb-4">
                  <div className="flex items-center space-x-2">
                    <div className="p-2 bg-purple-100 rounded-lg">
                      <Users className="h-5 w-5 text-purple-600" />
                    </div>
                    <div>
                      <p className="text-xs text-muted-foreground">Red de Inmunizadores</p>
                      <p className="text-sm font-medium">
                        {vaccines.length > 0 
                          ? `${vaccines.length * 2} inmunizadores participaron en el desarrollo`
                          : 'Pendiente desarrollo de estrategias'
                        }
                      </p>
                    </div>
                  </div>
                </div>

                <div className="space-y-4">
                  {vaccines.map((vaccine) => (
                    <div key={vaccine.id} className="p-4 bg-blue-50 border-2 border-blue-200 rounded-lg">
                      <div className="flex items-start justify-between mb-3">
                        <div className="flex-1">
                          <h4 className="font-medium text-blue-900">{vaccine.title}</h4>
                          <p className="text-sm text-blue-700 mt-1">{vaccine.description}</p>
                        </div>
                        <Badge 
                          variant="outline" 
                          className={`ml-2 ${
                            vaccine.status === 'active' 
                              ? 'bg-green-100 text-green-700 border-green-300' 
                              : 'bg-gray-100 text-gray-700 border-gray-300'
                          }`}
                        >
                          {vaccine.status === 'active' ? 'Activa' : 'Inactiva'}
                        </Badge>
                      </div>
                      
                      <div className="grid grid-cols-2 gap-4 text-sm">
                        <div>
                          <span className="text-blue-600">Formato:</span>
                          <span className="ml-2 font-medium">{vaccine.format}</span>
                        </div>
                        <div>
                          <span className="text-blue-600">Alcance:</span>
                          <span className="ml-2 font-medium">{vaccine.reach}</span>
                        </div>
                        <div>
                          <span className="text-blue-600">Engagement:</span>
                          <span className="ml-2 font-medium">{vaccine.engagement}</span>
                        </div>
                        <div>
                          <span className="text-blue-600">Plataformas:</span>
                          <div className="flex flex-wrap gap-1 mt-1">
                            {vaccine.platforms.map((platform: string, idx: number) => (
                              <Badge key={idx} variant="outline" className="text-xs bg-white">
                                {platform}
                              </Badge>
                            ))}
                          </div>
                        </div>
                      </div>
                    </div>
                  ))}

                  {vaccines.length === 0 && (
                    <div className="text-center p-8 border-2 border-dashed border-gray-300 rounded-lg">
                      <Syringe className="h-12 w-12 text-gray-400 mx-auto mb-3" />
                      <p className="text-sm text-muted-foreground">
                        Aún no se han desarrollado estrategias de inmunización para este caso
                      </p>
                    </div>
                  )}
                </div>
              </div>
            )}

            {/* Compartir y Descargar */}
            <div className="pt-4 border-t">
              <Label className="flex items-center space-x-2 mb-3">
                <Share2 className="h-4 w-4 text-primary" />
                <span>Compartir Diagnóstico</span>
              </Label>
              
              <div className="space-y-4">
                {/* Botón de descargar */}
                <div>
                  <Button
                    onClick={handleDownloadImage}
                    className="w-full bg-primary hover:bg-primary/90 text-primary-foreground"
                  >
                    <Download className="h-4 w-4 mr-2" />
                    Descargar imagen del diagnóstico
                  </Button>
                </div>

                {/* Botones de compartir en redes */}
                <div>
                  <p className="text-sm text-muted-foreground mb-2">Compartir en redes sociales:</p>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-2">
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={shareOnTwitter}
                      className="flex items-center justify-center space-x-2"
                    >
                      <Twitter className="h-4 w-4" />
                      <span>Twitter</span>
                    </Button>
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={shareOnFacebook}
                      className="flex items-center justify-center space-x-2"
                    >
                      <Facebook className="h-4 w-4" />
                      <span>Facebook</span>
                    </Button>
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={shareOnWhatsApp}
                      className="flex items-center justify-center space-x-2"
                    >
                      <MessageCircle className="h-4 w-4" />
                      <span>WhatsApp</span>
                    </Button>
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={shareOnLinkedIn}
                      className="flex items-center justify-center space-x-2"
                    >
                      <Linkedin className="h-4 w-4" />
                      <span>LinkedIn</span>
                    </Button>
                  </div>
                </div>
              </div>
            </div>
          </CardContent>
        </Card>
      </div>
    );
  }

  // Vista de lista de casos (por defecto)
  return (
    <div className="space-y-6">
      {/* Mensaje de Botilito */}
      <div className="bg-[#ffe97a] border-2 border-[#ffda00] rounded-lg p-4 shadow-lg">
        <div className="flex items-center space-x-4">
          <img 
            src={botilitoImage} 
            alt="Botilito" 
            className="w-24 h-24 object-contain mt-[0px] mr-[16px] mb-[-18px] ml-[0px]"
          />
          <div className="flex-1">
            <p className="text-xl">
              ¡Ey parcero! Acá está el historial de todos los casos que he analizado 📊🔍
            </p>
            <p className="text-sm mt-1 opacity-80">
              Puedes filtrar por estado, tipo de contenido y buscar lo que necesites. Los casos verificados ya pasaron por diagnóstico humano. ¡Échale un ojo! 👀
            </p>
          </div>
        </div>
      </div>

      {/* Título */}
      <div>
        <h1>Historial de Casos</h1>
        <p className="text-muted-foreground">
          Registro completo de todos los contenidos analizados por Botilito
        </p>
      </div>

      {/* Estadísticas rápidas */}
      <div className="grid gap-4 md:grid-cols-4">
        <Card>
          <CardContent className="p-4">
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-primary/10 rounded">
                <Bot className="h-4 w-4 text-primary" />
              </div>
              <div>
                <p className="text-2xl">{historialCasos.length}</p>
                <p className="text-sm text-muted-foreground">Total Casos</p>
              </div>
            </div>
          </CardContent>
        </Card>

        <Card>
          <CardContent className="p-4">
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-emerald-100 rounded">
                <CheckCircle className="h-4 w-4 text-emerald-600" />
              </div>
              <div>
                <p className="text-2xl">{historialCasos.filter(c => c.status === 'verified').length}</p>
                <p className="text-sm text-muted-foreground">Verificados</p>
              </div>
            </div>
          </CardContent>
        </Card>

        <Card>
          <CardContent className="p-4">
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-blue-100 rounded">
                <Bot className="h-4 w-4 text-blue-600" />
              </div>
              <div>
                <p className="text-2xl">{historialCasos.filter(c => c.status === 'ai_only').length}</p>
                <p className="text-sm text-muted-foreground">Solo IA</p>
              </div>
            </div>
          </CardContent>
        </Card>

        <Card>
          <CardContent className="p-4">
            <div className="flex items-center space-x-2">
              <div className="p-2 bg-red-100 rounded">
                <XCircle className="h-4 w-4 text-red-600" />
              </div>
              <div>
                <p className="text-2xl">
                  {historialCasos.filter(c => 
                    c.aiAnalysis.veracity === 'Falso' || 
                    c.aiAnalysis.veracity === 'Engañoso'
                  ).length}
                </p>
                <p className="text-sm text-muted-foreground">Desinformación</p>
              </div>
            </div>
          </CardContent>
        </Card>
      </div>

      {/* Lista de casos */}
      <Card>
        <CardHeader>
          <div className="flex items-center justify-between">
            <div>
              <CardTitle className="flex items-center space-x-2 text-[24px]">
                <Layers className="h-5 w-5 text-primary" />
                <span>Listado de Casos Históricos</span>
              </CardTitle>
              <CardDescription>
                Todos los contenidos procesados y su estado de verificación
              </CardDescription>
            </div>
            <Badge variant="outline" className="bg-yellow-50 text-yellow-700 border-yellow-200">
              <Hash className="h-3 w-3 mr-1" />
              {filteredCasos.length} casos
            </Badge>
          </div>

          {/* Búsqueda y filtros */}
          <div className="flex space-x-2 mt-4">
            <div className="relative flex-1">
              <Search className="absolute left-3 top-2.5 h-4 w-4 text-muted-foreground" />
              <Input
                placeholder="Buscar por título, contenido o código de caso..."
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
                className="pl-10 border border-gray-300"
              />
            </div>
            <div className="flex items-center space-x-2">
              <Filter className="h-4 w-4 text-muted-foreground" />
              <select 
                value={selectedFilter} 
                onChange={(e) => {
                  setSelectedFilter(e.target.value);
                  setCurrentPage(1);
                }}
                className="px-3 py-2 border rounded-md text-sm bg-background"
              >
                <option value="all">Todos los casos</option>
                <option value="verified">Verificados por humanos</option>
                <option value="ai_only">Solo análisis IA</option>
                <option value="text">Solo texto</option>
                <option value="image">Solo imágenes</option>
                <option value="video">Solo videos</option>
                <option value="audio">Solo audios</option>
              </select>
            </div>
          </div>
        </CardHeader>
        <CardContent className="space-y-4">
          {/* Lista con scroll */}
          <div className="space-y-4 max-h-[700px] min-h-[500px] overflow-y-auto custom-scrollbar">
            {currentCases.map((caso) => {
              const TypeIcon = getTypeIcon(caso.type);
              
              return (
                <div
                  key={caso.id}
                  className="p-4 border rounded-lg cursor-pointer transition-all duration-200 bg-gray-50/50 hover:bg-accent hover:shadow-md hover:border-primary/50"
                  onClick={() => setSelectedCaseId(caso.id)}
                >
                  <div className="flex items-start justify-between space-x-3">
                    <div className="flex items-start space-x-3 flex-1">
                      <div className="p-3 bg-muted rounded-lg">
                        <TypeIcon className="h-6 w-6 text-muted-foreground" />
                      </div>
                      <div className="space-y-2 flex-1">
                        <div className="flex items-center justify-between">
                          <div className="flex items-center space-x-2">
                            <Badge variant="outline" className="text-xs bg-white border-primary/30 font-mono">
                              Caso: {caso.id}
                            </Badge>
                            <h4 className="font-medium text-sm">{caso.title}</h4>
                          </div>
                        </div>
                        
                        <div className="space-y-1">
                          {/* Fecha y usuario */}
                          <div className="flex items-center flex-wrap gap-x-3 gap-y-1 text-xs text-muted-foreground">
                            <div className="flex items-center space-x-1">
                              <Calendar className="h-3 w-3" />
                              <span>
                                {new Date(caso.submittedAt).toLocaleDateString('es-CO', { 
                                  year: 'numeric', 
                                  month: 'short', 
                                  day: 'numeric',
                                  hour: '2-digit',
                                  minute: '2-digit'
                                })}
                                <span className="ml-1">
                                  (hace {Math.floor((Date.now() - new Date(caso.submittedAt).getTime()) / (1000 * 60 * 60 * 24))} días)
                                </span>
                              </span>
                            </div>
                            
                            <Separator orientation="vertical" className="h-3" />
                            
                            <div className="flex items-center space-x-1">
                              <User className="h-3 w-3" />
                              <span>Reportado por: <span className="font-medium">{caso.submittedBy}</span></span>
                            </div>
                          </div>
                          
                          {/* Verificadores humanos */}
                          {caso.humanVerifiers > 0 && (
                            <div className="flex items-center space-x-1 text-xs text-muted-foreground">
                              <Shield className="h-3 w-3 text-emerald-600" />
                              <span>{caso.humanVerifiers} verificadores humanos</span>
                            </div>
                          )}
                          
                          {/* Marcadores detectados */}
                          <div className="flex flex-wrap gap-2 mt-2">
                            {caso.aiAnalysis.markersDetected.map((marker: any, idx: number) => (
                              <Badge 
                                key={idx} 
                                variant="outline" 
                                className="text-[10px] px-2 py-0.5"
                              >
                                {marker.type} • {(marker.confidence * 100).toFixed(0)}%
                              </Badge>
                            ))}
                          </div>
                        </div>
                      </div>
                    </div>
                    
                    <div className="flex flex-col items-end space-y-2">
                      {getVeracityBadge(caso.aiAnalysis.veracity)}
                      {getStatusBadge(caso.status)}
                      <Button variant="outline" size="sm" className="mt-2">
                        <Eye className="h-3 w-3 mr-1" />
                        Ver Detalles
                      </Button>
                    </div>
                  </div>
                </div>
              );
            })}
          </div>

          {/* Paginación */}
          {totalPages > 1 && (
            <div className="flex items-center justify-center space-x-2 pt-4 border-t">
              <Button
                variant="outline"
                size="sm"
                onClick={() => setCurrentPage(p => Math.max(1, p - 1))}
                disabled={currentPage === 1}
              >
                Anterior
              </Button>
              <span className="text-sm text-muted-foreground">
                Página {currentPage} de {totalPages}
              </span>
              <Button
                variant="outline"
                size="sm"
                onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))}
                disabled={currentPage === totalPages}
              >
                Siguiente
              </Button>
            </div>
          )}
        </CardContent>
      </Card>

      {/* Sin resultados */}
      {filteredCasos.length === 0 && (
        <Card>
          <CardContent className="p-8 text-center">
            <Bot className="mx-auto h-12 w-12 text-muted-foreground mb-4" />
            <h3>No se encontraron casos</h3>
            <p className="text-muted-foreground">
              No hay casos que coincidan con los filtros seleccionados.
            </p>
          </CardContent>
        </Card>
      )}
    </div>
  );
}
 - - - - - - - - - - - - 
src/components/components/GlobalNotifications.tsx

import React, { useState } from 'react';
import { Button } from './ui/button';
import { Badge } from './ui/badge';
import { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuLabel, DropdownMenuSeparator, DropdownMenuTrigger } from './ui/dropdown-menu';
import { ScrollArea } from './ui/scroll-area';
import { 
  Bell, 
  AlertTriangle, 
  CheckCircle, 
  Info, 
  Users, 
  Bot, 
  Brain,
  Shield,
  Clock,
  X,
  MoreHorizontal
} from 'lucide-react';
import { motion, AnimatePresence } from 'motion/react';

interface Notification {
  id: string;
  type: 'critical' | 'warning' | 'info' | 'success' | 'system';
  title: string;
  message: string;
  timestamp: string;
  source: 'dashboard' | 'ai-analysis' | 'verification' | 'upload' | 'system';
  read: boolean;
  actionable?: boolean;
}

export function GlobalNotifications() {
  const [notifications, setNotifications] = useState<Notification[]>([
    {
      id: '1',
      type: 'critical',
      title: 'Brote epidemiológico detectado',
      message: 'Incremento del 45% en casos de desinformación médica en Región Andina',
      timestamp: 'hace 12 min',
      source: 'dashboard',
      read: false,
      actionable: true
    },
    {
      id: '2',
      type: 'warning',
      title: 'Patrón anómalo en redes sociales',
      message: 'IA detectó campaña coordinada de desinformación en WhatsApp',
      timestamp: 'hace 25 min',
      source: 'ai-analysis',
      read: false,
      actionable: true
    },
    {
      id: '3',
      type: 'success',
      title: 'Verificación completada',
      message: 'Contenido analizado y marcado como veraz - ID: #VER-2024-1089',
      timestamp: 'hace 1h',
      source: 'verification',
      read: true,
      actionable: false
    },
    {
      id: '4',
      type: 'info',
      title: 'Nuevo contenido para analizar',
      message: 'Se ha subido un video para análisis de veracidad',
      timestamp: 'hace 2h',
      source: 'upload',
      read: true,
      actionable: true
    },
    {
      id: '5',
      type: 'system',
      title: 'Actualización del sistema',
      message: 'Nuevas funcionalidades de IA disponibles',
      timestamp: 'hace 3h',
      source: 'system',
      read: true,
      actionable: false
    },
    {
      id: '6',
      type: 'warning',
      title: 'Tasa de verificación baja',
      message: 'Solo 67% de contenidos verificados en las últimas 24h',
      timestamp: 'hace 4h',
      source: 'dashboard',
      read: true,
      actionable: true
    },
    {
      id: '7',
      type: 'info',
      title: 'Informe semanal disponible',
      message: 'Reporte de actividad epidemiológica listo para descarga',
      timestamp: 'hace 6h',
      source: 'dashboard',
      read: true,
      actionable: true
    }
  ]);

  const unreadCount = notifications.filter(n => !n.read).length;

  const getNotificationIcon = (type: string) => {
    switch (type) {
      case 'critical': return <AlertTriangle className="h-4 w-4 text-red-500" />;
      case 'warning': return <AlertTriangle className="h-4 w-4 text-orange-500" />;
      case 'success': return <CheckCircle className="h-4 w-4 text-green-500" />;
      case 'info': return <Info className="h-4 w-4 text-blue-500" />;
      case 'system': return <Bot className="h-4 w-4 text-purple-500" />;
      default: return <Bell className="h-4 w-4" />;
    }
  };

  const getSourceIcon = (source: string) => {
    switch (source) {
      case 'dashboard': return <Shield className="h-3 w-3" />;
      case 'ai-analysis': return <Brain className="h-3 w-3" />;
      case 'verification': return <Users className="h-3 w-3" />;
      case 'upload': return <Bot className="h-3 w-3" />;
      case 'system': return <Bot className="h-3 w-3" />;
      default: return <Bell className="h-3 w-3" />;
    }
  };

  const getSourceLabel = (source: string) => {
    switch (source) {
      case 'dashboard': return 'Centro de Control';
      case 'ai-analysis': return 'Análisis IA';
      case 'verification': return 'Verificación';
      case 'upload': return 'Subida de Contenido';
      case 'system': return 'Sistema';
      default: return 'Botilito';
    }
  };

  const markAsRead = (id: string) => {
    setNotifications(prev => 
      prev.map(n => n.id === id ? { ...n, read: true } : n)
    );
  };

  const markAllAsRead = () => {
    setNotifications(prev => 
      prev.map(n => ({ ...n, read: true }))
    );
  };

  const removeNotification = (id: string) => {
    setNotifications(prev => prev.filter(n => n.id !== id));
  };

  const clearAllNotifications = () => {
    setNotifications([]);
  };

  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button variant="ghost" className="relative h-10 w-10 rounded-full p-0">
          <Bell className="h-5 w-5" />
          <AnimatePresence>
            {unreadCount > 0 && (
              <motion.div
                initial={{ scale: 0 }}
                animate={{ scale: 1 }}
                exit={{ scale: 0 }}
                className="absolute -top-1 -right-1"
              >
                <Badge 
                  variant="destructive" 
                  className="h-5 w-5 rounded-full p-0 text-xs flex items-center justify-center animate-pulse"
                >
                  {unreadCount > 9 ? '9+' : unreadCount}
                </Badge>
              </motion.div>
            )}
          </AnimatePresence>
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent className="w-96" align="end" forceMount>
        <DropdownMenuLabel className="font-normal">
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-2">
              <Bell className="h-4 w-4" />
              <span>Notificaciones</span>
              {unreadCount > 0 && (
                <Badge variant="secondary" className="text-xs">
                  {unreadCount} nuevas
                </Badge>
              )}
            </div>
            <div className="flex items-center space-x-1">
              {unreadCount > 0 && (
                <Button
                  variant="ghost"
                  size="sm"
                  onClick={markAllAsRead}
                  className="h-6 px-2 text-xs"
                >
                  Marcar todas como leídas
                </Button>
              )}
              <DropdownMenu>
                <DropdownMenuTrigger asChild>
                  <Button variant="ghost" size="sm" className="h-6 w-6 p-0">
                    <MoreHorizontal className="h-3 w-3" />
                  </Button>
                </DropdownMenuTrigger>
                <DropdownMenuContent align="end">
                  <DropdownMenuItem onClick={clearAllNotifications}>
                    <X className="mr-2 h-3 w-3" />
                    Limpiar todas
                  </DropdownMenuItem>
                </DropdownMenuContent>
              </DropdownMenu>
            </div>
          </div>
        </DropdownMenuLabel>
        <DropdownMenuSeparator />
        
        <ScrollArea className="h-96">
          <div className="space-y-1 p-1">
            {notifications.length === 0 ? (
              <div className="flex flex-col items-center justify-center py-8 text-center">
                <Bell className="h-12 w-12 text-muted-foreground/50 mb-3" />
                <p className="text-sm text-muted-foreground">No tienes notificaciones</p>
                <p className="text-xs text-muted-foreground">Te notificaremos cuando haya novedades</p>
              </div>
            ) : (
              notifications.map((notification) => (
                <motion.div
                  key={notification.id}
                  initial={{ opacity: 0, y: 10 }}
                  animate={{ opacity: 1, y: 0 }}
                  exit={{ opacity: 0, y: -10 }}
                  className={`relative p-3 rounded-lg border transition-all duration-200 hover:bg-muted/50 cursor-pointer ${
                    !notification.read 
                      ? 'bg-blue-50/50 border-blue-200 hover:bg-blue-50' 
                      : 'bg-background border-border'
                  }`}
                  onClick={() => markAsRead(notification.id)}
                >
                  <div className="flex items-start space-x-3">
                    <div className="flex-shrink-0 mt-0.5">
                      {getNotificationIcon(notification.type)}
                    </div>
                    
                    <div className="flex-1 min-w-0">
                      <div className="flex items-start justify-between mb-1">
                        <p className={`text-sm ${!notification.read ? 'font-medium' : 'font-normal'}`}>
                          {notification.title}
                        </p>
                        <div className="flex items-center space-x-1 ml-2">
                          {!notification.read && (
                            <div className="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></div>
                          )}
                          <Button
                            variant="ghost"
                            size="sm"
                            onClick={(e) => {
                              e.stopPropagation();
                              removeNotification(notification.id);
                            }}
                            className="h-5 w-5 p-0 opacity-0 group-hover:opacity-100 hover:bg-red-100"
                          >
                            <X className="h-3 w-3" />
                          </Button>
                        </div>
                      </div>
                      
                      <p className="text-xs text-muted-foreground mb-2 line-clamp-2">
                        {notification.message}
                      </p>
                      
                      <div className="flex items-center justify-between">
                        <div className="flex items-center space-x-1 text-xs text-muted-foreground">
                          {getSourceIcon(notification.source)}
                          <span>{getSourceLabel(notification.source)}</span>
                          <span>•</span>
                          <Clock className="h-3 w-3" />
                          <span>{notification.timestamp}</span>
                        </div>
                        
                        {notification.actionable && (
                          <Button
                            variant="outline"
                            size="sm"
                            className="h-6 px-2 text-xs"
                            onClick={(e) => {
                              e.stopPropagation();
                              // Aquí puedes agregar lógica para acciones específicas
                            }}
                          >
                            Ver detalles
                          </Button>
                        )}
                      </div>
                    </div>
                  </div>
                </motion.div>
              ))
            )}
          </div>
        </ScrollArea>
        
        {notifications.length > 0 && (
          <>
            <DropdownMenuSeparator />
            <div className="p-2">
              <Button
                variant="ghost"
                className="w-full text-sm text-muted-foreground hover:text-foreground"
                onClick={() => {
                  // Aquí puedes navegar a una página de notificaciones completa si la implementas
                }}
              >
                Ver todas las notificaciones
              </Button>
            </div>
          </>
        )}
      </DropdownMenuContent>
    </DropdownMenu>
  );
} - - - - - - - - - - - - 
src/components/components/AdvancedAnalytics.tsx

import React from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Badge } from './ui/badge';
import { 
  AreaChart, Area, BarChart, Bar, LineChart, Line, PieChart, Pie, Cell,
  XAxis, YAxis, CartesianGrid, ResponsiveContainer, Tooltip, Legend
} from 'recharts';
import { 
  TrendingUp, TrendingDown, Activity, Zap, Shield, Clock
} from 'lucide-react';

export function AdvancedAnalytics() {
  // Datos para la curva epidemiológica
  const epidemiologicalCurve = [
    { fecha: '18 Oct', casosNuevos: 45, casosNeutralizados: 32, tasaR0: 1.2 },
    { fecha: '19 Oct', casosNuevos: 67, casosNeutralizados: 41, tasaR0: 1.4 },
    { fecha: '20 Oct', casosNuevos: 89, casosNeutralizados: 56, tasaR0: 1.6 },
    { fecha: '21 Oct', casosNuevos: 134, casosNeutralizados: 78, tasaR0: 1.8 },
    { fecha: '22 Oct', casosNuevos: 198, casosNeutralizados: 112, tasaR0: 2.1 },
    { fecha: '23 Oct', casosNuevos: 267, casosNeutralizados: 145, tasaR0: 2.3 },
    { fecha: '24 Oct', casosNuevos: 342, casosNeutralizados: 189, tasaR0: 2.5 },
    { fecha: '25 Oct', casosNuevos: 298, casosNeutralizados: 234, tasaR0: 2.2 },
    { fecha: '26 Oct', casosNuevos: 234, casosNeutralizados: 267, tasaR0: 1.9 },
    { fecha: '27 Oct', casosNuevos: 189, casosNeutralizados: 198, tasaR0: 1.7 },
  ];

  // Datos de infectividad por hora
  const infectivityData = [
    { time: '00:00', casos: 120, nuevos: 23, resueltos: 15 },
    { time: '04:00', casos: 145, nuevos: 31, resueltos: 18 },
    { time: '08:00', casos: 189, nuevos: 67, resueltos: 24 },
    { time: '12:00', casos: 234, nuevos: 89, resueltos: 35 },
    { time: '16:00', casos: 298, nuevos: 112, resueltos: 48 },
    { time: '20:00', casos: 267, nuevos: 78, resueltos: 109 },
    { time: '24:00', casos: 189, nuevos: 45, resueltos: 123 },
  ];

  // Datos de vectores de transmisión
  const transmissionVectors = [
    { platform: 'WhatsApp', cases: 856, percentage: 28, color: '#25D366' },
    { platform: 'Facebook', cases: 723, percentage: 24, color: '#1877F2' },
    { platform: 'Twitter/X', cases: 534, percentage: 18, color: '#000000' },
    { platform: 'Telegram', cases: 298, percentage: 10, color: '#0088CC' },
    { platform: 'TikTok', cases: 267, percentage: 9, color: '#FF0050' },
    { platform: 'Web', cases: 334, percentage: 11, color: '#4285F4' },
  ];

  return (
    <div className="grid gap-6">
      {/* Curva Epidemiológica */}
      <Card>
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <Activity className="h-5 w-5 text-primary" />
            <span>Curva Epidemiológica de Desinformación</span>
          </CardTitle>
          <CardDescription>
            Evolución temporal de casos nuevos, neutralizados y tasa R₀
          </CardDescription>
        </CardHeader>
        <CardContent>
          <div className="h-80 w-full">
            <ResponsiveContainer width="100%" height="100%">
              <LineChart data={epidemiologicalCurve}>
                <CartesianGrid strokeDasharray="3 3" stroke="#e0e0e0" />
                <XAxis 
                  dataKey="fecha" 
                  tick={{ fontSize: 12 }}
                  stroke="#666"
                />
                <YAxis 
                  tick={{ fontSize: 12 }}
                  stroke="#666"
                />
                <Tooltip 
                  contentStyle={{
                    backgroundColor: 'white',
                    border: '1px solid #e0e0e0',
                    borderRadius: '8px',
                    fontSize: '12px'
                  }}
                />
                <Legend wrapperStyle={{ fontSize: '12px' }} />
                
                <Line 
                  type="monotone" 
                  dataKey="casosNuevos" 
                  stroke="#FF4444" 
                  strokeWidth={3}
                  dot={{ fill: '#FF4444', strokeWidth: 2, r: 5 }}
                  name="Casos Nuevos"
                />
                
                <Line 
                  type="monotone" 
                  dataKey="casosNeutralizados" 
                  stroke="#00E676" 
                  strokeWidth={3}
                  dot={{ fill: '#00E676', strokeWidth: 2, r: 4 }}
                  name="Casos Neutralizados"
                />
                
                <Line 
                  type="monotone" 
                  dataKey="tasaR0" 
                  stroke="#FFD60A" 
                  strokeWidth={2}
                  dot={{ fill: '#FFD60A', strokeWidth: 2, r: 4 }}
                  name="Tasa R₀"
                />
              </LineChart>
            </ResponsiveContainer>
          </div>
          
          {/* Métricas epidemiológicas */}
          <div className="mt-6 grid grid-cols-2 md:grid-cols-4 gap-4">
            <div className="bg-red-50 border border-red-200 rounded-lg p-4">
              <div className="flex items-center space-x-2">
                <TrendingUp className="h-4 w-4 text-red-500" />
                <span className="text-sm font-medium text-red-700">Velocidad de Contagio</span>
              </div>
              <div className="text-2xl font-semibold text-red-800 mt-2">1.7x</div>
              <div className="text-xs text-red-600">casos/hora</div>
            </div>
            
            <div className="bg-green-50 border border-green-200 rounded-lg p-4">
              <div className="flex items-center space-x-2">
                <Shield className="h-4 w-4 text-green-500" />
                <span className="text-sm font-medium text-green-700">Tasa de Inmunización</span>
              </div>
              <div className="text-2xl font-semibold text-green-800 mt-2">73%</div>
              <div className="text-xs text-green-600">verificaciones exitosas</div>
            </div>
            
            <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
              <div className="flex items-center space-x-2">
                <Clock className="h-4 w-4 text-yellow-500" />
                <span className="text-sm font-medium text-yellow-700">Período Incubación</span>
              </div>
              <div className="text-2xl font-semibold text-yellow-800 mt-2">2.3h</div>
              <div className="text-xs text-yellow-600">tiempo de propagación</div>
            </div>
            
            <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
              <div className="flex items-center space-x-2">
                <Zap className="h-4 w-4 text-blue-500" />
                <span className="text-sm font-medium text-blue-700">Índice Epidémico</span>
              </div>
              <div className="text-2xl font-semibold text-blue-800 mt-2">Alto</div>
              <div className="text-xs text-blue-600">fase exponencial</div>
            </div>
          </div>
        </CardContent>
      </Card>

      {/* Gráficos adicionales */}
      <div className="grid gap-6 md:grid-cols-2">
        {/* Infectividad por hora */}
        <Card>
          <CardHeader>
            <CardTitle>Infectividad por Hora</CardTitle>
            <CardDescription>
              Casos nuevos vs casos resueltos por hora del día
            </CardDescription>
          </CardHeader>
          <CardContent>
            <div className="h-64 w-full">
              <ResponsiveContainer width="100%" height="100%">
                <AreaChart data={infectivityData}>
                  <CartesianGrid strokeDasharray="3 3" />
                  <XAxis dataKey="time" tick={{ fontSize: 11 }} />
                  <YAxis tick={{ fontSize: 11 }} />
                  <Tooltip />
                  <Legend />
                  <Area 
                    type="monotone" 
                    dataKey="nuevos" 
                    stackId="1" 
                    stroke="#FF4444" 
                    fill="#FF4444" 
                    fillOpacity={0.6}
                    name="Casos Nuevos"
                  />
                  <Area 
                    type="monotone" 
                    dataKey="resueltos" 
                    stackId="2" 
                    stroke="#00E676" 
                    fill="#00E676" 
                    fillOpacity={0.6}
                    name="Casos Resueltos"
                  />
                </AreaChart>
              </ResponsiveContainer>
            </div>
          </CardContent>
        </Card>

        {/* Vectores de transmisión */}
        <Card>
          <CardHeader>
            <CardTitle>Vectores de Transmisión</CardTitle>
            <CardDescription>
              Plataformas con mayor propagación de desinformación
            </CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              {transmissionVectors.map((vector, index) => (
                <div key={index} className="flex items-center justify-between">
                  <div className="flex items-center space-x-3">
                    <div 
                      className="w-4 h-4 rounded-full" 
                      style={{ backgroundColor: vector.color }}
                    ></div>
                    <span className="text-sm font-medium">{vector.platform}</span>
                  </div>
                  <div className="flex items-center space-x-3">
                    <div className="text-right">
                      <div className="text-sm font-semibold">{vector.cases.toLocaleString()}</div>
                      <div className="text-xs text-muted-foreground">{vector.percentage}%</div>
                    </div>
                    <div className="w-20">
                      <div className="bg-muted rounded-full h-2">
                        <div 
                          className="h-2 rounded-full transition-all duration-500"
                          style={{ 
                            width: `${vector.percentage * 4}%`,
                            backgroundColor: vector.color 
                          }}
                        ></div>
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  );
} - - - - - - - - - - - - 
src/components/components/figma/ImageWithFallback.tsx

import React, { useState } from 'react'

const ERROR_IMG_SRC =
  'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg=='

export function ImageWithFallback(props: React.ImgHTMLAttributes<HTMLImageElement>) {
  const [didError, setDidError] = useState(false)

  const handleError = () => {
    setDidError(true)
  }

  const { src, alt, style, className, ...rest } = props

  return didError ? (
    <div
      className={`inline-block bg-gray-100 text-center align-middle ${className ?? ''}`}
      style={style}
    >
      <div className="flex items-center justify-center w-full h-full">
        <img src={ERROR_IMG_SRC} alt="Error loading image" {...rest} data-original-url={src} />
      </div>
    </div>
  ) : (
    <img src={src} alt={alt} className={className} style={style} {...rest} onError={handleError} />
  )
}
 - - - - - - - - - - - - 
src/components/components/ContentAnalysisView.tsx

import React from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Badge } from './ui/badge';
import { Progress } from './ui/progress';
import { Alert, AlertDescription } from './ui/alert';
import { Label } from './ui/label';
import { ImageWithFallback } from './figma/ImageWithFallback';
import { 
  AlertTriangle, 
  XCircle, 
  Hash,
  FileText,
  Flame,
  Ban,
  Skull,
  Target,
  Stethoscope,
  Bot,
  ArrowRight,
  UserCheck,
  Crosshair,
  ExternalLink,
  Activity,
  Share2,
  Facebook,
  Twitter,
  Linkedin,
  MessageCircle,
  Calendar,
  Link,
  FileType
} from 'lucide-react';

interface ContentAnalysisViewProps {
  contentId?: string;
}

export function ContentAnalysisView({ contentId = "CAS-2024-001" }: ContentAnalysisViewProps) {

  // Datos simulados del contenido analizado por Botilito
  const analysisResult = {
    id: contentId,
    timestamp: '2024-01-15T14:52:30Z',
    type: 'url',
    title: 'Artículo de noticia falsa con contenido xenofóbico',
    url: 'https://noticiasfalsas24.com/migrantes-venezolanos-crisis-colombia-2024',
    originalText: 'EXCLUSIVA: Investigación revela que el 89% de los delitos en Bogotá son cometidos por inmigrantes venezolanos, según "datos oficiales" que las autoridades ocultaron. Los ciudadanos colombianos ya perdieron más de 2 millones de empleos por esta invasión.',
    headline: 'EXCLUSIVA: Datos oficiales revelan que inmigrantes venezolanos cometen 89% de delitos en Bogotá',
    source: 'Noticias Falsas 24',
    submittedBy: 'carlos.martinez@email.com',
    submittedAt: '2024-01-15T14:45:00Z',
    botilloAnalysis: {
      primaryDiagnosis: 'Desinformación Tóxica',
      confidence: 0.96,
      riskLevel: 'Crítico',
      markersDetected: [
        { 
          type: 'Falso', 
          confidence: 0.94, 
          virulence: 85,
          justification: 'Estadística del "89% de delitos" no coincide con datos oficiales. Fuente citada carece de verificación institucional.' 
        },
        { 
          type: 'Discurso de odio (Xenofobia)', 
          confidence: 0.92, 
          virulence: 95,
          justification: 'Uso de término "invasión" y generalización negativa hacia población migrante venezolana promueve discriminación.' 
        },
        { 
          type: 'Incitación a la violencia', 
          confidence: 0.87, 
          virulence: 90,
          justification: 'Narrativa de "amenaza" y "pérdida de empleos" genera clima hostil que puede escalar a confrontación social.' 
        },
        { 
          type: 'Sensacionalista', 
          confidence: 0.78, 
          virulence: 55,
          justification: 'Titular con "EXCLUSIVA" y datos alarmistas busca generar reacciones emocionales antes que informar.' 
        }
      ],
      epidemiologicMetrics: {
        r0: 4.7,
        infectivity: 0.94,
        virulence: 0.89,
        transmissionSpeed: 0.96,
        incubationTime: 2.3
      },
      transmissionVectors: [
        { platform: 'Facebook', propagationRisk: 89, active: true },
        { platform: 'WhatsApp', propagationRisk: 82, active: true },
        { platform: 'Twitter', propagationRisk: 75, active: true },
        { platform: 'Telegram', propagationRisk: 68, active: false }
      ],
      geographicSpread: [
        { region: 'Región Andina', riskLevel: 'Crítico', percentage: 89 },
        { region: 'Región Caribe', riskLevel: 'Alto', percentage: 72 },
        { region: 'Región Pacífico', riskLevel: 'Medio', percentage: 45 },
        { region: 'Región Orinoquía', riskLevel: 'Bajo', percentage: 23 }
      ]
    },
    autoActions: {
      humanVerificationQueued: true,
      platformsNotified: ['Facebook', 'WhatsApp', 'Twitter'],
      expertAssigned: 'Especialista en Contenido Tóxico',
      priority: 'Crítica',
      estimatedProcessingTime: '24-48 horas'
    }
  };

  const getMarkerIcon = (type: string) => {
    const iconMap: { [key: string]: React.ReactNode } = {
      'Falso': <XCircle className="h-4 w-4" />,
      'Discurso de odio (Xenofobia)': <Skull className="h-4 w-4" />,
      'Incitación a la violencia': <Ban className="h-4 w-4" />,
      'Sensacionalista': <Flame className="h-4 w-4" />,
    };
    return iconMap[type] || <Target className="h-4 w-4" />;
  };

  const getMarkerColor = (type: string) => {
    const colorMap: { [key: string]: string } = {
      'Verdadero': 'bg-emerald-500 hover:bg-emerald-600',
      'Falso': 'bg-red-500 hover:bg-red-600',
      'Engañoso': 'bg-orange-500 hover:bg-orange-600',
      'Satírico': 'bg-blue-500 hover:bg-blue-600',
      'Satírico/Humorístico': 'bg-blue-500 hover:bg-blue-600',
      'Manipulado': 'bg-purple-500 hover:bg-purple-600',
      'Discurso de odio': 'bg-red-700 hover:bg-red-800',
      'Discurso de odio (Xenofobia)': 'bg-red-700 hover:bg-red-800',
      'Racismo/Xenofobia': 'bg-red-700 hover:bg-red-800',
      'Sexismo/LGBTQ+fobia': 'bg-red-700 hover:bg-red-800',
      'Clasismo/Aporofobia': 'bg-red-600 hover:bg-red-700',
      'Ableismo': 'bg-red-600 hover:bg-red-700',
      'Incitación a la violencia': 'bg-red-900 hover:bg-red-950',
      'Sensacionalista': 'bg-orange-400 hover:bg-orange-500',
      'Sin contexto': 'bg-amber-500 hover:bg-amber-600',
      'Descontextualizado': 'bg-amber-500 hover:bg-amber-600',
      'No verificable': 'bg-gray-500 hover:bg-gray-600',
      'Teoría conspirativa': 'bg-violet-600 hover:bg-violet-700',
      'Conspiración': 'bg-violet-600 hover:bg-violet-700',
      'Bot/Coordinado': 'bg-indigo-600 hover:bg-indigo-700',
      'Propaganda': 'bg-indigo-600 hover:bg-indigo-700',
      'Suplantación de identidad': 'bg-purple-700 hover:bg-purple-800',
      'Acoso/Ciberbullying': 'bg-orange-700 hover:bg-orange-800',
      'Contenido prejuicioso': 'bg-yellow-600 hover:bg-yellow-700',
      'En revisión': 'bg-gray-400 hover:bg-gray-500'
    };
    return colorMap[type] || 'bg-gray-500 hover:bg-gray-600';
  };

  const getRiskColor = (level: string) => {
    switch (level) {
      case 'Crítico': return 'border-red-500 bg-red-50';
      case 'Alto': return 'border-orange-500 bg-orange-50';
      case 'Medio': return 'border-yellow-500 bg-yellow-50';
      case 'Bajo': return 'border-green-500 bg-green-50';
      default: return 'border-gray-500 bg-gray-50';
    }
  };

  const handleShare = (platform: string) => {
    const text = `Diagnóstico Desinfodémico - Caso ${analysisResult.id}: ${analysisResult.botilloAnalysis.primaryDiagnosis} detectado por Botilito`;
    const url = window.location.href;
    
    switch(platform) {
      case 'twitter':
        window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
        break;
      case 'facebook':
        window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank');
        break;
      case 'linkedin':
        window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`, '_blank');
        break;
      case 'whatsapp':
        window.open(`https://wa.me/?text=${encodeURIComponent(text + ' ' + url)}`, '_blank');
        break;
    }
  };

  return (
    <div className="space-y-6">
      {/* Header Principal */}
      <div className="text-center space-y-2">
        <h1 className="flex items-center justify-center space-x-3">
          <Bot className="h-8 w-8 text-primary" />
          <span>Análisis IA</span>
        </h1>
        <p className="text-muted-foreground">
          Diagnóstico de Botilito completado
        </p>
      </div>

      {/* Diagnóstico Desinfodémico Completo */}
      <Card className="border-2 border-primary shadow-lg">
        <CardHeader className="bg-primary/10 border-b border-primary/20">
          <div className="flex items-center justify-between">
            <CardTitle className="flex items-center space-x-2">
              <Stethoscope className="h-6 w-6 text-primary" />
              <span>Diagnóstico Desinfodémico de Botilito</span>
            </CardTitle>
            <Badge className="bg-primary text-primary-foreground">
              <Bot className="h-3 w-3 mr-1" />
              IA
            </Badge>
          </div>
        </CardHeader>
        <CardContent className="p-6 space-y-6">
          {/* Información del Caso */}
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-muted/30 rounded-lg">
            <div className="flex items-start space-x-3">
              <Hash className="h-5 w-5 text-primary mt-0.5" />
              <div>
                <div className="text-sm text-muted-foreground">Número de Caso</div>
                <div className="font-mono">Caso: {analysisResult.id}</div>
              </div>
            </div>
            <div className="flex items-start space-x-3">
              <Calendar className="h-5 w-5 text-primary mt-0.5" />
              <div>
                <div className="text-sm text-muted-foreground">Fecha de Análisis</div>
                <div>{new Date(analysisResult.timestamp).toLocaleDateString('es-CO', { 
                  day: '2-digit', 
                  month: 'long', 
                  year: 'numeric',
                  hour: '2-digit',
                  minute: '2-digit'
                })}</div>
              </div>
            </div>
            <div className="flex items-start space-x-3">
              <FileType className="h-5 w-5 text-primary mt-0.5" />
              <div>
                <div className="text-sm text-muted-foreground">Tipo de Contenido</div>
                <div className="capitalize">{analysisResult.type === 'url' ? 'Enlace Web' : analysisResult.type}</div>
              </div>
            </div>
          </div>

          {/* Título del Contenido */}
          <div>
            <Label className="flex items-center space-x-2 mb-2">
              <FileText className="h-4 w-4 text-primary" />
              <span>Título del Contenido</span>
            </Label>
            <div className="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
              <p className="italic">{analysisResult.headline}</p>
            </div>
          </div>

          {/* Diagnóstico Principal */}
          <div className={`p-6 rounded-lg border-2 ${getRiskColor(analysisResult.botilloAnalysis.riskLevel)}`}>
            <div className="flex items-start justify-between mb-4">
              <div className="space-y-2">
                <div className="flex items-center space-x-2">
                  <Stethoscope className="h-5 w-5 text-primary" />
                  <span className="text-sm text-muted-foreground">Diagnóstico Principal</span>
                </div>
                <h3 className="text-red-600">
                  {analysisResult.botilloAnalysis.primaryDiagnosis}
                </h3>
              </div>
              <div className="text-right space-y-1">
                <Badge className="bg-red-500 text-white">
                  RIESGO {analysisResult.botilloAnalysis.riskLevel.toUpperCase()}
                </Badge>
                <div className="text-sm text-muted-foreground">
                  {(analysisResult.botilloAnalysis.confidence * 100).toFixed(1)}% certeza
                </div>
              </div>
            </div>
            <Progress 
              value={analysisResult.botilloAnalysis.confidence * 100} 
              className="h-3"
            />
          </div>

          {/* Marcadores Detectados - Resumen */}
          <div>
            <Label className="flex items-center space-x-2 mb-3">
              <Crosshair className="h-4 w-4 text-primary" />
              <span>Marcadores de Diagnóstico Detectados</span>
              <Badge variant="secondary">{analysisResult.botilloAnalysis.markersDetected.length}</Badge>
            </Label>
            <div className="flex flex-wrap gap-2">
              {analysisResult.botilloAnalysis.markersDetected.map((marker, index) => (
                <Badge 
                  key={index}
                  className={`${getMarkerColor(marker.type)} text-white px-3 py-1`}
                >
                  {getMarkerIcon(marker.type)}
                  <span className="ml-1">{marker.type}</span>
                  <span className="ml-2 text-xs opacity-80">
                    {(marker.confidence * 100).toFixed(0)}%
                  </span>
                </Badge>
              ))}
            </div>
          </div>

          {/* Botones de Compartir */}
          <div className="pt-4 border-t">
            <Label className="flex items-center space-x-2 mb-3">
              <Share2 className="h-4 w-4 text-primary" />
              <span>Compartir Diagnóstico</span>
            </Label>
            <div className="flex flex-wrap gap-2">
              <button
                onClick={() => handleShare('twitter')}
                className="flex items-center space-x-2 px-4 py-2 bg-[#1DA1F2] text-white rounded-lg hover:opacity-90 transition-opacity"
              >
                <Twitter className="h-4 w-4" />
                <span>Twitter</span>
              </button>
              <button
                onClick={() => handleShare('facebook')}
                className="flex items-center space-x-2 px-4 py-2 bg-[#1877F2] text-white rounded-lg hover:opacity-90 transition-opacity"
              >
                <Facebook className="h-4 w-4" />
                <span>Facebook</span>
              </button>
              <button
                onClick={() => handleShare('linkedin')}
                className="flex items-center space-x-2 px-4 py-2 bg-[#0A66C2] text-white rounded-lg hover:opacity-90 transition-opacity"
              >
                <Linkedin className="h-4 w-4" />
                <span>LinkedIn</span>
              </button>
              <button
                onClick={() => handleShare('whatsapp')}
                className="flex items-center space-x-2 px-4 py-2 bg-[#25D366] text-white rounded-lg hover:opacity-90 transition-opacity"
              >
                <MessageCircle className="h-4 w-4" />
                <span>WhatsApp</span>
              </button>
            </div>
          </div>

          {/* Fuente y Submisión */}
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-muted/20 rounded-lg">
            <div className="flex items-center space-x-3">
              <Link className="h-4 w-4 text-muted-foreground" />
              <div>
                <div className="text-sm text-muted-foreground">Fuente</div>
                <div className="text-sm">{analysisResult.source}</div>
              </div>
            </div>
            <div className="flex items-center space-x-3">
              <UserCheck className="h-4 w-4 text-muted-foreground" />
              <div>
                <div className="text-sm text-muted-foreground">Enviado por</div>
                <div className="text-sm">{analysisResult.submittedBy}</div>
              </div>
            </div>
          </div>
        </CardContent>
      </Card>

      {/* Status de Derivación Automática */}
      <Alert className="border-blue-200 bg-blue-50">
        <ArrowRight className="h-4 w-4 text-blue-600" />
        <AlertDescription className="text-blue-800">
          <strong>🤖 Botilito:</strong> Este caso ha sido enviado a verificación humana para análisis adicional
        </AlertDescription>
      </Alert>

      {/* Diagnóstico y Análisis Unificado */}
      <div className="space-y-6">
        <div className="grid gap-6 lg:grid-cols-2">
            {/* Panel Principal de Diagnóstico */}
            <Card className={`border-2 ${getRiskColor(analysisResult.botilloAnalysis.riskLevel)}`}>
              <CardContent className="p-3">
                <div className="flex items-center justify-between">
                  <div className="flex items-center space-x-2">
                    <Stethoscope className="h-4 w-4 text-primary" />
                    <span className="text-sm">Diagnóstico</span>
                  </div>
                  <Badge className="bg-red-500 text-white text-sm px-2 py-1">
                    <Bot className="h-3 w-3 mr-1" />
                    {analysisResult.botilloAnalysis.primaryDiagnosis}
                  </Badge>
                </div>
                <div className="flex items-center justify-between mt-2">
                  <div className="text-lg text-red-600">
                    RIESGO {analysisResult.botilloAnalysis.riskLevel.toUpperCase()}
                  </div>
                  <div className="text-xs text-muted-foreground">
                    {(analysisResult.botilloAnalysis.confidence * 100).toFixed(1)}% certeza
                  </div>
                </div>
              </CardContent>
            </Card>

            {/* Métricas de Riesgo */}
            <Card>
              <CardContent className="p-3">
                <div className="flex items-center justify-between">
                  <div className="flex items-center space-x-2">
                    <Activity className="h-4 w-4 text-primary" />
                    <span className="text-sm">Nivel de Riesgo</span>
                  </div>
                  <div className="text-2xl">⚠️</div>
                </div>
                <div className="flex items-center justify-between mt-2">
                  <div className="text-lg text-red-600">
                    {analysisResult.botilloAnalysis.riskLevel.toUpperCase()}
                  </div>
                  <div className="text-xs text-red-700">
                    Intervención Requerida
                  </div>
                </div>
              </CardContent>
            </Card>
          </div>

        {/* Contenido Original Analizado */}
        <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <FileText className="h-5 w-5 text-primary" />
                <span>Contenido Analizado</span>
              </CardTitle>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="space-y-3">
                <div>
                  <Label>Titular detectado:</Label>
                  <div className="bg-red-50 p-3 rounded border-l-4 border-red-400 mt-1">
                    <p className="italic">{analysisResult.headline}</p>
                  </div>
                </div>
                
                <div>
                  <Label>Contenido analizado:</Label>
                  <div className="bg-gray-50 p-4 rounded border mt-1">
                    <p className="text-sm leading-relaxed">
                      <strong>BREAKING: Supuesto hallazgo revolucionario en medicina promete curar todas las enfermedades</strong>
                      <br /><br />
                      BOGOTÁ, Colombia - Un grupo de científicos colombianos afirma haber desarrollado una revolucionaria "cura universal" que supuestamente puede tratar desde el cáncer hasta el resfriado común en cuestión de horas. El anuncio, realizado a través de redes sociales sin revisión científica, ha generado controversia en la comunidad médica internacional.
                      <br /><br />
                      Según el comunicado difundido masivamente en WhatsApp y Facebook, el tratamiento consiste en una mezcla de "extractos naturales amazónicos" combinados con "nanotecnología cuántica". Los supuestos investigadores aseguran que han probado el tratamiento en "miles de pacientes" con una tasa de éxito del 100%.
                      <br /><br />
                      "Este descubrimiento cambiará la historia de la humanidad", declaró en el video viral el presunto líder del equipo, quien se presenta como "Dr. Alejandro Ramírez, especialista en medicina alternativa". Sin embargo, verificaciones preliminares indican que no existe registro de este profesional en el Colegio Médico Colombiano.
                      <br /><br />
                      La Organización Mundial de la Salud (OMS) y el Ministerio de Salud de Colombia han emitido alertas advirtiendo sobre la peligrosidad de este tipo de desinformación médica, especialmente considerando que puede llevar a personas a abandonar tratamientos médicos efectivos.
                      <br /><br />
                      El contenido, que ha sido compartido más de 50,000 veces en las últimas 24 horas, incluye testimonios emocionales de supuestos pacientes "curados" y promete resultados "garantizados" a cambio de una consulta inicial de $200,000 COP.
                    </p>
                  </div>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <Label>Fuente:</Label>
                    <div className="flex items-center space-x-2 mt-1">
                      <ExternalLink className="h-4 w-4 text-muted-foreground" />
                      <span className="text-sm">{analysisResult.source}</span>
                    </div>
                  </div>
                  <div>
                    <Label>Enviado por:</Label>
                    <p className="text-sm mt-1">{analysisResult.submittedBy}</p>
                  </div>
                </div>
              </div>
            </CardContent>
          </Card>

          {/* Marcadores de Diagnóstico Detectados */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Crosshair className="h-5 w-5 text-primary" />
                <span>Marcadores Detectados</span>
                <Badge variant="secondary">{analysisResult.botilloAnalysis.markersDetected.length}</Badge>
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="grid gap-4">
                {analysisResult.botilloAnalysis.markersDetected.map((marker, index) => {
                  const getMarkerColorLight = (type: string) => {
                    const colorMap: { [key: string]: string } = {
                      'Verdadero': 'bg-green-50 border-green-200',
                      'Falso': 'bg-red-50 border-red-200',
                      'Engañoso': 'bg-orange-50 border-orange-200',
                      'Satírico': 'bg-blue-50 border-blue-200',
                      'Satírico/Humorístico': 'bg-blue-50 border-blue-200',
                      'Manipulado': 'bg-purple-50 border-purple-200',
                      'Discurso de odio': 'bg-red-100 border-red-300',
                      'Discurso de odio (Xenofobia)': 'bg-red-100 border-red-300',
                      'Racismo/Xenofobia': 'bg-red-100 border-red-300',
                      'Sexismo/LGBTQ+fobia': 'bg-red-100 border-red-300',
                      'Clasismo/Aporofobia': 'bg-red-100 border-red-300',
                      'Ableismo': 'bg-red-100 border-red-300',
                      'Propaganda': 'bg-indigo-50 border-indigo-200',
                      'Spam': 'bg-gray-50 border-gray-200',
                      'Conspiración': 'bg-violet-50 border-violet-200',
                      'Teoría conspirativa': 'bg-violet-50 border-violet-200',
                      'Sesgo Político': 'bg-yellow-50 border-yellow-200',
                      'Estafa': 'bg-purple-50 border-purple-200',
                      'Sensacionalista': 'bg-orange-50 border-orange-200',
                      'Incitación a la violencia': 'bg-red-100 border-red-400',
                      'Descontextualizado': 'bg-amber-50 border-amber-200',
                      'Sin contexto': 'bg-amber-50 border-amber-200',
                      'Parcialmente Cierto': 'bg-orange-50 border-orange-200',
                      'Contenido Patrocinado': 'bg-indigo-50 border-indigo-200',
                      'Opinión': 'bg-gray-50 border-gray-200',
                      'Rumor': 'bg-gray-50 border-gray-200',
                      'No verificable': 'bg-gray-50 border-gray-200',
                      'Deepfake': 'bg-purple-50 border-purple-200',
                      'Sin Verificar': 'bg-gray-50 border-gray-200',
                      'Bot/Coordinado': 'bg-indigo-50 border-indigo-200',
                      'Suplantación de identidad': 'bg-purple-50 border-purple-200',
                      'Acoso/Ciberbullying': 'bg-orange-100 border-orange-300',
                      'Contenido prejuicioso': 'bg-yellow-50 border-yellow-200',
                      'En revisión': 'bg-gray-50 border-gray-200'
                    };
                    return colorMap[type] || 'bg-gray-50 border-gray-200';
                  };

                  const getMarkerColorSoft = (type: string) => {
                    const colorMap: { [key: string]: string } = {
                      'Verdadero': 'bg-green-100 text-green-700 border-green-200',
                      'Falso': 'bg-red-100 text-red-700 border-red-200',
                      'Engañoso': 'bg-orange-100 text-orange-700 border-orange-200',
                      'Satírico': 'bg-blue-100 text-blue-700 border-blue-200',
                      'Satírico/Humorístico': 'bg-blue-100 text-blue-700 border-blue-200',
                      'Manipulado': 'bg-purple-100 text-purple-700 border-purple-200',
                      'Discurso de odio': 'bg-red-100 text-red-800 border-red-300',
                      'Discurso de odio (Xenofobia)': 'bg-red-100 text-red-800 border-red-300',
                      'Racismo/Xenofobia': 'bg-red-100 text-red-800 border-red-300',
                      'Sexismo/LGBTQ+fobia': 'bg-red-100 text-red-800 border-red-300',
                      'Clasismo/Aporofobia': 'bg-red-100 text-red-800 border-red-300',
                      'Ableismo': 'bg-red-100 text-red-800 border-red-300',
                      'Propaganda': 'bg-indigo-100 text-indigo-700 border-indigo-200',
                      'Spam': 'bg-gray-100 text-gray-700 border-gray-200',
                      'Conspiración': 'bg-violet-100 text-violet-700 border-violet-200',
                      'Teoría conspirativa': 'bg-violet-100 text-violet-700 border-violet-200',
                      'Sesgo Político': 'bg-yellow-100 text-yellow-700 border-yellow-200',
                      'Estafa': 'bg-purple-100 text-purple-700 border-purple-200',
                      'Sensacionalista': 'bg-orange-100 text-orange-700 border-orange-200',
                      'Incitación a la violencia': 'bg-red-100 text-red-900 border-red-400',
                      'Descontextualizado': 'bg-amber-100 text-amber-700 border-amber-200',
                      'Sin contexto': 'bg-amber-100 text-amber-700 border-amber-200',
                      'Parcialmente Cierto': 'bg-orange-100 text-orange-700 border-orange-200',
                      'Contenido Patrocinado': 'bg-indigo-100 text-indigo-700 border-indigo-200',
                      'Opinión': 'bg-gray-100 text-gray-700 border-gray-200',
                      'Rumor': 'bg-gray-100 text-gray-700 border-gray-200',
                      'No verificable': 'bg-gray-100 text-gray-700 border-gray-200',
                      'Deepfake': 'bg-purple-100 text-purple-700 border-purple-200',
                      'Sin Verificar': 'bg-gray-100 text-gray-700 border-gray-200',
                      'Bot/Coordinado': 'bg-indigo-100 text-indigo-700 border-indigo-200',
                      'Suplantación de identidad': 'bg-purple-100 text-purple-700 border-purple-200',
                      'Acoso/Ciberbullying': 'bg-orange-100 text-orange-800 border-orange-300',
                      'Contenido prejuicioso': 'bg-yellow-100 text-yellow-700 border-yellow-200',
                      'En revisión': 'bg-gray-100 text-gray-700 border-gray-200'
                    };
                    return colorMap[type] || 'bg-gray-100 text-gray-700 border-gray-200';
                  };

                  return (
                    <div key={index} className={`p-4 rounded-lg border space-y-3 ${getMarkerColorLight(marker.type)}`}>
                      <div className="flex items-start justify-between">
                        <div className="flex items-center space-x-3">
                          <Badge className={`${getMarkerColorSoft(marker.type)}`}>
                            {getMarkerIcon(marker.type)}
                          </Badge>
                          <div>
                            <div className="font-medium">{marker.type}</div>
                            <div className="text-sm text-muted-foreground">
                              Virulencia: {marker.virulence}%
                            </div>
                          </div>
                        </div>
                        <div className="text-right space-y-1">
                          <div className="text-sm font-medium">
                            {(marker.confidence * 100).toFixed(1)}% confianza
                          </div>
                          <Progress value={marker.confidence * 100} className="w-20 h-2" />
                        </div>
                      </div>
                      <div className="text-xs text-muted-foreground leading-relaxed pl-10">
                        <strong>Justificación:</strong> {marker.justification}
                      </div>
                    </div>
                  );
                })}
              </div>
            </CardContent>
          </Card>

          {/* Vista previa del sitio web */}
          <Card>
            <CardHeader>
              <CardTitle>Vista Previa</CardTitle>
              <CardDescription>Captura del contenido analizado</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-3">
                <ImageWithFallback
                  src="https://images.unsplash.com/photo-1588681664899-f142ff2dc9b1?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxuZXdzJTIwd2Vic2l0ZSUyMHNjcmVlbnNob3R8ZW58MXx8fHwxNzU5MTgzOTcyfDA&ixlib=rb-4.1.0&q=80&w=1080"
                  alt="Vista previa del sitio web analizado"
                  className="w-full h-64 object-cover rounded border"
                />
                <Alert className="border-red-200 bg-red-50">
                  <AlertTriangle className="h-4 w-4 text-red-600" />
                  <AlertDescription className="text-red-800">
                    <strong>Advertencia:</strong> Este contenido contiene desinformación de alto riesgo.
                  </AlertDescription>
                </Alert>
              </div>
            </CardContent>
          </Card>
      </div>
    </div>
  );
} - - - - - - - - - - - - 
src/components/components/RealTimeStats.tsx

import React, { useState, useEffect } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Badge } from './ui/badge';
import { Progress } from './ui/progress';
import { motion } from 'motion/react';
import { 
  Activity, TrendingUp, TrendingDown, Zap, Shield, 
  Clock, Target, Thermometer, Radio, Wifi
} from 'lucide-react';

export function RealTimeStats() {
  const [systemHealth, setSystemHealth] = useState(98);
  const [activeConnections, setActiveConnections] = useState(1247);
  const [processingSpeed, setProcessingSpeed] = useState(87);

  // Actualización en tiempo real de métricas
  useEffect(() => {
    const interval = setInterval(() => {
      setSystemHealth(prev => Math.min(100, Math.max(85, prev + (Math.random() - 0.5) * 2)));
      setActiveConnections(prev => prev + Math.floor(Math.random() * 10 - 5));
      setProcessingSpeed(prev => Math.min(100, Math.max(70, prev + (Math.random() - 0.5) * 5)));
    }, 3000);

    return () => clearInterval(interval);
  }, []);

  const getHealthColor = (value: number) => {
    if (value >= 95) return 'text-green-600';
    if (value >= 85) return 'text-yellow-600';
    return 'text-red-600';
  };

  const getHealthBadge = (value: number) => {
    if (value >= 95) return <Badge className="bg-green-100 text-green-800">Excelente</Badge>;
    if (value >= 85) return <Badge className="bg-yellow-100 text-yellow-800">Bueno</Badge>;
    return <Badge className="bg-red-100 text-red-800">Alerta</Badge>;
  };

  return (
    <div className="space-y-6">
      {/* Estado del Sistema */}
      <Card>
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <Activity className="h-5 w-5 text-primary" />
            <span>Estado del Sistema</span>
          </CardTitle>
          <CardDescription>
            Monitoreo en tiempo real del rendimiento
          </CardDescription>
        </CardHeader>
        <CardContent className="space-y-4">
          {/* Salud del Sistema */}
          <div className="space-y-2">
            <div className="flex items-center justify-between">
              <span className="text-sm font-medium">Salud del Sistema</span>
              {getHealthBadge(systemHealth)}
            </div>
            <div className="flex items-center space-x-2">
              <motion.div
                key={systemHealth}
                initial={{ scale: 1.1 }}
                animate={{ scale: 1 }}
                className={`text-2xl font-semibold ${getHealthColor(systemHealth)}`}
              >
                {Math.round(systemHealth)}%
              </motion.div>
              <Progress value={systemHealth} className="flex-1" />
            </div>
          </div>

          {/* Conexiones Activas */}
          <div className="space-y-2">
            <div className="flex items-center justify-between">
              <span className="text-sm font-medium">Conexiones Activas</span>
              <div className="flex items-center space-x-1">
                <div className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                <span className="text-xs text-green-600">Online</span>
              </div>
            </div>
            <motion.div
              key={activeConnections}
              initial={{ scale: 1.1 }}
              animate={{ scale: 1 }}
              className="text-2xl font-semibold text-blue-600"
            >
              {activeConnections.toLocaleString()}
            </motion.div>
          </div>

          {/* Velocidad de Procesamiento */}
          <div className="space-y-2">
            <div className="flex items-center justify-between">
              <span className="text-sm font-medium">Velocidad de Procesamiento</span>
              <Badge variant="outline" className="text-xs">
                {processingSpeed >= 90 ? <TrendingUp className="h-3 w-3 mr-1" /> : <TrendingDown className="h-3 w-3 mr-1" />}
                {processingSpeed >= 90 ? 'Alta' : processingSpeed >= 75 ? 'Media' : 'Baja'}
              </Badge>
            </div>
            <div className="flex items-center space-x-2">
              <motion.div
                key={processingSpeed}
                initial={{ scale: 1.1 }}
                animate={{ scale: 1 }}
                className="text-2xl font-semibold text-orange-600"
              >
                {Math.round(processingSpeed)}%
              </motion.div>
              <Progress value={processingSpeed} className="flex-1" />
            </div>
          </div>
        </CardContent>
      </Card>

      {/* Métricas Epidemiológicas */}
      <Card>
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <Thermometer className="h-5 w-5 text-primary" />
            <span>Métricas Epidemiológicas</span>
          </CardTitle>
        </CardHeader>
        <CardContent className="space-y-4">
          <div className="grid grid-cols-2 gap-4">
            <div className="bg-red-50 rounded-lg p-3">
              <div className="flex items-center space-x-1 mb-1">
                <Zap className="h-3 w-3 text-red-500" />
                <span className="text-xs font-medium text-red-700">R₀ Actual</span>
              </div>
              <div className="text-lg font-semibold text-red-800">2.3</div>
            </div>
            
            <div className="bg-green-50 rounded-lg p-3">
              <div className="flex items-center space-x-1 mb-1">
                <Shield className="h-3 w-3 text-green-500" />
                <span className="text-xs font-medium text-green-700">Inmunidad</span>
              </div>
              <div className="text-lg font-semibold text-green-800">67%</div>
            </div>
            
            <div className="bg-blue-50 rounded-lg p-3">
              <div className="flex items-center space-x-1 mb-1">
                <Clock className="h-3 w-3 text-blue-500" />
                <span className="text-xs font-medium text-blue-700">T. Detección</span>
              </div>
              <div className="text-lg font-semibold text-blue-800">4.2h</div>
            </div>
            
            <div className="bg-yellow-50 rounded-lg p-3">
              <div className="flex items-center space-x-1 mb-1">
                <Target className="h-3 w-3 text-yellow-500" />
                <span className="text-xs font-medium text-yellow-700">Precisión</span>
              </div>
              <div className="text-lg font-semibold text-yellow-800">94.8%</div>
            </div>
          </div>
        </CardContent>
      </Card>

      {/* Actividad de Red */}
      <Card>
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <Radio className="h-5 w-5 text-primary" />
            <span>Actividad de Red</span>
          </CardTitle>
        </CardHeader>
        <CardContent className="space-y-3">
          <div className="flex items-center justify-between">
            <span className="text-sm">APIs Activas</span>
            <div className="flex items-center space-x-1">
              <div className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
              <span className="text-sm font-medium">8/8</span>
            </div>
          </div>
          
          <div className="flex items-center justify-between">
            <span className="text-sm">Latencia Promedio</span>
            <span className="text-sm font-medium">127ms</span>
          </div>
          
          <div className="flex items-center justify-between">
            <span className="text-sm">Última Sincronización</span>
            <span className="text-sm text-muted-foreground">hace 45s</span>
          </div>
          
          <div className="flex items-center justify-between">
            <span className="text-sm">Próxima Actualización</span>
            <span className="text-sm text-muted-foreground">en 1m 15s</span>
          </div>

          {/* Indicador de transmisión */}
          <div className="mt-4 p-3 bg-muted/30 rounded-lg">
            <div className="flex items-center space-x-2 mb-2">
              <Wifi className="h-4 w-4 text-primary animate-pulse" />
              <span className="text-sm font-medium">Transmisión en Vivo</span>
            </div>
            <div className="text-xs text-muted-foreground">
              Recibiendo datos epidemiológicos en tiempo real de 6 regiones
            </div>
          </div>
        </CardContent>
      </Card>
    </div>
  );
} - - - - - - - - - - - - 
src/components/components/AIAnalysisView.tsx

import React, { useState } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from './ui/card';
import { Badge } from './ui/badge';
import { Button } from './ui/button';
import { Progress } from './ui/progress';
import { Tabs, TabsContent, TabsList, TabsTrigger } from './ui/tabs';
import { Alert, AlertDescription } from './ui/alert';
import { ImageWithFallback } from './figma/ImageWithFallback';

import { 
  CheckCircle, 
  XCircle, 
  AlertTriangle,
  Smile,
  Image,
  Heart,
  Shield,
  Target,
  Flame,
  Users,
  Vote,
  DollarSign,
  Zap,
  Eye,
  Ban,
  Skull,
  Activity,
  TrendingUp,
  BarChart3,
  Clock,
  MapPin,
  Bot,
  Microscope,
  AlertCircle,
  HelpCircle,
  GitBranch,
  Radio,
  Globe,
  MessageSquare,
  Megaphone
} from 'lucide-react';
import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from './ui/tooltip';

// Definición de las 20 categorías de etiquetas con enfoque epidemiológico
const ETIQUETAS_CATEGORIAS = [
  { id: 'verdadero', label: 'Verdadero', icon: CheckCircle, color: 'text-green-600', bg: 'bg-green-50', border: 'border-green-200', virulencia: 0 },
  { id: 'falso', label: 'Falso', icon: XCircle, color: 'text-red-600', bg: 'bg-red-50', border: 'border-red-200', virulencia: 90 },
  { id: 'enganoso', label: 'Engañoso', icon: AlertTriangle, color: 'text-orange-600', bg: 'bg-orange-50', border: 'border-orange-200', virulencia: 75 },
  { id: 'satirico', label: 'Satírico', icon: Smile, color: 'text-blue-600', bg: 'bg-blue-50', border: 'border-blue-200', virulencia: 20 },
  { id: 'manipulado', label: 'Manipulado', icon: Image, color: 'text-purple-600', bg: 'bg-purple-50', border: 'border-purple-200', virulencia: 85 },
  { id: 'discurso_odio', label: 'Discurso de Odio', icon: Skull, color: 'text-red-800', bg: 'bg-red-100', border: 'border-red-300', virulencia: 95 },
  { id: 'propaganda', label: 'Propaganda', icon: Megaphone, color: 'text-indigo-600', bg: 'bg-indigo-50', border: 'border-indigo-200', virulencia: 70 },
  { id: 'spam', label: 'Spam', icon: Ban, color: 'text-gray-600', bg: 'bg-gray-50', border: 'border-gray-200', virulencia: 30 },
  { id: 'conspiracion', label: 'Conspiración', icon: Eye, color: 'text-violet-600', bg: 'bg-violet-50', border: 'border-violet-200', virulencia: 80 },
  { id: 'sesgo_politico', label: 'Sesgo Político', icon: Vote, color: 'text-pink-600', bg: 'bg-pink-50', border: 'border-pink-200', virulencia: 65 },
  { id: 'estafa', label: 'Estafa', icon: DollarSign, color: 'text-red-600', bg: 'bg-red-50', border: 'border-red-200', virulencia: 88 },
  { id: 'sensacionalista', label: 'Sensacionalista', icon: Flame, color: 'text-orange-500', bg: 'bg-orange-50', border: 'border-orange-200', virulencia: 55 },
  { id: 'descontextualizado', label: 'Descontextualizado', icon: AlertCircle, color: 'text-amber-600', bg: 'bg-amber-50', border: 'border-amber-200', virulencia: 60 },
  { id: 'parcialmente_cierto', label: 'Parcialmente Cierto', icon: HelpCircle, color: 'text-cyan-600', bg: 'bg-cyan-50', border: 'border-cyan-200', virulencia: 35 },
  { id: 'contenido_patrocinado', label: 'Contenido Patrocinado', icon: Heart, color: 'text-emerald-600', bg: 'bg-emerald-50', border: 'border-emerald-200', virulencia: 25 },
  { id: 'opinion', label: 'Opinión', icon: MessageSquare, color: 'text-slate-600', bg: 'bg-slate-50', border: 'border-slate-200', virulencia: 15 },
  { id: 'rumor', label: 'Rumor', icon: Radio, color: 'text-teal-600', bg: 'bg-teal-50', border: 'border-teal-200', virulencia: 50 },
  { id: 'deepfake', label: 'Deepfake', icon: Bot, color: 'text-red-700', bg: 'bg-red-100', border: 'border-red-300', virulencia: 92 },
  { id: 'sin_verificar', label: 'Sin Verificar', icon: Clock, color: 'text-gray-500', bg: 'bg-gray-50', border: 'border-gray-200', virulencia: 40 }
];

interface AIAnalysisViewProps {
  contentId?: string;
}

export function AIAnalysisView({ contentId = "caso_001" }: AIAnalysisViewProps) {
  const [etiquetasDetectadas, setEtiquetasDetectadas] = useState([
    { categoria: 'enganoso', confianza: 0.89, activa: true },
    { categoria: 'sensacionalista', confianza: 0.73, activa: true },
    { categoria: 'sesgo_politico', confianza: 0.65, activa: false }
  ]);

  const [metricsEpidemicas, setMetricsEpidemicas] = useState({
    r0: 2.4,
    infectividad: 0.78,
    virulencia: 0.75,
    velocidadTransmision: 1.8,
    tiempoIncubacion: 3.2
  });

  const toggleEtiqueta = (categoriaId: string) => {
    setEtiquetasDetectadas(prev => 
      prev.map(etiqueta => 
        etiqueta.categoria === categoriaId 
          ? { ...etiqueta, activa: !etiqueta.activa }
          : etiqueta
      )
    );
  };

  const agregarEtiqueta = (categoriaId: string) => {
    const categoria = ETIQUETAS_CATEGORIAS.find(c => c.id === categoriaId);
    if (!categoria) return;

    const etiquetaExistente = etiquetasDetectadas.find(e => e.categoria === categoriaId);
    if (etiquetaExistente) return;

    setEtiquetasDetectadas(prev => [...prev, {
      categoria: categoriaId,
      confianza: Math.random() * 0.4 + 0.6, // 0.6 - 1.0
      activa: true
    }]);
  };

  const eliminarEtiqueta = (categoriaId: string) => {
    setEtiquetasDetectadas(prev => prev.filter(e => e.categoria !== categoriaId));
  };

  const getCategoria = (categoriaId: string) => {
    return ETIQUETAS_CATEGORIAS.find(c => c.id === categoriaId);
  };

  const calcularRiesgoEpidemico = () => {
    const etiquetasActivas = etiquetasDetectadas.filter(e => e.activa);
    if (etiquetasActivas.length === 0) return { nivel: 'Bajo', color: 'text-green-600', porcentaje: 10 };

    const promedioPonderado = etiquetasActivas.reduce((acc, etiqueta) => {
      const categoria = getCategoria(etiqueta.categoria);
      return acc + (categoria?.virulencia || 0) * etiqueta.confianza;
    }, 0) / etiquetasActivas.length;

    if (promedioPonderado >= 80) return { nivel: 'Crítico', color: 'text-red-600', porcentaje: promedioPonderado };
    if (promedioPonderado >= 60) return { nivel: 'Alto', color: 'text-orange-600', porcentaje: promedioPonderado };
    if (promedioPonderado >= 40) return { nivel: 'Moderado', color: 'text-yellow-600', porcentaje: promedioPonderado };
    return { nivel: 'Bajo', color: 'text-green-600', porcentaje: promedioPonderado };
  };

  const riesgoEpidemico = calcularRiesgoEpidemico();

  return (
    <TooltipProvider>
      <div className="space-y-6">
        {/* Header del análisis */}
        <div className="flex items-center justify-between">
          <div>
            <h1 className="flex items-center space-x-2">
              <Microscope className="h-6 w-6 text-primary" />
              <span>Análisis Epidemiológico de IA</span>
            </h1>
            <p className="text-muted-foreground">
              Clasificación automática de patógenos informativos - {contentId}
            </p>
          </div>
          <Badge variant="outline" className="bg-primary/10 border-primary">
            <Bot className="h-3 w-3 mr-1" />
            IA Activa
          </Badge>
        </div>

        {/* Alert de riesgo epidémico */}
        <Alert className={`border-l-4 ${riesgoEpidemico.nivel === 'Crítico' ? 'border-l-red-500 bg-red-50' : 
          riesgoEpidemico.nivel === 'Alto' ? 'border-l-orange-500 bg-orange-50' :
          riesgoEpidemico.nivel === 'Moderado' ? 'border-l-yellow-500 bg-yellow-50' : 'border-l-green-500 bg-green-50'}`}>
          <Activity className="h-4 w-4" />
          <AlertDescription className="space-y-2">
            <div className="flex items-center justify-between">
              <span className={`font-medium ${riesgoEpidemico.color}`}>
                Nivel de Riesgo Epidémico: {riesgoEpidemico.nivel}
              </span>
              <span className={`text-sm ${riesgoEpidemico.color}`}>
                {riesgoEpidemico.porcentaje.toFixed(1)}% de virulencia
              </span>
            </div>
            <Progress value={riesgoEpidemico.porcentaje} className="h-2" />
          </AlertDescription>
        </Alert>

        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
          {/* Panel principal de etiquetas detectadas */}
          <div className="lg:col-span-2 space-y-6">
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <Target className="h-5 w-5 text-primary" />
                  <span>Patógenos Detectados</span>
                  <Badge variant="secondary">{etiquetasDetectadas.length}</Badge>
                </CardTitle>
              </CardHeader>
              <CardContent className="space-y-4">
                {etiquetasDetectadas.length === 0 ? (
                  <div className="text-center py-8 text-muted-foreground">
                    <Shield className="h-12 w-12 mx-auto mb-2 text-green-500" />
                    <p>No se detectaron patógenos informativos</p>
                  </div>
                ) : (
                  etiquetasDetectadas.map((etiqueta) => {
                    const categoria = getCategoria(etiqueta.categoria);
                    if (!categoria) return null;

                    const IconComponent = categoria.icon;
                    
                    return (
                      <div key={etiqueta.categoria} 
                           className={`p-4 rounded-lg border-2 transition-all ${
                             etiqueta.activa ? `${categoria.bg} ${categoria.border}` : 'bg-gray-50 border-gray-200 opacity-50'
                           }`}>
                        <div className="flex items-center justify-between">
                          <div className="flex items-center space-x-3">
                            <IconComponent className={`h-5 w-5 ${etiqueta.activa ? categoria.color : 'text-gray-400'}`} />
                            <div>
                              <h3 className={`font-medium ${etiqueta.activa ? 'text-foreground' : 'text-gray-400'}`}>
                                {categoria.label}
                              </h3>
                              <div className="flex items-center space-x-2 text-sm text-muted-foreground">
                                <span>Confianza: {(etiqueta.confianza * 100).toFixed(1)}%</span>
                                <span>•</span>
                                <span>Virulencia: {categoria.virulencia}%</span>
                              </div>
                            </div>
                          </div>
                          <div className="flex items-center space-x-2">
                            <Tooltip>
                              <TooltipTrigger asChild>
                                <Button
                                  variant="ghost"
                                  size="sm"
                                  onClick={() => toggleEtiqueta(etiqueta.categoria)}
                                  className={etiqueta.activa ? 'text-primary hover:bg-primary/10' : 'text-gray-400'}
                                >
                                  <Eye className="h-4 w-4" />
                                </Button>
                              </TooltipTrigger>
                              <TooltipContent>
                                {etiqueta.activa ? 'Desactivar etiqueta' : 'Activar etiqueta'}
                              </TooltipContent>
                            </Tooltip>
                            <Tooltip>
                              <TooltipTrigger asChild>
                                <Button
                                  variant="ghost"
                                  size="sm"
                                  onClick={() => eliminarEtiqueta(etiqueta.categoria)}
                                  className="text-red-500 hover:bg-red-50"
                                >
                                  <XCircle className="h-4 w-4" />
                                </Button>
                              </TooltipTrigger>
                              <TooltipContent>
                                Eliminar etiqueta
                              </TooltipContent>
                            </Tooltip>
                          </div>
                        </div>
                        <div className="mt-2">
                          <Progress 
                            value={etiqueta.confianza * 100} 
                            className={`h-2 ${etiqueta.activa ? '' : 'opacity-50'}`}
                          />
                        </div>
                      </div>
                    );
                  })
                )}
              </CardContent>
            </Card>

            {/* Banco de etiquetas disponibles */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <BarChart3 className="h-5 w-5 text-primary" />
                  <span>Banco de Patógenos</span>
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                  {ETIQUETAS_CATEGORIAS.map((categoria) => {
                    const yaDetectada = etiquetasDetectadas.some(e => e.categoria === categoria.id);
                    const IconComponent = categoria.icon;
                    
                    return (
                      <Tooltip key={categoria.id}>
                        <TooltipTrigger asChild>
                          <Button
                            variant="outline"
                            size="sm"
                            onClick={() => agregarEtiqueta(categoria.id)}
                            disabled={yaDetectada}
                            className={`flex items-center space-x-2 h-auto py-2 px-3 ${
                              yaDetectada ? 'opacity-50 cursor-not-allowed' : 'hover:bg-primary/10'
                            }`}
                          >
                            <IconComponent className={`h-4 w-4 ${categoria.color}`} />
                            <span className="text-xs">{categoria.label}</span>
                          </Button>
                        </TooltipTrigger>
                        <TooltipContent>
                          <div className="text-sm">
                            <p className="font-medium">{categoria.label}</p>
                            <p>Virulencia: {categoria.virulencia}%</p>
                          </div>
                        </TooltipContent>
                      </Tooltip>
                    );
                  })}
                </div>
              </CardContent>
            </Card>
          </div>

          {/* Panel lateral de métricas epidémicas */}
          <div className="space-y-6">
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <Activity className="h-5 w-5 text-primary" />
                  <span>Métricas Epidémicas</span>
                </CardTitle>
              </CardHeader>
              <CardContent className="space-y-4">
                <div className="space-y-3">
                  <div className="flex justify-between items-center">
                    <div className="flex items-center space-x-2">
                      <GitBranch className="h-4 w-4 text-blue-500" />
                      <span className="text-sm">R₀ (Reproducción)</span>
                    </div>
                    <Badge variant={metricsEpidemicas.r0 > 2 ? "destructive" : "secondary"}>
                      {metricsEpidemicas.r0}
                    </Badge>
                  </div>
                  
                  <div className="flex justify-between items-center">
                    <div className="flex items-center space-x-2">
                      <Zap className="h-4 w-4 text-orange-500" />
                      <span className="text-sm">Infectividad</span>
                    </div>
                    <Badge variant="outline">
                      {(metricsEpidemicas.infectividad * 100).toFixed(0)}%
                    </Badge>
                  </div>
                  
                  <div className="flex justify-between items-center">
                    <div className="flex items-center space-x-2">
                      <Skull className="h-4 w-4 text-red-500" />
                      <span className="text-sm">Virulencia</span>
                    </div>
                    <Badge variant="outline">
                      {(metricsEpidemicas.virulencia * 100).toFixed(0)}%
                    </Badge>
                  </div>
                  
                  <div className="flex justify-between items-center">
                    <div className="flex items-center space-x-2">
                      <TrendingUp className="h-4 w-4 text-green-500" />
                      <span className="text-sm">Vel. Transmisión</span>
                    </div>
                    <Badge variant="outline">
                      {metricsEpidemicas.velocidadTransmision} h⁻¹
                    </Badge>
                  </div>
                  
                  <div className="flex justify-between items-center">
                    <div className="flex items-center space-x-2">
                      <Clock className="h-4 w-4 text-purple-500" />
                      <span className="text-sm">T. Incubación</span>
                    </div>
                    <Badge variant="outline">
                      {metricsEpidemicas.tiempoIncubacion} h
                    </Badge>
                  </div>
                </div>
              </CardContent>
            </Card>

            <Card>
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <Globe className="h-5 w-5 text-primary" />
                  <span>Propagación Regional</span>
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="space-y-2 text-sm">
                  <div className="flex justify-between">
                    <span>Región Andina</span>
                    <Badge variant="destructive" className="text-xs">Alto</Badge>
                  </div>
                  <div className="flex justify-between">
                    <span>Región Caribe</span>
                    <Badge variant="outline" className="text-xs">Moderado</Badge>
                  </div>
                  <div className="flex justify-between">
                    <span>Región Pacífica</span>
                    <Badge variant="outline" className="text-xs">Bajo</Badge>
                  </div>
                  <div className="flex justify-between">
                    <span>Región Orinoquía</span>
                    <Badge variant="outline" className="text-xs">Bajo</Badge>
                  </div>
                  <div className="flex justify-between">
                    <span>Región Amazonia</span>
                    <Badge variant="secondary" className="text-xs">Contenido</Badge>
                  </div>
                  <div className="flex justify-between">
                    <span>Región Insular</span>
                    <Badge variant="secondary" className="text-xs">Contenido</Badge>
                  </div>
                </div>
              </CardContent>
            </Card>

            <div className="flex space-x-2">
              <Button className="flex-1 bg-primary text-primary-foreground hover:bg-primary/90">
                <Shield className="h-4 w-4 mr-2" />
                Aplicar Análisis
              </Button>
              <Button variant="outline" className="border-primary text-primary hover:bg-primary/10">
                <Bot className="h-4 w-4" />
              </Button>
            </div>
          </div>
        </div>
      </div>
    </TooltipProvider>
  );
} - - - - - - - - - - - - 
src/components/components/PlatformIcons.tsx

import React from 'react';

export const WhatsAppIcon = ({ className = "w-6 h-6" }) => (
  <svg className={className} viewBox="0 0 24 24" fill="currentColor">
    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.51 3.488"/>
  </svg>
);

export const FacebookIcon = ({ className = "w-6 h-6" }) => (
  <svg className={className} viewBox="0 0 24 24" fill="currentColor">
    <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
  </svg>
);

export const TwitterIcon = ({ className = "w-6 h-6" }) => (
  <svg className={className} viewBox="0 0 24 24" fill="currentColor">
    <path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"/>
  </svg>
);

export const TelegramIcon = ({ className = "w-6 h-6" }) => (
  <svg className={className} viewBox="0 0 24 24" fill="currentColor">
    <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
  </svg>
);

export const TikTokIcon = ({ className = "w-6 h-6" }) => (
  <svg className={className} viewBox="0 0 24 24" fill="currentColor">
    <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/>
  </svg>
);

export const WebIcon = ({ className = "w-6 h-6" }) => (
  <svg className={className} viewBox="0 0 24 24" fill="currentColor">
    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
  </svg>
); - - - - - - - - - - - - 
src/components/components/Navigation.tsx

import { Button } from './ui/button';
import { Badge } from './ui/badge';
import { Avatar, AvatarFallback, AvatarImage } from './ui/avatar';
import { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuLabel, DropdownMenuSeparator, DropdownMenuTrigger } from './ui/dropdown-menu';
import { Bot, Upload, Users, FileSearch, LogOut, User, Settings, Trophy, Activity, Puzzle, Map, BookOpen, Syringe } from 'lucide-react';
import { GlobalNotifications } from './GlobalNotifications';
import botilitoLogo from 'figma:asset/8604399dafdf4284ef499af970e8af43ff13e21b.png';

interface NavigationProps {
  activeTab: string;
  onTabChange: (tab: string) => void;
  onLogout?: () => void;
}

export function Navigation({ activeTab, onTabChange, onLogout }: NavigationProps) {
  const tabs = [
    { id: 'upload', label: 'Análisis IA', icon: Upload },
    { id: 'verification', label: 'Diagnóstico Humano', icon: Users },
    { id: 'immunization', label: 'Inmunización', icon: Syringe },
    { id: 'review', label: 'Historial', icon: Bot },
    { id: 'mapa', label: 'Mapa Desinfodémico', icon: Map },
    { id: 'profile', label: 'Mi Perfil', icon: User },
  ];

  // Datos simulados del usuario
  const userData = {
    name: 'Dr. María González',
    email: 'maria.gonzalez@botilito.com',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=MariaGonzalez&backgroundColor=ffda00',
    level: 'Especialista Senior',
    totalBadges: 5
  };

  return (
    <nav className="border-b bg-card">
      <div className="container mx-auto px-4">
        <div className="flex items-center justify-between h-16">
          <div className="flex items-center space-x-3">
            <img 
              src={botilitoLogo} 
              alt="Botilito" 
              className="h-10 object-contain" 
            />
            <Badge variant="secondary">Beta</Badge>
          </div>
          
          <div className="flex items-center space-x-1">
            <div className="flex space-x-1">
              {tabs.map(({ id, label, icon: Icon }) => (
                <Button
                  key={id}
                  variant={activeTab === id ? 'default' : 'ghost'}
                  onClick={() => onTabChange(id)}
                  size="sm"
                  className={`relative group transition-all duration-200 ${
                    activeTab === id 
                      ? 'bg-primary text-primary-foreground shadow-md scale-105' 
                      : 'bg-white/80 hover:bg-secondary hover:scale-105'
                  }`}
                  title={label}
                >
                  <Icon className="h-4 w-4" />
                  <span className="ml-2 hidden lg:inline font-medium">{label}</span>
                  
                  {/* Tooltip para pantallas pequeñas */}
                  <div className="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-black text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none lg:hidden whitespace-nowrap z-50">
                    {label}
                    <div className="absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-black"></div>
                  </div>
                </Button>
              ))}
            </div>
            
            {onLogout && (
              <div className="ml-4 pl-4 border-l border-border flex items-center space-x-2">
                {/* Botón de Notificaciones Globales */}
                <GlobalNotifications />
                
                {/* Avatar y Menú de Usuario */}
                <DropdownMenu>
                  <DropdownMenuTrigger asChild>
                    <Button variant="ghost" className="relative h-10 w-10 rounded-full p-0">
                      <Avatar className="h-10 w-10">
                        <AvatarImage src={userData.avatar} alt={userData.name} />
                        <AvatarFallback className="bg-primary text-primary-foreground">
                          {userData.name.split(' ').map(n => n[0]).join('')}
                        </AvatarFallback>
                      </Avatar>
                    </Button>
                  </DropdownMenuTrigger>
                  <DropdownMenuContent className="w-64" align="end" forceMount>
                    <DropdownMenuLabel className="font-normal">
                      <div className="flex flex-col space-y-1">
                        <p className="text-sm font-medium leading-none">{userData.name}</p>
                        <p className="text-xs leading-none text-muted-foreground">
                          {userData.email}
                        </p>
                        <div className="flex items-center space-x-2 mt-1">
                          <Badge variant="secondary" className="text-xs">
                            {userData.level}
                          </Badge>
                          <Badge variant="outline" className="text-xs">
                            <Trophy className="h-3 w-3 mr-1" />
                            {userData.totalBadges} badges
                          </Badge>
                        </div>
                      </div>
                    </DropdownMenuLabel>
                    <DropdownMenuSeparator />
                    <DropdownMenuItem onClick={() => onTabChange('profile')}>
                      <User className="mr-2 h-4 w-4" />
                      <span>Mi Perfil</span>
                    </DropdownMenuItem>
                    <DropdownMenuItem onClick={() => onTabChange('extension')}>
                      <Puzzle className="mr-2 h-4 w-4" />
                      <span>Extensión</span>
                    </DropdownMenuItem>
                    <DropdownMenuItem>
                      <Settings className="mr-2 h-4 w-4" />
                      <span>Configuración</span>
                    </DropdownMenuItem>
                    <DropdownMenuItem onClick={() => onTabChange('docs')}>
                      <BookOpen className="mr-2 h-4 w-4" />
                      <span>Documentación</span>
                    </DropdownMenuItem>
                    <DropdownMenuSeparator />
                    <DropdownMenuItem onClick={onLogout} className="text-red-600 focus:text-red-600">
                      <LogOut className="mr-2 h-4 w-4" />
                      <span>Cerrar Sesión</span>
                    </DropdownMenuItem>
                  </DropdownMenuContent>
                </DropdownMenu>
              </div>
            )}
          </div>
        </div>
      </div>
    </nav>
  );
} - - - - - - - - - - - - 
src/components/components/DynamicDashboard.tsx

import React, { useState, useEffect } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Badge } from './ui/badge';
import { Button } from './ui/button';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';
import { Progress } from './ui/progress';
import { Tabs, TabsContent, TabsList, TabsTrigger } from './ui/tabs';
import { 
  AreaChart, Area, BarChart, Bar, LineChart, Line, PieChart, Pie, Cell,
  XAxis, YAxis, CartesianGrid, ResponsiveContainer, Tooltip, Legend
} from 'recharts';
import { 
  Activity, TrendingUp, TrendingDown, AlertTriangle, Shield, 
  Zap, Clock, MapPin, Users, Globe, Bug, Stethoscope, 
  Target, Thermometer, ShieldCheck, AlertOctagon, Eye, Microscope,
  FileText, Image, Video, Volume2, CheckCircle, BarChart3, Map,
  Layers, Filter, Maximize2, Minimize2
} from 'lucide-react';
import { Alert, AlertDescription } from './ui/alert';
import { WhatsAppIcon, FacebookIcon, TwitterIcon, TelegramIcon, TikTokIcon, WebIcon } from './PlatformIcons';
import { AdvancedAnalytics } from './AdvancedAnalytics';
import { FloatingNotifications } from './FloatingNotifications';
import { RealTimeStats } from './RealTimeStats';
import { motion, AnimatePresence } from 'motion/react';

export function DynamicDashboard() {
  const [viewMode, setViewMode] = useState('overview'); // overview, map, analytics
  const [selectedRegion, setSelectedRegion] = useState('colombia');
  const [timeRange, setTimeRange] = useState('24h');
  const [alertsExpanded, setAlertsExpanded] = useState(false);
  const [mapExpanded, setMapExpanded] = useState(false);

  // Datos epidemiológicos en tiempo real
  const [realTimeData, setRealTimeData] = useState({
    casosActivos: 2847,
    tasaInfeccion: 3.2,
    inmunidadDigital: 67,
    tiempoDeteccion: 4.2
  });

  // Simular actualización en tiempo real
  useEffect(() => {
    const interval = setInterval(() => {
      setRealTimeData(prev => ({
        casosActivos: prev.casosActivos + Math.floor(Math.random() * 10 - 5),
        tasaInfeccion: Math.max(0, prev.tasaInfeccion + (Math.random() - 0.5) * 0.1),
        inmunidadDigital: Math.min(100, Math.max(0, prev.inmunidadDigital + (Math.random() - 0.5) * 2)),
        tiempoDeteccion: Math.max(1, prev.tiempoDeteccion + (Math.random() - 0.5) * 0.2)
      }));
    }, 5000);

    return () => clearInterval(interval);
  }, []);

  // Datos del dashboard
  const epidemicStats = [
    { 
      title: 'Casos Activos', 
      value: realTimeData.casosActivos.toLocaleString(), 
      icon: Bug, 
      change: '+15%', 
      color: 'text-red-600', 
      bgColor: 'bg-red-50',
      trend: 'up'
    },
    { 
      title: 'Tasa de Infección', 
      value: `${realTimeData.tasaInfeccion.toFixed(1)}/h`, 
      icon: Activity, 
      change: '+8%', 
      color: 'text-orange-600', 
      bgColor: 'bg-orange-50',
      trend: 'up'
    },
    { 
      title: 'Inmunidad Digital', 
      value: `${Math.round(realTimeData.inmunidadDigital)}%`, 
      icon: Shield, 
      change: '+2%', 
      color: 'text-green-600', 
      bgColor: 'bg-green-50',
      trend: 'up'
    },
    { 
      title: 'Tiempo Detección', 
      value: `${realTimeData.tiempoDeteccion.toFixed(1)}h`, 
      icon: Clock, 
      change: '-12%', 
      color: 'text-blue-600', 
      bgColor: 'bg-blue-50',
      trend: 'down'
    },
  ];

  const geographicSpread = [
    { region: 'Región Andina', casos: 1456, tasa: 5.2, estado: 'Brote Activo', lat: 4.5709, lng: -74.2973 },
    { region: 'Región Caribe', casos: 934, tasa: 4.1, estado: 'En Aumento', lat: 10.4806, lng: -75.5138 },
    { region: 'Región Pacífico', casos: 687, tasa: 3.8, estado: 'Controlado', lat: 2.9273, lng: -75.2819 },
    { region: 'Región Orinoquía', casos: 234, tasa: 2.3, estado: 'Estable', lat: 6.1701, lng: -67.4977 },
    { region: 'Región Amazonia', casos: 156, tasa: 1.9, estado: 'Bajo Control', lat: -1.2136, lng: -69.8062 },
    { region: 'Región Insular', casos: 43, tasa: 0.8, estado: 'Bajo Control', lat: 12.5564, lng: -81.7152 },
  ];

  const alertsData = [
    {
      id: 1,
      type: 'critical',
      title: 'Brote detectado en Región Andina',
      message: 'Incremento del 45% en casos en las últimas 6 horas',
      timestamp: 'hace 12 min',
      region: 'Andina'
    },
    {
      id: 2,
      type: 'warning',
      title: 'Patrón anómalo en redes sociales',
      message: 'Detección de campaña coordinada en WhatsApp',
      timestamp: 'hace 25 min',
      region: 'Caribe'
    },
    {
      id: 3,
      type: 'info',
      title: 'Neutralización exitosa',
      message: '234 casos verificados y marcados como falsos',
      timestamp: 'hace 1h',
      region: 'Nacional'
    }
  ];

  const getRegionStatus = (estado: string) => {
    switch (estado) {
      case 'Brote Crítico':
        return <Badge className="bg-red-100 text-red-800 border-red-300 animate-pulse">🔴 {estado}</Badge>;
      case 'Brote Activo':
        return <Badge className="bg-orange-100 text-orange-800 border-orange-300">🟡 {estado}</Badge>;
      case 'En Aumento':
        return <Badge className="bg-yellow-100 text-yellow-800 border-yellow-300">📈 {estado}</Badge>;
      case 'Controlado':
        return <Badge className="bg-blue-100 text-blue-800 border-blue-300">🔵 {estado}</Badge>;
      case 'Estable':
        return <Badge className="bg-gray-100 text-gray-800 border-gray-300">⚪ {estado}</Badge>;
      case 'Bajo Control':
        return <Badge className="bg-green-100 text-green-800 border-green-300">🟢 {estado}</Badge>;
      default:
        return <Badge variant="outline">{estado}</Badge>;
    }
  };

  const getAlertIcon = (type: string) => {
    switch (type) {
      case 'critical': return <AlertTriangle className="h-4 w-4 text-red-500" />;
      case 'warning': return <AlertOctagon className="h-4 w-4 text-orange-500" />;
      case 'info': return <CheckCircle className="h-4 w-4 text-blue-500" />;
      default: return <AlertTriangle className="h-4 w-4" />;
    }
  };

  const renderInteractiveMap = () => (
    <div className="relative h-96 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl overflow-hidden">
      {/* Mapa SVG de Colombia */}
      <svg
        viewBox="0 0 400 500"
        className="w-full h-full"
        style={{ filter: 'drop-shadow(0 4px 6px rgba(0,0,0,0.1))' }}
      >
        <defs>
          <linearGradient id="andinaGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#FF6B35" />
            <stop offset="100%" stopColor="#E55A2E" />
          </linearGradient>
          <linearGradient id="caribeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#FFD60A" />
            <stop offset="100%" stopColor="#FFC107" />
          </linearGradient>
          <linearGradient id="pacificoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#00B4D8" />
            <stop offset="100%" stopColor="#0096C7" />
          </linearGradient>
          <linearGradient id="orinoquiaGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#6C757D" />
            <stop offset="100%" stopColor="#495057" />
          </linearGradient>
          <linearGradient id="amazoniaGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#00E676" />
            <stop offset="100%" stopColor="#00C853" />
          </linearGradient>
        </defs>
        
        {/* Región Andina - Brote Activo */}
        <motion.path
          d="M120 100 L280 110 L290 170 L275 270 L190 310 L140 280 L110 250 L120 180 Z"
          fill="url(#andinaGradient)"
          stroke="#fff"
          strokeWidth="3"
          className="cursor-pointer"
          whileHover={{ scale: 1.02 }}
          onClick={() => setSelectedRegion('andina')}
        />
        
        {/* Región Caribe - En Aumento */}
        <motion.path
          d="M70 40 L330 40 L330 100 L280 110 L220 125 L170 115 L120 100 L70 85 Z"
          fill="url(#caribeGradient)"
          stroke="#fff"
          strokeWidth="3"
          className="cursor-pointer"
          whileHover={{ scale: 1.02 }}
          onClick={() => setSelectedRegion('caribe')}
        />
        
        {/* Región Pacífico - Controlado */}
        <motion.path
          d="M40 90 L120 100 L110 250 L90 350 L70 400 L50 380 L35 320 L25 250 L30 180 Z"
          fill="url(#pacificoGradient)"
          stroke="#fff"
          strokeWidth="3"
          className="cursor-pointer"
          whileHover={{ scale: 1.02 }}
          onClick={() => setSelectedRegion('pacifico')}
        />
        
        {/* Región Orinoquía - Estable */}
        <motion.path
          d="M280 110 L370 130 L365 260 L320 285 L290 270 L275 220 L290 170 Z"
          fill="url(#orinoquiaGradient)"
          stroke="#fff"
          strokeWidth="3"
          className="cursor-pointer"
          whileHover={{ scale: 1.02 }}
          onClick={() => setSelectedRegion('orinoquia')}
        />
        
        {/* Región Amazonía - Bajo Control */}
        <motion.path
          d="M110 250 L275 270 L320 285 L340 360 L300 430 L200 440 L140 410 L90 350 Z"
          fill="url(#amazoniaGradient)"
          stroke="#fff"
          strokeWidth="3"
          className="cursor-pointer"
          whileHover={{ scale: 1.02 }}
          onClick={() => setSelectedRegion('amazonia')}
        />
        
        {/* Pulsos en regiones críticas */}
        <motion.circle 
          cx="200" 
          cy="200" 
          r="6" 
          fill="#FF6B35" 
          opacity="0.8"
          animate={{ 
            scale: [1, 1.5, 1],
            opacity: [0.8, 0.3, 0.8]
          }}
          transition={{ 
            duration: 2,
            repeat: Infinity,
            ease: "easeInOut"
          }}
        />
      </svg>
      
      {/* Controles del mapa */}
      <div className="absolute top-4 right-4 flex flex-col space-y-2">
        <Button
          size="sm"
          variant="secondary"
          onClick={() => setMapExpanded(!mapExpanded)}
          className="bg-white/90 backdrop-blur-sm"
        >
          {mapExpanded ? <Minimize2 className="h-4 w-4" /> : <Maximize2 className="h-4 w-4" />}
        </Button>
        <Button
          size="sm"
          variant="secondary"
          className="bg-white/90 backdrop-blur-sm"
        >
          <Filter className="h-4 w-4" />
        </Button>
      </div>
      
      {/* Información de región seleccionada */}
      {selectedRegion !== 'colombia' && (
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          className="absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-lg p-4 shadow-lg"
        >
          <h4 className="font-medium mb-2">Región {selectedRegion}</h4>
          <div className="text-sm text-muted-foreground">
            <div>Casos activos: 1,456</div>
            <div>Tasa: 5.2/hora</div>
            <div>Estado: Brote Activo</div>
          </div>
        </motion.div>
      )}
    </div>
  );

  return (
    <>
      <FloatingNotifications />
      <div className="space-y-6">
        {/* Header dinámico */}
      <div className="flex flex-col lg:flex-row lg:items-center justify-between gap-4">
        <div>
          <h1 className="text-3xl font-semibold mb-2">Centro de Control Desinfodémico</h1>
          <p className="text-muted-foreground">
            Monitoreo epidemiológico en tiempo real de la desinformación en Colombia
          </p>
        </div>
        
        <div className="flex items-center space-x-3">
          <Select value={timeRange} onValueChange={setTimeRange}>
            <SelectTrigger className="w-32">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="1h">Última hora</SelectItem>
              <SelectItem value="24h">24 horas</SelectItem>
              <SelectItem value="7d">7 días</SelectItem>
              <SelectItem value="30d">30 días</SelectItem>
            </SelectContent>
          </Select>
          
          <Tabs value={viewMode} onValueChange={setViewMode} className="w-auto">
            <TabsList className="grid w-full grid-cols-3">
              <TabsTrigger value="overview" className="flex items-center space-x-1">
                <BarChart3 className="h-4 w-4" />
                <span>Vista General</span>
              </TabsTrigger>
              <TabsTrigger value="map" className="flex items-center space-x-1">
                <Map className="h-4 w-4" />
                <span>Mapa</span>
              </TabsTrigger>
              <TabsTrigger value="analytics" className="flex items-center space-x-1">
                <Activity className="h-4 w-4" />
                <span>Análisis</span>
              </TabsTrigger>
            </TabsList>
          </Tabs>
        </div>
      </div>

      {/* Panel de alertas expandible */}
      <Card className="border-orange-200 bg-orange-50/30">
        <CardHeader className="pb-3">
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-2">
              <AlertTriangle className="h-5 w-5 text-orange-500 animate-pulse" />
              <CardTitle className="text-orange-800">Alertas Epidemiológicas</CardTitle>
              <Badge variant="destructive" className="animate-pulse">3 ACTIVAS</Badge>
            </div>
            <Button
              variant="ghost"
              size="sm"
              onClick={() => setAlertsExpanded(!alertsExpanded)}
            >
              {alertsExpanded ? 'Contraer' : 'Expandir'}
            </Button>
          </div>
        </CardHeader>
        <CardContent>
          <AnimatePresence>
            {alertsExpanded ? (
              <motion.div
                initial={{ height: 0, opacity: 0 }}
                animate={{ height: 'auto', opacity: 1 }}
                exit={{ height: 0, opacity: 0 }}
                className="space-y-3"
              >
                {alertsData.map((alert) => (
                  <div key={alert.id} className="flex items-start space-x-3 p-3 bg-white rounded-lg border">
                    {getAlertIcon(alert.type)}
                    <div className="flex-1">
                      <div className="font-medium">{alert.title}</div>
                      <div className="text-sm text-muted-foreground">{alert.message}</div>
                      <div className="text-xs text-muted-foreground mt-1">
                        {alert.region} • {alert.timestamp}
                      </div>
                    </div>
                  </div>
                ))}
              </motion.div>
            ) : (
              <motion.div
                initial={{ opacity: 0 }}
                animate={{ opacity: 1 }}
                className="text-sm text-orange-700"
              >
                {alertsData.length} alertas requieren atención inmediata
              </motion.div>
            )}
          </AnimatePresence>
        </CardContent>
      </Card>

      {/* Métricas principales animadas */}
      <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
        {epidemicStats.map((stat, index) => (
          <motion.div
            key={stat.title}
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: index * 0.1 }}
          >
            <Card className={`${stat.bgColor} border-0 overflow-hidden relative`}>
              <CardContent className="p-6">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-sm font-medium text-muted-foreground">{stat.title}</p>
                    <div className="flex items-center space-x-2">
                      <motion.p 
                        className={`text-2xl font-semibold ${stat.color}`}
                        key={stat.value}
                        initial={{ scale: 1.2 }}
                        animate={{ scale: 1 }}
                        transition={{ duration: 0.3 }}
                      >
                        {stat.value}
                      </motion.p>
                      <Badge 
                        variant={stat.trend === 'up' ? 'destructive' : 'default'}
                        className="text-xs"
                      >
                        {stat.trend === 'up' ? <TrendingUp className="h-3 w-3" /> : <TrendingDown className="h-3 w-3" />}
                        {stat.change}
                      </Badge>
                    </div>
                  </div>
                  <div className={`${stat.color} opacity-20`}>
                    <stat.icon className="h-8 w-8" />
                  </div>
                </div>
                
                {/* Indicador de pulso para datos críticos */}
                {stat.title === 'Casos Activos' && (
                  <div className="absolute top-2 right-2">
                    <div className="w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                  </div>
                )}
              </CardContent>
            </Card>
          </motion.div>
        ))}
      </div>

      {/* Contenido principal dinámico */}
      <div className="grid gap-6 lg:grid-cols-3">
        <div className="lg:col-span-2">
          <AnimatePresence mode="wait">
            {viewMode === 'analytics' ? (
              <motion.div
                key="analytics"
                initial={{ opacity: 0, x: -20 }}
                animate={{ opacity: 1, x: 0 }}
                exit={{ opacity: 0, x: 20 }}
              >
                <AdvancedAnalytics />
              </motion.div>
            ) : viewMode === 'map' ? (
              <motion.div
                key="map"
                initial={{ opacity: 0, x: -20 }}
                animate={{ opacity: 1, x: 0 }}
                exit={{ opacity: 0, x: 20 }}
              >
                <Card>
                  <CardHeader>
                    <CardTitle className="flex items-center space-x-2">
                      <MapPin className="h-5 w-5 text-primary" />
                      <span>Mapa Epidemiológico Interactivo</span>
                    </CardTitle>
                    <CardDescription>
                      Haz clic en las regiones para ver detalles específicos
                    </CardDescription>
                  </CardHeader>
                  <CardContent>
                    {renderInteractiveMap()}
                  </CardContent>
                </Card>
              </motion.div>
            ) : (
              <motion.div
                key="overview"
                initial={{ opacity: 0, x: -20 }}
                animate={{ opacity: 1, x: 0 }}
                exit={{ opacity: 0, x: 20 }}
              >
                <Card>
                  <CardHeader>
                    <CardTitle className="flex items-center space-x-2">
                      <MapPin className="h-5 w-5 text-primary" />
                      <span>Propagación Geográfica</span>
                    </CardTitle>
                    <CardDescription>
                      Estado epidemiológico por región
                    </CardDescription>
                  </CardHeader>
                  <CardContent>
                    <div className="space-y-3">
                      {geographicSpread.map((item, index) => (
                        <motion.div
                          key={index}
                          initial={{ opacity: 0, x: -20 }}
                          animate={{ opacity: 1, x: 0 }}
                          transition={{ delay: index * 0.1 }}
                          className="flex items-center justify-between p-3 bg-muted/30 rounded hover:bg-muted/50 transition-colors cursor-pointer"
                          onClick={() => {
                            setSelectedRegion(item.region.toLowerCase().replace('región ', ''));
                            setViewMode('map');
                          }}
                        >
                          <div>
                            <div className="font-medium">{item.region}</div>
                            <div className="text-sm text-muted-foreground">
                              {item.casos.toLocaleString()} casos • Tasa: {item.tasa}/hora
                            </div>
                          </div>
                          <div className="text-right">
                            {getRegionStatus(item.estado)}
                          </div>
                        </motion.div>
                      ))}
                    </div>
                  </CardContent>
                </Card>
              </motion.div>
            )}
          </AnimatePresence>
        </div>

        {/* Panel lateral con métricas adicionales */}
        <div className="space-y-6">
          <RealTimeStats />
          
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Target className="h-5 w-5 text-primary" />
                <span>Acciones Rápidas</span>
              </CardTitle>
            </CardHeader>
            <CardContent className="space-y-3">
              <Button className="w-full justify-start" variant="outline">
                <AlertTriangle className="h-4 w-4 mr-2" />
                Crear Alerta Manual
              </Button>
              <Button className="w-full justify-start" variant="outline">
                <Eye className="h-4 w-4 mr-2" />
                Análisis Detallado
              </Button>
              <Button className="w-full justify-start" variant="outline">
                <Shield className="h-4 w-4 mr-2" />
                Verificación Masiva
              </Button>
            </CardContent>
          </Card>
        </div>
      </div>
    </div>
    </>
  );
} - - - - - - - - - - - - 
src/components/components/CompleteDashboard.tsx

import React, { useState, useEffect } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Badge } from './ui/badge';
import { Button } from './ui/button';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';
import { Progress } from './ui/progress';
import { 
  AreaChart, Area, BarChart, Bar, LineChart, Line, PieChart, Pie, Cell,
  XAxis, YAxis, CartesianGrid, ResponsiveContainer, Tooltip, Legend
} from 'recharts';
import { 
  Activity, TrendingUp, TrendingDown, Shield, 
  Zap, Clock, MapPin, Users, Globe, Bug, Stethoscope, 
  Target, Thermometer, ShieldCheck, Eye, Microscope,
  FileText, Image, Video, Volume2, CheckCircle, BarChart3,
  Timer, Gauge, Award, Trophy, Star, Flame
} from 'lucide-react';
import { WhatsAppIcon, FacebookIcon, TwitterIcon, TelegramIcon, TikTokIcon, WebIcon } from './PlatformIcons';
import { RealTimeStats } from './RealTimeStats';
import { motion } from 'motion/react';

export function CompleteDashboard() {
  const [selectedRegion, setSelectedRegion] = useState('colombia');
  const [timeRange, setTimeRange] = useState('24h');

  // Datos en tiempo real
  const [realTimeData, setRealTimeData] = useState({
    casosActivos: 2847,
    tasaInfeccion: 3.2,
    inmunidadDigital: 67,
    tiempoDeteccion: 4.2
  });

  // Simular actualización en tiempo real
  useEffect(() => {
    const interval = setInterval(() => {
      setRealTimeData(prev => ({
        casosActivos: prev.casosActivos + Math.floor(Math.random() * 10 - 5),
        tasaInfeccion: Math.max(0, prev.tasaInfeccion + (Math.random() - 0.5) * 0.1),
        inmunidadDigital: Math.min(100, Math.max(0, prev.inmunidadDigital + (Math.random() - 0.5) * 2)),
        tiempoDeteccion: Math.max(1, prev.tiempoDeteccion + (Math.random() - 0.5) * 0.2)
      }));
    }, 5000);

    return () => clearInterval(interval);
  }, []);

  // Datos del Dashboard original
  const dashboardStats = [
    { title: 'Total Contenidos', value: '1,247', icon: FileText, change: '+12%' },
    { title: 'Analizados por IA', value: '1,089', icon: CheckCircle, change: '+8%' },
    { title: 'Verificados Humanos', value: '456', icon: Users, change: '+15%' },
    { title: 'En Proceso', value: '158', icon: Clock, change: '-3%' },
  ];

  // Datos epidemiológicos del Mapa Desinfodémico con comparaciones temporales detalladas
  const epidemicStats = [
    { 
      title: 'Casos Activos', 
      value: realTimeData.casosActivos.toLocaleString(), 
      icon: Bug, 
      change: '+15.3%', 
      period: 'vs. ayer',
      previousValue: '1,847',
      color: 'text-red-600', 
      bgColor: 'bg-red-50',
      trend: 'up',
      critical: true
    },
    { 
      title: 'Tasa de Infección', 
      value: `R₀ ${realTimeData.tasaInfeccion.toFixed(1)}`, 
      icon: Activity, 
      change: '+8.7%', 
      period: 'vs. semana anterior',
      previousValue: 'R₀ 2.1',
      color: 'text-orange-600', 
      bgColor: 'bg-orange-50',
      trend: 'up',
      critical: realTimeData.tasaInfeccion > 3.0
    },
    { 
      title: 'Inmunidad Digital', 
      value: `${Math.round(realTimeData.inmunidadDigital)}%`, 
      icon: Shield, 
      change: '+2.4%', 
      period: 'vs. mes anterior',
      previousValue: '81.2%',
      color: 'text-green-600', 
      bgColor: 'bg-green-50',
      trend: 'up',
      critical: false
    },
    { 
      title: 'Tiempo Detección', 
      value: `${realTimeData.tiempoDeteccion.toFixed(1)}h`, 
      icon: Clock, 
      change: '-12.8%', 
      period: 'vs. semana anterior',
      previousValue: '5.1h',
      color: 'text-blue-600', 
      bgColor: 'bg-blue-50',
      trend: 'down',
      critical: false
    },
  ];

  const verificationData = [
    { month: 'Ene', contenidos: 85, verificados: 72 },
    { month: 'Feb', contenidos: 120, verificados: 98 },
    { month: 'Mar', contenidos: 150, verificados: 145 },
    { month: 'Abr', contenidos: 180, verificados: 165 },
    { month: 'May', contenidos: 210, verificados: 189 },
    { month: 'Jun', contenidos: 185, verificados: 176 },
  ];

  // Datos de Verificación Humana
  const verificationTrends = [
    { name: 'Lun', verificaciones: 45, precision: 92 },
    { name: 'Mar', verificaciones: 52, precision: 89 },
    { name: 'Mié', verificaciones: 38, precision: 95 },
    { name: 'Jue', verificaciones: 67, precision: 88 },
    { name: 'Vie', verificaciones: 72, precision: 91 },
    { name: 'Sáb', verificaciones: 28, precision: 93 },
    { name: 'Dom', verificaciones: 31, precision: 90 }
  ];

  const caseTypesData = [
    { name: 'Casos Veraces', value: 342, color: '#22c55e' },
    { name: 'Casos Falsos', value: 156, color: '#ef4444' },
    { name: 'Casos Engañosos', value: 89, color: '#f59e0b' },
    { name: 'Sin Verificar', value: 67, color: '#6b7280' }
  ];

  const verifierRanking = [
    { name: 'Dr. Ana Rodríguez', verificaciones: 347, precision: 96, especialidad: 'Salud Pública' },
    { name: 'Lic. Carlos Mendez', verificaciones: 289, precision: 94, especialidad: 'Política' },
    { name: 'Dra. Sofia López', verificaciones: 256, precision: 95, especialidad: 'Ciencia' },
    { name: 'Prof. Miguel Torres', verificaciones: 234, precision: 93, especialidad: 'Economía' },
    { name: 'Ing. Laura Gómez', verificaciones: 198, precision: 92, especialidad: 'Tecnología' }
  ];

  const infectivityData = [
    { time: '00:00', casos: 120, nuevos: 23, resueltos: 15 },
    { time: '04:00', casos: 145, nuevos: 31, resueltos: 18 },
    { time: '08:00', casos: 189, nuevos: 67, resueltos: 24 },
    { time: '12:00', casos: 234, nuevos: 89, resueltos: 35 },
    { time: '16:00', casos: 298, nuevos: 112, resueltos: 48 },
    { time: '20:00', casos: 267, nuevos: 78, resueltos: 109 },
    { time: '24:00', casos: 189, nuevos: 45, resueltos: 123 },
  ];

  const pieData = [
    { name: 'Veraz', value: 65, color: '#00E676' },
    { name: 'Desinformación', value: 20, color: '#F72585' },
    { name: 'Satírico', value: 10, color: '#FF6B35' },
    { name: 'Fuera de Contexto', value: 5, color: '#7209B7' },
  ];

  const contentTypes = [
    { name: 'Texto', value: 45, icon: FileText },
    { name: 'Imagen', value: 30, icon: Image },
    { name: 'Video', value: 20, icon: Video },
    { name: 'Audio', value: 5, icon: Volume2 },
  ];

  const transmissionVectors = [
    { platform: 'WhatsApp', cases: 856, percentage: 28, color: '#25D366' },
    { platform: 'Facebook', cases: 723, percentage: 24, color: '#1877F2' },
    { platform: 'Twitter/X', cases: 534, percentage: 18, color: '#000000' },
    { platform: 'Telegram', cases: 298, percentage: 10, color: '#0088CC' },
    { platform: 'TikTok', cases: 267, percentage: 9, color: '#FF0050' },
    { platform: 'Web', cases: 334, percentage: 11, color: '#4285F4' },
  ];

  const geographicSpread = [
    { region: 'Región Andina', casos: 1456, tasa: 5.2, estado: 'Brote Activo' },
    { region: 'Región Caribe', casos: 934, tasa: 4.1, estado: 'En Aumento' },
    { region: 'Región Pacífico', casos: 687, tasa: 3.8, estado: 'Controlado' },
    { region: 'Región Orinoquía', casos: 234, tasa: 2.3, estado: 'Estable' },
    { region: 'Región Amazonia', casos: 156, tasa: 1.9, estado: 'Bajo Control' },
    { region: 'Región Insular', casos: 43, tasa: 0.8, estado: 'Bajo Control' },
  ];

  // Datos para la curva epidemiológica
  const epidemiologicalCurve = [
    { fecha: '18 Oct', casosNuevos: 45, casosNeutralizados: 32, tasaR0: 1.2 },
    { fecha: '19 Oct', casosNuevos: 67, casosNeutralizados: 41, tasaR0: 1.4 },
    { fecha: '20 Oct', casosNuevos: 89, casosNeutralizados: 56, tasaR0: 1.6 },
    { fecha: '21 Oct', casosNuevos: 134, casosNeutralizados: 78, tasaR0: 1.8 },
    { fecha: '22 Oct', casosNuevos: 198, casosNeutralizados: 112, tasaR0: 2.1 },
    { fecha: '23 Oct', casosNuevos: 267, casosNeutralizados: 145, tasaR0: 2.3 },
    { fecha: '24 Oct', casosNuevos: 342, casosNeutralizados: 189, tasaR0: 2.5 },
    { fecha: '25 Oct', casosNuevos: 298, casosNeutralizados: 234, tasaR0: 2.2 },
    { fecha: '26 Oct', casosNuevos: 234, casosNeutralizados: 267, tasaR0: 1.9 },
    { fecha: '27 Oct', casosNuevos: 189, casosNeutralizados: 198, tasaR0: 1.7 },
  ];



  const getRegionStatus = (estado: string) => {
    switch (estado) {
      case 'Brote Crítico':
        return <Badge className="bg-red-100 text-red-800 border-red-300 animate-pulse">🔴 {estado}</Badge>;
      case 'Brote Activo':
        return <Badge className="bg-orange-100 text-orange-800 border-orange-300">🟡 {estado}</Badge>;
      case 'En Aumento':
        return <Badge className="bg-yellow-100 text-yellow-800 border-yellow-300">📈 {estado}</Badge>;
      case 'Controlado':
        return <Badge className="bg-blue-100 text-blue-800 border-blue-300">🔵 {estado}</Badge>;
      case 'Estable':
        return <Badge className="bg-gray-100 text-gray-800 border-gray-300">⚪ {estado}</Badge>;
      case 'Bajo Control':
        return <Badge className="bg-green-100 text-green-800 border-green-300">🟢 {estado}</Badge>;
      default:
        return <Badge variant="outline">{estado}</Badge>;
    }
  };

  const getPlatformIcon = (platform: string) => {
    switch (platform) {
      case 'WhatsApp': return WhatsAppIcon;
      case 'Facebook': return FacebookIcon;
      case 'Twitter/X': return TwitterIcon;
      case 'Telegram': return TelegramIcon;
      case 'TikTok': return TikTokIcon;
      case 'Web': return WebIcon;
      default: return Globe;
    }
  };



  return (
    <div className="space-y-8">
      {/* Header dinámico */}
      <div className="flex flex-col lg:flex-row lg:items-center justify-between gap-4">
        <div>
          <h1 className="flex items-center space-x-3">
            <BarChart3 className="h-8 w-8 text-primary" />
            <span>Centro de Control Desinfodémico</span>
          </h1>
          <p className="text-muted-foreground">
            Análisis integral de verificación y monitoreo epidemiológico de desinformación
          </p>
        </div>
        
        <div className="flex items-center space-x-3">
          <Select value={timeRange} onValueChange={setTimeRange}>
            <SelectTrigger className="w-32">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="1h">Última hora</SelectItem>
              <SelectItem value="24h">24 horas</SelectItem>
              <SelectItem value="7d">7 días</SelectItem>
              <SelectItem value="30d">30 días</SelectItem>
            </SelectContent>
          </Select>
          
          <Select value={selectedRegion} onValueChange={setSelectedRegion}>
            <SelectTrigger className="w-40">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="colombia">Colombia</SelectItem>
              <SelectItem value="andina">Región Andina</SelectItem>
              <SelectItem value="caribe">Región Caribe</SelectItem>
              <SelectItem value="pacifico">Región Pacífico</SelectItem>
              <SelectItem value="orinoquia">Región Orinoquía</SelectItem>
              <SelectItem value="amazonia">Región Amazonia</SelectItem>
              <SelectItem value="insular">Región Insular</SelectItem>
            </SelectContent>
          </Select>
        </div>
      </div>

      {/* SECCIÓN 1: MÉTRICAS EPIDEMIOLÓGICAS PRINCIPALES */}
      <div>
        <div className="mb-6">
          <h2 className="flex items-center space-x-2 mb-2">
            <Activity className="h-6 w-6 text-primary" />
            <span>Métricas Epidemiológicas Principales</span>
          </h2>
          <p className="text-muted-foreground text-sm">Indicadores clave de propagación y control de desinformación</p>
        </div>

        {/* Métricas Epidemiológicas Principales - Destacadas */}
        <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-4 mb-8">
          {epidemicStats.map((stat, index) => (
            <motion.div
              key={stat.title}
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ delay: index * 0.1 }}
            >
              <Card className={`${stat.critical ? 'border-2 border-primary shadow-lg' : ''} hover:shadow-xl transition-all`}>
                <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                  <CardTitle className="text-sm">{stat.title}</CardTitle>
                  <div className={`p-2 rounded-full ${stat.bgColor}`}>
                    <stat.icon className={`h-5 w-5 ${stat.color}`} />
                  </div>
                </CardHeader>
                <CardContent>
                  <div className={`text-3xl mb-2 ${stat.critical ? 'animate-pulse' : ''}`}>
                    {stat.value}
                  </div>
                  <div className="flex items-center justify-between text-xs">
                    <span className="text-muted-foreground">{stat.period}</span>
                    <span className={`flex items-center space-x-1 ${
                      stat.trend === 'up' && stat.critical ? 'text-red-600' :
                      stat.trend === 'up' ? 'text-green-600' :
                      'text-blue-600'
                    }`}>
                      {stat.trend === 'up' ? <TrendingUp className="h-3 w-3" /> : <TrendingDown className="h-3 w-3" />}
                      <span>{stat.change}</span>
                    </span>
                  </div>
                  <div className="text-xs text-muted-foreground mt-1">
                    Anterior: {stat.previousValue}
                  </div>
                </CardContent>
              </Card>
            </motion.div>
          ))}
        </div>
      </div>

      {/* SECCIÓN 2: CURVA EPIDEMIOLÓGICA Y VECTORES */}
      <div className="grid gap-6 lg:grid-cols-2">
        {/* Curva Epidemiológica */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <TrendingUp className="h-5 w-5 text-primary" />
              <span>Curva Epidemiológica</span>
            </CardTitle>
            <CardDescription>Evolución de casos nuevos vs. neutralizados (últimos 10 días)</CardDescription>
          </CardHeader>
          <CardContent>
            <ResponsiveContainer width="100%" height={300}>
              <AreaChart data={epidemiologicalCurve}>
                <defs>
                  <linearGradient id="colorNuevos" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="5%" stopColor="#F72585" stopOpacity={0.8}/>
                    <stop offset="95%" stopColor="#F72585" stopOpacity={0.1}/>
                  </linearGradient>
                  <linearGradient id="colorNeutralizados" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="5%" stopColor="#00E676" stopOpacity={0.8}/>
                    <stop offset="95%" stopColor="#00E676" stopOpacity={0.1}/>
                  </linearGradient>
                </defs>
                <CartesianGrid strokeDasharray="3 3" opacity={0.3} />
                <XAxis dataKey="fecha" tick={{ fontSize: 11 }} />
                <YAxis tick={{ fontSize: 11 }} />
                <Tooltip />
                <Legend />
                <Area 
                  type="monotone" 
                  dataKey="casosNuevos" 
                  stroke="#F72585" 
                  fillOpacity={1}
                  fill="url(#colorNuevos)" 
                  name="Casos Nuevos"
                />
                <Area 
                  type="monotone" 
                  dataKey="casosNeutralizados" 
                  stroke="#00E676" 
                  fillOpacity={1}
                  fill="url(#colorNeutralizados)" 
                  name="Casos Neutralizados"
                />
              </AreaChart>
            </ResponsiveContainer>
          </CardContent>
        </Card>

        {/* Vectores de Transmisión */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Globe className="h-5 w-5 text-primary" />
              <span>Vectores de Transmisión</span>
            </CardTitle>
            <CardDescription>Plataformas de mayor propagación</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              {transmissionVectors.map((platform) => {
                const PlatformIcon = getPlatformIcon(platform.platform);
                return (
                  <div key={platform.platform} className="space-y-2">
                    <div className="flex items-center justify-between">
                      <div className="flex items-center space-x-3">
                        <div 
                          className="w-8 h-8 rounded-lg flex items-center justify-center"
                          style={{ backgroundColor: `${platform.color}15` }}
                        >
                          <PlatformIcon 
                            className="w-5 h-5" 
                            style={{ color: platform.color }}
                          />
                        </div>
                        <span className="font-medium">{platform.platform}</span>
                      </div>
                      <div className="text-right">
                        <div className="font-bold">{platform.cases} casos</div>
                        <div className="text-sm text-muted-foreground">{platform.percentage}%</div>
                      </div>
                    </div>
                    <Progress value={platform.percentage} className="h-2" />
                  </div>
                );
              })}
            </div>
          </CardContent>
        </Card>
      </div>

      {/* SECCIÓN 3: PROPAGACIÓN GEOGRÁFICA Y PANEL DE CONTROL */}
      <div className="grid gap-6 lg:grid-cols-3">
        {/* Propagación Geográfica - Ocupa 2 columnas */}
        <div className="lg:col-span-2">
          <Card className="h-full">
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <MapPin className="h-5 w-5 text-primary" />
                <span>Propagación Geográfica</span>
              </CardTitle>
              <CardDescription>Estado epidemiológico por región de Colombia</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="grid gap-3 md:grid-cols-2">
                {geographicSpread.map((item, index) => (
                  <motion.div
                    key={index}
                    initial={{ opacity: 0, x: -20 }}
                    animate={{ opacity: 1, x: 0 }}
                    transition={{ delay: index * 0.1 }}
                    className="flex items-center justify-between p-4 bg-secondary/10 rounded-lg hover:bg-secondary/20 transition-colors cursor-pointer border border-secondary/20"
                  >
                    <div>
                      <div className="font-medium">{item.region}</div>
                      <div className="text-sm text-muted-foreground">
                        {item.casos.toLocaleString()} casos • Tasa: {item.tasa}/h
                      </div>
                    </div>
                    <div className="text-right">
                      {getRegionStatus(item.estado)}
                    </div>
                  </motion.div>
                ))}
              </div>
            </CardContent>
          </Card>
        </div>

        {/* Panel de Control Epidemiológico - 1 columna */}
        <div className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Thermometer className="h-5 w-5 text-primary" />
                <span>Temperatura Desinfodémica</span>
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-center">
                <div className="text-4xl mb-2">🌡️ 7.8°C</div>
                <div className="text-sm text-muted-foreground mb-3">Estado: Fiebre Alta</div>
                <Progress value={78} className="h-3" />
              </div>
            </CardContent>
          </Card>

          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <ShieldCheck className="h-5 w-5 text-primary" />
                <span>Efectividad Vacunas</span>
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="space-y-3">
                <div className="flex justify-between">
                  <span className="text-sm">Verificación:</span>
                  <span className="text-green-600">89%</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-sm">Educación:</span>
                  <span className="text-green-600">76%</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-sm">Fact-Checking:</span>
                  <span className="text-green-600">84%</span>
                </div>
              </div>
            </CardContent>
          </Card>

          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Eye className="h-5 w-5 text-primary" />
                <span>Vigilancia</span>
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="space-y-3">
                <div className="flex justify-between">
                  <span className="text-sm">Sensores:</span>
                  <span className="text-primary">1,247</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-sm">Cobertura:</span>
                  <span className="text-primary">94.2%</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-sm">Detección:</span>
                  <span className="text-primary">4.2 min</span>
                </div>
              </div>
            </CardContent>
          </Card>
        </div>
      </div>

      {/* SECCIÓN 4: ESTADÍSTICAS DE VERIFICACIÓN */}
      <div>
        <div className="mb-6">
          <h2 className="flex items-center space-x-2 mb-2">
            <FileText className="h-6 w-6 text-primary" />
            <span>Estadísticas de Verificación</span>
          </h2>
          <p className="text-muted-foreground text-sm">Métricas de contenido analizado y verificado</p>
        </div>

        {/* Statistics Cards */}
        <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-6">
          {dashboardStats.map((stat) => (
            <Card key={stat.title}>
              <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                <CardTitle className="text-sm">{stat.title}</CardTitle>
                <stat.icon className="h-4 w-4 text-muted-foreground" />
              </CardHeader>
              <CardContent>
                <div className="text-2xl">{stat.value}</div>
                <p className="text-xs text-muted-foreground">
                  <span className={`${stat.change.includes('+') ? 'text-green-600' : 'text-red-600'}`}>
                    {stat.change}
                  </span>
                  {' '}desde el mes pasado
                </p>
              </CardContent>
            </Card>
          ))}
        </div>

        <div className="grid gap-6 lg:grid-cols-3">
          {/* Análisis por Mes */}
          <Card>
            <CardHeader>
              <CardTitle>Análisis Mensual</CardTitle>
              <CardDescription>Contenidos analizados vs verificados</CardDescription>
            </CardHeader>
            <CardContent>
              <ResponsiveContainer width="100%" height={250}>
                <BarChart data={verificationData}>
                  <CartesianGrid strokeDasharray="3 3" opacity={0.3} />
                  <XAxis dataKey="month" tick={{ fontSize: 11 }} />
                  <YAxis tick={{ fontSize: 11 }} />
                  <Tooltip />
                  <Bar dataKey="contenidos" fill="var(--color-primary)" name="Analizados" />
                  <Bar dataKey="verificados" fill="var(--color-chart-2)" name="Verificados" />
                </BarChart>
              </ResponsiveContainer>
            </CardContent>
          </Card>

          {/* Resultados de Verificación */}
          <Card>
            <CardHeader>
              <CardTitle>Resultados</CardTitle>
              <CardDescription>Distribución por categoría</CardDescription>
            </CardHeader>
            <CardContent>
              <ResponsiveContainer width="100%" height={250}>
                <PieChart>
                  <Pie
                    data={pieData}
                    cx="50%"
                    cy="50%"
                    innerRadius={50}
                    outerRadius={80}
                    dataKey="value"
                  >
                    {pieData.map((entry, index) => (
                      <Cell key={index} fill={entry.color} />
                    ))}
                  </Pie>
                  <Tooltip />
                </PieChart>
              </ResponsiveContainer>
              <div className="mt-4 grid grid-cols-2 gap-2">
                {pieData.map((item) => (
                  <div key={item.name} className="flex items-center space-x-2">
                    <div 
                      className="w-3 h-3 rounded-full" 
                      style={{ backgroundColor: item.color }}
                    />
                    <span className="text-xs">{item.name}: {item.value}%</span>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>

          {/* Tipos de Contenido */}
          <Card>
            <CardHeader>
              <CardTitle>Tipos de Contenido</CardTitle>
              <CardDescription>Distribución por formato</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-4">
                {contentTypes.map((type) => (
                  <div key={type.name} className="flex items-center justify-between">
                    <div className="flex items-center space-x-3">
                      <type.icon className="h-5 w-5 text-muted-foreground" />
                      <span>{type.name}</span>
                    </div>
                    <div className="flex items-center space-x-3 min-w-0 flex-1 ml-[35px]">
                      <Progress value={type.value} className="flex-1" />
                      <span className="text-sm text-muted-foreground">{type.value}%</span>
                    </div>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>
        </div>
      </div>

      {/* SECCIÓN 5: ANÁLISIS AVANZADO */}
      <div>
        <div className="mb-6">
          <h2 className="flex items-center space-x-2 mb-2">
            <BarChart3 className="h-6 w-6 text-primary" />
            <span>Análisis Avanzado</span>
          </h2>
          <p className="text-muted-foreground text-sm">Métricas especializadas y patrones de comportamiento</p>
        </div>

        {/* Métricas avanzadas en cards compactos */}
        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
          <div className="bg-gradient-to-br from-red-50 to-red-100/50 border border-red-200 rounded-lg p-4">
            <div className="flex items-center space-x-2 mb-2">
              <TrendingUp className="h-4 w-4 text-red-500" />
              <span className="text-sm text-red-700">Velocidad Contagio</span>
            </div>
            <div className="text-2xl text-red-800">1.7x</div>
            <div className="text-xs text-red-600">casos/hora</div>
          </div>
          
          <div className="bg-gradient-to-br from-green-50 to-green-100/50 border border-green-200 rounded-lg p-4">
            <div className="flex items-center space-x-2 mb-2">
              <Shield className="h-4 w-4 text-green-500" />
              <span className="text-sm text-green-700">Inmunización</span>
            </div>
            <div className="text-2xl text-green-800">73%</div>
            <div className="text-xs text-green-600">verificaciones exitosas</div>
          </div>
          
          <div className="bg-gradient-to-br from-yellow-50 to-yellow-100/50 border border-yellow-200 rounded-lg p-4">
            <div className="flex items-center space-x-2 mb-2">
              <Clock className="h-4 w-4 text-yellow-500" />
              <span className="text-sm text-yellow-700">Incubación</span>
            </div>
            <div className="text-2xl text-yellow-800">2.3h</div>
            <div className="text-xs text-yellow-600">tiempo propagación</div>
          </div>
          
          <div className="bg-gradient-to-br from-blue-50 to-blue-100/50 border border-blue-200 rounded-lg p-4">
            <div className="flex items-center space-x-2 mb-2">
              <Zap className="h-4 w-4 text-blue-500" />
              <span className="text-sm text-blue-700">Índice Epidémico</span>
            </div>
            <div className="text-2xl text-blue-800">Alto</div>
            <div className="text-xs text-blue-600">fase exponencial</div>
          </div>
        </div>

        {/* Infectividad por hora */}
        <Card>
          <CardHeader>
            <CardTitle>Infectividad por Hora del Día</CardTitle>
            <CardDescription>Distribución de casos nuevos vs resueltos en 24 horas</CardDescription>
          </CardHeader>
          <CardContent>
            <ResponsiveContainer width="100%" height={300}>
              <AreaChart data={infectivityData}>
                <CartesianGrid strokeDasharray="3 3" opacity={0.3} />
                <XAxis dataKey="time" tick={{ fontSize: 11 }} />
                <YAxis tick={{ fontSize: 11 }} />
                <Tooltip />
                <Legend />
                <Area 
                  type="monotone" 
                  dataKey="nuevos" 
                  stackId="1" 
                  stroke="#FF4444" 
                  fill="#FF4444" 
                  fillOpacity={0.6}
                  name="Casos Nuevos"
                />
                <Area 
                  type="monotone" 
                  dataKey="resueltos" 
                  stackId="2" 
                  stroke="#00E676" 
                  fill="#00E676" 
                  fillOpacity={0.6}
                  name="Casos Resueltos"
                />
              </AreaChart>
            </ResponsiveContainer>
          </CardContent>
        </Card>
      </div>

      {/* SECCIÓN 6: VERIFICACIÓN HUMANA */}
      <div>
        <div className="mb-6">
          <h2 className="flex items-center space-x-2 mb-2">
            <Microscope className="h-6 w-6 text-primary" />
            <span>Laboratorio de Verificación Epidemiológica</span>
          </h2>
          <p className="text-muted-foreground text-sm">Red colaborativa de especialistas para diagnóstico y verificación de casos</p>
        </div>

        {/* Estadísticas de Verificación Humana */}
        <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-6">
          <Card className="bg-gradient-to-br from-green-50 to-emerald-50 border-green-200">
            <CardContent className="p-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-2">
                  <div className="p-2 bg-green-100 rounded-lg">
                    <Users className="h-6 w-6 text-green-600" />
                  </div>
                  <div>
                    <p className="text-2xl text-green-700">47</p>
                    <p className="text-sm text-green-600">Especialistas Activos</p>
                  </div>
                </div>
                <div className="text-right">
                  <p className="text-xs text-green-600">+12% vs ayer</p>
                  <div className="flex items-center space-x-1">
                    <TrendingUp className="h-3 w-3 text-green-500" />
                    <span className="text-xs text-green-500">↑ 5 nuevos</span>
                  </div>
                </div>
              </div>
            </CardContent>
          </Card>

          <Card className="bg-gradient-to-br from-amber-50 to-yellow-50 border-amber-200">
            <CardContent className="p-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-2">
                  <div className="p-2 bg-amber-100 rounded-lg">
                    <Timer className="h-6 w-6 text-amber-600" />
                  </div>
                  <div>
                    <p className="text-2xl text-amber-700">234</p>
                    <p className="text-sm text-amber-600">Casos Pendientes</p>
                  </div>
                </div>
                <div className="text-right">
                  <p className="text-xs text-amber-600">Prioridad Alta: 67</p>
                  <div className="flex items-center space-x-1">
                    <Clock className="h-3 w-3 text-amber-500" />
                    <span className="text-xs text-amber-500">T.M.R: 2.3h</span>
                  </div>
                </div>
              </div>
            </CardContent>
          </Card>

          <Card className="bg-gradient-to-br from-blue-50 to-cyan-50 border-blue-200">
            <CardContent className="p-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-2">
                  <div className="p-2 bg-blue-100 rounded-lg">
                    <CheckCircle className="h-6 w-6 text-blue-600" />
                  </div>
                  <div>
                    <p className="text-2xl text-blue-700">1,247</p>
                    <p className="text-sm text-blue-600">Casos Diagnosticados</p>
                  </div>
                </div>
                <div className="text-right">
                  <p className="text-xs text-blue-600">Últimas 24h</p>
                  <div className="flex items-center space-x-1">
                    <Activity className="h-3 w-3 text-blue-500" />
                    <span className="text-xs text-blue-500">Ritmo: 52/h</span>
                  </div>
                </div>
              </div>
            </CardContent>
          </Card>

          <Card className="bg-gradient-to-br from-purple-50 to-violet-50 border-purple-200">
            <CardContent className="p-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-2">
                  <div className="p-2 bg-purple-100 rounded-lg">
                    <Gauge className="h-6 w-6 text-purple-600" />
                  </div>
                  <div>
                    <p className="text-2xl text-purple-700">96.2%</p>
                    <p className="text-sm text-purple-600">Precisión Diagnóstica</p>
                  </div>
                </div>
                <div className="text-right">
                  <p className="text-xs text-purple-600">Consenso Inter-obs.</p>
                  <div className="flex items-center space-x-1">
                    <Award className="h-3 w-3 text-purple-500" />
                    <span className="text-xs text-purple-500">κ = 0.94</span>
                  </div>
                </div>
              </div>
            </CardContent>
          </Card>
        </div>

        {/* Métricas Complementarias */}
        <div className="grid gap-4 md:grid-cols-3 mb-6">
          <Card className="bg-gradient-to-br from-red-50 to-rose-50 border-red-200">
            <CardContent className="p-4">
              <div className="flex items-center space-x-2">
                <div className="p-2 bg-red-100 rounded-lg">
                  <Activity className="h-6 w-6 text-red-600" />
                </div>
                <div>
                  <p className="text-2xl text-red-700">R₀ = 1.15</p>
                  <p className="text-sm text-red-600">Tasa de Reproducción</p>
                </div>
              </div>
            </CardContent>
          </Card>

          <Card className="bg-gradient-to-br from-orange-50 to-amber-50 border-orange-200">
            <CardContent className="p-4">
              <div className="flex items-center space-x-2">
                <div className="p-2 bg-orange-100 rounded-lg">
                  <Flame className="h-6 w-6 text-orange-600" />
                </div>
                <div>
                  <p className="text-2xl text-orange-700">58.3%</p>
                  <p className="text-sm text-orange-600">Virulencia Promedio</p>
                </div>
              </div>
            </CardContent>
          </Card>

          <Card className="bg-gradient-to-br from-indigo-50 to-blue-50 border-indigo-200">
            <CardContent className="p-4">
              <div className="flex items-center space-x-2">
                <div className="p-2 bg-indigo-100 rounded-lg">
                  <Zap className="h-6 w-6 text-indigo-600" />
                </div>
                <div>
                  <p className="text-2xl text-indigo-700">2.3h</p>
                  <p className="text-sm text-indigo-600">Tiempo Medio Propagación</p>
                </div>
              </div>
            </CardContent>
          </Card>
        </div>

        {/* Gráficos de Verificación */}
        <div className="grid gap-6 lg:grid-cols-2 mb-6">
          {/* Tendencias de Verificación */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <TrendingUp className="h-5 w-5 text-primary" />
                <span>Tendencias de Verificación Semanal</span>
              </CardTitle>
              <CardDescription>Actividad diaria y precisión diagnóstica del equipo</CardDescription>
            </CardHeader>
            <CardContent>
              <ResponsiveContainer width="100%" height={300}>
                <AreaChart data={verificationTrends}>
                  <CartesianGrid strokeDasharray="3 3" opacity={0.3} />
                  <XAxis dataKey="name" tick={{ fontSize: 11 }} />
                  <YAxis tick={{ fontSize: 11 }} />
                  <Tooltip />
                  <Legend />
                  <Area 
                    type="monotone" 
                    dataKey="verificaciones" 
                    stroke="#ffda00" 
                    fill="rgba(255, 218, 0, 0.2)" 
                    strokeWidth={3}
                    name="Verificaciones"
                  />
                  <Area 
                    type="monotone" 
                    dataKey="precision" 
                    stroke="#22c55e" 
                    fill="rgba(34, 197, 94, 0.1)" 
                    strokeWidth={2}
                    name="Precisión %"
                  />
                </AreaChart>
              </ResponsiveContainer>
            </CardContent>
          </Card>

          {/* Distribución de Tipos de Casos */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <BarChart3 className="h-5 w-5 text-primary" />
                <span>Distribución de Tipos de Casos</span>
              </CardTitle>
              <CardDescription>Clasificación epidemiológica de casos diagnosticados</CardDescription>
            </CardHeader>
            <CardContent>
              <ResponsiveContainer width="100%" height={300}>
                <PieChart>
                  <Pie
                    data={caseTypesData}
                    cx="50%"
                    cy="50%"
                    outerRadius={100}
                    dataKey="value"
                    label={({name, percent}) => `${name}: ${(percent * 100).toFixed(0)}%`}
                  >
                    {caseTypesData.map((entry, index) => (
                      <Cell key={`cell-${index}`} fill={entry.color} />
                    ))}
                  </Pie>
                  <Tooltip />
                </PieChart>
              </ResponsiveContainer>
            </CardContent>
          </Card>
        </div>

        {/* Ranking de Especialistas */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Trophy className="h-5 w-5 text-primary" />
              <span>Ranking de Especialistas</span>
            </CardTitle>
            <CardDescription>Clasificación de verificadores por rendimiento y precisión diagnóstica</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              {verifierRanking.map((verifier, index) => (
                <div key={index} className="flex items-center justify-between p-4 border rounded-lg hover:bg-secondary/10 transition-colors">
                  <div className="flex items-center space-x-4">
                    <div className="flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground">
                      {index + 1}
                    </div>
                    <div>
                      <h4 className="font-medium">{verifier.name}</h4>
                      <p className="text-sm text-muted-foreground">{verifier.especialidad}</p>
                    </div>
                  </div>
                  <div className="text-right">
                    <div className="flex items-center space-x-4">
                      <div className="text-center">
                        <p className="text-sm font-medium">{verifier.verificaciones}</p>
                        <p className="text-xs text-muted-foreground">Verificaciones</p>
                      </div>
                      <div className="text-center">
                        <p className="text-sm font-medium text-green-600">{verifier.precision}%</p>
                        <p className="text-xs text-muted-foreground">Precisión</p>
                      </div>
                      <div className="flex items-center space-x-1">
                        <Star className="h-4 w-4 text-yellow-500 fill-current" />
                        <span className="text-sm font-medium">{(verifier.precision / 20).toFixed(1)}</span>
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      </div>

      {/* SECCIÓN FINAL: ACTIVIDAD RECIENTE */}
      <div>
        <div className="mb-6">
          <h2 className="flex items-center space-x-2 mb-2">
            <Clock className="h-6 w-6 text-primary" />
            <span>Actividad Reciente</span>
          </h2>
          <p className="text-muted-foreground text-sm">Últimas verificaciones y análisis epidemiológicos del sistema</p>
        </div>

        <Card>
          <CardHeader>
            <CardTitle>Registro de Actividad</CardTitle>
            <CardDescription>Historial detallado de casos verificados</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-6">
              {[
                { 
                  id: 'BTL-2024-001458',
                  type: 'Imagen', 
                  status: 'Veraz', 
                  user: 'Ana García', 
                  time: 'Hace 5 min',
                  confidence: 94,
                  region: 'Cundinamarca',
                  platform: 'WhatsApp',
                  analysisTime: '2.3 seg',
                  reach: '~15K usuarios',
                  markers: ['Verificación cruzada', 'Fuente oficial']
                },
                { 
                  id: 'BTL-2024-001457',
                  type: 'Video', 
                  status: 'Desinformación', 
                  user: 'Carlos López', 
                  time: 'Hace 12 min',
                  confidence: 87,
                  region: 'Antioquia',
                  platform: 'Facebook',
                  analysisTime: '45.7 seg',
                  reach: '~89K usuarios',
                  markers: ['Manipulación detectada', 'Contenido fabricado']
                },
                { 
                  id: 'BTL-2024-001456',
                  type: 'Texto', 
                  status: 'Satírico', 
                  user: 'María Torres', 
                  time: 'Hace 23 min',
                  confidence: 76,
                  region: 'Valle del Cauca',
                  platform: 'Twitter',
                  analysisTime: '1.1 seg',
                  reach: '~3.2K usuarios',
                  markers: ['Humor detectado', 'Sin intención maliciosa']
                },
                { 
                  id: 'BTL-2024-001455',
                  type: 'Audio', 
                  status: 'Fuera de Contexto', 
                  user: 'Luis Martín', 
                  time: 'Hace 1h',
                  confidence: 82,
                  region: 'Atlántico',
                  platform: 'Telegram',
                  analysisTime: '67.2 seg',
                  reach: '~25K usuarios',
                  markers: ['Contenido auténtico', 'Contexto alterado']
                },
              ].map((activity, index) => (
                <div key={index} className="border rounded-lg p-4 space-y-3 hover:shadow-md transition-shadow bg-secondary/5">
                  {/* Header del caso */}
                  <div className="flex items-center justify-between">
                    <div className="flex items-center space-x-3">
                      <div className="flex items-center space-x-2">
                        {activity.type === 'Imagen' && <Image className="h-4 w-4 text-blue-500" />}
                        {activity.type === 'Video' && <Video className="h-4 w-4 text-purple-500" />}
                        {activity.type === 'Texto' && <FileText className="h-4 w-4 text-green-500" />}
                        {activity.type === 'Audio' && <Volume2 className="h-4 w-4 text-orange-500" />}
                        <Badge variant="outline" className="text-xs">{activity.type}</Badge>
                      </div>
                      <Badge 
                        variant={
                          activity.status === 'Veraz' ? 'default' :
                          activity.status === 'Desinformación' ? 'destructive' :
                          'secondary'
                        }
                        className="text-xs"
                      >
                        {activity.status}
                      </Badge>
                      <div className="flex items-center space-x-1 text-xs text-muted-foreground">
                        <Target className="h-3 w-3" />
                        <span>{activity.confidence}% confianza</span>
                      </div>
                    </div>
                    <div className="text-xs text-muted-foreground">
                      Caso {activity.id}
                    </div>
                  </div>

                  {/* Detalles del análisis */}
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-xs">
                    <div className="flex items-center space-x-1">
                      <MapPin className="h-3 w-3 text-muted-foreground" />
                      <span className="text-muted-foreground">Región:</span>
                      <span>{activity.region}</span>
                    </div>
                    <div className="flex items-center space-x-1">
                      <Globe className="h-3 w-3 text-muted-foreground" />
                      <span className="text-muted-foreground">Plataforma:</span>
                      <span>{activity.platform}</span>
                    </div>
                    <div className="flex items-center space-x-1">
                      <Clock className="h-3 w-3 text-muted-foreground" />
                      <span className="text-muted-foreground">Análisis:</span>
                      <span>{activity.analysisTime}</span>
                    </div>
                    <div className="flex items-center space-x-1">
                      <Users className="h-3 w-3 text-muted-foreground" />
                      <span className="text-muted-foreground">Alcance:</span>
                      <span>{activity.reach}</span>
                    </div>
                  </div>

                  {/* Marcadores de diagnóstico */}
                  <div className="space-y-2">
                    <div className="text-xs text-muted-foreground flex items-center space-x-1">
                      <Microscope className="h-3 w-3" />
                      <span>Marcadores de diagnóstico:</span>
                    </div>
                    <div className="grid grid-cols-2 gap-1">
                      {activity.markers.map((marker, markerIndex) => (
                        <Badge key={markerIndex} variant="secondary" className="text-xs px-2 py-1">
                          {marker}
                        </Badge>
                      ))}
                    </div>
                  </div>

                  {/* Footer */}
                  <div className="flex items-center justify-between pt-2 border-t border-border/50">
                    <div className="flex items-center space-x-2 text-xs text-muted-foreground">
                      <Stethoscope className="h-3 w-3" />
                      <span>Verificado por {activity.user}</span>
                    </div>
                    <div className="text-xs text-muted-foreground">
                      {activity.time}
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  );
} - - - - - - - - - - - - 
src/components/AdvancedAnalytics.tsx

import React from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Badge } from './ui/badge';
import { 
  AreaChart, Area, BarChart, Bar, LineChart, Line, PieChart, Pie, Cell,
  XAxis, YAxis, CartesianGrid, ResponsiveContainer, Tooltip, Legend
} from 'recharts';
import { 
  TrendingUp, TrendingDown, Activity, Zap, Shield, Clock
} from 'lucide-react';

export function AdvancedAnalytics() {
  // Datos para la curva epidemiológica
  const epidemiologicalCurve = [
    { fecha: '18 Oct', casosNuevos: 45, casosNeutralizados: 32, tasaR0: 1.2 },
    { fecha: '19 Oct', casosNuevos: 67, casosNeutralizados: 41, tasaR0: 1.4 },
    { fecha: '20 Oct', casosNuevos: 89, casosNeutralizados: 56, tasaR0: 1.6 },
    { fecha: '21 Oct', casosNuevos: 134, casosNeutralizados: 78, tasaR0: 1.8 },
    { fecha: '22 Oct', casosNuevos: 198, casosNeutralizados: 112, tasaR0: 2.1 },
    { fecha: '23 Oct', casosNuevos: 267, casosNeutralizados: 145, tasaR0: 2.3 },
    { fecha: '24 Oct', casosNuevos: 342, casosNeutralizados: 189, tasaR0: 2.5 },
    { fecha: '25 Oct', casosNuevos: 298, casosNeutralizados: 234, tasaR0: 2.2 },
    { fecha: '26 Oct', casosNuevos: 234, casosNeutralizados: 267, tasaR0: 1.9 },
    { fecha: '27 Oct', casosNuevos: 189, casosNeutralizados: 198, tasaR0: 1.7 },
  ];

  // Datos de infectividad por hora
  const infectivityData = [
    { time: '00:00', casos: 120, nuevos: 23, resueltos: 15 },
    { time: '04:00', casos: 145, nuevos: 31, resueltos: 18 },
    { time: '08:00', casos: 189, nuevos: 67, resueltos: 24 },
    { time: '12:00', casos: 234, nuevos: 89, resueltos: 35 },
    { time: '16:00', casos: 298, nuevos: 112, resueltos: 48 },
    { time: '20:00', casos: 267, nuevos: 78, resueltos: 109 },
    { time: '24:00', casos: 189, nuevos: 45, resueltos: 123 },
  ];

  // Datos de vectores de transmisión
  const transmissionVectors = [
    { platform: 'WhatsApp', cases: 856, percentage: 28, color: '#25D366' },
    { platform: 'Facebook', cases: 723, percentage: 24, color: '#1877F2' },
    { platform: 'Twitter/X', cases: 534, percentage: 18, color: '#000000' },
    { platform: 'Telegram', cases: 298, percentage: 10, color: '#0088CC' },
    { platform: 'TikTok', cases: 267, percentage: 9, color: '#FF0050' },
    { platform: 'Web', cases: 334, percentage: 11, color: '#4285F4' },
  ];

  return (
    <div className="grid gap-6">
      {/* Curva Epidemiológica */}
      <Card>
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <Activity className="h-5 w-5 text-primary" />
            <span>Curva Epidemiológica de Desinformación</span>
          </CardTitle>
          <CardDescription>
            Evolución temporal de casos nuevos, neutralizados y tasa R₀
          </CardDescription>
        </CardHeader>
        <CardContent>
          <div className="h-80 w-full">
            <ResponsiveContainer width="100%" height="100%">
              <LineChart data={epidemiologicalCurve}>
                <CartesianGrid strokeDasharray="3 3" stroke="#e0e0e0" />
                <XAxis 
                  dataKey="fecha" 
                  tick={{ fontSize: 12 }}
                  stroke="#666"
                />
                <YAxis 
                  tick={{ fontSize: 12 }}
                  stroke="#666"
                />
                <Tooltip 
                  contentStyle={{
                    backgroundColor: 'white',
                    border: '1px solid #e0e0e0',
                    borderRadius: '8px',
                    fontSize: '12px'
                  }}
                />
                <Legend wrapperStyle={{ fontSize: '12px' }} />
                
                <Line 
                  type="monotone" 
                  dataKey="casosNuevos" 
                  stroke="#FF4444" 
                  strokeWidth={3}
                  dot={{ fill: '#FF4444', strokeWidth: 2, r: 5 }}
                  name="Casos Nuevos"
                />
                
                <Line 
                  type="monotone" 
                  dataKey="casosNeutralizados" 
                  stroke="#00E676" 
                  strokeWidth={3}
                  dot={{ fill: '#00E676', strokeWidth: 2, r: 4 }}
                  name="Casos Neutralizados"
                />
                
                <Line 
                  type="monotone" 
                  dataKey="tasaR0" 
                  stroke="#FFD60A" 
                  strokeWidth={2}
                  dot={{ fill: '#FFD60A', strokeWidth: 2, r: 4 }}
                  name="Tasa R₀"
                />
              </LineChart>
            </ResponsiveContainer>
          </div>
          
          {/* Métricas epidemiológicas */}
          <div className="mt-6 grid grid-cols-2 md:grid-cols-4 gap-4">
            <div className="bg-red-50 border border-red-200 rounded-lg p-4">
              <div className="flex items-center space-x-2">
                <TrendingUp className="h-4 w-4 text-red-500" />
                <span className="text-sm font-medium text-red-700">Velocidad de Contagio</span>
              </div>
              <div className="text-2xl font-semibold text-red-800 mt-2">1.7x</div>
              <div className="text-xs text-red-600">casos/hora</div>
            </div>
            
            <div className="bg-green-50 border border-green-200 rounded-lg p-4">
              <div className="flex items-center space-x-2">
                <Shield className="h-4 w-4 text-green-500" />
                <span className="text-sm font-medium text-green-700">Tasa de Inmunización</span>
              </div>
              <div className="text-2xl font-semibold text-green-800 mt-2">73%</div>
              <div className="text-xs text-green-600">verificaciones exitosas</div>
            </div>
            
            <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
              <div className="flex items-center space-x-2">
                <Clock className="h-4 w-4 text-yellow-500" />
                <span className="text-sm font-medium text-yellow-700">Período Incubación</span>
              </div>
              <div className="text-2xl font-semibold text-yellow-800 mt-2">2.3h</div>
              <div className="text-xs text-yellow-600">tiempo de propagación</div>
            </div>
            
            <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
              <div className="flex items-center space-x-2">
                <Zap className="h-4 w-4 text-blue-500" />
                <span className="text-sm font-medium text-blue-700">Índice Epidémico</span>
              </div>
              <div className="text-2xl font-semibold text-blue-800 mt-2">Alto</div>
              <div className="text-xs text-blue-600">fase exponencial</div>
            </div>
          </div>
        </CardContent>
      </Card>

      {/* Gráficos adicionales */}
      <div className="grid gap-6 md:grid-cols-2">
        {/* Infectividad por hora */}
        <Card>
          <CardHeader>
            <CardTitle>Infectividad por Hora</CardTitle>
            <CardDescription>
              Casos nuevos vs casos resueltos por hora del día
            </CardDescription>
          </CardHeader>
          <CardContent>
            <div className="h-64 w-full">
              <ResponsiveContainer width="100%" height="100%">
                <AreaChart data={infectivityData}>
                  <CartesianGrid strokeDasharray="3 3" />
                  <XAxis dataKey="time" tick={{ fontSize: 11 }} />
                  <YAxis tick={{ fontSize: 11 }} />
                  <Tooltip />
                  <Legend />
                  <Area 
                    type="monotone" 
                    dataKey="nuevos" 
                    stackId="1" 
                    stroke="#FF4444" 
                    fill="#FF4444" 
                    fillOpacity={0.6}
                    name="Casos Nuevos"
                  />
                  <Area 
                    type="monotone" 
                    dataKey="resueltos" 
                    stackId="2" 
                    stroke="#00E676" 
                    fill="#00E676" 
                    fillOpacity={0.6}
                    name="Casos Resueltos"
                  />
                </AreaChart>
              </ResponsiveContainer>
            </div>
          </CardContent>
        </Card>

        {/* Vectores de transmisión */}
        <Card>
          <CardHeader>
            <CardTitle>Vectores de Transmisión</CardTitle>
            <CardDescription>
              Plataformas con mayor propagación de desinformación
            </CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              {transmissionVectors.map((vector, index) => (
                <div key={index} className="flex items-center justify-between">
                  <div className="flex items-center space-x-3">
                    <div 
                      className="w-4 h-4 rounded-full" 
                      style={{ backgroundColor: vector.color }}
                    ></div>
                    <span className="text-sm font-medium">{vector.platform}</span>
                  </div>
                  <div className="flex items-center space-x-3">
                    <div className="text-right">
                      <div className="text-sm font-semibold">{vector.cases.toLocaleString()}</div>
                      <div className="text-xs text-muted-foreground">{vector.percentage}%</div>
                    </div>
                    <div className="w-20">
                      <div className="bg-muted rounded-full h-2">
                        <div 
                          className="h-2 rounded-full transition-all duration-500"
                          style={{ 
                            width: `${vector.percentage * 4}%`,
                            backgroundColor: vector.color 
                          }}
                        ></div>
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  );
} - - - - - - - - - - - - 
src/components/figma/ImageWithFallback.tsx

import React, { useState } from 'react'

const ERROR_IMG_SRC =
  'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg=='

export function ImageWithFallback(props: React.ImgHTMLAttributes<HTMLImageElement>) {
  const [didError, setDidError] = useState(false)

  const handleError = () => {
    setDidError(true)
  }

  const { src, alt, style, className, ...rest } = props

  return didError ? (
    <div
      className={`inline-block bg-gray-100 text-center align-middle ${className ?? ''}`}
      style={style}
    >
      <div className="flex items-center justify-center w-full h-full">
        <img src={ERROR_IMG_SRC} alt="Error loading image" {...rest} data-original-url={src} />
      </div>
    </div>
  ) : (
    <img src={src} alt={alt} className={className} style={style} {...rest} onError={handleError} />
  )
}
 - - - - - - - - - - - - 
src/components/form-fields/SchemaForm.tsx

import React, { useMemo } from 'react';
import { useForm, FieldValues, ControllerRenderProps } from 'react-hook-form';
import { Button } from "@/components/ui/button";
import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from "@/components/ui/form";
import { Input } from "@/components/ui/input";
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select";
import { Loader2 } from 'lucide-react';
import { useConfig } from '@/providers/ConfigProvider';
import type { SchemaProperty, SchemaModel } from '@/providers/SchemaProvider';
import { Eye, EyeOff } from 'lucide-react';

interface SchemaFormProps { modelSchema: SchemaModel; view: string; onSubmit: (data: Record<string, unknown>) => Promise<void>; isSubmitting?: boolean; submitText?: string; }

const renderField = (prop: SchemaProperty, field: ControllerRenderProps<FieldValues, any>, overrides?: any) => {
    const [showPassword, setShowPassword] = React.useState(false);
    const allProps = { ...field, ...overrides };

    if (prop.enum) {
        return (
            <Select onValueChange={allProps.onChange} defaultValue={allProps.value}>
                <FormControl><SelectTrigger className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"><SelectValue placeholder={overrides?.placeholder || `Seleccionar...`} /></SelectTrigger></FormControl>
                <SelectContent>{prop.enum.map((option: string) => <SelectItem key={option} value={option}>{option}</SelectItem>)}</SelectContent>
            </Select>
        );
    }
    
    if (prop['x-type'] === 'password') {
        return (
            <div className="relative">
                <Input {...allProps} type={showPassword ? 'text' : 'password'} value={allProps.value || ''} className="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors" />
                <button type="button" onClick={() => setShowPassword(!showPassword)} className="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">
                    {showPassword ? <EyeOff className="h-5 w-5" /> : <Eye className="h-5 w-5" />}
                </button>
            </div>
        )
    }

    return <Input {...allProps} type={prop['x-type'] || prop.format || 'text'} value={allProps.value || ''} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors" />;
};

export const SchemaForm: React.FC<SchemaFormProps> = ({ modelSchema, view, onSubmit, isSubmitting = false, submitText = 'Submit' }) => {
    const { getStyles } = useConfig();
    const viewStyles = getStyles(view);
    const form = useForm();
    
    const fieldsToRender = useMemo(() => {
        if (!modelSchema?.properties) return [];
        return Object.entries(modelSchema.properties)
            .map(([fieldName, prop]) => ({
                fieldName,
                prop,
                order: viewStyles.fieldOverrides?.[fieldName]?.order ?? 999
            }))
            .sort((a, b) => a.order - b.order);
    }, [modelSchema, viewStyles]);

    const groupedFields = useMemo(() => {
        return fieldsToRender.reduce((acc, { fieldName, prop }) => {
            const groupKey = prop['x-layout-group'] || `single_${fieldName}`;
            if (!acc[groupKey]) acc[groupKey] = [];
            acc[groupKey].push({ fieldName, prop });
            return acc;
        }, {} as Record<string, { fieldName: string; prop: SchemaProperty }[]>);
    }, [fieldsToRender]);

    return (
        <Form {...form}>
            <form onSubmit={form.handleSubmit(onSubmit as any)} className={viewStyles.formClassName || 'space-y-4'}>
                {Object.values(groupedFields).map((group, groupIndex) => (
                    <div key={groupIndex} className="flex flex-col sm:flex-row gap-4">
                        {group.map(({ fieldName, prop }) => {
                            const fieldOverrides = viewStyles.fieldOverrides?.[fieldName];
                            const label = (fieldOverrides?.label as string) || prop['x-label'] || fieldName;
                            return (
                                <FormField
                                    key={fieldName}
                                    control={form.control}
                                    name={fieldName}
                                    render={({ field }) => (
                                        <FormItem className="flex-1 min-w-0">
                                            <FormLabel className="text-gray-700">{label}</FormLabel>
                                            <FormControl>{renderField(prop, field, fieldOverrides)}</FormControl>
                                            <FormMessage />
                                        </FormItem>
                                    )}
                                />
                            );
                        })}
                    </div>
                ))}
                <Button type="submit" disabled={isSubmitting} className="w-full !mt-6 bg-black text-white py-3 rounded-lg hover:bg-gray-800 disabled:opacity-50">
                    {isSubmitting && <Loader2 className="mr-2 h-4 w-4 animate-spin" />}
                    {isSubmitting ? 'Procesando...' : submitText}
                </Button>
            </form>
        </Form>
    );
};
 - - - - - - - - - - - - 
src/components/ContentAnalysisView.tsx

import React from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Badge } from './ui/badge';
import { Progress } from './ui/progress';
import { Alert, AlertDescription } from './ui/alert';
import { Label } from './ui/label';
import { ImageWithFallback } from './figma/ImageWithFallback';
import { 
  AlertTriangle, 
  XCircle, 
  Hash,
  FileText,
  Flame,
  Ban,
  Skull,
  Target,
  Stethoscope,
  Bot,
  ArrowRight,
  UserCheck,
  Crosshair,
  ExternalLink,
  Activity,
  Share2,
  Facebook,
  Twitter,
  Linkedin,
  MessageCircle,
  Calendar,
  Link,
  FileType
} from 'lucide-react';

interface ContentAnalysisViewProps {
  contentId?: string;
}

export function ContentAnalysisView({ contentId = "CAS-2024-001" }: ContentAnalysisViewProps) {

  // TODO: Replace mock data with real API call
  // When integrating real API:
  // 1. Call getJobStatus(jobId) from utils/aiAnalysis.ts
  // 2. Extract Botilito summary using: extractBotilitoSummary(jobStatus)
  // 3. Botilito summary is at: result.metadata.resultBotilito.summary

  // Datos simulados del contenido analizado por Botilito
  const analysisResult = {
    id: contentId,
    timestamp: '2024-01-15T14:52:30Z',
    type: 'url',
    title: 'Artículo de noticia falsa con contenido xenofóbico',
    url: 'https://noticiasfalsas24.com/migrantes-venezolanos-crisis-colombia-2024',
    originalText: 'EXCLUSIVA: Investigación revela que el 89% de los delitos en Bogotá son cometidos por inmigrantes venezolanos, según "datos oficiales" que las autoridades ocultaron. Los ciudadanos colombianos ya perdieron más de 2 millones de empleos por esta invasión.',
    headline: 'EXCLUSIVA: Datos oficiales revelan que inmigrantes venezolanos cometen 89% de delitos en Bogotá',
    source: 'Noticias Falsas 24',
    submittedBy: 'carlos.martinez@email.com',
    submittedAt: '2024-01-15T14:45:00Z',
    summary: 'BREAKING: Supuesto hallazgo revolucionario en medicina promete curar todas las enfermedades\n\nBOGOTÁ, Colombia - Un grupo de científicos colombianos afirma haber desarrollado una revolucionaria "cura universal" que supuestamente puede tratar desde el cáncer hasta el resfriado común en cuestión de horas. El anuncio, realizado a través de redes sociales sin revisión científica, ha generado controversia en la comunidad médica internacional.',
    metadata: {
      resultBotilito: {
        tone: 'casual',
        summary: '¡Kiubo! Botilito aquí con el diagnóstico: Este contenido es DESINFORMACIÓN TÓXICA pura. El artículo afirma que el 89% de los delitos en Bogotá son cometidos por inmigrantes venezolanos, usando supuestos "datos oficiales" que las autoridades habrían ocultado. FALSO TOTAL parce.\n\nLo que Botilito encontró:\n- Las estadísticas no coinciden con datos reales de la Policía Nacional de Colombia\n- Usa lenguaje xenofóbico como "invasión" para generar odio\n- La fuente "Noticias Falsas 24" no es verificable ni confiable\n- Promueve discriminación y puede incitar violencia contra población migrante\n\nRiesgo epidemiológico: CRÍTICO (R0: 4.7) - Este contenido se propaga rapidísimo por WhatsApp y Facebook. ¡Cuidado!',
        sentiment: 'alarma',
        coreMessage: 'Desinformación xenofóbica con estadísticas falsas',
        awarenessMessage: 'Este tipo de contenido promueve discriminación y puede incitar violencia'
      }
    },
    botilloAnalysis: {
      primaryDiagnosis: 'Desinformación Tóxica',
      confidence: 0.96,
      riskLevel: 'Crítico',
      markersDetected: [
        { 
          type: 'Falso', 
          confidence: 0.94, 
          virulence: 85,
          justification: 'Estadística del "89% de delitos" no coincide con datos oficiales. Fuente citada carece de verificación institucional.' 
        },
        { 
          type: 'Discurso de odio (Xenofobia)', 
          confidence: 0.92, 
          virulence: 95,
          justification: 'Uso de término "invasión" y generalización negativa hacia población migrante venezolana promueve discriminación.' 
        },
        { 
          type: 'Incitación a la violencia', 
          confidence: 0.87, 
          virulence: 90,
          justification: 'Narrativa de "amenaza" y "pérdida de empleos" genera clima hostil que puede escalar a confrontación social.' 
        },
        { 
          type: 'Sensacionalista', 
          confidence: 0.78, 
          virulence: 55,
          justification: 'Titular con "EXCLUSIVA" y datos alarmistas busca generar reacciones emocionales antes que informar.' 
        }
      ],
      epidemiologicMetrics: {
        r0: 4.7,
        infectivity: 0.94,
        virulence: 0.89,
        transmissionSpeed: 0.96,
        incubationTime: 2.3
      },
      transmissionVectors: [
        { platform: 'Facebook', propagationRisk: 89, active: true },
        { platform: 'WhatsApp', propagationRisk: 82, active: true },
        { platform: 'Twitter', propagationRisk: 75, active: true },
        { platform: 'Telegram', propagationRisk: 68, active: false }
      ],
      geographicSpread: [
        { region: 'Región Andina', riskLevel: 'Crítico', percentage: 89 },
        { region: 'Región Caribe', riskLevel: 'Alto', percentage: 72 },
        { region: 'Región Pacífico', riskLevel: 'Medio', percentage: 45 },
        { region: 'Región Orinoquía', riskLevel: 'Bajo', percentage: 23 }
      ]
    },
    autoActions: {
      humanVerificationQueued: true,
      platformsNotified: ['Facebook', 'WhatsApp', 'Twitter'],
      expertAssigned: 'Especialista en Contenido Tóxico',
      priority: 'Crítica',
      estimatedProcessingTime: '24-48 horas'
    }
  };

  // 🔍 DEBUG: Log data structure
  console.log('🔍 DEBUG - Analysis Result:', {
    hasSummary: !!analysisResult.summary,
    hasMetadata: !!analysisResult.metadata,
    hasResultBotilito: !!analysisResult.metadata?.resultBotilito,
    botilitoSummary: analysisResult.metadata?.resultBotilito?.summary?.substring(0, 50) + '...',
    regularSummary: analysisResult.summary?.substring(0, 50) + '...'
  });

  const getMarkerIcon = (type: string) => {
    const iconMap: { [key: string]: React.ReactNode } = {
      'Falso': <XCircle className="h-4 w-4" />,
      'Discurso de odio (Xenofobia)': <Skull className="h-4 w-4" />,
      'Incitación a la violencia': <Ban className="h-4 w-4" />,
      'Sensacionalista': <Flame className="h-4 w-4" />,
    };
    return iconMap[type] || <Target className="h-4 w-4" />;
  };

  const getMarkerColor = (type: string) => {
    const colorMap: { [key: string]: string } = {
      'Verdadero': 'bg-emerald-500 hover:bg-emerald-600',
      'Falso': 'bg-red-500 hover:bg-red-600',
      'Engañoso': 'bg-orange-500 hover:bg-orange-600',
      'Satírico': 'bg-blue-500 hover:bg-blue-600',
      'Satírico/Humorístico': 'bg-blue-500 hover:bg-blue-600',
      'Manipulado': 'bg-purple-500 hover:bg-purple-600',
      'Discurso de odio': 'bg-red-700 hover:bg-red-800',
      'Discurso de odio (Xenofobia)': 'bg-red-700 hover:bg-red-800',
      'Racismo/Xenofobia': 'bg-red-700 hover:bg-red-800',
      'Sexismo/LGBTQ+fobia': 'bg-red-700 hover:bg-red-800',
      'Clasismo/Aporofobia': 'bg-red-600 hover:bg-red-700',
      'Ableismo': 'bg-red-600 hover:bg-red-700',
      'Incitación a la violencia': 'bg-red-900 hover:bg-red-950',
      'Sensacionalista': 'bg-orange-400 hover:bg-orange-500',
      'Sin contexto': 'bg-amber-500 hover:bg-amber-600',
      'Descontextualizado': 'bg-amber-500 hover:bg-amber-600',
      'No verificable': 'bg-gray-500 hover:bg-gray-600',
      'Teoría conspirativa': 'bg-violet-600 hover:bg-violet-700',
      'Conspiración': 'bg-violet-600 hover:bg-violet-700',
      'Bot/Coordinado': 'bg-indigo-600 hover:bg-indigo-700',
      'Propaganda': 'bg-indigo-600 hover:bg-indigo-700',
      'Suplantación de identidad': 'bg-purple-700 hover:bg-purple-800',
      'Acoso/Ciberbullying': 'bg-orange-700 hover:bg-orange-800',
      'Contenido prejuicioso': 'bg-yellow-600 hover:bg-yellow-700',
      'En revisión': 'bg-gray-400 hover:bg-gray-500'
    };
    return colorMap[type] || 'bg-gray-500 hover:bg-gray-600';
  };

  const getRiskColor = (level: string) => {
    switch (level) {
      case 'Crítico': return 'border-red-500 bg-red-50';
      case 'Alto': return 'border-orange-500 bg-orange-50';
      case 'Medio': return 'border-yellow-500 bg-yellow-50';
      case 'Bajo': return 'border-green-500 bg-green-50';
      default: return 'border-gray-500 bg-gray-50';
    }
  };

  const handleShare = (platform: string) => {
    const text = `Diagnóstico Desinfodémico - Caso ${analysisResult.id}: ${analysisResult.botilloAnalysis.primaryDiagnosis} detectado por Botilito`;
    const url = window.location.href;
    
    switch(platform) {
      case 'twitter':
        window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
        break;
      case 'facebook':
        window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank');
        break;
      case 'linkedin':
        window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`, '_blank');
        break;
      case 'whatsapp':
        window.open(`https://wa.me/?text=${encodeURIComponent(text + ' ' + url)}`, '_blank');
        break;
    }
  };

  return (
    <div className="space-y-6">
      {/* Header Principal */}
      <div className="text-center space-y-2">
        <h1 className="flex items-center justify-center space-x-3">
          <Bot className="h-8 w-8 text-primary" />
          <span>Análisis IA</span>
        </h1>
        <p className="text-muted-foreground">
          Diagnóstico de Botilito completado
        </p>
      </div>

      {/* Diagnóstico Desinfodémico Completo */}
      <Card className="border-2 border-primary shadow-lg">
        <CardHeader className="bg-primary/10 border-b border-primary/20">
          <div className="flex items-center justify-between">
            <CardTitle className="flex items-center space-x-2">
              <Stethoscope className="h-6 w-6 text-primary" />
              <span>Diagnóstico Desinfodémico de Botilito</span>
            </CardTitle>
            <Badge className="bg-primary text-primary-foreground">
              <Bot className="h-3 w-3 mr-1" />
              IA
            </Badge>
          </div>
        </CardHeader>
        <CardContent className="p-6 space-y-6">
          {/* Información del Caso */}
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-muted/30 rounded-lg">
            <div className="flex items-start space-x-3">
              <Hash className="h-5 w-5 text-primary mt-0.5" />
              <div>
                <div className="text-sm text-muted-foreground">Número de Caso</div>
                <div className="font-mono">Caso: {analysisResult.id}</div>
              </div>
            </div>
            <div className="flex items-start space-x-3">
              <Calendar className="h-5 w-5 text-primary mt-0.5" />
              <div>
                <div className="text-sm text-muted-foreground">Fecha de Análisis</div>
                <div>{new Date(analysisResult.timestamp).toLocaleDateString('es-CO', { 
                  day: '2-digit', 
                  month: 'long', 
                  year: 'numeric',
                  hour: '2-digit',
                  minute: '2-digit'
                })}</div>
              </div>
            </div>
            <div className="flex items-start space-x-3">
              <FileType className="h-5 w-5 text-primary mt-0.5" />
              <div>
                <div className="text-sm text-muted-foreground">Tipo de Contenido</div>
                <div className="capitalize">{analysisResult.type === 'url' ? 'Enlace Web' : analysisResult.type}</div>
              </div>
            </div>
          </div>

          {/* Título del Contenido */}
          <div>
            <Label className="flex items-center space-x-2 mb-2">
              <FileText className="h-4 w-4 text-primary" />
              <span>Título del Contenido</span>
            </Label>
            <div className="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
              <p className="italic">{analysisResult.headline}</p>
            </div>
          </div>

          {/* Diagnóstico Principal */}
          <div className={`p-6 rounded-lg border-2 ${getRiskColor(analysisResult.botilloAnalysis.riskLevel)}`}>
            <div className="flex items-start justify-between mb-4">
              <div className="space-y-2">
                <div className="flex items-center space-x-2">
                  <Stethoscope className="h-5 w-5 text-primary" />
                  <span className="text-sm text-muted-foreground">Diagnóstico Principal</span>
                </div>
                <h3 className="text-red-600">
                  {analysisResult.botilloAnalysis.primaryDiagnosis}
                </h3>
              </div>
              <div className="text-right space-y-1">
                <Badge className="bg-red-500 text-white">
                  RIESGO {analysisResult.botilloAnalysis.riskLevel.toUpperCase()}
                </Badge>
                <div className="text-sm text-muted-foreground">
                  {(analysisResult.botilloAnalysis.confidence * 100).toFixed(1)}% certeza
                </div>
              </div>
            </div>
            <Progress 
              value={analysisResult.botilloAnalysis.confidence * 100} 
              className="h-3"
            />
          </div>

          {/* Marcadores Detectados - Resumen */}
          <div>
            <Label className="flex items-center space-x-2 mb-3">
              <Crosshair className="h-4 w-4 text-primary" />
              <span>Marcadores de Diagnóstico Detectados</span>
              <Badge variant="secondary">{analysisResult.botilloAnalysis.markersDetected.length}</Badge>
            </Label>
            <div className="flex flex-wrap gap-2">
              {analysisResult.botilloAnalysis.markersDetected.map((marker, index) => (
                <Badge 
                  key={index}
                  className={`${getMarkerColor(marker.type)} text-white px-3 py-1`}
                >
                  {getMarkerIcon(marker.type)}
                  <span className="ml-1">{marker.type}</span>
                  <span className="ml-2 text-xs opacity-80">
                    {(marker.confidence * 100).toFixed(0)}%
                  </span>
                </Badge>
              ))}
            </div>
          </div>

          {/* Botones de Compartir */}
          <div className="pt-4 border-t">
            <Label className="flex items-center space-x-2 mb-3">
              <Share2 className="h-4 w-4 text-primary" />
              <span>Compartir Diagnóstico</span>
            </Label>
            <div className="flex flex-wrap gap-2">
              <button
                onClick={() => handleShare('twitter')}
                className="flex items-center space-x-2 px-4 py-2 bg-[#1DA1F2] text-white rounded-lg hover:opacity-90 transition-opacity"
              >
                <Twitter className="h-4 w-4" />
                <span>Twitter</span>
              </button>
              <button
                onClick={() => handleShare('facebook')}
                className="flex items-center space-x-2 px-4 py-2 bg-[#1877F2] text-white rounded-lg hover:opacity-90 transition-opacity"
              >
                <Facebook className="h-4 w-4" />
                <span>Facebook</span>
              </button>
              <button
                onClick={() => handleShare('linkedin')}
                className="flex items-center space-x-2 px-4 py-2 bg-[#0A66C2] text-white rounded-lg hover:opacity-90 transition-opacity"
              >
                <Linkedin className="h-4 w-4" />
                <span>LinkedIn</span>
              </button>
              <button
                onClick={() => handleShare('whatsapp')}
                className="flex items-center space-x-2 px-4 py-2 bg-[#25D366] text-white rounded-lg hover:opacity-90 transition-opacity"
              >
                <MessageCircle className="h-4 w-4" />
                <span>WhatsApp</span>
              </button>
            </div>
          </div>

          {/* Fuente y Submisión */}
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-muted/20 rounded-lg">
            <div className="flex items-center space-x-3">
              <Link className="h-4 w-4 text-muted-foreground" />
              <div>
                <div className="text-sm text-muted-foreground">Fuente</div>
                <div className="text-sm">{analysisResult.source}</div>
              </div>
            </div>
            <div className="flex items-center space-x-3">
              <UserCheck className="h-4 w-4 text-muted-foreground" />
              <div>
                <div className="text-sm text-muted-foreground">Enviado por</div>
                <div className="text-sm">{analysisResult.submittedBy}</div>
              </div>
            </div>
          </div>
        </CardContent>
      </Card>

      {/* Status de Derivación Automática */}
      <Alert className="border-blue-200 bg-blue-50">
        <ArrowRight className="h-4 w-4 text-blue-600" />
        <AlertDescription className="text-blue-800">
          <strong>🤖 Botilito:</strong> Este caso ha sido enviado a verificación humana para análisis adicional
        </AlertDescription>
      </Alert>

      {/* Diagnóstico y Análisis Unificado */}
      <div className="space-y-6">
        <div className="grid gap-6 lg:grid-cols-2">
            {/* Panel Principal de Diagnóstico */}
            <Card className={`border-2 ${getRiskColor(analysisResult.botilloAnalysis.riskLevel)}`}>
              <CardContent className="p-3">
                <div className="flex items-center justify-between">
                  <div className="flex items-center space-x-2">
                    <Stethoscope className="h-4 w-4 text-primary" />
                    <span className="text-sm">Diagnóstico</span>
                  </div>
                  <Badge className="bg-red-500 text-white text-sm px-2 py-1">
                    <Bot className="h-3 w-3 mr-1" />
                    {analysisResult.botilloAnalysis.primaryDiagnosis}
                  </Badge>
                </div>
                <div className="flex items-center justify-between mt-2">
                  <div className="text-lg text-red-600">
                    RIESGO {analysisResult.botilloAnalysis.riskLevel.toUpperCase()}
                  </div>
                  <div className="text-xs text-muted-foreground">
                    {(analysisResult.botilloAnalysis.confidence * 100).toFixed(1)}% certeza
                  </div>
                </div>
              </CardContent>
            </Card>

            {/* Métricas de Riesgo */}
            <Card>
              <CardContent className="p-3">
                <div className="flex items-center justify-between">
                  <div className="flex items-center space-x-2">
                    <Activity className="h-4 w-4 text-primary" />
                    <span className="text-sm">Nivel de Riesgo</span>
                  </div>
                  <div className="text-2xl">⚠️</div>
                </div>
                <div className="flex items-center justify-between mt-2">
                  <div className="text-lg text-red-600">
                    {analysisResult.botilloAnalysis.riskLevel.toUpperCase()}
                  </div>
                  <div className="text-xs text-red-700">
                    Intervención Requerida
                  </div>
                </div>
              </CardContent>
            </Card>
          </div>

        {/* Contenido Original Analizado */}
        <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <FileText className="h-5 w-5 text-primary" />
                <span>Contenido Analizado</span>
              </CardTitle>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="space-y-3">
                <div>
                  <Label>Titular detectado:</Label>
                  <div className="bg-red-50 p-3 rounded border-l-4 border-red-400 mt-1">
                    <p className="italic">{analysisResult.headline}</p>
                  </div>
                </div>
                
                <div>
                  <Label>Contenido analizado:</Label>
                  <div className="bg-gray-50 p-4 rounded border mt-1">
                    <p className="text-sm leading-relaxed whitespace-pre-line">
                      {analysisResult.metadata?.resultBotilito?.summary || analysisResult.summary || 'No hay resumen disponible'}
                    </p>
                  </div>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <Label>Fuente:</Label>
                    <div className="flex items-center space-x-2 mt-1">
                      <ExternalLink className="h-4 w-4 text-muted-foreground" />
                      <span className="text-sm">{analysisResult.source}</span>
                    </div>
                  </div>
                  <div>
                    <Label>Enviado por:</Label>
                    <p className="text-sm mt-1">{analysisResult.submittedBy}</p>
                  </div>
                </div>
              </div>
            </CardContent>
          </Card>

          {/* Marcadores de Diagnóstico Detectados */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Crosshair className="h-5 w-5 text-primary" />
                <span>Marcadores Detectados</span>
                <Badge variant="secondary">{analysisResult.botilloAnalysis.markersDetected.length}</Badge>
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="grid gap-4">
                {analysisResult.botilloAnalysis.markersDetected.map((marker, index) => {
                  const getMarkerColorLight = (type: string) => {
                    const colorMap: { [key: string]: string } = {
                      'Verdadero': 'bg-green-50 border-green-200',
                      'Falso': 'bg-red-50 border-red-200',
                      'Engañoso': 'bg-orange-50 border-orange-200',
                      'Satírico': 'bg-blue-50 border-blue-200',
                      'Satírico/Humorístico': 'bg-blue-50 border-blue-200',
                      'Manipulado': 'bg-purple-50 border-purple-200',
                      'Discurso de odio': 'bg-red-100 border-red-300',
                      'Discurso de odio (Xenofobia)': 'bg-red-100 border-red-300',
                      'Racismo/Xenofobia': 'bg-red-100 border-red-300',
                      'Sexismo/LGBTQ+fobia': 'bg-red-100 border-red-300',
                      'Clasismo/Aporofobia': 'bg-red-100 border-red-300',
                      'Ableismo': 'bg-red-100 border-red-300',
                      'Propaganda': 'bg-indigo-50 border-indigo-200',
                      'Spam': 'bg-gray-50 border-gray-200',
                      'Conspiración': 'bg-violet-50 border-violet-200',
                      'Teoría conspirativa': 'bg-violet-50 border-violet-200',
                      'Sesgo Político': 'bg-yellow-50 border-yellow-200',
                      'Estafa': 'bg-purple-50 border-purple-200',
                      'Sensacionalista': 'bg-orange-50 border-orange-200',
                      'Incitación a la violencia': 'bg-red-100 border-red-400',
                      'Descontextualizado': 'bg-amber-50 border-amber-200',
                      'Sin contexto': 'bg-amber-50 border-amber-200',
                      'Parcialmente Cierto': 'bg-orange-50 border-orange-200',
                      'Contenido Patrocinado': 'bg-indigo-50 border-indigo-200',
                      'Opinión': 'bg-gray-50 border-gray-200',
                      'Rumor': 'bg-gray-50 border-gray-200',
                      'No verificable': 'bg-gray-50 border-gray-200',
                      'Deepfake': 'bg-purple-50 border-purple-200',
                      'Sin Verificar': 'bg-gray-50 border-gray-200',
                      'Bot/Coordinado': 'bg-indigo-50 border-indigo-200',
                      'Suplantación de identidad': 'bg-purple-50 border-purple-200',
                      'Acoso/Ciberbullying': 'bg-orange-100 border-orange-300',
                      'Contenido prejuicioso': 'bg-yellow-50 border-yellow-200',
                      'En revisión': 'bg-gray-50 border-gray-200'
                    };
                    return colorMap[type] || 'bg-gray-50 border-gray-200';
                  };

                  const getMarkerColorSoft = (type: string) => {
                    const colorMap: { [key: string]: string } = {
                      'Verdadero': 'bg-green-100 text-green-700 border-green-200',
                      'Falso': 'bg-red-100 text-red-700 border-red-200',
                      'Engañoso': 'bg-orange-100 text-orange-700 border-orange-200',
                      'Satírico': 'bg-blue-100 text-blue-700 border-blue-200',
                      'Satírico/Humorístico': 'bg-blue-100 text-blue-700 border-blue-200',
                      'Manipulado': 'bg-purple-100 text-purple-700 border-purple-200',
                      'Discurso de odio': 'bg-red-100 text-red-800 border-red-300',
                      'Discurso de odio (Xenofobia)': 'bg-red-100 text-red-800 border-red-300',
                      'Racismo/Xenofobia': 'bg-red-100 text-red-800 border-red-300',
                      'Sexismo/LGBTQ+fobia': 'bg-red-100 text-red-800 border-red-300',
                      'Clasismo/Aporofobia': 'bg-red-100 text-red-800 border-red-300',
                      'Ableismo': 'bg-red-100 text-red-800 border-red-300',
                      'Propaganda': 'bg-indigo-100 text-indigo-700 border-indigo-200',
                      'Spam': 'bg-gray-100 text-gray-700 border-gray-200',
                      'Conspiración': 'bg-violet-100 text-violet-700 border-violet-200',
                      'Teoría conspirativa': 'bg-violet-100 text-violet-700 border-violet-200',
                      'Sesgo Político': 'bg-yellow-100 text-yellow-700 border-yellow-200',
                      'Estafa': 'bg-purple-100 text-purple-700 border-purple-200',
                      'Sensacionalista': 'bg-orange-100 text-orange-700 border-orange-200',
                      'Incitación a la violencia': 'bg-red-100 text-red-900 border-red-400',
                      'Descontextualizado': 'bg-amber-100 text-amber-700 border-amber-200',
                      'Sin contexto': 'bg-amber-100 text-amber-700 border-amber-200',
                      'Parcialmente Cierto': 'bg-orange-100 text-orange-700 border-orange-200',
                      'Contenido Patrocinado': 'bg-indigo-100 text-indigo-700 border-indigo-200',
                      'Opinión': 'bg-gray-100 text-gray-700 border-gray-200',
                      'Rumor': 'bg-gray-100 text-gray-700 border-gray-200',
                      'No verificable': 'bg-gray-100 text-gray-700 border-gray-200',
                      'Deepfake': 'bg-purple-100 text-purple-700 border-purple-200',
                      'Sin Verificar': 'bg-gray-100 text-gray-700 border-gray-200',
                      'Bot/Coordinado': 'bg-indigo-100 text-indigo-700 border-indigo-200',
                      'Suplantación de identidad': 'bg-purple-100 text-purple-700 border-purple-200',
                      'Acoso/Ciberbullying': 'bg-orange-100 text-orange-800 border-orange-300',
                      'Contenido prejuicioso': 'bg-yellow-100 text-yellow-700 border-yellow-200',
                      'En revisión': 'bg-gray-100 text-gray-700 border-gray-200'
                    };
                    return colorMap[type] || 'bg-gray-100 text-gray-700 border-gray-200';
                  };

                  return (
                    <div key={index} className={`p-4 rounded-lg border space-y-3 ${getMarkerColorLight(marker.type)}`}>
                      <div className="flex items-start justify-between">
                        <div className="flex items-center space-x-3">
                          <Badge className={`${getMarkerColorSoft(marker.type)}`}>
                            {getMarkerIcon(marker.type)}
                          </Badge>
                          <div>
                            <div className="font-medium">{marker.type}</div>
                            <div className="text-sm text-muted-foreground">
                              Virulencia: {marker.virulence}%
                            </div>
                          </div>
                        </div>
                        <div className="text-right space-y-1">
                          <div className="text-sm font-medium">
                            {(marker.confidence * 100).toFixed(1)}% confianza
                          </div>
                          <Progress value={marker.confidence * 100} className="w-20 h-2" />
                        </div>
                      </div>
                      <div className="text-xs text-muted-foreground leading-relaxed pl-10">
                        <strong>Justificación:</strong> {marker.justification}
                      </div>
                    </div>
                  );
                })}
              </div>
            </CardContent>
          </Card>

          {/* Vista previa del sitio web */}
          <Card>
            <CardHeader>
              <CardTitle>Vista Previa</CardTitle>
              <CardDescription>Captura del contenido analizado</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-3">
                <ImageWithFallback
                  src="https://images.unsplash.com/photo-1588681664899-f142ff2dc9b1?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxuZXdzJTIwd2Vic2l0ZSUyMHNjcmVlbnNob3R8ZW58MXx8fHwxNzU5MTgzOTcyfDA&ixlib=rb-4.1.0&q=80&w=1080"
                  alt="Vista previa del sitio web analizado"
                  className="w-full h-64 object-cover rounded border"
                />
                <Alert className="border-red-200 bg-red-50">
                  <AlertTriangle className="h-4 w-4 text-red-600" />
                  <AlertDescription className="text-red-800">
                    <strong>Advertencia:</strong> Este contenido contiene desinformación de alto riesgo.
                  </AlertDescription>
                </Alert>
              </div>
            </CardContent>
          </Card>
      </div>
    </div>
  );
} - - - - - - - - - - - - 
src/components/RealTimeStats.tsx

import React, { useState, useEffect } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Badge } from './ui/badge';
import { Progress } from './ui/progress';
import { motion } from 'motion/react';
import { 
  Activity, TrendingUp, TrendingDown, Zap, Shield, 
  Clock, Target, Thermometer, Radio, Wifi
} from 'lucide-react';

export function RealTimeStats() {
  const [systemHealth, setSystemHealth] = useState(98);
  const [activeConnections, setActiveConnections] = useState(1247);
  const [processingSpeed, setProcessingSpeed] = useState(87);

  // Actualización en tiempo real de métricas
  useEffect(() => {
    const interval = setInterval(() => {
      setSystemHealth(prev => Math.min(100, Math.max(85, prev + (Math.random() - 0.5) * 2)));
      setActiveConnections(prev => prev + Math.floor(Math.random() * 10 - 5));
      setProcessingSpeed(prev => Math.min(100, Math.max(70, prev + (Math.random() - 0.5) * 5)));
    }, 3000);

    return () => clearInterval(interval);
  }, []);

  const getHealthColor = (value: number) => {
    if (value >= 95) return 'text-green-600';
    if (value >= 85) return 'text-yellow-600';
    return 'text-red-600';
  };

  const getHealthBadge = (value: number) => {
    if (value >= 95) return <Badge className="bg-green-100 text-green-800">Excelente</Badge>;
    if (value >= 85) return <Badge className="bg-yellow-100 text-yellow-800">Bueno</Badge>;
    return <Badge className="bg-red-100 text-red-800">Alerta</Badge>;
  };

  return (
    <div className="space-y-6">
      {/* Estado del Sistema */}
      <Card>
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <Activity className="h-5 w-5 text-primary" />
            <span>Estado del Sistema</span>
          </CardTitle>
          <CardDescription>
            Monitoreo en tiempo real del rendimiento
          </CardDescription>
        </CardHeader>
        <CardContent className="space-y-4">
          {/* Salud del Sistema */}
          <div className="space-y-2">
            <div className="flex items-center justify-between">
              <span className="text-sm font-medium">Salud del Sistema</span>
              {getHealthBadge(systemHealth)}
            </div>
            <div className="flex items-center space-x-2">
              <motion.div
                key={systemHealth}
                initial={{ scale: 1.1 }}
                animate={{ scale: 1 }}
                className={`text-2xl font-semibold ${getHealthColor(systemHealth)}`}
              >
                {Math.round(systemHealth)}%
              </motion.div>
              <Progress value={systemHealth} className="flex-1" />
            </div>
          </div>

          {/* Conexiones Activas */}
          <div className="space-y-2">
            <div className="flex items-center justify-between">
              <span className="text-sm font-medium">Conexiones Activas</span>
              <div className="flex items-center space-x-1">
                <div className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                <span className="text-xs text-green-600">Online</span>
              </div>
            </div>
            <motion.div
              key={activeConnections}
              initial={{ scale: 1.1 }}
              animate={{ scale: 1 }}
              className="text-2xl font-semibold text-blue-600"
            >
              {activeConnections.toLocaleString()}
            </motion.div>
          </div>

          {/* Velocidad de Procesamiento */}
          <div className="space-y-2">
            <div className="flex items-center justify-between">
              <span className="text-sm font-medium">Velocidad de Procesamiento</span>
              <Badge variant="outline" className="text-xs">
                {processingSpeed >= 90 ? <TrendingUp className="h-3 w-3 mr-1" /> : <TrendingDown className="h-3 w-3 mr-1" />}
                {processingSpeed >= 90 ? 'Alta' : processingSpeed >= 75 ? 'Media' : 'Baja'}
              </Badge>
            </div>
            <div className="flex items-center space-x-2">
              <motion.div
                key={processingSpeed}
                initial={{ scale: 1.1 }}
                animate={{ scale: 1 }}
                className="text-2xl font-semibold text-orange-600"
              >
                {Math.round(processingSpeed)}%
              </motion.div>
              <Progress value={processingSpeed} className="flex-1" />
            </div>
          </div>
        </CardContent>
      </Card>

      {/* Métricas Epidemiológicas */}
      <Card>
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <Thermometer className="h-5 w-5 text-primary" />
            <span>Métricas Epidemiológicas</span>
          </CardTitle>
        </CardHeader>
        <CardContent className="space-y-4">
          <div className="grid grid-cols-2 gap-4">
            <div className="bg-red-50 rounded-lg p-3">
              <div className="flex items-center space-x-1 mb-1">
                <Zap className="h-3 w-3 text-red-500" />
                <span className="text-xs font-medium text-red-700">R₀ Actual</span>
              </div>
              <div className="text-lg font-semibold text-red-800">2.3</div>
            </div>
            
            <div className="bg-green-50 rounded-lg p-3">
              <div className="flex items-center space-x-1 mb-1">
                <Shield className="h-3 w-3 text-green-500" />
                <span className="text-xs font-medium text-green-700">Inmunidad</span>
              </div>
              <div className="text-lg font-semibold text-green-800">67%</div>
            </div>
            
            <div className="bg-blue-50 rounded-lg p-3">
              <div className="flex items-center space-x-1 mb-1">
                <Clock className="h-3 w-3 text-blue-500" />
                <span className="text-xs font-medium text-blue-700">T. Detección</span>
              </div>
              <div className="text-lg font-semibold text-blue-800">4.2h</div>
            </div>
            
            <div className="bg-yellow-50 rounded-lg p-3">
              <div className="flex items-center space-x-1 mb-1">
                <Target className="h-3 w-3 text-yellow-500" />
                <span className="text-xs font-medium text-yellow-700">Precisión</span>
              </div>
              <div className="text-lg font-semibold text-yellow-800">94.8%</div>
            </div>
          </div>
        </CardContent>
      </Card>

      {/* Actividad de Red */}
      <Card>
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <Radio className="h-5 w-5 text-primary" />
            <span>Actividad de Red</span>
          </CardTitle>
        </CardHeader>
        <CardContent className="space-y-3">
          <div className="flex items-center justify-between">
            <span className="text-sm">APIs Activas</span>
            <div className="flex items-center space-x-1">
              <div className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
              <span className="text-sm font-medium">8/8</span>
            </div>
          </div>
          
          <div className="flex items-center justify-between">
            <span className="text-sm">Latencia Promedio</span>
            <span className="text-sm font-medium">127ms</span>
          </div>
          
          <div className="flex items-center justify-between">
            <span className="text-sm">Última Sincronización</span>
            <span className="text-sm text-muted-foreground">hace 45s</span>
          </div>
          
          <div className="flex items-center justify-between">
            <span className="text-sm">Próxima Actualización</span>
            <span className="text-sm text-muted-foreground">en 1m 15s</span>
          </div>

          {/* Indicador de transmisión */}
          <div className="mt-4 p-3 bg-muted/30 rounded-lg">
            <div className="flex items-center space-x-2 mb-2">
              <Wifi className="h-4 w-4 text-primary animate-pulse" />
              <span className="text-sm font-medium">Transmisión en Vivo</span>
            </div>
            <div className="text-xs text-muted-foreground">
              Recibiendo datos epidemiológicos en tiempo real de 6 regiones
            </div>
          </div>
        </CardContent>
      </Card>
    </div>
  );
} - - - - - - - - - - - - 
src/components/Historial.tsx

import React, { useState } from 'react';
import { useHistorialData, useCaseDetail } from '../utils/historial/useHistorialData';
import type { HistorialCaseUI } from '../utils/historial/types';
import { Search, Filter, ArrowUpDown, Calendar, FileText, Image, Video, Link, Users, AlertCircle, CheckCircle, XCircle, RefreshCw, ArrowLeft, ExternalLink, Clock, TrendingUp } from 'lucide-react';

export function Historial() {
  const [selectedCaseId, setSelectedCaseId] = useState<string | null>(null);
  const [showFilters, setShowFilters] = useState(false);

  const {
    loading,
    error,
    summaryData,
    cases,
    totalCases,
    filteredCount,
    filters,
    sortBy,
    updateFilter,
    updateSort,
    clearFilters,
    refresh
  } = useHistorialData();

  // Show detail view when a case is selected
  if (selectedCaseId) {
    return (
      <HistorialDetailView
        caseId={selectedCaseId}
        onBack={() => setSelectedCaseId(null)}
      />
    );
  }

  // List view
  return (
    <div className="min-h-screen bg-gradient-to-br from-yellow-50 via-white to-orange-50 p-6">
      {/* Header */}
      <div className="max-w-7xl mx-auto mb-8">
        <div className="flex items-center justify-between mb-4">
          <div>
            <h1 className="text-4xl font-bold bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent mb-2">
              📚 Historial de Casos
            </h1>
            <p className="text-gray-600">
              Registro completo de todos los casos analizados por Botilito
            </p>
          </div>
          <button
            onClick={refresh}
            disabled={loading}
            className="flex items-center gap-2 px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors disabled:opacity-50"
          >
            <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />
            Actualizar
          </button>
        </div>

        {/* KPIs */}
        {summaryData && (
          <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div className="bg-white rounded-xl p-4 shadow-md border-2 border-yellow-200">
              <div className="flex items-center gap-3">
                <div className="p-3 bg-yellow-100 rounded-lg">
                  <FileText className="w-6 h-6 text-yellow-600" />
                </div>
                <div>
                  <p className="text-sm text-gray-600">Total de Casos</p>
                  <p className="text-2xl font-bold text-gray-800">{summaryData.kpis.total_cases}</p>
                </div>
              </div>
            </div>

            <div className="bg-white rounded-xl p-4 shadow-md border-2 border-blue-200">
              <div className="flex items-center gap-3">
                <div className="p-3 bg-blue-100 rounded-lg">
                  <FileText className="w-6 h-6 text-blue-600" />
                </div>
                <div>
                  <p className="text-sm text-gray-600">Documentos</p>
                  <p className="text-2xl font-bold text-gray-800">{summaryData.kpis.total_documents}</p>
                </div>
              </div>
            </div>

            <div className="bg-white rounded-xl p-4 shadow-md border-2 border-green-200">
              <div className="flex items-center gap-3">
                <div className="p-3 bg-green-100 rounded-lg">
                  <TrendingUp className="w-6 h-6 text-green-600" />
                </div>
                <div>
                  <p className="text-sm text-gray-600">Mostrando</p>
                  <p className="text-2xl font-bold text-gray-800">{filteredCount}</p>
                </div>
              </div>
            </div>

            <div className="bg-white rounded-xl p-4 shadow-md border-2 border-purple-200">
              <div className="flex items-center gap-3">
                <div className="p-3 bg-purple-100 rounded-lg">
                  <Users className="w-6 h-6 text-purple-600" />
                </div>
                <div>
                  <p className="text-sm text-gray-600">Con Verificación</p>
                  <p className="text-2xl font-bold text-gray-800">
                    {cases.filter(c => c.humanVotesCount > 0).length}
                  </p>
                </div>
              </div>
            </div>
          </div>
        )}

        {/* Search and Filters */}
        <div className="bg-white rounded-xl p-4 shadow-md border-2 border-gray-200 mb-6">
          <div className="flex flex-col md:flex-row gap-4">
            {/* Search */}
            <div className="flex-1">
              <div className="relative">
                <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5" />
                <input
                  type="text"
                  placeholder="Buscar por título, código o URL..."
                  value={filters.searchQuery}
                  onChange={(e) => updateFilter('searchQuery', e.target.value)}
                  className="w-full pl-10 pr-4 py-2 border-2 border-gray-300 rounded-lg focus:border-yellow-500 focus:outline-none"
                />
              </div>
            </div>

            {/* Filter Toggle */}
            <button
              onClick={() => setShowFilters(!showFilters)}
              className="flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"
            >
              <Filter className="w-5 h-5" />
              Filtros
            </button>

            {/* Sort */}
            <select
              value={sortBy}
              onChange={(e) => updateSort(e.target.value as any)}
              className="px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-yellow-500 focus:outline-none"
            >
              <option value="date_desc">Más recientes</option>
              <option value="date_asc">Más antiguos</option>
              <option value="priority_desc">Mayor prioridad</option>
              <option value="votes_desc">Más verificados</option>
            </select>
          </div>

          {/* Filter Options */}
          {showFilters && (
            <div className="mt-4 pt-4 border-t-2 border-gray-200">
              <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                {/* Submission Type */}
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Tipo de Contenido
                  </label>
                  <select
                    value={filters.submissionType}
                    onChange={(e) => updateFilter('submissionType', e.target.value)}
                    className="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-yellow-500 focus:outline-none"
                  >
                    <option value="ALL">Todos</option>
                    <option value="URL">URL</option>
                    <option value="TEXT">Texto</option>
                    <option value="IMAGE">Imagen</option>
                    <option value="VIDEO">Video</option>
                  </select>
                </div>

                {/* Consensus State */}
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Estado de Verificación
                  </label>
                  <select
                    value={filters.consensusState}
                    onChange={(e) => updateFilter('consensusState', e.target.value)}
                    className="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-yellow-500 focus:outline-none"
                  >
                    <option value="ALL">Todos</option>
                    <option value="ai_only">Solo IA</option>
                    <option value="human_only">Solo Humanos</option>
                    <option value="consensus">Consenso</option>
                    <option value="disagreement">Desacuerdo</option>
                  </select>
                </div>

                {/* Priority */}
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Prioridad
                  </label>
                  <select
                    value={filters.priority}
                    onChange={(e) => updateFilter('priority', e.target.value)}
                    className="w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-yellow-500 focus:outline-none"
                  >
                    <option value="ALL">Todas</option>
                    <option value="critical">Crítica</option>
                    <option value="high">Alta</option>
                    <option value="medium">Media</option>
                    <option value="low">Baja</option>
                  </select>
                </div>
              </div>

              <div className="mt-4 flex justify-end">
                <button
                  onClick={clearFilters}
                  className="text-sm text-gray-600 hover:text-gray-800 underline"
                >
                  Limpiar filtros
                </button>
              </div>
            </div>
          )}
        </div>
      </div>

      {/* Loading State */}
      {loading && (
        <div className="max-w-7xl mx-auto flex items-center justify-center py-20">
          <div className="text-center">
            <RefreshCw className="w-12 h-12 text-yellow-500 animate-spin mx-auto mb-4" />
            <p className="text-gray-600">Cargando historial...</p>
          </div>
        </div>
      )}

      {/* Error State */}
      {error && (
        <div className="max-w-7xl mx-auto">
          <div className="bg-red-50 border-2 border-red-200 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-2">
              <AlertCircle className="w-6 h-6 text-red-600" />
              <h3 className="text-lg font-bold text-red-800">Error al cargar el historial</h3>
            </div>
            <p className="text-red-700">{error}</p>
          </div>
        </div>
      )}

      {/* Cases List */}
      {!loading && !error && cases.length === 0 && (
        <div className="max-w-7xl mx-auto text-center py-20">
          <FileText className="w-16 h-16 text-gray-400 mx-auto mb-4" />
          <p className="text-gray-600 text-lg">No se encontraron casos</p>
          {(filters.searchQuery || filters.submissionType !== 'ALL' || filters.consensusState !== 'ALL' || filters.priority !== 'ALL') && (
            <button
              onClick={clearFilters}
              className="mt-4 text-yellow-600 hover:text-yellow-700 underline"
            >
              Limpiar filtros
            </button>
          )}
        </div>
      )}

      {!loading && !error && cases.length > 0 && (
        <div className="max-w-7xl mx-auto">
          <div className="grid grid-cols-1 gap-4">
            {cases.map(caseItem => (
              <CaseCard
                key={caseItem.id}
                caseData={caseItem}
                onClick={() => setSelectedCaseId(caseItem.id)}
              />
            ))}
          </div>
        </div>
      )}
    </div>
  );
}

/**
 * Case Card Component
 */
function CaseCard({ caseData, onClick }: { caseData: HistorialCaseUI; onClick: () => void }) {
  const priorityColors = {
    low: 'bg-gray-100 text-gray-700 border-gray-300',
    medium: 'bg-yellow-100 text-yellow-700 border-yellow-300',
    high: 'bg-orange-100 text-orange-700 border-orange-300',
    critical: 'bg-red-100 text-red-700 border-red-300'
  };

  return (
    <div
      onClick={onClick}
      className="bg-white rounded-xl p-6 shadow-md border-2 border-gray-200 hover:border-yellow-400 hover:shadow-lg transition-all cursor-pointer"
    >
      <div className="flex items-start gap-4">
        {/* Icon */}
        <div className="text-4xl">{caseData.submissionTypeIcon}</div>

        {/* Content */}
        <div className="flex-1">
          {/* Header */}
          <div className="flex items-start justify-between mb-3">
            <div className="flex-1">
              <div className="flex items-center gap-2 mb-2">
                <span className="text-sm font-mono text-gray-500 bg-gray-100 px-2 py-1 rounded">
                  {caseData.displayId}
                </span>
                <span className={`text-xs px-2 py-1 rounded border-2 ${priorityColors[caseData.priority]}`}>
                  {caseData.priority.toUpperCase()}
                </span>
              </div>
              <h3 className="text-lg font-bold text-gray-800 mb-2 line-clamp-2">
                {caseData.title}
              </h3>
              <p className="text-sm text-gray-600 truncate">{caseData.url}</p>
            </div>
          </div>

          {/* Metadata */}
          <div className="flex flex-wrap items-center gap-4 text-sm text-gray-600 mb-3">
            <div className="flex items-center gap-1">
              <Clock className="w-4 h-4" />
              {caseData.createdAtFormatted}
            </div>
            <div className="flex items-center gap-1">
              <Users className="w-4 h-4" />
              {caseData.humanVotesCount} verificador{caseData.humanVotesCount !== 1 ? 'es' : ''}
            </div>
            <div className="flex items-center gap-1">
              <FileText className="w-4 h-4" />
              {caseData.relatedDocumentsCount} doc{caseData.relatedDocumentsCount !== 1 ? 's' : ''}
            </div>
          </div>

          {/* Diagnostic Labels */}
          {caseData.diagnosticLabels.length > 0 && (
            <div className="flex flex-wrap gap-2 mb-3">
              {caseData.diagnosticLabels.map((label, index) => (
                <span
                  key={index}
                  className={`text-xs px-2 py-1 rounded border ${label.bg} ${label.color} ${label.border}`}
                >
                  {label.label} ({label.percentage}%)
                </span>
              ))}
            </div>
          )}

          {/* Footer */}
          <div className="flex items-center justify-between pt-3 border-t border-gray-200">
            <div className="flex items-center gap-2">
              <span className="text-sm font-medium text-gray-700">
                {caseData.finalVerdict}
              </span>
              <span className="text-xs text-gray-500">•</span>
              <span className="text-xs text-gray-500">
                {caseData.verificationMethod}
              </span>
            </div>
            <button className="flex items-center gap-1 text-sm text-yellow-600 hover:text-yellow-700 font-medium">
              Ver Detalles
              <ExternalLink className="w-4 h-4" />
            </button>
          </div>
        </div>
      </div>
    </div>
  );
}

/**
 * Detail View Component
 */
function HistorialDetailView({ caseId, onBack }: { caseId: string; onBack: () => void }) {
  const { loading, error, caseDetail } = useCaseDetail(caseId);

  if (loading) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-yellow-50 via-white to-orange-50 p-6">
        <div className="max-w-5xl mx-auto">
          <button
            onClick={onBack}
            className="flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-6"
          >
            <ArrowLeft className="w-5 h-5" />
            Volver al historial
          </button>
          <div className="flex items-center justify-center py-20">
            <div className="text-center">
              <RefreshCw className="w-12 h-12 text-yellow-500 animate-spin mx-auto mb-4" />
              <p className="text-gray-600">Cargando detalles del caso...</p>
            </div>
          </div>
        </div>
      </div>
    );
  }

  if (error || !caseDetail) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-yellow-50 via-white to-orange-50 p-6">
        <div className="max-w-5xl mx-auto">
          <button
            onClick={onBack}
            className="flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-6"
          >
            <ArrowLeft className="w-5 h-5" />
            Volver al historial
          </button>
          <div className="bg-red-50 border-2 border-red-200 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-2">
              <AlertCircle className="w-6 h-6 text-red-600" />
              <h3 className="text-lg font-bold text-red-800">Error al cargar el caso</h3>
            </div>
            <p className="text-red-700">{error || 'Caso no encontrado'}</p>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-yellow-50 via-white to-orange-50 p-6">
      <div className="max-w-5xl mx-auto">
        {/* Back Button */}
        <button
          onClick={onBack}
          className="flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-6"
        >
          <ArrowLeft className="w-5 h-5" />
          Volver al historial
        </button>

        {/* Header */}
        <div className="bg-white rounded-xl p-6 shadow-md border-2 border-yellow-200 mb-6">
          <div className="flex items-start gap-4 mb-4">
            <div className="text-5xl">{caseDetail.submissionTypeIcon}</div>
            <div className="flex-1">
              <div className="flex items-center gap-2 mb-2">
                <span className="text-sm font-mono text-gray-500 bg-gray-100 px-2 py-1 rounded">
                  {caseDetail.displayId}
                </span>
                <span className="text-xs px-2 py-1 rounded bg-yellow-100 text-yellow-700 border-2 border-yellow-300">
                  {caseDetail.priority.toUpperCase()}
                </span>
              </div>
              <h1 className="text-3xl font-bold text-gray-800 mb-3">
                {caseDetail.title}
              </h1>
              <div className="flex items-center gap-2 text-sm text-gray-600 mb-2">
                <Clock className="w-4 h-4" />
                {caseDetail.createdAtFormatted}
              </div>
              <a
                href={caseDetail.url}
                target="_blank"
                rel="noopener noreferrer"
                className="flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700"
              >
                <Link className="w-4 h-4" />
                {caseDetail.url}
                <ExternalLink className="w-3 h-3" />
              </a>
            </div>
          </div>

          {/* Summary */}
          <div className="bg-gray-50 rounded-lg p-4">
            <h3 className="font-bold text-gray-800 mb-2">Resumen</h3>
            <p className="text-gray-700">{caseDetail.summary}</p>
          </div>
        </div>

        {/* Verification Status */}
        <div className="bg-white rounded-xl p-6 shadow-md border-2 border-gray-200 mb-6">
          <h2 className="text-xl font-bold text-gray-800 mb-4">Estado de Verificación</h2>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div className="bg-blue-50 rounded-lg p-4">
              <div className="flex items-center gap-2 mb-2">
                <CheckCircle className="w-5 h-5 text-blue-600" />
                <span className="font-medium text-gray-800">Método</span>
              </div>
              <p className="text-sm text-gray-700">{caseDetail.verificationMethod}</p>
            </div>
            <div className="bg-green-50 rounded-lg p-4">
              <div className="flex items-center gap-2 mb-2">
                <Users className="w-5 h-5 text-green-600" />
                <span className="font-medium text-gray-800">Verificadores</span>
              </div>
              <p className="text-sm text-gray-700">{caseDetail.humanVotesCount} humano{caseDetail.humanVotesCount !== 1 ? 's' : ''}</p>
            </div>
            <div className="bg-orange-50 rounded-lg p-4">
              <div className="flex items-center gap-2 mb-2">
                <AlertCircle className="w-5 h-5 text-orange-600" />
                <span className="font-medium text-gray-800">Veredicto</span>
              </div>
              <p className="text-sm font-bold text-gray-700">{caseDetail.finalVerdict}</p>
            </div>
          </div>

          {/* Diagnostic Labels */}
          {caseDetail.diagnosticLabels.length > 0 && (
            <div className="mt-4">
              <h3 className="font-medium text-gray-800 mb-2">Etiquetas de Diagnóstico</h3>
              <div className="flex flex-wrap gap-2">
                {caseDetail.diagnosticLabels.map((label, index) => (
                  <span
                    key={index}
                    className={`px-3 py-1 rounded-lg border-2 ${label.bg} ${label.color} ${label.border}`}
                  >
                    {label.label} ({label.percentage}%)
                  </span>
                ))}
              </div>
            </div>
          )}
        </div>

        {/* Related Documents */}
        {caseDetail.relatedDocuments.length > 0 && (
          <div className="bg-white rounded-xl p-6 shadow-md border-2 border-gray-200 mb-6">
            <h2 className="text-xl font-bold text-gray-800 mb-4">
              Documentos Relacionados ({caseDetail.relatedDocuments.length})
            </h2>
            <div className="space-y-4">
              {caseDetail.relatedDocuments.map((doc, index) => (
                <div key={doc.id} className="bg-gray-50 rounded-lg p-4 border-2 border-gray-200">
                  <div className="flex items-start justify-between mb-2">
                    <h3 className="font-bold text-gray-800">{doc.title}</h3>
                    <span className="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded">
                      {Math.round(doc.similarity * 100)}% similar
                    </span>
                  </div>
                  <p className="text-sm text-gray-700 mb-2">{doc.summary}</p>
                  <a
                    href={doc.url}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700"
                  >
                    <Link className="w-4 h-4" />
                    Ver documento
                    <ExternalLink className="w-3 h-3" />
                  </a>
                </div>
              ))}
            </div>
          </div>
        )}

        {/* Web Search Results */}
        {caseDetail.webSearchResults.length > 0 && (
          <div className="bg-white rounded-xl p-6 shadow-md border-2 border-gray-200">
            <h2 className="text-xl font-bold text-gray-800 mb-4">
              Resultados de Búsqueda Web ({caseDetail.webSearchResults.length})
            </h2>
            <div className="space-y-3">
              {caseDetail.webSearchResults.map((result, index) => (
                <div key={index} className="bg-gray-50 rounded-lg p-4 border-2 border-gray-200">
                  <h3 className="font-bold text-gray-800 mb-1">{result.title}</h3>
                  <p className="text-sm text-gray-700 mb-2">{result.snippet}</p>
                  <div className="flex items-center justify-between">
                    <span className="text-xs text-gray-500">{result.source}</span>
                    <a
                      href={result.url}
                      target="_blank"
                      rel="noopener noreferrer"
                      className="flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700"
                    >
                      Ver fuente
                      <ExternalLink className="w-3 h-3" />
                    </a>
                  </div>
                </div>
              ))}
            </div>
          </div>
        )}
      </div>
    </div>
  );
}
 - - - - - - - - - - - - 
src/components/AIAnalysisView.tsx

import React, { useState } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from './ui/card';
import { Badge } from './ui/badge';
import { Button } from './ui/button';
import { Progress } from './ui/progress';
import { Tabs, TabsContent, TabsList, TabsTrigger } from './ui/tabs';
import { Alert, AlertDescription } from './ui/alert';
import { ImageWithFallback } from './figma/ImageWithFallback';

import { 
  CheckCircle, 
  XCircle, 
  AlertTriangle,
  Smile,
  Image,
  Heart,
  Shield,
  Target,
  Flame,
  Users,
  Vote,
  DollarSign,
  Zap,
  Eye,
  Ban,
  Skull,
  Activity,
  TrendingUp,
  BarChart3,
  Clock,
  MapPin,
  Bot,
  Microscope,
  AlertCircle,
  HelpCircle,
  GitBranch,
  Radio,
  Globe,
  MessageSquare,
  Megaphone
} from 'lucide-react';
import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from './ui/tooltip';

// Definición de las 20 categorías de etiquetas con enfoque epidemiológico
const ETIQUETAS_CATEGORIAS = [
  { id: 'verdadero', label: 'Verdadero', icon: CheckCircle, color: 'text-green-600', bg: 'bg-green-50', border: 'border-green-200', virulencia: 0 },
  { id: 'falso', label: 'Falso', icon: XCircle, color: 'text-red-600', bg: 'bg-red-50', border: 'border-red-200', virulencia: 90 },
  { id: 'enganoso', label: 'Engañoso', icon: AlertTriangle, color: 'text-orange-600', bg: 'bg-orange-50', border: 'border-orange-200', virulencia: 75 },
  { id: 'satirico', label: 'Satírico', icon: Smile, color: 'text-blue-600', bg: 'bg-blue-50', border: 'border-blue-200', virulencia: 20 },
  { id: 'manipulado', label: 'Manipulado', icon: Image, color: 'text-purple-600', bg: 'bg-purple-50', border: 'border-purple-200', virulencia: 85 },
  { id: 'discurso_odio', label: 'Discurso de Odio', icon: Skull, color: 'text-red-800', bg: 'bg-red-100', border: 'border-red-300', virulencia: 95 },
  { id: 'propaganda', label: 'Propaganda', icon: Megaphone, color: 'text-indigo-600', bg: 'bg-indigo-50', border: 'border-indigo-200', virulencia: 70 },
  { id: 'spam', label: 'Spam', icon: Ban, color: 'text-gray-600', bg: 'bg-gray-50', border: 'border-gray-200', virulencia: 30 },
  { id: 'conspiracion', label: 'Conspiración', icon: Eye, color: 'text-violet-600', bg: 'bg-violet-50', border: 'border-violet-200', virulencia: 80 },
  { id: 'sesgo_politico', label: 'Sesgo Político', icon: Vote, color: 'text-pink-600', bg: 'bg-pink-50', border: 'border-pink-200', virulencia: 65 },
  { id: 'estafa', label: 'Estafa', icon: DollarSign, color: 'text-red-600', bg: 'bg-red-50', border: 'border-red-200', virulencia: 88 },
  { id: 'sensacionalista', label: 'Sensacionalista', icon: Flame, color: 'text-orange-500', bg: 'bg-orange-50', border: 'border-orange-200', virulencia: 55 },
  { id: 'descontextualizado', label: 'Descontextualizado', icon: AlertCircle, color: 'text-amber-600', bg: 'bg-amber-50', border: 'border-amber-200', virulencia: 60 },
  { id: 'parcialmente_cierto', label: 'Parcialmente Cierto', icon: HelpCircle, color: 'text-cyan-600', bg: 'bg-cyan-50', border: 'border-cyan-200', virulencia: 35 },
  { id: 'contenido_patrocinado', label: 'Contenido Patrocinado', icon: Heart, color: 'text-emerald-600', bg: 'bg-emerald-50', border: 'border-emerald-200', virulencia: 25 },
  { id: 'opinion', label: 'Opinión', icon: MessageSquare, color: 'text-slate-600', bg: 'bg-slate-50', border: 'border-slate-200', virulencia: 15 },
  { id: 'rumor', label: 'Rumor', icon: Radio, color: 'text-teal-600', bg: 'bg-teal-50', border: 'border-teal-200', virulencia: 50 },
  { id: 'deepfake', label: 'Deepfake', icon: Bot, color: 'text-red-700', bg: 'bg-red-100', border: 'border-red-300', virulencia: 92 },
  { id: 'sin_verificar', label: 'Sin Verificar', icon: Clock, color: 'text-gray-500', bg: 'bg-gray-50', border: 'border-gray-200', virulencia: 40 }
];

interface AIAnalysisViewProps {
  contentId?: string;
}

export function AIAnalysisView({ contentId = "caso_001" }: AIAnalysisViewProps) {
  const [etiquetasDetectadas, setEtiquetasDetectadas] = useState([
    { categoria: 'enganoso', confianza: 0.89, activa: true },
    { categoria: 'sensacionalista', confianza: 0.73, activa: true },
    { categoria: 'sesgo_politico', confianza: 0.65, activa: false }
  ]);

  const [metricsEpidemicas, setMetricsEpidemicas] = useState({
    r0: 2.4,
    infectividad: 0.78,
    virulencia: 0.75,
    velocidadTransmision: 1.8,
    tiempoIncubacion: 3.2
  });

  const toggleEtiqueta = (categoriaId: string) => {
    setEtiquetasDetectadas(prev => 
      prev.map(etiqueta => 
        etiqueta.categoria === categoriaId 
          ? { ...etiqueta, activa: !etiqueta.activa }
          : etiqueta
      )
    );
  };

  const agregarEtiqueta = (categoriaId: string) => {
    const categoria = ETIQUETAS_CATEGORIAS.find(c => c.id === categoriaId);
    if (!categoria) return;

    const etiquetaExistente = etiquetasDetectadas.find(e => e.categoria === categoriaId);
    if (etiquetaExistente) return;

    setEtiquetasDetectadas(prev => [...prev, {
      categoria: categoriaId,
      confianza: Math.random() * 0.4 + 0.6, // 0.6 - 1.0
      activa: true
    }]);
  };

  const eliminarEtiqueta = (categoriaId: string) => {
    setEtiquetasDetectadas(prev => prev.filter(e => e.categoria !== categoriaId));
  };

  const getCategoria = (categoriaId: string) => {
    return ETIQUETAS_CATEGORIAS.find(c => c.id === categoriaId);
  };

  const calcularRiesgoEpidemico = () => {
    const etiquetasActivas = etiquetasDetectadas.filter(e => e.activa);
    if (etiquetasActivas.length === 0) return { nivel: 'Bajo', color: 'text-green-600', porcentaje: 10 };

    const promedioPonderado = etiquetasActivas.reduce((acc, etiqueta) => {
      const categoria = getCategoria(etiqueta.categoria);
      return acc + (categoria?.virulencia || 0) * etiqueta.confianza;
    }, 0) / etiquetasActivas.length;

    if (promedioPonderado >= 80) return { nivel: 'Crítico', color: 'text-red-600', porcentaje: promedioPonderado };
    if (promedioPonderado >= 60) return { nivel: 'Alto', color: 'text-orange-600', porcentaje: promedioPonderado };
    if (promedioPonderado >= 40) return { nivel: 'Moderado', color: 'text-yellow-600', porcentaje: promedioPonderado };
    return { nivel: 'Bajo', color: 'text-green-600', porcentaje: promedioPonderado };
  };

  const riesgoEpidemico = calcularRiesgoEpidemico();

  return (
    <TooltipProvider>
      <div className="space-y-6">
        {/* Header del análisis */}
        <div className="flex items-center justify-between">
          <div>
            <h1 className="flex items-center space-x-2">
              <Microscope className="h-6 w-6 text-primary" />
              <span>Análisis Epidemiológico de IA</span>
            </h1>
            <p className="text-muted-foreground">
              Clasificación automática de patógenos informativos - {contentId}
            </p>
          </div>
          <Badge variant="outline" className="bg-primary/10 border-primary">
            <Bot className="h-3 w-3 mr-1" />
            IA Activa
          </Badge>
        </div>

        {/* Alert de riesgo epidémico */}
        <Alert className={`border-l-4 ${riesgoEpidemico.nivel === 'Crítico' ? 'border-l-red-500 bg-red-50' : 
          riesgoEpidemico.nivel === 'Alto' ? 'border-l-orange-500 bg-orange-50' :
          riesgoEpidemico.nivel === 'Moderado' ? 'border-l-yellow-500 bg-yellow-50' : 'border-l-green-500 bg-green-50'}`}>
          <Activity className="h-4 w-4" />
          <AlertDescription className="space-y-2">
            <div className="flex items-center justify-between">
              <span className={`font-medium ${riesgoEpidemico.color}`}>
                Nivel de Riesgo Epidémico: {riesgoEpidemico.nivel}
              </span>
              <span className={`text-sm ${riesgoEpidemico.color}`}>
                {riesgoEpidemico.porcentaje.toFixed(1)}% de virulencia
              </span>
            </div>
            <Progress value={riesgoEpidemico.porcentaje} className="h-2" />
          </AlertDescription>
        </Alert>

        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
          {/* Panel principal de etiquetas detectadas */}
          <div className="lg:col-span-2 space-y-6">
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <Target className="h-5 w-5 text-primary" />
                  <span>Patógenos Detectados</span>
                  <Badge variant="secondary">{etiquetasDetectadas.length}</Badge>
                </CardTitle>
              </CardHeader>
              <CardContent className="space-y-4">
                {etiquetasDetectadas.length === 0 ? (
                  <div className="text-center py-8 text-muted-foreground">
                    <Shield className="h-12 w-12 mx-auto mb-2 text-green-500" />
                    <p>No se detectaron patógenos informativos</p>
                  </div>
                ) : (
                  etiquetasDetectadas.map((etiqueta) => {
                    const categoria = getCategoria(etiqueta.categoria);
                    if (!categoria) return null;

                    const IconComponent = categoria.icon;
                    
                    return (
                      <div key={etiqueta.categoria} 
                           className={`p-4 rounded-lg border-2 transition-all ${
                             etiqueta.activa ? `${categoria.bg} ${categoria.border}` : 'bg-gray-50 border-gray-200 opacity-50'
                           }`}>
                        <div className="flex items-center justify-between">
                          <div className="flex items-center space-x-3">
                            <IconComponent className={`h-5 w-5 ${etiqueta.activa ? categoria.color : 'text-gray-400'}`} />
                            <div>
                              <h3 className={`font-medium ${etiqueta.activa ? 'text-foreground' : 'text-gray-400'}`}>
                                {categoria.label}
                              </h3>
                              <div className="flex items-center space-x-2 text-sm text-muted-foreground">
                                <span>Confianza: {(etiqueta.confianza * 100).toFixed(1)}%</span>
                                <span>•</span>
                                <span>Virulencia: {categoria.virulencia}%</span>
                              </div>
                            </div>
                          </div>
                          <div className="flex items-center space-x-2">
                            <Tooltip>
                              <TooltipTrigger asChild>
                                <Button
                                  variant="ghost"
                                  size="sm"
                                  onClick={() => toggleEtiqueta(etiqueta.categoria)}
                                  className={etiqueta.activa ? 'text-primary hover:bg-primary/10' : 'text-gray-400'}
                                >
                                  <Eye className="h-4 w-4" />
                                </Button>
                              </TooltipTrigger>
                              <TooltipContent>
                                {etiqueta.activa ? 'Desactivar etiqueta' : 'Activar etiqueta'}
                              </TooltipContent>
                            </Tooltip>
                            <Tooltip>
                              <TooltipTrigger asChild>
                                <Button
                                  variant="ghost"
                                  size="sm"
                                  onClick={() => eliminarEtiqueta(etiqueta.categoria)}
                                  className="text-red-500 hover:bg-red-50"
                                >
                                  <XCircle className="h-4 w-4" />
                                </Button>
                              </TooltipTrigger>
                              <TooltipContent>
                                Eliminar etiqueta
                              </TooltipContent>
                            </Tooltip>
                          </div>
                        </div>
                        <div className="mt-2">
                          <Progress 
                            value={etiqueta.confianza * 100} 
                            className={`h-2 ${etiqueta.activa ? '' : 'opacity-50'}`}
                          />
                        </div>
                      </div>
                    );
                  })
                )}
              </CardContent>
            </Card>

            {/* Banco de etiquetas disponibles */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <BarChart3 className="h-5 w-5 text-primary" />
                  <span>Banco de Patógenos</span>
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                  {ETIQUETAS_CATEGORIAS.map((categoria) => {
                    const yaDetectada = etiquetasDetectadas.some(e => e.categoria === categoria.id);
                    const IconComponent = categoria.icon;
                    
                    return (
                      <Tooltip key={categoria.id}>
                        <TooltipTrigger asChild>
                          <Button
                            variant="outline"
                            size="sm"
                            onClick={() => agregarEtiqueta(categoria.id)}
                            disabled={yaDetectada}
                            className={`flex items-center space-x-2 h-auto py-2 px-3 ${
                              yaDetectada ? 'opacity-50 cursor-not-allowed' : 'hover:bg-primary/10'
                            }`}
                          >
                            <IconComponent className={`h-4 w-4 ${categoria.color}`} />
                            <span className="text-xs">{categoria.label}</span>
                          </Button>
                        </TooltipTrigger>
                        <TooltipContent>
                          <div className="text-sm">
                            <p className="font-medium">{categoria.label}</p>
                            <p>Virulencia: {categoria.virulencia}%</p>
                          </div>
                        </TooltipContent>
                      </Tooltip>
                    );
                  })}
                </div>
              </CardContent>
            </Card>
          </div>

          {/* Panel lateral de métricas epidémicas */}
          <div className="space-y-6">
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <Activity className="h-5 w-5 text-primary" />
                  <span>Métricas Epidémicas</span>
                </CardTitle>
              </CardHeader>
              <CardContent className="space-y-4">
                <div className="space-y-3">
                  <div className="flex justify-between items-center">
                    <div className="flex items-center space-x-2">
                      <GitBranch className="h-4 w-4 text-blue-500" />
                      <span className="text-sm">R₀ (Reproducción)</span>
                    </div>
                    <Badge variant={metricsEpidemicas.r0 > 2 ? "destructive" : "secondary"}>
                      {metricsEpidemicas.r0}
                    </Badge>
                  </div>
                  
                  <div className="flex justify-between items-center">
                    <div className="flex items-center space-x-2">
                      <Zap className="h-4 w-4 text-orange-500" />
                      <span className="text-sm">Infectividad</span>
                    </div>
                    <Badge variant="outline">
                      {(metricsEpidemicas.infectividad * 100).toFixed(0)}%
                    </Badge>
                  </div>
                  
                  <div className="flex justify-between items-center">
                    <div className="flex items-center space-x-2">
                      <Skull className="h-4 w-4 text-red-500" />
                      <span className="text-sm">Virulencia</span>
                    </div>
                    <Badge variant="outline">
                      {(metricsEpidemicas.virulencia * 100).toFixed(0)}%
                    </Badge>
                  </div>
                  
                  <div className="flex justify-between items-center">
                    <div className="flex items-center space-x-2">
                      <TrendingUp className="h-4 w-4 text-green-500" />
                      <span className="text-sm">Vel. Transmisión</span>
                    </div>
                    <Badge variant="outline">
                      {metricsEpidemicas.velocidadTransmision} h⁻¹
                    </Badge>
                  </div>
                  
                  <div className="flex justify-between items-center">
                    <div className="flex items-center space-x-2">
                      <Clock className="h-4 w-4 text-purple-500" />
                      <span className="text-sm">T. Incubación</span>
                    </div>
                    <Badge variant="outline">
                      {metricsEpidemicas.tiempoIncubacion} h
                    </Badge>
                  </div>
                </div>
              </CardContent>
            </Card>

            <Card>
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <Globe className="h-5 w-5 text-primary" />
                  <span>Propagación Regional</span>
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="space-y-2 text-sm">
                  <div className="flex justify-between">
                    <span>Región Andina</span>
                    <Badge variant="destructive" className="text-xs">Alto</Badge>
                  </div>
                  <div className="flex justify-between">
                    <span>Región Caribe</span>
                    <Badge variant="outline" className="text-xs">Moderado</Badge>
                  </div>
                  <div className="flex justify-between">
                    <span>Región Pacífica</span>
                    <Badge variant="outline" className="text-xs">Bajo</Badge>
                  </div>
                  <div className="flex justify-between">
                    <span>Región Orinoquía</span>
                    <Badge variant="outline" className="text-xs">Bajo</Badge>
                  </div>
                  <div className="flex justify-between">
                    <span>Región Amazonia</span>
                    <Badge variant="secondary" className="text-xs">Contenido</Badge>
                  </div>
                  <div className="flex justify-between">
                    <span>Región Insular</span>
                    <Badge variant="secondary" className="text-xs">Contenido</Badge>
                  </div>
                </div>
              </CardContent>
            </Card>

            <div className="flex space-x-2">
              <Button className="flex-1 bg-primary text-primary-foreground hover:bg-primary/90">
                <Shield className="h-4 w-4 mr-2" />
                Aplicar Análisis
              </Button>
              <Button variant="outline" className="border-primary text-primary hover:bg-primary/10">
                <Bot className="h-4 w-4" />
              </Button>
            </div>
          </div>
        </div>
      </div>
    </TooltipProvider>
  );
} - - - - - - - - - - - - 
src/components/PlatformIcons.tsx

import React from 'react';

export const WhatsAppIcon = ({ className = "w-6 h-6" }) => (
  <svg className={className} viewBox="0 0 24 24" fill="currentColor">
    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.51 3.488"/>
  </svg>
);

export const FacebookIcon = ({ className = "w-6 h-6" }) => (
  <svg className={className} viewBox="0 0 24 24" fill="currentColor">
    <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
  </svg>
);

export const TwitterIcon = ({ className = "w-6 h-6" }) => (
  <svg className={className} viewBox="0 0 24 24" fill="currentColor">
    <path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"/>
  </svg>
);

export const TelegramIcon = ({ className = "w-6 h-6" }) => (
  <svg className={className} viewBox="0 0 24 24" fill="currentColor">
    <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
  </svg>
);

export const TikTokIcon = ({ className = "w-6 h-6" }) => (
  <svg className={className} viewBox="0 0 24 24" fill="currentColor">
    <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/>
  </svg>
);

export const WebIcon = ({ className = "w-6 h-6" }) => (
  <svg className={className} viewBox="0 0 24 24" fill="currentColor">
    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
  </svg>
); - - - - - - - - - - - - 
src/components/toast.tsx

"use client"
import * as React from "react"
import * as ToastPrimitives from "@radix-ui/react-toast"
import { cva, type VariantProps } from "class-variance-authority"
import { X } from "lucide-react"
import { cn } from "../utils/cn"

const ToastProvider = ToastPrimitives.Provider

const ToastViewport = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Viewport>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Viewport
    ref={ref}
    className={cn(
      "fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",
      className
    )}
    {...props}
  />
))
ToastViewport.displayName = ToastPrimitives.Viewport.displayName

const toastVariants = cva(
  "group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",
  {
    variants: {
      variant: {
        default: "border bg-background text-foreground",
        destructive:
          "destructive group border-destructive bg-destructive text-destructive-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

const Toast = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Root>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &
    VariantProps<typeof toastVariants>
>(({ className, variant, ...props }, ref) => {
  return (
    <ToastPrimitives.Root
      ref={ref}
      className={cn(toastVariants({ variant }), className)}
      {...props}
    />
  )
})
Toast.displayName = ToastPrimitives.Root.displayName

const ToastAction = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Action>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Action
    ref={ref}
    className={cn(
      "inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",
      className
    )}
    {...props}
  />
))
ToastAction.displayName = ToastPrimitives.Action.displayName

const ToastClose = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Close>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Close
    ref={ref}
    className={cn(
      "absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",
      className
    )}
    toast-close=""
    {...props}
  >
    <X className="h-4 w-4" />
  </ToastPrimitives.Close>
))
ToastClose.displayName = ToastPrimitives.Close.displayName

const ToastTitle = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Title>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Title
    ref={ref}
    className={cn("text-sm font-semibold", className)}
    {...props}
  />
))
ToastTitle.displayName = ToastPrimitives.Title.displayName

const ToastDescription = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Description>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Description
    ref={ref}
    className={cn("text-sm opacity-90", className)}
    {...props}
  />
))
ToastDescription.displayName = ToastPrimitives.Description.displayName

type ToastProps = React.ComponentPropsWithoutRef<typeof Toast>
type ToastActionElement = React.ReactElement<typeof ToastAction>

export {
  type ToastProps,
  type ToastActionElement,
  ToastProvider,
  ToastViewport,
  Toast,
  ToastTitle,
  ToastDescription,
  ToastClose,
  ToastAction,
}
 - - - - - - - - - - - - 
src/components/Navigation.tsx

import { Button } from './ui/button';
import { Badge } from './ui/badge';
import { Avatar, AvatarFallback, AvatarImage } from './ui/avatar';
import { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuLabel, DropdownMenuSeparator, DropdownMenuTrigger } from './ui/dropdown-menu';
import { Bot, Upload, Users, FileSearch, LogOut, User, Settings, Trophy, Activity, Puzzle, Map, BookOpen, Syringe } from 'lucide-react';
import { GlobalNotifications } from './GlobalNotifications';
import botilitoLogo from 'figma:asset/8604399dafdf4284ef499af970e8af43ff13e21b.png';

interface NavigationProps {
  activeTab: string;
  onTabChange: (tab: string) => void;
  onLogout?: () => void;
}

export function Navigation({ activeTab, onTabChange, onLogout }: NavigationProps) {
  const tabs = [
    { id: 'upload', label: 'Análisis IA', icon: Upload },
    { id: 'verification', label: 'Diagnóstico Humano', icon: Users },
    { id: 'immunization', label: 'Inmunización', icon: Syringe },
    { id: 'review', label: 'Historial', icon: Bot },
    { id: 'mapa', label: 'Mapa Desinfodémico', icon: Map },
    { id: 'profile', label: 'Mi Perfil', icon: User },
  ];

  // Datos simulados del usuario
  const userData = {
    name: 'Dr. María González',
    email: 'maria.gonzalez@botilito.com',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=MariaGonzalez&backgroundColor=ffda00',
    level: 'Especialista Senior',
    totalBadges: 5
  };

  return (
    <nav className="border-b bg-card">
      <div className="container mx-auto px-4">
        <div className="flex items-center justify-between h-16">
          <div className="flex items-center space-x-3">
            <img 
              src={botilitoLogo} 
              alt="Botilito" 
              className="h-10 object-contain" 
            />
            <Badge variant="secondary">Beta</Badge>
          </div>
          
          <div className="flex items-center space-x-1">
            <div className="flex space-x-1">
              {tabs.map(({ id, label, icon: Icon }) => (
                <Button
                  key={id}
                  variant={activeTab === id ? 'default' : 'ghost'}
                  onClick={() => onTabChange(id)}
                  size="sm"
                  className={`relative group transition-all duration-200 ${
                    activeTab === id 
                      ? 'bg-primary text-primary-foreground shadow-md scale-105' 
                      : 'bg-white/80 hover:bg-secondary hover:scale-105'
                  }`}
                  title={label}
                >
                  <Icon className="h-4 w-4" />
                  <span className="ml-2 hidden lg:inline font-medium">{label}</span>
                  
                  {/* Tooltip para pantallas pequeñas */}
                  <div className="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-black text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none lg:hidden whitespace-nowrap z-50">
                    {label}
                    <div className="absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-black"></div>
                  </div>
                </Button>
              ))}
            </div>
            
            {onLogout && (
              <div className="ml-4 pl-4 border-l border-border flex items-center space-x-2">
                {/* Botón de Notificaciones Globales */}
                <GlobalNotifications />
                
                {/* Avatar y Menú de Usuario */}
                <DropdownMenu>
                  <DropdownMenuTrigger asChild>
                    <Button variant="ghost" className="relative h-10 w-10 rounded-full p-0">
                      <Avatar className="h-10 w-10">
                        <AvatarImage src={userData.avatar} alt={userData.name} />
                        <AvatarFallback className="bg-primary text-primary-foreground">
                          {userData.name.split(' ').map(n => n[0]).join('')}
                        </AvatarFallback>
                      </Avatar>
                    </Button>
                  </DropdownMenuTrigger>
                  <DropdownMenuContent className="w-64" align="end" forceMount>
                    <DropdownMenuLabel className="font-normal">
                      <div className="flex flex-col space-y-1">
                        <p className="text-sm font-medium leading-none">{userData.name}</p>
                        <p className="text-xs leading-none text-muted-foreground">
                          {userData.email}
                        </p>
                        <div className="flex items-center space-x-2 mt-1">
                          <Badge variant="secondary" className="text-xs">
                            {userData.level}
                          </Badge>
                          <Badge variant="outline" className="text-xs">
                            <Trophy className="h-3 w-3 mr-1" />
                            {userData.totalBadges} badges
                          </Badge>
                        </div>
                      </div>
                    </DropdownMenuLabel>
                    <DropdownMenuSeparator />
                    <DropdownMenuItem onClick={() => onTabChange('profile')}>
                      <User className="mr-2 h-4 w-4" />
                      <span>Mi Perfil</span>
                    </DropdownMenuItem>
                    <DropdownMenuItem onClick={() => onTabChange('extension')}>
                      <Puzzle className="mr-2 h-4 w-4" />
                      <span>Extensión</span>
                    </DropdownMenuItem>
                    <DropdownMenuItem>
                      <Settings className="mr-2 h-4 w-4" />
                      <span>Configuración</span>
                    </DropdownMenuItem>
                    <DropdownMenuItem onClick={() => onTabChange('docs')}>
                      <BookOpen className="mr-2 h-4 w-4" />
                      <span>Documentación</span>
                    </DropdownMenuItem>
                    <DropdownMenuSeparator />
                    <DropdownMenuItem onClick={onLogout} className="text-red-600 focus:text-red-600">
                      <LogOut className="mr-2 h-4 w-4" />
                      <span>Cerrar Sesión</span>
                    </DropdownMenuItem>
                  </DropdownMenuContent>
                </DropdownMenu>
              </div>
            )}
          </div>
        </div>
      </div>
    </nav>
  );
} - - - - - - - - - - - - 
src/components/DynamicDashboard.tsx

import React, { useState, useEffect } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Badge } from './ui/badge';
import { Button } from './ui/button';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';
import { Progress } from './ui/progress';
import { Tabs, TabsContent, TabsList, TabsTrigger } from './ui/tabs';
import { 
  AreaChart, Area, BarChart, Bar, LineChart, Line, PieChart, Pie, Cell,
  XAxis, YAxis, CartesianGrid, ResponsiveContainer, Tooltip, Legend
} from 'recharts';
import { 
  Activity, TrendingUp, TrendingDown, AlertTriangle, Shield, 
  Zap, Clock, MapPin, Users, Globe, Bug, Stethoscope, 
  Target, Thermometer, ShieldCheck, AlertOctagon, Eye, Microscope,
  FileText, Image, Video, Volume2, CheckCircle, BarChart3, Map,
  Layers, Filter, Maximize2, Minimize2
} from 'lucide-react';
import { Alert, AlertDescription } from './ui/alert';
import { WhatsAppIcon, FacebookIcon, TwitterIcon, TelegramIcon, TikTokIcon, WebIcon } from './PlatformIcons';
import { AdvancedAnalytics } from './AdvancedAnalytics';
import { FloatingNotifications } from './FloatingNotifications';
import { RealTimeStats } from './RealTimeStats';
import { motion, AnimatePresence } from 'motion/react';

export function DynamicDashboard() {
  const [viewMode, setViewMode] = useState('overview'); // overview, map, analytics
  const [selectedRegion, setSelectedRegion] = useState('colombia');
  const [timeRange, setTimeRange] = useState('24h');
  const [alertsExpanded, setAlertsExpanded] = useState(false);
  const [mapExpanded, setMapExpanded] = useState(false);

  // Datos epidemiológicos en tiempo real
  const [realTimeData, setRealTimeData] = useState({
    casosActivos: 2847,
    tasaInfeccion: 3.2,
    inmunidadDigital: 67,
    tiempoDeteccion: 4.2
  });

  // Simular actualización en tiempo real
  useEffect(() => {
    const interval = setInterval(() => {
      setRealTimeData(prev => ({
        casosActivos: prev.casosActivos + Math.floor(Math.random() * 10 - 5),
        tasaInfeccion: Math.max(0, prev.tasaInfeccion + (Math.random() - 0.5) * 0.1),
        inmunidadDigital: Math.min(100, Math.max(0, prev.inmunidadDigital + (Math.random() - 0.5) * 2)),
        tiempoDeteccion: Math.max(1, prev.tiempoDeteccion + (Math.random() - 0.5) * 0.2)
      }));
    }, 5000);

    return () => clearInterval(interval);
  }, []);

  // Datos del dashboard
  const epidemicStats = [
    { 
      title: 'Casos Activos', 
      value: realTimeData.casosActivos.toLocaleString(), 
      icon: Bug, 
      change: '+15%', 
      color: 'text-red-600', 
      bgColor: 'bg-red-50',
      trend: 'up'
    },
    { 
      title: 'Tasa de Infección', 
      value: `${realTimeData.tasaInfeccion.toFixed(1)}/h`, 
      icon: Activity, 
      change: '+8%', 
      color: 'text-orange-600', 
      bgColor: 'bg-orange-50',
      trend: 'up'
    },
    { 
      title: 'Inmunidad Digital', 
      value: `${Math.round(realTimeData.inmunidadDigital)}%`, 
      icon: Shield, 
      change: '+2%', 
      color: 'text-green-600', 
      bgColor: 'bg-green-50',
      trend: 'up'
    },
    { 
      title: 'Tiempo Detección', 
      value: `${realTimeData.tiempoDeteccion.toFixed(1)}h`, 
      icon: Clock, 
      change: '-12%', 
      color: 'text-blue-600', 
      bgColor: 'bg-blue-50',
      trend: 'down'
    },
  ];

  const geographicSpread = [
    { region: 'Región Andina', casos: 1456, tasa: 5.2, estado: 'Brote Activo', lat: 4.5709, lng: -74.2973 },
    { region: 'Región Caribe', casos: 934, tasa: 4.1, estado: 'En Aumento', lat: 10.4806, lng: -75.5138 },
    { region: 'Región Pacífico', casos: 687, tasa: 3.8, estado: 'Controlado', lat: 2.9273, lng: -75.2819 },
    { region: 'Región Orinoquía', casos: 234, tasa: 2.3, estado: 'Estable', lat: 6.1701, lng: -67.4977 },
    { region: 'Región Amazonia', casos: 156, tasa: 1.9, estado: 'Bajo Control', lat: -1.2136, lng: -69.8062 },
    { region: 'Región Insular', casos: 43, tasa: 0.8, estado: 'Bajo Control', lat: 12.5564, lng: -81.7152 },
  ];

  const alertsData = [
    {
      id: 1,
      type: 'critical',
      title: 'Brote detectado en Región Andina',
      message: 'Incremento del 45% en casos en las últimas 6 horas',
      timestamp: 'hace 12 min',
      region: 'Andina'
    },
    {
      id: 2,
      type: 'warning',
      title: 'Patrón anómalo en redes sociales',
      message: 'Detección de campaña coordinada en WhatsApp',
      timestamp: 'hace 25 min',
      region: 'Caribe'
    },
    {
      id: 3,
      type: 'info',
      title: 'Neutralización exitosa',
      message: '234 casos verificados y marcados como falsos',
      timestamp: 'hace 1h',
      region: 'Nacional'
    }
  ];

  const getRegionStatus = (estado: string) => {
    switch (estado) {
      case 'Brote Crítico':
        return <Badge className="bg-red-100 text-red-800 border-red-300 animate-pulse">🔴 {estado}</Badge>;
      case 'Brote Activo':
        return <Badge className="bg-orange-100 text-orange-800 border-orange-300">🟡 {estado}</Badge>;
      case 'En Aumento':
        return <Badge className="bg-yellow-100 text-yellow-800 border-yellow-300">📈 {estado}</Badge>;
      case 'Controlado':
        return <Badge className="bg-blue-100 text-blue-800 border-blue-300">🔵 {estado}</Badge>;
      case 'Estable':
        return <Badge className="bg-gray-100 text-gray-800 border-gray-300">⚪ {estado}</Badge>;
      case 'Bajo Control':
        return <Badge className="bg-green-100 text-green-800 border-green-300">🟢 {estado}</Badge>;
      default:
        return <Badge variant="outline">{estado}</Badge>;
    }
  };

  const getAlertIcon = (type: string) => {
    switch (type) {
      case 'critical': return <AlertTriangle className="h-4 w-4 text-red-500" />;
      case 'warning': return <AlertOctagon className="h-4 w-4 text-orange-500" />;
      case 'info': return <CheckCircle className="h-4 w-4 text-blue-500" />;
      default: return <AlertTriangle className="h-4 w-4" />;
    }
  };

  const renderInteractiveMap = () => (
    <div className="relative h-96 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl overflow-hidden">
      {/* Mapa SVG de Colombia */}
      <svg
        viewBox="0 0 400 500"
        className="w-full h-full"
        style={{ filter: 'drop-shadow(0 4px 6px rgba(0,0,0,0.1))' }}
      >
        <defs>
          <linearGradient id="andinaGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#FF6B35" />
            <stop offset="100%" stopColor="#E55A2E" />
          </linearGradient>
          <linearGradient id="caribeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#FFD60A" />
            <stop offset="100%" stopColor="#FFC107" />
          </linearGradient>
          <linearGradient id="pacificoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#00B4D8" />
            <stop offset="100%" stopColor="#0096C7" />
          </linearGradient>
          <linearGradient id="orinoquiaGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#6C757D" />
            <stop offset="100%" stopColor="#495057" />
          </linearGradient>
          <linearGradient id="amazoniaGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#00E676" />
            <stop offset="100%" stopColor="#00C853" />
          </linearGradient>
        </defs>
        
        {/* Región Andina - Brote Activo */}
        <motion.path
          d="M120 100 L280 110 L290 170 L275 270 L190 310 L140 280 L110 250 L120 180 Z"
          fill="url(#andinaGradient)"
          stroke="#fff"
          strokeWidth="3"
          className="cursor-pointer"
          whileHover={{ scale: 1.02 }}
          onClick={() => setSelectedRegion('andina')}
        />
        
        {/* Región Caribe - En Aumento */}
        <motion.path
          d="M70 40 L330 40 L330 100 L280 110 L220 125 L170 115 L120 100 L70 85 Z"
          fill="url(#caribeGradient)"
          stroke="#fff"
          strokeWidth="3"
          className="cursor-pointer"
          whileHover={{ scale: 1.02 }}
          onClick={() => setSelectedRegion('caribe')}
        />
        
        {/* Región Pacífico - Controlado */}
        <motion.path
          d="M40 90 L120 100 L110 250 L90 350 L70 400 L50 380 L35 320 L25 250 L30 180 Z"
          fill="url(#pacificoGradient)"
          stroke="#fff"
          strokeWidth="3"
          className="cursor-pointer"
          whileHover={{ scale: 1.02 }}
          onClick={() => setSelectedRegion('pacifico')}
        />
        
        {/* Región Orinoquía - Estable */}
        <motion.path
          d="M280 110 L370 130 L365 260 L320 285 L290 270 L275 220 L290 170 Z"
          fill="url(#orinoquiaGradient)"
          stroke="#fff"
          strokeWidth="3"
          className="cursor-pointer"
          whileHover={{ scale: 1.02 }}
          onClick={() => setSelectedRegion('orinoquia')}
        />
        
        {/* Región Amazonía - Bajo Control */}
        <motion.path
          d="M110 250 L275 270 L320 285 L340 360 L300 430 L200 440 L140 410 L90 350 Z"
          fill="url(#amazoniaGradient)"
          stroke="#fff"
          strokeWidth="3"
          className="cursor-pointer"
          whileHover={{ scale: 1.02 }}
          onClick={() => setSelectedRegion('amazonia')}
        />
        
        {/* Pulsos en regiones críticas */}
        <motion.circle 
          cx="200" 
          cy="200" 
          r="6" 
          fill="#FF6B35" 
          opacity="0.8"
          animate={{ 
            scale: [1, 1.5, 1],
            opacity: [0.8, 0.3, 0.8]
          }}
          transition={{ 
            duration: 2,
            repeat: Infinity,
            ease: "easeInOut"
          }}
        />
      </svg>
      
      {/* Controles del mapa */}
      <div className="absolute top-4 right-4 flex flex-col space-y-2">
        <Button
          size="sm"
          variant="secondary"
          onClick={() => setMapExpanded(!mapExpanded)}
          className="bg-white/90 backdrop-blur-sm"
        >
          {mapExpanded ? <Minimize2 className="h-4 w-4" /> : <Maximize2 className="h-4 w-4" />}
        </Button>
        <Button
          size="sm"
          variant="secondary"
          className="bg-white/90 backdrop-blur-sm"
        >
          <Filter className="h-4 w-4" />
        </Button>
      </div>
      
      {/* Información de región seleccionada */}
      {selectedRegion !== 'colombia' && (
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          className="absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-lg p-4 shadow-lg"
        >
          <h4 className="font-medium mb-2">Región {selectedRegion}</h4>
          <div className="text-sm text-muted-foreground">
            <div>Casos activos: 1,456</div>
            <div>Tasa: 5.2/hora</div>
            <div>Estado: Brote Activo</div>
          </div>
        </motion.div>
      )}
    </div>
  );

  return (
    <>
      <FloatingNotifications />
      <div className="space-y-6">
        {/* Header dinámico */}
      <div className="flex flex-col lg:flex-row lg:items-center justify-between gap-4">
        <div>
          <h1 className="text-3xl font-semibold mb-2">Centro de Control Desinfodémico</h1>
          <p className="text-muted-foreground">
            Monitoreo epidemiológico en tiempo real de la desinformación en Colombia
          </p>
        </div>
        
        <div className="flex items-center space-x-3">
          <Select value={timeRange} onValueChange={setTimeRange}>
            <SelectTrigger className="w-32">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="1h">Última hora</SelectItem>
              <SelectItem value="24h">24 horas</SelectItem>
              <SelectItem value="7d">7 días</SelectItem>
              <SelectItem value="30d">30 días</SelectItem>
            </SelectContent>
          </Select>
          
          <Tabs value={viewMode} onValueChange={setViewMode} className="w-auto">
            <TabsList className="grid w-full grid-cols-3">
              <TabsTrigger value="overview" className="flex items-center space-x-1">
                <BarChart3 className="h-4 w-4" />
                <span>Vista General</span>
              </TabsTrigger>
              <TabsTrigger value="map" className="flex items-center space-x-1">
                <Map className="h-4 w-4" />
                <span>Mapa</span>
              </TabsTrigger>
              <TabsTrigger value="analytics" className="flex items-center space-x-1">
                <Activity className="h-4 w-4" />
                <span>Análisis</span>
              </TabsTrigger>
            </TabsList>
          </Tabs>
        </div>
      </div>

      {/* Panel de alertas expandible */}
      <Card className="border-orange-200 bg-orange-50/30">
        <CardHeader className="pb-3">
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-2">
              <AlertTriangle className="h-5 w-5 text-orange-500 animate-pulse" />
              <CardTitle className="text-orange-800">Alertas Epidemiológicas</CardTitle>
              <Badge variant="destructive" className="animate-pulse">3 ACTIVAS</Badge>
            </div>
            <Button
              variant="ghost"
              size="sm"
              onClick={() => setAlertsExpanded(!alertsExpanded)}
            >
              {alertsExpanded ? 'Contraer' : 'Expandir'}
            </Button>
          </div>
        </CardHeader>
        <CardContent>
          <AnimatePresence>
            {alertsExpanded ? (
              <motion.div
                initial={{ height: 0, opacity: 0 }}
                animate={{ height: 'auto', opacity: 1 }}
                exit={{ height: 0, opacity: 0 }}
                className="space-y-3"
              >
                {alertsData.map((alert) => (
                  <div key={alert.id} className="flex items-start space-x-3 p-3 bg-white rounded-lg border">
                    {getAlertIcon(alert.type)}
                    <div className="flex-1">
                      <div className="font-medium">{alert.title}</div>
                      <div className="text-sm text-muted-foreground">{alert.message}</div>
                      <div className="text-xs text-muted-foreground mt-1">
                        {alert.region} • {alert.timestamp}
                      </div>
                    </div>
                  </div>
                ))}
              </motion.div>
            ) : (
              <motion.div
                initial={{ opacity: 0 }}
                animate={{ opacity: 1 }}
                className="text-sm text-orange-700"
              >
                {alertsData.length} alertas requieren atención inmediata
              </motion.div>
            )}
          </AnimatePresence>
        </CardContent>
      </Card>

      {/* Métricas principales animadas */}
      <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
        {epidemicStats.map((stat, index) => (
          <motion.div
            key={stat.title}
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: index * 0.1 }}
          >
            <Card className={`${stat.bgColor} border-0 overflow-hidden relative`}>
              <CardContent className="p-6">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-sm font-medium text-muted-foreground">{stat.title}</p>
                    <div className="flex items-center space-x-2">
                      <motion.p 
                        className={`text-2xl font-semibold ${stat.color}`}
                        key={stat.value}
                        initial={{ scale: 1.2 }}
                        animate={{ scale: 1 }}
                        transition={{ duration: 0.3 }}
                      >
                        {stat.value}
                      </motion.p>
                      <Badge 
                        variant={stat.trend === 'up' ? 'destructive' : 'default'}
                        className="text-xs"
                      >
                        {stat.trend === 'up' ? <TrendingUp className="h-3 w-3" /> : <TrendingDown className="h-3 w-3" />}
                        {stat.change}
                      </Badge>
                    </div>
                  </div>
                  <div className={`${stat.color} opacity-20`}>
                    <stat.icon className="h-8 w-8" />
                  </div>
                </div>
                
                {/* Indicador de pulso para datos críticos */}
                {stat.title === 'Casos Activos' && (
                  <div className="absolute top-2 right-2">
                    <div className="w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                  </div>
                )}
              </CardContent>
            </Card>
          </motion.div>
        ))}
      </div>

      {/* Contenido principal dinámico */}
      <div className="grid gap-6 lg:grid-cols-3">
        <div className="lg:col-span-2">
          <AnimatePresence mode="wait">
            {viewMode === 'analytics' ? (
              <motion.div
                key="analytics"
                initial={{ opacity: 0, x: -20 }}
                animate={{ opacity: 1, x: 0 }}
                exit={{ opacity: 0, x: 20 }}
              >
                <AdvancedAnalytics />
              </motion.div>
            ) : viewMode === 'map' ? (
              <motion.div
                key="map"
                initial={{ opacity: 0, x: -20 }}
                animate={{ opacity: 1, x: 0 }}
                exit={{ opacity: 0, x: 20 }}
              >
                <Card>
                  <CardHeader>
                    <CardTitle className="flex items-center space-x-2">
                      <MapPin className="h-5 w-5 text-primary" />
                      <span>Mapa Epidemiológico Interactivo</span>
                    </CardTitle>
                    <CardDescription>
                      Haz clic en las regiones para ver detalles específicos
                    </CardDescription>
                  </CardHeader>
                  <CardContent>
                    {renderInteractiveMap()}
                  </CardContent>
                </Card>
              </motion.div>
            ) : (
              <motion.div
                key="overview"
                initial={{ opacity: 0, x: -20 }}
                animate={{ opacity: 1, x: 0 }}
                exit={{ opacity: 0, x: 20 }}
              >
                <Card>
                  <CardHeader>
                    <CardTitle className="flex items-center space-x-2">
                      <MapPin className="h-5 w-5 text-primary" />
                      <span>Propagación Geográfica</span>
                    </CardTitle>
                    <CardDescription>
                      Estado epidemiológico por región
                    </CardDescription>
                  </CardHeader>
                  <CardContent>
                    <div className="space-y-3">
                      {geographicSpread.map((item, index) => (
                        <motion.div
                          key={index}
                          initial={{ opacity: 0, x: -20 }}
                          animate={{ opacity: 1, x: 0 }}
                          transition={{ delay: index * 0.1 }}
                          className="flex items-center justify-between p-3 bg-muted/30 rounded hover:bg-muted/50 transition-colors cursor-pointer"
                          onClick={() => {
                            setSelectedRegion(item.region.toLowerCase().replace('región ', ''));
                            setViewMode('map');
                          }}
                        >
                          <div>
                            <div className="font-medium">{item.region}</div>
                            <div className="text-sm text-muted-foreground">
                              {item.casos.toLocaleString()} casos • Tasa: {item.tasa}/hora
                            </div>
                          </div>
                          <div className="text-right">
                            {getRegionStatus(item.estado)}
                          </div>
                        </motion.div>
                      ))}
                    </div>
                  </CardContent>
                </Card>
              </motion.div>
            )}
          </AnimatePresence>
        </div>

        {/* Panel lateral con métricas adicionales */}
        <div className="space-y-6">
          <RealTimeStats />
          
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Target className="h-5 w-5 text-primary" />
                <span>Acciones Rápidas</span>
              </CardTitle>
            </CardHeader>
            <CardContent className="space-y-3">
              <Button className="w-full justify-start" variant="outline">
                <AlertTriangle className="h-4 w-4 mr-2" />
                Crear Alerta Manual
              </Button>
              <Button className="w-full justify-start" variant="outline">
                <Eye className="h-4 w-4 mr-2" />
                Análisis Detallado
              </Button>
              <Button className="w-full justify-start" variant="outline">
                <Shield className="h-4 w-4 mr-2" />
                Verificación Masiva
              </Button>
            </CardContent>
          </Card>
        </div>
      </div>
    </div>
    </>
  );
} - - - - - - - - - - - - 
src/components/CaseDetailView.tsx

import React, { useState, useEffect } from 'react';
import { useAuth } from '@/providers/AuthProvider';
import { api } from '../utils/apiService';
import { jobManager } from '@/lib/JobManager';
import { useToast } from '@/hooks/use-toast';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Skeleton } from './ui/skeleton';
import { Loader2, ArrowLeft, Send, AlertTriangle } from 'lucide-react';

interface CaseDetailViewProps {
  caseId: string;
  onBackToList: () => void;
  onVerificationSuccess: (caseId: string) => void;
}

export function CaseDetailView({ caseId, onBackToList, onVerificationSuccess }: CaseDetailViewProps) {
    const { session } = useAuth();
    const [caseData, setCaseData] = useState<any>(null);
    const [isLoading, setIsLoading] = useState(true);
    const [isSubmitting, setIsSubmitting] = useState(false);
    const { toast } = useToast();

    useEffect(() => {
        if (!session) return;
        setIsLoading(true);
        api.crud.search(session, {
            nombreTabla: 'cases',
            criteriosBusqueda: { id: caseId }
        }).then(response => {
            if (response.resultados && response.resultados.length > 0) {
                setCaseData(response.resultados[0]);
            } else {
                throw new Error("Caso no encontrado.");
            }
        }).catch(err => {
            console.error(err);
            toast({ variant: "destructive", title: "Error", description: "No se pudieron cargar los detalles del caso." });
        }).finally(() => {
            setIsLoading(false);
        });
    }, [caseId, session, toast]);

    const handleSubmit = async () => {
        if (!session) return;
        setIsSubmitting(true);
        try {
            const diagnosisPayload = {
                case_id: caseId,
                classification: 'falso', // Datos del formulario irían aquí
                reason: 'Justificación de prueba',
            };
            jobManager.addJob('voting', diagnosisPayload);
            toast({ title: "✅ Diagnóstico Enviado", description: "Tu análisis se está procesando en segundo plano." });
            onVerificationSuccess(caseId);
        } catch (error: any) {
            toast({ variant: "destructive", title: "Error al Enviar", description: error.message });
            setIsSubmitting(false); // Solo poner en false si hay error
        }
    };

    if (isLoading) return <div className="flex justify-center items-center h-96"><Loader2 className="h-8 w-8 animate-spin" /></div>;
    if (!caseData) return (
        <div className="text-center p-8">
            <AlertTriangle className="mx-auto h-8 w-8 text-destructive" />
            <p className="mt-2">Caso no encontrado.</p>
            <Button variant="outline" onClick={onBackToList} className="mt-4">Volver</Button>
        </div>
    );
    
    return (
        <div className="space-y-6">
            <Button variant="outline" onClick={onBackToList}><ArrowLeft className="mr-2 h-4 w-4" />Volver a la lista</Button>
            <Card>
                <CardHeader>
                    <CardTitle>{caseData.title || 'Detalle del Caso'}</CardTitle>
                    <CardDescription>ID del Caso: {caseData.id}</CardDescription>
                </CardHeader>
                <CardContent>
                    <p className="text-sm">{caseData.content || "Contenido no disponible."}</p>
                    {/* Aquí iría el formulario de diagnóstico completo */}
                    <div className="flex justify-end mt-6">
                        <Button onClick={handleSubmit} disabled={isSubmitting} size="lg">
                            {isSubmitting && <Loader2 className="mr-2 h-4 w-4 animate-spin" />}
                            {isSubmitting ? 'Procesando...' : 'Enviar Diagnóstico'}
                        </Button>
                    </div>
                </CardContent>
            </Card>
        </div>
    );
}
 - - - - - - - - - - - - 
src/components/CaseListView.tsx

import React, { useState, useEffect, useMemo } from 'react';
import { useAuth } from '@/providers/AuthProvider';
import { api } from '../utils/apiService';
import { AnalysisResultDisplay } from './AnalysisResultDisplay';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Skeleton } from './ui/skeleton';
import { Badge } from './ui/badge';
import { Input } from './ui/input';
import { Layers, Search, Eye, ArrowLeft, AlertTriangle, Hash, Calendar, Bot, CheckCircle, FileText, Image as ImageIcon, Video, Volume2 } from 'lucide-react';

type Case = any; // Simplificado

const getTypeVisuals = (type: string) => {
    switch (type) {
        case 'text': return { icon: FileText };
        case 'image': return { icon: ImageIcon };
        case 'video': return { icon: Video };
        case 'audio': return { icon: Volume2 };
        default: return { icon: FileText };
    }
};

const getStatusBadge = (status: string) => {
    if (status === 'verified') {
      return <Badge variant="outline" className="bg-emerald-50 text-emerald-700 border-emerald-200"><CheckCircle className="h-3 w-3 mr-1" />Verificado</Badge>;
    }
    return <Badge variant="outline" className="bg-blue-50 text-blue-700 border-blue-200"><Bot className="h-3 w-3 mr-1" />Solo IA</Badge>;
};


export function CaseListView() {
  const { session } = useAuth();
  const [allCases, setAllCases] = useState<any[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [selectedCase, setSelectedCase] = useState<any | null>(null);
  const [searchTerm, setSearchTerm] = useState('');
  
  useEffect(() => {
    if (!session) return;
    setIsLoading(true);
    api.crud.search(session, { nombreTabla: 'cases', criteriosBusqueda: {} })
      .then(response => {
        setAllCases(response.resultados || []);
      })
      .catch((err) => {
          console.error("Failed to fetch historical cases:", err);
          setError('No se pudo cargar el historial de casos.');
      })
      .finally(() => {
        setIsLoading(false);
      });
  }, [session]);

  const filteredCases = useMemo(() => {
    return allCases.filter(c => 
        searchTerm === '' || 
        (c.title && c.title.toLowerCase().includes(searchTerm.toLowerCase())) || 
        (c.id && c.id.toLowerCase().includes(searchTerm.toLowerCase()))
    );
  }, [allCases, searchTerm]);

  if (selectedCase) {
    // La conversión a FullAnalysisResponse debe ser robusta
    const responseForDisplay = {
        id: selectedCase.id,
        created_at: selectedCase.submittedAt || selectedCase.created_at,
        title: selectedCase.title,
        summary: selectedCase.aiAnalysis?.summary || "Resumen no disponible.",
        metadata: {
            submissionType: selectedCase.type,
            ...(selectedCase.metadata || {})
        },
        case_study: {
            case_number: parseInt(selectedCase.id.split('-').pop() || '0', 10),
            metadata: {
                ai_labels: selectedCase.aiAnalysis?.detectedMarkers.reduce((acc: any, marker: any) => {
                    const type = typeof marker === 'string' ? marker : marker.type;
                    acc[type] = "Justificación de IA simulada.";
                    return acc;
                }, {})
            }
        }
    };
    return (
        <div className="space-y-4">
            <Button variant="outline" onClick={() => setSelectedCase(null)}>
                <ArrowLeft className="h-4 w-4 mr-2" />
                Volver al Historial
            </Button>
            <AnalysisResultDisplay response={responseForDisplay as any} />
        </div>
    );
  }
  
  return (
      <div className="space-y-6">
          <Card>
              <CardHeader>
                  <CardTitle className="flex items-center space-x-2 text-2xl"><Layers className="h-6 w-6" /><span>Historial de Casos</span></CardTitle>
                  <CardDescription>Explora todos los análisis de contenido realizados por el sistema.</CardDescription>
                  <div className="relative pt-4">
                    <Search className="absolute left-3 top-6.5 h-4 w-4 text-muted-foreground" />
                    <Input placeholder="Buscar por título o ID..." value={searchTerm} onChange={e => setSearchTerm(e.target.value)} className="pl-10" />
                  </div>
              </CardHeader>
              <CardContent>
                  <div className="space-y-4 max-h-[70vh] overflow-y-auto custom-scrollbar pr-2">
                    {isLoading ? Array.from({ length: 4 }).map((_, i) => <Skeleton key={i} className="h-24 w-full" />) :
                    error ? <div className="text-center py-12 text-destructive"><AlertTriangle className="mx-auto h-12 w-12" /><p className="mt-4">{error}</p></div> :
                    filteredCases.length === 0 ? <div className="text-center py-12 text-muted-foreground"><Search className="mx-auto h-12 w-12" /><p className="mt-4">No se encontraron casos.</p></div> :
                    filteredCases.map((caso) => {
                        const { icon: TypeIcon } = getTypeVisuals(caso.type);
                        return (
                            <div key={caso.id} onClick={() => setSelectedCase(caso)} className="p-4 border rounded-lg bg-background hover:bg-muted/50 transition-colors cursor-pointer">
                                <div className="flex items-start justify-between space-x-4">
                                    <div className="flex items-center space-x-4 flex-1 min-w-0">
                                        <div className="p-2 bg-muted rounded-lg mt-1"><TypeIcon className="h-5 w-5 text-muted-foreground" /></div>
                                        <div className="flex-1 space-y-1 min-w-0">
                                            <h4 className="font-semibold truncate">{caso.title || `Caso ${caso.id}`}</h4>
                                            <div className="flex flex-wrap items-center gap-x-4 gap-y-1 text-xs text-muted-foreground">
                                                <div className="flex items-center space-x-1 font-mono"><Hash className="h-3 w-3" /><span>{caso.id}</span></div>
                                                <div className="flex items-center space-x-1"><Calendar className="h-3 w-3" /><span>{new Date(caso.submittedAt || caso.created_at).toLocaleDateString()}</span></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="flex flex-col items-end space-y-2 flex-shrink-0">
                                        {getStatusBadge(caso.status)}
                                        <Button size="sm" variant="outline"><Eye className="h-4 w-4 mr-2" />Detalles</Button>
                                    </div>
                                </div>
                            </div>
                        );
                    })}
                  </div>
              </CardContent>
          </Card>
      </div>
  );
}
 - - - - - - - - - - - - 
src/components/CompleteDashboard.tsx

import React, { useState, useEffect } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';
import { Badge } from './ui/badge';
import { Button } from './ui/button';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';
import { Progress } from './ui/progress';
import { 
  AreaChart, Area, BarChart, Bar, LineChart, Line, PieChart, Pie, Cell,
  XAxis, YAxis, CartesianGrid, ResponsiveContainer, Tooltip, Legend
} from 'recharts';
import { 
  Activity, TrendingUp, TrendingDown, Shield, 
  Zap, Clock, MapPin, Users, Globe, Bug, Stethoscope, 
  Target, Thermometer, ShieldCheck, Eye, Microscope,
  FileText, Image, Video, Volume2, CheckCircle, BarChart3,
  Timer, Gauge, Award, Trophy, Star, Flame
} from 'lucide-react';
import { WhatsAppIcon, FacebookIcon, TwitterIcon, TelegramIcon, TikTokIcon, WebIcon } from './PlatformIcons';
import { RealTimeStats } from './RealTimeStats';
import { motion } from 'motion/react';

export function CompleteDashboard() {
  const [selectedRegion, setSelectedRegion] = useState('colombia');
  const [timeRange, setTimeRange] = useState('24h');

  // Datos en tiempo real
  const [realTimeData, setRealTimeData] = useState({
    casosActivos: 2847,
    tasaInfeccion: 3.2,
    inmunidadDigital: 67,
    tiempoDeteccion: 4.2
  });

  // Simular actualización en tiempo real
  useEffect(() => {
    const interval = setInterval(() => {
      setRealTimeData(prev => ({
        casosActivos: prev.casosActivos + Math.floor(Math.random() * 10 - 5),
        tasaInfeccion: Math.max(0, prev.tasaInfeccion + (Math.random() - 0.5) * 0.1),
        inmunidadDigital: Math.min(100, Math.max(0, prev.inmunidadDigital + (Math.random() - 0.5) * 2)),
        tiempoDeteccion: Math.max(1, prev.tiempoDeteccion + (Math.random() - 0.5) * 0.2)
      }));
    }, 5000);

    return () => clearInterval(interval);
  }, []);

  // Datos del Dashboard original
  const dashboardStats = [
    { title: 'Total Contenidos', value: '1,247', icon: FileText, change: '+12%' },
    { title: 'Analizados por IA', value: '1,089', icon: CheckCircle, change: '+8%' },
    { title: 'Verificados Humanos', value: '456', icon: Users, change: '+15%' },
    { title: 'En Proceso', value: '158', icon: Clock, change: '-3%' },
  ];

  // Datos epidemiológicos del Mapa Desinfodémico con comparaciones temporales detalladas
  const epidemicStats = [
    { 
      title: 'Casos Activos', 
      value: realTimeData.casosActivos.toLocaleString(), 
      icon: Bug, 
      change: '+15.3%', 
      period: 'vs. ayer',
      previousValue: '1,847',
      color: 'text-red-600', 
      bgColor: 'bg-red-50',
      trend: 'up',
      critical: true
    },
    { 
      title: 'Tasa de Infección', 
      value: `R₀ ${realTimeData.tasaInfeccion.toFixed(1)}`, 
      icon: Activity, 
      change: '+8.7%', 
      period: 'vs. semana anterior',
      previousValue: 'R₀ 2.1',
      color: 'text-orange-600', 
      bgColor: 'bg-orange-50',
      trend: 'up',
      critical: realTimeData.tasaInfeccion > 3.0
    },
    { 
      title: 'Inmunidad Digital', 
      value: `${Math.round(realTimeData.inmunidadDigital)}%`, 
      icon: Shield, 
      change: '+2.4%', 
      period: 'vs. mes anterior',
      previousValue: '81.2%',
      color: 'text-green-600', 
      bgColor: 'bg-green-50',
      trend: 'up',
      critical: false
    },
    { 
      title: 'Tiempo Detección', 
      value: `${realTimeData.tiempoDeteccion.toFixed(1)}h`, 
      icon: Clock, 
      change: '-12.8%', 
      period: 'vs. semana anterior',
      previousValue: '5.1h',
      color: 'text-blue-600', 
      bgColor: 'bg-blue-50',
      trend: 'down',
      critical: false
    },
  ];

  const verificationData = [
    { month: 'Ene', contenidos: 85, verificados: 72 },
    { month: 'Feb', contenidos: 120, verificados: 98 },
    { month: 'Mar', contenidos: 150, verificados: 145 },
    { month: 'Abr', contenidos: 180, verificados: 165 },
    { month: 'May', contenidos: 210, verificados: 189 },
    { month: 'Jun', contenidos: 185, verificados: 176 },
  ];

  // Datos de Verificación Humana
  const verificationTrends = [
    { name: 'Lun', verificaciones: 45, precision: 92 },
    { name: 'Mar', verificaciones: 52, precision: 89 },
    { name: 'Mié', verificaciones: 38, precision: 95 },
    { name: 'Jue', verificaciones: 67, precision: 88 },
    { name: 'Vie', verificaciones: 72, precision: 91 },
    { name: 'Sáb', verificaciones: 28, precision: 93 },
    { name: 'Dom', verificaciones: 31, precision: 90 }
  ];

  const caseTypesData = [
    { name: 'Casos Veraces', value: 342, color: '#22c55e' },
    { name: 'Casos Falsos', value: 156, color: '#ef4444' },
    { name: 'Casos Engañosos', value: 89, color: '#f59e0b' },
    { name: 'Sin Verificar', value: 67, color: '#6b7280' }
  ];

  const verifierRanking = [
    { name: 'Dr. Ana Rodríguez', verificaciones: 347, precision: 96, especialidad: 'Salud Pública' },
    { name: 'Lic. Carlos Mendez', verificaciones: 289, precision: 94, especialidad: 'Política' },
    { name: 'Dra. Sofia López', verificaciones: 256, precision: 95, especialidad: 'Ciencia' },
    { name: 'Prof. Miguel Torres', verificaciones: 234, precision: 93, especialidad: 'Economía' },
    { name: 'Ing. Laura Gómez', verificaciones: 198, precision: 92, especialidad: 'Tecnología' }
  ];

  const infectivityData = [
    { time: '00:00', casos: 120, nuevos: 23, resueltos: 15 },
    { time: '04:00', casos: 145, nuevos: 31, resueltos: 18 },
    { time: '08:00', casos: 189, nuevos: 67, resueltos: 24 },
    { time: '12:00', casos: 234, nuevos: 89, resueltos: 35 },
    { time: '16:00', casos: 298, nuevos: 112, resueltos: 48 },
    { time: '20:00', casos: 267, nuevos: 78, resueltos: 109 },
    { time: '24:00', casos: 189, nuevos: 45, resueltos: 123 },
  ];

  const pieData = [
    { name: 'Veraz', value: 65, color: '#00E676' },
    { name: 'Desinformación', value: 20, color: '#F72585' },
    { name: 'Satírico', value: 10, color: '#FF6B35' },
    { name: 'Fuera de Contexto', value: 5, color: '#7209B7' },
  ];

  const contentTypes = [
    { name: 'Texto', value: 45, icon: FileText },
    { name: 'Imagen', value: 30, icon: Image },
    { name: 'Video', value: 20, icon: Video },
    { name: 'Audio', value: 5, icon: Volume2 },
  ];

  const transmissionVectors = [
    { platform: 'WhatsApp', cases: 856, percentage: 28, color: '#25D366' },
    { platform: 'Facebook', cases: 723, percentage: 24, color: '#1877F2' },
    { platform: 'Twitter/X', cases: 534, percentage: 18, color: '#000000' },
    { platform: 'Telegram', cases: 298, percentage: 10, color: '#0088CC' },
    { platform: 'TikTok', cases: 267, percentage: 9, color: '#FF0050' },
    { platform: 'Web', cases: 334, percentage: 11, color: '#4285F4' },
  ];

  const geographicSpread = [
    { region: 'Región Andina', casos: 1456, tasa: 5.2, estado: 'Brote Activo' },
    { region: 'Región Caribe', casos: 934, tasa: 4.1, estado: 'En Aumento' },
    { region: 'Región Pacífico', casos: 687, tasa: 3.8, estado: 'Controlado' },
    { region: 'Región Orinoquía', casos: 234, tasa: 2.3, estado: 'Estable' },
    { region: 'Región Amazonia', casos: 156, tasa: 1.9, estado: 'Bajo Control' },
    { region: 'Región Insular', casos: 43, tasa: 0.8, estado: 'Bajo Control' },
  ];

  // Datos para la curva epidemiológica
  const epidemiologicalCurve = [
    { fecha: '18 Oct', casosNuevos: 45, casosNeutralizados: 32, tasaR0: 1.2 },
    { fecha: '19 Oct', casosNuevos: 67, casosNeutralizados: 41, tasaR0: 1.4 },
    { fecha: '20 Oct', casosNuevos: 89, casosNeutralizados: 56, tasaR0: 1.6 },
    { fecha: '21 Oct', casosNuevos: 134, casosNeutralizados: 78, tasaR0: 1.8 },
    { fecha: '22 Oct', casosNuevos: 198, casosNeutralizados: 112, tasaR0: 2.1 },
    { fecha: '23 Oct', casosNuevos: 267, casosNeutralizados: 145, tasaR0: 2.3 },
    { fecha: '24 Oct', casosNuevos: 342, casosNeutralizados: 189, tasaR0: 2.5 },
    { fecha: '25 Oct', casosNuevos: 298, casosNeutralizados: 234, tasaR0: 2.2 },
    { fecha: '26 Oct', casosNuevos: 234, casosNeutralizados: 267, tasaR0: 1.9 },
    { fecha: '27 Oct', casosNuevos: 189, casosNeutralizados: 198, tasaR0: 1.7 },
  ];



  const getRegionStatus = (estado: string) => {
    switch (estado) {
      case 'Brote Crítico':
        return <Badge className="bg-red-100 text-red-800 border-red-300 animate-pulse">🔴 {estado}</Badge>;
      case 'Brote Activo':
        return <Badge className="bg-orange-100 text-orange-800 border-orange-300">🟡 {estado}</Badge>;
      case 'En Aumento':
        return <Badge className="bg-yellow-100 text-yellow-800 border-yellow-300">📈 {estado}</Badge>;
      case 'Controlado':
        return <Badge className="bg-blue-100 text-blue-800 border-blue-300">🔵 {estado}</Badge>;
      case 'Estable':
        return <Badge className="bg-gray-100 text-gray-800 border-gray-300">⚪ {estado}</Badge>;
      case 'Bajo Control':
        return <Badge className="bg-green-100 text-green-800 border-green-300">🟢 {estado}</Badge>;
      default:
        return <Badge variant="outline">{estado}</Badge>;
    }
  };

  const getPlatformIcon = (platform: string) => {
    switch (platform) {
      case 'WhatsApp': return WhatsAppIcon;
      case 'Facebook': return FacebookIcon;
      case 'Twitter/X': return TwitterIcon;
      case 'Telegram': return TelegramIcon;
      case 'TikTok': return TikTokIcon;
      case 'Web': return WebIcon;
      default: return Globe;
    }
  };



  return (
    <div className="space-y-8">
      {/* Header dinámico */}
      <div className="flex flex-col lg:flex-row lg:items-center justify-between gap-4">
        <div>
          <h1 className="flex items-center space-x-3">
            <BarChart3 className="h-8 w-8 text-primary" />
            <span>Centro de Control Desinfodémico</span>
          </h1>
          <p className="text-muted-foreground">
            Análisis integral de verificación y monitoreo epidemiológico de desinformación
          </p>
        </div>
        
        <div className="flex items-center space-x-3">
          <Select value={timeRange} onValueChange={setTimeRange}>
            <SelectTrigger className="w-32">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="1h">Última hora</SelectItem>
              <SelectItem value="24h">24 horas</SelectItem>
              <SelectItem value="7d">7 días</SelectItem>
              <SelectItem value="30d">30 días</SelectItem>
            </SelectContent>
          </Select>
          
          <Select value={selectedRegion} onValueChange={setSelectedRegion}>
            <SelectTrigger className="w-40">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="colombia">Colombia</SelectItem>
              <SelectItem value="andina">Región Andina</SelectItem>
              <SelectItem value="caribe">Región Caribe</SelectItem>
              <SelectItem value="pacifico">Región Pacífico</SelectItem>
              <SelectItem value="orinoquia">Región Orinoquía</SelectItem>
              <SelectItem value="amazonia">Región Amazonia</SelectItem>
              <SelectItem value="insular">Región Insular</SelectItem>
            </SelectContent>
          </Select>
        </div>
      </div>

      {/* SECCIÓN 1: MÉTRICAS EPIDEMIOLÓGICAS PRINCIPALES */}
      <div>
        <div className="mb-6">
          <h2 className="flex items-center space-x-2 mb-2">
            <Activity className="h-6 w-6 text-primary" />
            <span>Métricas Epidemiológicas Principales</span>
          </h2>
          <p className="text-muted-foreground text-sm">Indicadores clave de propagación y control de desinformación</p>
        </div>

        {/* Métricas Epidemiológicas Principales - Destacadas */}
        <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-4 mb-8">
          {epidemicStats.map((stat, index) => (
            <motion.div
              key={stat.title}
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ delay: index * 0.1 }}
            >
              <Card className={`${stat.critical ? 'border-2 border-primary shadow-lg' : ''} hover:shadow-xl transition-all`}>
                <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                  <CardTitle className="text-sm">{stat.title}</CardTitle>
                  <div className={`p-2 rounded-full ${stat.bgColor}`}>
                    <stat.icon className={`h-5 w-5 ${stat.color}`} />
                  </div>
                </CardHeader>
                <CardContent>
                  <div className={`text-3xl mb-2 ${stat.critical ? 'animate-pulse' : ''}`}>
                    {stat.value}
                  </div>
                  <div className="flex items-center justify-between text-xs">
                    <span className="text-muted-foreground">{stat.period}</span>
                    <span className={`flex items-center space-x-1 ${
                      stat.trend === 'up' && stat.critical ? 'text-red-600' :
                      stat.trend === 'up' ? 'text-green-600' :
                      'text-blue-600'
                    }`}>
                      {stat.trend === 'up' ? <TrendingUp className="h-3 w-3" /> : <TrendingDown className="h-3 w-3" />}
                      <span>{stat.change}</span>
                    </span>
                  </div>
                  <div className="text-xs text-muted-foreground mt-1">
                    Anterior: {stat.previousValue}
                  </div>
                </CardContent>
              </Card>
            </motion.div>
          ))}
        </div>
      </div>

      {/* SECCIÓN 2: CURVA EPIDEMIOLÓGICA Y VECTORES */}
      <div className="grid gap-6 lg:grid-cols-2">
        {/* Curva Epidemiológica */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <TrendingUp className="h-5 w-5 text-primary" />
              <span>Curva Epidemiológica</span>
            </CardTitle>
            <CardDescription>Evolución de casos nuevos vs. neutralizados (últimos 10 días)</CardDescription>
          </CardHeader>
          <CardContent>
            <ResponsiveContainer width="100%" height={300}>
              <AreaChart data={epidemiologicalCurve}>
                <defs>
                  <linearGradient id="colorNuevos" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="5%" stopColor="#F72585" stopOpacity={0.8}/>
                    <stop offset="95%" stopColor="#F72585" stopOpacity={0.1}/>
                  </linearGradient>
                  <linearGradient id="colorNeutralizados" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="5%" stopColor="#00E676" stopOpacity={0.8}/>
                    <stop offset="95%" stopColor="#00E676" stopOpacity={0.1}/>
                  </linearGradient>
                </defs>
                <CartesianGrid strokeDasharray="3 3" opacity={0.3} />
                <XAxis dataKey="fecha" tick={{ fontSize: 11 }} />
                <YAxis tick={{ fontSize: 11 }} />
                <Tooltip />
                <Legend />
                <Area 
                  type="monotone" 
                  dataKey="casosNuevos" 
                  stroke="#F72585" 
                  fillOpacity={1}
                  fill="url(#colorNuevos)" 
                  name="Casos Nuevos"
                />
                <Area 
                  type="monotone" 
                  dataKey="casosNeutralizados" 
                  stroke="#00E676" 
                  fillOpacity={1}
                  fill="url(#colorNeutralizados)" 
                  name="Casos Neutralizados"
                />
              </AreaChart>
            </ResponsiveContainer>
          </CardContent>
        </Card>

        {/* Vectores de Transmisión */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Globe className="h-5 w-5 text-primary" />
              <span>Vectores de Transmisión</span>
            </CardTitle>
            <CardDescription>Plataformas de mayor propagación</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              {transmissionVectors.map((platform) => {
                const PlatformIcon = getPlatformIcon(platform.platform);
                return (
                  <div key={platform.platform} className="space-y-2">
                    <div className="flex items-center justify-between">
                      <div className="flex items-center space-x-3">
                        <div 
                          className="w-8 h-8 rounded-lg flex items-center justify-center"
                          style={{ backgroundColor: `${platform.color}15` }}
                        >
                          <PlatformIcon 
                            className="w-5 h-5" 
                            style={{ color: platform.color }}
                          />
                        </div>
                        <span className="font-medium">{platform.platform}</span>
                      </div>
                      <div className="text-right">
                        <div className="font-bold">{platform.cases} casos</div>
                        <div className="text-sm text-muted-foreground">{platform.percentage}%</div>
                      </div>
                    </div>
                    <Progress value={platform.percentage} className="h-2" />
                  </div>
                );
              })}
            </div>
          </CardContent>
        </Card>
      </div>

      {/* SECCIÓN 3: PROPAGACIÓN GEOGRÁFICA Y PANEL DE CONTROL */}
      <div className="grid gap-6 lg:grid-cols-3">
        {/* Propagación Geográfica - Ocupa 2 columnas */}
        <div className="lg:col-span-2">
          <Card className="h-full">
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <MapPin className="h-5 w-5 text-primary" />
                <span>Propagación Geográfica</span>
              </CardTitle>
              <CardDescription>Estado epidemiológico por región de Colombia</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="grid gap-3 md:grid-cols-2">
                {geographicSpread.map((item, index) => (
                  <motion.div
                    key={index}
                    initial={{ opacity: 0, x: -20 }}
                    animate={{ opacity: 1, x: 0 }}
                    transition={{ delay: index * 0.1 }}
                    className="flex items-center justify-between p-4 bg-secondary/10 rounded-lg hover:bg-secondary/20 transition-colors cursor-pointer border border-secondary/20"
                  >
                    <div>
                      <div className="font-medium">{item.region}</div>
                      <div className="text-sm text-muted-foreground">
                        {item.casos.toLocaleString()} casos • Tasa: {item.tasa}/h
                      </div>
                    </div>
                    <div className="text-right">
                      {getRegionStatus(item.estado)}
                    </div>
                  </motion.div>
                ))}
              </div>
            </CardContent>
          </Card>
        </div>

        {/* Panel de Control Epidemiológico - 1 columna */}
        <div className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Thermometer className="h-5 w-5 text-primary" />
                <span>Temperatura Desinfodémica</span>
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-center">
                <div className="text-4xl mb-2">🌡️ 7.8°C</div>
                <div className="text-sm text-muted-foreground mb-3">Estado: Fiebre Alta</div>
                <Progress value={78} className="h-3" />
              </div>
            </CardContent>
          </Card>

          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <ShieldCheck className="h-5 w-5 text-primary" />
                <span>Efectividad Vacunas</span>
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="space-y-3">
                <div className="flex justify-between">
                  <span className="text-sm">Verificación:</span>
                  <span className="text-green-600">89%</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-sm">Educación:</span>
                  <span className="text-green-600">76%</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-sm">Fact-Checking:</span>
                  <span className="text-green-600">84%</span>
                </div>
              </div>
            </CardContent>
          </Card>

          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <Eye className="h-5 w-5 text-primary" />
                <span>Vigilancia</span>
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="space-y-3">
                <div className="flex justify-between">
                  <span className="text-sm">Sensores:</span>
                  <span className="text-primary">1,247</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-sm">Cobertura:</span>
                  <span className="text-primary">94.2%</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-sm">Detección:</span>
                  <span className="text-primary">4.2 min</span>
                </div>
              </div>
            </CardContent>
          </Card>
        </div>
      </div>

      {/* SECCIÓN 4: ESTADÍSTICAS DE VERIFICACIÓN */}
      <div>
        <div className="mb-6">
          <h2 className="flex items-center space-x-2 mb-2">
            <FileText className="h-6 w-6 text-primary" />
            <span>Estadísticas de Verificación</span>
          </h2>
          <p className="text-muted-foreground text-sm">Métricas de contenido analizado y verificado</p>
        </div>

        {/* Statistics Cards */}
        <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-6">
          {dashboardStats.map((stat) => (
            <Card key={stat.title}>
              <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                <CardTitle className="text-sm">{stat.title}</CardTitle>
                <stat.icon className="h-4 w-4 text-muted-foreground" />
              </CardHeader>
              <CardContent>
                <div className="text-2xl">{stat.value}</div>
                <p className="text-xs text-muted-foreground">
                  <span className={`${stat.change.includes('+') ? 'text-green-600' : 'text-red-600'}`}>
                    {stat.change}
                  </span>
                  {' '}desde el mes pasado
                </p>
              </CardContent>
            </Card>
          ))}
        </div>

        <div className="grid gap-6 lg:grid-cols-3">
          {/* Análisis por Mes */}
          <Card>
            <CardHeader>
              <CardTitle>Análisis Mensual</CardTitle>
              <CardDescription>Contenidos analizados vs verificados</CardDescription>
            </CardHeader>
            <CardContent>
              <ResponsiveContainer width="100%" height={250}>
                <BarChart data={verificationData}>
                  <CartesianGrid strokeDasharray="3 3" opacity={0.3} />
                  <XAxis dataKey="month" tick={{ fontSize: 11 }} />
                  <YAxis tick={{ fontSize: 11 }} />
                  <Tooltip />
                  <Bar dataKey="contenidos" fill="var(--color-primary)" name="Analizados" />
                  <Bar dataKey="verificados" fill="var(--color-chart-2)" name="Verificados" />
                </BarChart>
              </ResponsiveContainer>
            </CardContent>
          </Card>

          {/* Resultados de Verificación */}
          <Card>
            <CardHeader>
              <CardTitle>Resultados</CardTitle>
              <CardDescription>Distribución por categoría</CardDescription>
            </CardHeader>
            <CardContent>
              <ResponsiveContainer width="100%" height={250}>
                <PieChart>
                  <Pie
                    data={pieData}
                    cx="50%"
                    cy="50%"
                    innerRadius={50}
                    outerRadius={80}
                    dataKey="value"
                  >
                    {pieData.map((entry, index) => (
                      <Cell key={index} fill={entry.color} />
                    ))}
                  </Pie>
                  <Tooltip />
                </PieChart>
              </ResponsiveContainer>
              <div className="mt-4 grid grid-cols-2 gap-2">
                {pieData.map((item) => (
                  <div key={item.name} className="flex items-center space-x-2">
                    <div 
                      className="w-3 h-3 rounded-full" 
                      style={{ backgroundColor: item.color }}
                    />
                    <span className="text-xs">{item.name}: {item.value}%</span>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>

          {/* Tipos de Contenido */}
          <Card>
            <CardHeader>
              <CardTitle>Tipos de Contenido</CardTitle>
              <CardDescription>Distribución por formato</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-4">
                {contentTypes.map((type) => (
                  <div key={type.name} className="flex items-center justify-between">
                    <div className="flex items-center space-x-3">
                      <type.icon className="h-5 w-5 text-muted-foreground" />
                      <span>{type.name}</span>
                    </div>
                    <div className="flex items-center space-x-3 min-w-0 flex-1 ml-[35px]">
                      <Progress value={type.value} className="flex-1" />
                      <span className="text-sm text-muted-foreground">{type.value}%</span>
                    </div>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>
        </div>
      </div>

      {/* SECCIÓN 5: ANÁLISIS AVANZADO */}
      <div>
        <div className="mb-6">
          <h2 className="flex items-center space-x-2 mb-2">
            <BarChart3 className="h-6 w-6 text-primary" />
            <span>Análisis Avanzado</span>
          </h2>
          <p className="text-muted-foreground text-sm">Métricas especializadas y patrones de comportamiento</p>
        </div>

        {/* Métricas avanzadas en cards compactos */}
        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
          <div className="bg-gradient-to-br from-red-50 to-red-100/50 border border-red-200 rounded-lg p-4">
            <div className="flex items-center space-x-2 mb-2">
              <TrendingUp className="h-4 w-4 text-red-500" />
              <span className="text-sm text-red-700">Velocidad Contagio</span>
            </div>
            <div className="text-2xl text-red-800">1.7x</div>
            <div className="text-xs text-red-600">casos/hora</div>
          </div>
          
          <div className="bg-gradient-to-br from-green-50 to-green-100/50 border border-green-200 rounded-lg p-4">
            <div className="flex items-center space-x-2 mb-2">
              <Shield className="h-4 w-4 text-green-500" />
              <span className="text-sm text-green-700">Inmunización</span>
            </div>
            <div className="text-2xl text-green-800">73%</div>
            <div className="text-xs text-green-600">verificaciones exitosas</div>
          </div>
          
          <div className="bg-gradient-to-br from-yellow-50 to-yellow-100/50 border border-yellow-200 rounded-lg p-4">
            <div className="flex items-center space-x-2 mb-2">
              <Clock className="h-4 w-4 text-yellow-500" />
              <span className="text-sm text-yellow-700">Incubación</span>
            </div>
            <div className="text-2xl text-yellow-800">2.3h</div>
            <div className="text-xs text-yellow-600">tiempo propagación</div>
          </div>
          
          <div className="bg-gradient-to-br from-blue-50 to-blue-100/50 border border-blue-200 rounded-lg p-4">
            <div className="flex items-center space-x-2 mb-2">
              <Zap className="h-4 w-4 text-blue-500" />
              <span className="text-sm text-blue-700">Índice Epidémico</span>
            </div>
            <div className="text-2xl text-blue-800">Alto</div>
            <div className="text-xs text-blue-600">fase exponencial</div>
          </div>
        </div>

        {/* Infectividad por hora */}
        <Card>
          <CardHeader>
            <CardTitle>Infectividad por Hora del Día</CardTitle>
            <CardDescription>Distribución de casos nuevos vs resueltos en 24 horas</CardDescription>
          </CardHeader>
          <CardContent>
            <ResponsiveContainer width="100%" height={300}>
              <AreaChart data={infectivityData}>
                <CartesianGrid strokeDasharray="3 3" opacity={0.3} />
                <XAxis dataKey="time" tick={{ fontSize: 11 }} />
                <YAxis tick={{ fontSize: 11 }} />
                <Tooltip />
                <Legend />
                <Area 
                  type="monotone" 
                  dataKey="nuevos" 
                  stackId="1" 
                  stroke="#FF4444" 
                  fill="#FF4444" 
                  fillOpacity={0.6}
                  name="Casos Nuevos"
                />
                <Area 
                  type="monotone" 
                  dataKey="resueltos" 
                  stackId="2" 
                  stroke="#00E676" 
                  fill="#00E676" 
                  fillOpacity={0.6}
                  name="Casos Resueltos"
                />
              </AreaChart>
            </ResponsiveContainer>
          </CardContent>
        </Card>
      </div>

      {/* SECCIÓN 6: VERIFICACIÓN HUMANA */}
      <div>
        <div className="mb-6">
          <h2 className="flex items-center space-x-2 mb-2">
            <Microscope className="h-6 w-6 text-primary" />
            <span>Laboratorio de Verificación Epidemiológica</span>
          </h2>
          <p className="text-muted-foreground text-sm">Red colaborativa de especialistas para diagnóstico y verificación de casos</p>
        </div>

        {/* Estadísticas de Verificación Humana */}
        <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-6">
          <Card className="bg-gradient-to-br from-green-50 to-emerald-50 border-green-200">
            <CardContent className="p-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-2">
                  <div className="p-2 bg-green-100 rounded-lg">
                    <Users className="h-6 w-6 text-green-600" />
                  </div>
                  <div>
                    <p className="text-2xl text-green-700">47</p>
                    <p className="text-sm text-green-600">Especialistas Activos</p>
                  </div>
                </div>
                <div className="text-right">
                  <p className="text-xs text-green-600">+12% vs ayer</p>
                  <div className="flex items-center space-x-1">
                    <TrendingUp className="h-3 w-3 text-green-500" />
                    <span className="text-xs text-green-500">↑ 5 nuevos</span>
                  </div>
                </div>
              </div>
            </CardContent>
          </Card>

          <Card className="bg-gradient-to-br from-amber-50 to-yellow-50 border-amber-200">
            <CardContent className="p-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-2">
                  <div className="p-2 bg-amber-100 rounded-lg">
                    <Timer className="h-6 w-6 text-amber-600" />
                  </div>
                  <div>
                    <p className="text-2xl text-amber-700">234</p>
                    <p className="text-sm text-amber-600">Casos Pendientes</p>
                  </div>
                </div>
                <div className="text-right">
                  <p className="text-xs text-amber-600">Prioridad Alta: 67</p>
                  <div className="flex items-center space-x-1">
                    <Clock className="h-3 w-3 text-amber-500" />
                    <span className="text-xs text-amber-500">T.M.R: 2.3h</span>
                  </div>
                </div>
              </div>
            </CardContent>
          </Card>

          <Card className="bg-gradient-to-br from-blue-50 to-cyan-50 border-blue-200">
            <CardContent className="p-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-2">
                  <div className="p-2 bg-blue-100 rounded-lg">
                    <CheckCircle className="h-6 w-6 text-blue-600" />
                  </div>
                  <div>
                    <p className="text-2xl text-blue-700">1,247</p>
                    <p className="text-sm text-blue-600">Casos Diagnosticados</p>
                  </div>
                </div>
                <div className="text-right">
                  <p className="text-xs text-blue-600">Últimas 24h</p>
                  <div className="flex items-center space-x-1">
                    <Activity className="h-3 w-3 text-blue-500" />
                    <span className="text-xs text-blue-500">Ritmo: 52/h</span>
                  </div>
                </div>
              </div>
            </CardContent>
          </Card>

          <Card className="bg-gradient-to-br from-purple-50 to-violet-50 border-purple-200">
            <CardContent className="p-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-2">
                  <div className="p-2 bg-purple-100 rounded-lg">
                    <Gauge className="h-6 w-6 text-purple-600" />
                  </div>
                  <div>
                    <p className="text-2xl text-purple-700">96.2%</p>
                    <p className="text-sm text-purple-600">Precisión Diagnóstica</p>
                  </div>
                </div>
                <div className="text-right">
                  <p className="text-xs text-purple-600">Consenso Inter-obs.</p>
                  <div className="flex items-center space-x-1">
                    <Award className="h-3 w-3 text-purple-500" />
                    <span className="text-xs text-purple-500">κ = 0.94</span>
                  </div>
                </div>
              </div>
            </CardContent>
          </Card>
        </div>

        {/* Métricas Complementarias */}
        <div className="grid gap-4 md:grid-cols-3 mb-6">
          <Card className="bg-gradient-to-br from-red-50 to-rose-50 border-red-200">
            <CardContent className="p-4">
              <div className="flex items-center space-x-2">
                <div className="p-2 bg-red-100 rounded-lg">
                  <Activity className="h-6 w-6 text-red-600" />
                </div>
                <div>
                  <p className="text-2xl text-red-700">R₀ = 1.15</p>
                  <p className="text-sm text-red-600">Tasa de Reproducción</p>
                </div>
              </div>
            </CardContent>
          </Card>

          <Card className="bg-gradient-to-br from-orange-50 to-amber-50 border-orange-200">
            <CardContent className="p-4">
              <div className="flex items-center space-x-2">
                <div className="p-2 bg-orange-100 rounded-lg">
                  <Flame className="h-6 w-6 text-orange-600" />
                </div>
                <div>
                  <p className="text-2xl text-orange-700">58.3%</p>
                  <p className="text-sm text-orange-600">Virulencia Promedio</p>
                </div>
              </div>
            </CardContent>
          </Card>

          <Card className="bg-gradient-to-br from-indigo-50 to-blue-50 border-indigo-200">
            <CardContent className="p-4">
              <div className="flex items-center space-x-2">
                <div className="p-2 bg-indigo-100 rounded-lg">
                  <Zap className="h-6 w-6 text-indigo-600" />
                </div>
                <div>
                  <p className="text-2xl text-indigo-700">2.3h</p>
                  <p className="text-sm text-indigo-600">Tiempo Medio Propagación</p>
                </div>
              </div>
            </CardContent>
          </Card>
        </div>

        {/* Gráficos de Verificación */}
        <div className="grid gap-6 lg:grid-cols-2 mb-6">
          {/* Tendencias de Verificación */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <TrendingUp className="h-5 w-5 text-primary" />
                <span>Tendencias de Verificación Semanal</span>
              </CardTitle>
              <CardDescription>Actividad diaria y precisión diagnóstica del equipo</CardDescription>
            </CardHeader>
            <CardContent>
              <ResponsiveContainer width="100%" height={300}>
                <AreaChart data={verificationTrends}>
                  <CartesianGrid strokeDasharray="3 3" opacity={0.3} />
                  <XAxis dataKey="name" tick={{ fontSize: 11 }} />
                  <YAxis tick={{ fontSize: 11 }} />
                  <Tooltip />
                  <Legend />
                  <Area 
                    type="monotone" 
                    dataKey="verificaciones" 
                    stroke="#ffda00" 
                    fill="rgba(255, 218, 0, 0.2)" 
                    strokeWidth={3}
                    name="Verificaciones"
                  />
                  <Area 
                    type="monotone" 
                    dataKey="precision" 
                    stroke="#22c55e" 
                    fill="rgba(34, 197, 94, 0.1)" 
                    strokeWidth={2}
                    name="Precisión %"
                  />
                </AreaChart>
              </ResponsiveContainer>
            </CardContent>
          </Card>

          {/* Distribución de Tipos de Casos */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center space-x-2">
                <BarChart3 className="h-5 w-5 text-primary" />
                <span>Distribución de Tipos de Casos</span>
              </CardTitle>
              <CardDescription>Clasificación epidemiológica de casos diagnosticados</CardDescription>
            </CardHeader>
            <CardContent>
              <ResponsiveContainer width="100%" height={300}>
                <PieChart>
                  <Pie
                    data={caseTypesData}
                    cx="50%"
                    cy="50%"
                    outerRadius={100}
                    dataKey="value"
                    label={({name, percent}) => `${name}: ${(percent * 100).toFixed(0)}%`}
                  >
                    {caseTypesData.map((entry, index) => (
                      <Cell key={`cell-${index}`} fill={entry.color} />
                    ))}
                  </Pie>
                  <Tooltip />
                </PieChart>
              </ResponsiveContainer>
            </CardContent>
          </Card>
        </div>

        {/* Ranking de Especialistas */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Trophy className="h-5 w-5 text-primary" />
              <span>Ranking de Especialistas</span>
            </CardTitle>
            <CardDescription>Clasificación de verificadores por rendimiento y precisión diagnóstica</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              {verifierRanking.map((verifier, index) => (
                <div key={index} className="flex items-center justify-between p-4 border rounded-lg hover:bg-secondary/10 transition-colors">
                  <div className="flex items-center space-x-4">
                    <div className="flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground">
                      {index + 1}
                    </div>
                    <div>
                      <h4 className="font-medium">{verifier.name}</h4>
                      <p className="text-sm text-muted-foreground">{verifier.especialidad}</p>
                    </div>
                  </div>
                  <div className="text-right">
                    <div className="flex items-center space-x-4">
                      <div className="text-center">
                        <p className="text-sm font-medium">{verifier.verificaciones}</p>
                        <p className="text-xs text-muted-foreground">Verificaciones</p>
                      </div>
                      <div className="text-center">
                        <p className="text-sm font-medium text-green-600">{verifier.precision}%</p>
                        <p className="text-xs text-muted-foreground">Precisión</p>
                      </div>
                      <div className="flex items-center space-x-1">
                        <Star className="h-4 w-4 text-yellow-500 fill-current" />
                        <span className="text-sm font-medium">{(verifier.precision / 20).toFixed(1)}</span>
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      </div>

      {/* SECCIÓN FINAL: ACTIVIDAD RECIENTE */}
      <div>
        <div className="mb-6">
          <h2 className="flex items-center space-x-2 mb-2">
            <Clock className="h-6 w-6 text-primary" />
            <span>Actividad Reciente</span>
          </h2>
          <p className="text-muted-foreground text-sm">Últimas verificaciones y análisis epidemiológicos del sistema</p>
        </div>

        <Card>
          <CardHeader>
            <CardTitle>Registro de Actividad</CardTitle>
            <CardDescription>Historial detallado de casos verificados</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-6">
              {[
                { 
                  id: 'BTL-2024-001458',
                  type: 'Imagen', 
                  status: 'Veraz', 
                  user: 'Ana García', 
                  time: 'Hace 5 min',
                  confidence: 94,
                  region: 'Cundinamarca',
                  platform: 'WhatsApp',
                  analysisTime: '2.3 seg',
                  reach: '~15K usuarios',
                  markers: ['Verificación cruzada', 'Fuente oficial']
                },
                { 
                  id: 'BTL-2024-001457',
                  type: 'Video', 
                  status: 'Desinformación', 
                  user: 'Carlos López', 
                  time: 'Hace 12 min',
                  confidence: 87,
                  region: 'Antioquia',
                  platform: 'Facebook',
                  analysisTime: '45.7 seg',
                  reach: '~89K usuarios',
                  markers: ['Manipulación detectada', 'Contenido fabricado']
                },
                { 
                  id: 'BTL-2024-001456',
                  type: 'Texto', 
                  status: 'Satírico', 
                  user: 'María Torres', 
                  time: 'Hace 23 min',
                  confidence: 76,
                  region: 'Valle del Cauca',
                  platform: 'Twitter',
                  analysisTime: '1.1 seg',
                  reach: '~3.2K usuarios',
                  markers: ['Humor detectado', 'Sin intención maliciosa']
                },
                { 
                  id: 'BTL-2024-001455',
                  type: 'Audio', 
                  status: 'Fuera de Contexto', 
                  user: 'Luis Martín', 
                  time: 'Hace 1h',
                  confidence: 82,
                  region: 'Atlántico',
                  platform: 'Telegram',
                  analysisTime: '67.2 seg',
                  reach: '~25K usuarios',
                  markers: ['Contenido auténtico', 'Contexto alterado']
                },
              ].map((activity, index) => (
                <div key={index} className="border rounded-lg p-4 space-y-3 hover:shadow-md transition-shadow bg-secondary/5">
                  {/* Header del caso */}
                  <div className="flex items-center justify-between">
                    <div className="flex items-center space-x-3">
                      <div className="flex items-center space-x-2">
                        {activity.type === 'Imagen' && <Image className="h-4 w-4 text-blue-500" />}
                        {activity.type === 'Video' && <Video className="h-4 w-4 text-purple-500" />}
                        {activity.type === 'Texto' && <FileText className="h-4 w-4 text-green-500" />}
                        {activity.type === 'Audio' && <Volume2 className="h-4 w-4 text-orange-500" />}
                        <Badge variant="outline" className="text-xs">{activity.type}</Badge>
                      </div>
                      <Badge 
                        variant={
                          activity.status === 'Veraz' ? 'default' :
                          activity.status === 'Desinformación' ? 'destructive' :
                          'secondary'
                        }
                        className="text-xs"
                      >
                        {activity.status}
                      </Badge>
                      <div className="flex items-center space-x-1 text-xs text-muted-foreground">
                        <Target className="h-3 w-3" />
                        <span>{activity.confidence}% confianza</span>
                      </div>
                    </div>
                    <div className="text-xs text-muted-foreground">
                      Caso {activity.id}
                    </div>
                  </div>

                  {/* Detalles del análisis */}
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-xs">
                    <div className="flex items-center space-x-1">
                      <MapPin className="h-3 w-3 text-muted-foreground" />
                      <span className="text-muted-foreground">Región:</span>
                      <span>{activity.region}</span>
                    </div>
                    <div className="flex items-center space-x-1">
                      <Globe className="h-3 w-3 text-muted-foreground" />
                      <span className="text-muted-foreground">Plataforma:</span>
                      <span>{activity.platform}</span>
                    </div>
                    <div className="flex items-center space-x-1">
                      <Clock className="h-3 w-3 text-muted-foreground" />
                      <span className="text-muted-foreground">Análisis:</span>
                      <span>{activity.analysisTime}</span>
                    </div>
                    <div className="flex items-center space-x-1">
                      <Users className="h-3 w-3 text-muted-foreground" />
                      <span className="text-muted-foreground">Alcance:</span>
                      <span>{activity.reach}</span>
                    </div>
                  </div>

                  {/* Marcadores de diagnóstico */}
                  <div className="space-y-2">
                    <div className="text-xs text-muted-foreground flex items-center space-x-1">
                      <Microscope className="h-3 w-3" />
                      <span>Marcadores de diagnóstico:</span>
                    </div>
                    <div className="grid grid-cols-2 gap-1">
                      {activity.markers.map((marker, markerIndex) => (
                        <Badge key={markerIndex} variant="secondary" className="text-xs px-2 py-1">
                          {marker}
                        </Badge>
                      ))}
                    </div>
                  </div>

                  {/* Footer */}
                  <div className="flex items-center justify-between pt-2 border-t border-border/50">
                    <div className="flex items-center space-x-2 text-xs text-muted-foreground">
                      <Stethoscope className="h-3 w-3" />
                      <span>Verificado por {activity.user}</span>
                    </div>
                    <div className="text-xs text-muted-foreground">
                      {activity.time}
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  );
} - - - - - - - - - - - - 
src/components/providers.tsx

"use client";
import React from 'react';
import { AuthProvider } from './AuthProvider';
import { ConfigProvider } from './ConfigProvider';
import { MessageProvider } from './MessageProvider';
import { SchemaProvider } from './SchemaProvider';
import { VoteTrackerProvider } from './VoteTrackerProvider';
import { Toaster } from './ui/toaster'; // Asegurar que Toaster se importa aquí

export function Providers({ children }: { children: React.ReactNode }) {
  return (
    <ConfigProvider>
      <MessageProvider>
        <SchemaProvider>
          <AuthProvider>
            <VoteTrackerProvider>
              {children}
              <Toaster />
            </VoteTrackerProvider>
          </AuthProvider>
        </SchemaProvider>
      </MessageProvider>
    </ConfigProvider>
  );
}
